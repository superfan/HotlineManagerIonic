<<<<<<< HEAD
webpackJsonp([0],{

/***/ 119:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export PageIntent */
/* unused harmony export MyLocation */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MyPlugin; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ionic_native_core__ = __webpack_require__(11);
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * This is a template for new plugin wrappers
 *
 * TODO:
 * - Add/Change information below
 * - Document usage (importing, executing main functionality)
 * - Remove any imports that you are not using
 * - Add this file to /src/index.ts (follow style of other plugins)
 * - Remove all the comments included in this template, EXCEPT the @Plugin wrapper docs and any other docs you added
 * - Remove this note
 *
 */


var PageIntent = (function () {
    function PageIntent() {
    }
    return PageIntent;
}());

var MyLocation = (function () {
    function MyLocation() {
    }
    return MyLocation;
}());

/**
 * @name My Plugin
 * @description
 * This plugin does something
 *
 * @usage
 * ```typescript
 * import { MyPlugin } from '@ionic-native/my-plugin';
 *
 *
 * constructor(private myPlugin: MyPlugin) { }
 *
 * ...
 *
 *
 * this.myPlugin.getPageIntent()
 *   .then((res: any) => console.log(res))
 *   .catch((error: any) => console.error(error));
 *
 * ```
 */
var MyPlugin = (function (_super) {
    __extends(MyPlugin, _super);
    function MyPlugin() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * 获取当前Page intent
     */
    MyPlugin.prototype.getPageIntent = function () {
        return; // We add return; here to avoid any IDE / Compiler errors
    };
    /**
     * 获取位置信息
     */
    MyPlugin.prototype.getLocation = function () {
        return; // We add return; here to avoid any IDE / Compiler errors
    };
    /**
     * 退出
     */
    MyPlugin.prototype.quit = function () {
        return; // We add return; here to avoid any IDE / Compiler errors
    };
    /**
     * 获取推送消息
     */
    MyPlugin.prototype.getPushMessage = function () {
        return; // We add return; here to avoid any IDE / Compiler errors
    };
    /**
     * 获取变化信息(如：设置)
     */
    MyPlugin.prototype.getChangedInfo = function () {
        return; // We add return; here to avoid any IDE / Compiler errors
    };
    return MyPlugin;
}(__WEBPACK_IMPORTED_MODULE_1__ionic_native_core__["g" /* IonicNativePlugin */]));
MyPlugin.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_0__angular_core__["B" /* Injectable */] },
];
/** @nocollapse */
MyPlugin.ctorParameters = function () { return []; };
__decorate([
    Object(__WEBPACK_IMPORTED_MODULE_1__ionic_native_core__["a" /* Cordova */])(),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], MyPlugin.prototype, "getPageIntent", null);
__decorate([
    Object(__WEBPACK_IMPORTED_MODULE_1__ionic_native_core__["a" /* Cordova */])(),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], MyPlugin.prototype, "getLocation", null);
__decorate([
    Object(__WEBPACK_IMPORTED_MODULE_1__ionic_native_core__["a" /* Cordova */])(),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], MyPlugin.prototype, "quit", null);
__decorate([
    Object(__WEBPACK_IMPORTED_MODULE_1__ionic_native_core__["a" /* Cordova */])(),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], MyPlugin.prototype, "getPushMessage", null);
__decorate([
    Object(__WEBPACK_IMPORTED_MODULE_1__ionic_native_core__["a" /* Cordova */])(),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], MyPlugin.prototype, "getChangedInfo", null);
MyPlugin = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_1__ionic_native_core__["h" /* Plugin */])({
        pluginName: 'MyPlugin',
        plugin: 'cordova.plugin.MyPlugin',
        pluginRef: 'cordova.plugins.MyPlugin',
        repo: '',
        platforms: [],
        install: '',
    })
], MyPlugin);

//# sourceMappingURL=index.js.map

/***/ }),

/***/ 121:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DownloadService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ConfigService__ = __webpack_require__(18);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__model_Task__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__BaseService__ = __webpack_require__(123);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_file_transfer__ = __webpack_require__(124);
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var DownloadService = (function (_super) {
    __extends(DownloadService, _super);
    function DownloadService(http, configService, globalService, transfer) {
        var _this = _super.call(this, http) || this;
        _this.configService = configService;
        _this.globalService = globalService;
        _this.transfer = transfer;
        return _this;
    }
    /**
     * 分页下载任务
     * @param userId
     * @param since
     * @param count
     * @returns {Promise<T>}
     */
    DownloadService.prototype.getTasks = function (userId, since, count) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/mobile/task/user/" + userId + "/task?taskType=all&completed=0&count=" + count + "&since=" + since;
                return _this.get(url, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data instanceof Array) {
                        var tasks = body.Data;
                        tasks.map(function (task) {
                            task.state = __WEBPACK_IMPORTED_MODULE_3__model_Task__["a" /* TaskEx */].convertState(task.state);
                            return task;
                        });
                        resolve(tasks);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to get tasks");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 获取任务详情
     * @param taskId
     * @returns {Promise<T>}
     */
    DownloadService.prototype.getTaskDetail = function (taskId) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/mobile/hotline/task/" + taskId + "/detail";
                return _this.get(url, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to get task detail");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 获取词语信息
     * @param group
     * @returns {Promise<T>}
     */
    DownloadService.prototype.getAllWords = function (group) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/mobile/resource/wordNew?group=" + group;
                return _this.get(url, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data instanceof Array) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to get words");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 获取未派工任务
     * @param userId
     * @param since
     * @param count
     * @returns {Promise<T>}
     */
    DownloadService.prototype.getUnDispatchedTasks = function (userId, since, count) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/mobile/tasksearch/" + userId + "/unDispatchedTasks?count=" + count + "&since=" + since;
                return _this.get(url, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data instanceof Array) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to get undispatched tasks");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 获取已派工任务
     * @param userId
     * @param since
     * @param count
     * @param minutes
     * @returns {Promise<T>}
     */
    DownloadService.prototype.getDispatchedTasks = function (userId, since, count, minutes) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/mobile/tasksearch/" + userId + "/dispatchedTasks/" + minutes + "?count=" + count + "&since=" + since;
                return _this.get(url, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data instanceof Array) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to get dispatched tasks");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 查询工单
     * @param address
     * @param phone
     * @param serialNo
     * @param taskNo
     * @param taskState
     * @param reportType
     * @param reportPerson
     * @param sendTime
     * @returns {Promise<T>}
     */
    DownloadService.prototype.getSearchTasks = function (userId, request) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/mobile/tasksearch/" + userId + "/tasks?happenedAddress=" +
                    request.happenedAddress + "&contactPhone=" + request.contactPhone + "&serialNo=" +
                    request.serialNo + "&taskNo=" + request.taskNo + "&taskState=" + request.taskState +
                    "&reportType=" + request.reportType + "&reportPerson=" + request.reportPerson +
                    "&sendTime=" + request.sendTime + "&count=10&since=0";
                return _this.get(url, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    console.log("getSearchTasks:" + data);
                    var body = data.json();
                    if (body.Code == _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "fail to search task!");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 查询工单数量
     * @param address
     * @param phone
     * @param serialNo
     * @param taskNo
     * @param taskState
     * @param reportType
     * @param reportPerson
     * @param sendTime
     * @returns {Promise<T>}
     */
    DownloadService.prototype.getSearchTaskCount = function (userId, request) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/mobile/tasksearch/" + userId + "/tasksCount?happenedAddress=" +
                    request.happenedAddress + "&contactPhone=" + request.contactPhone + "&serialNo=" +
                    request.serialNo + "&taskNo=" + request.taskNo + "&taskState=" + request.taskState +
                    "&reportType=" + request.reportType + "&reportPerson=" + request.reportPerson + "&sendTime=" +
                    request.sendTime;
                return _this.get(url, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    console.log("getSearchTaskCounts:" + data);
                    var body = data.json();
                    if (body.Code == _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "fail to search task count!");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 查询某条工单详情
     * @param taskId 任务编号
     * @returns {Promise<T>}
     */
    DownloadService.prototype.getSearchTaskDetails = function (taskId) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/mobile/hotline/task/" + taskId + "/detail";
                return _this.get(url, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    console.log("getSearchTaskDetails" + data);
                    var body = data.json();
                    if (body.Code == _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "fail to search task details!");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 获取公告
     * @returns {Promise<T>}
     */
    DownloadService.prototype.getNews = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/mobile/resource/news/latestd";
                return _this.get(url, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    console.log("getNews:" + data);
                    var body = data.json();
                    if (body.Code == _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "fail to get news!");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 用户登录操作
     * @param user
     * @returns {Promise<T>}
     */
    DownloadService.prototype.doLogin = function (user) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url;
                if (user.role === _this.globalService.worker) {
                    url = data + "wap/v1/auth/" + user.userName + "/" + user.password + "?appIdentity=cc";
                }
                else {
                    url = data + "wap/v1/auth/wap/" + user.userName + "/" + user.password + "?appIdentity=cc";
                }
                return _this.get(url, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    console.log("getUserInfo:" + data);
                    var body = data.json();
                    if (body.Code == _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "fail to get userInfo!");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 获取施工人员
     * @param userId
     * @returns {Promise<T>}
     */
    DownloadService.prototype.getPersonnels = function (userId) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/mobile/resource/user/" + userId + "/getFieldPersonnel";
                return _this.get(url, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data instanceof Array) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to get personnels");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /* 获得管理人员信息
     * @param userId
     * @returns {Promise<T>}
     */
    DownloadService.prototype.getManagerUserInfo = function (userId) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/mobile/resource/user/hotline/" + userId;
                return _this.get(url, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    console.log("getManagerUserInfo:" + data);
                    var body = data.json();
                    if (body.Code == _this.globalService.httpCode
                        && body.StatusCode == _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "fail to get ManagerUserInfo!");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 获得外勤人员信息
     * @param userId
     * @returns {Promise<T>}
     */
    DownloadService.prototype.getWorkerUserInfo = function (userId) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/mobile/resource/user/" + userId;
                return _this.get(url, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    console.log("getWorkerUserInfo:" + data);
                    var body = data.json();
                    if (body.Code == _this.globalService.httpCode
                        && body.StatusCode == _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "fail to get WorkerUserInfo!");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 检查app更新
     * @param version
     * @returns {Promise<T>}
     */
    DownloadService.prototype.checkAppVersion = function (version) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/system/update/app/check?version=" + version;
                return _this.get(url, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    console.log("checkAppVersion:" + data);
                    var body = data.json();
                    if (body.Code == _this.globalService.httpCode
                        && body.StatusCode == _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "fail to get check app version info!");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 检查data更新
     * @param version
     */
    DownloadService.prototype.checkDataVersion = function (version) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/system/update/data/check?version=" + version;
                return _this.get(url, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    console.log("checkDataVersion:" + data);
                    var body = data.json();
                    if (body.Code == _this.globalService.httpCode
                        && body.StatusCode == _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "fail to get check data version info!");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 获取材料信息
     * @param group
     * @returns {Promise<T>}
     */
    DownloadService.prototype.getAllMaterials = function (group) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getMaterialsBaseUri()
                .then(function (data) {
                var url = data + "/wap/v1/material/get/" + group;
                return _this.get(url, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.status === _this.globalService.httpSuccessStatusCode
                        && body.data instanceof Array) {
                        resolve(body.data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to get materials");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 获得维修信息
     * @param serialNumber
     * @returns {Promise<T>}
     */
    DownloadService.prototype.getMaintainInfo = function (serialNumber) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getMaterialsBaseUri()
                .then(function (data) {
                var url = data + "/wap/v1/materialusage/get/" + serialNumber;
                return _this.get(url, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.status === _this.globalService.httpSuccessStatusCode) {
                        resolve(body.data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to get materials");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 下载文件
     * @param url
     * @param path
     * @returns {Promise<T>}
     */
    DownloadService.prototype.downloadFile = function (url, path) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            var fileTransfer = _this.transfer.create();
            fileTransfer.download(url, path)
                .then(function (entry) {
                // success
                console.log('download complete: ' + entry.toURL());
                resolve(entry.toURL());
            }, function (err) {
                // error
                console.error(err);
                reject(err);
            });
        });
    };
    return DownloadService;
}(__WEBPACK_IMPORTED_MODULE_5__BaseService__["a" /* BaseService */]));
DownloadService = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["B" /* Injectable */])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["b" /* Http */],
        __WEBPACK_IMPORTED_MODULE_2__ConfigService__["a" /* ConfigService */],
        __WEBPACK_IMPORTED_MODULE_4__GlobalService__["a" /* GlobalService */],
        __WEBPACK_IMPORTED_MODULE_6__ionic_native_file_transfer__["a" /* FileTransfer */]])
], DownloadService);

//# sourceMappingURL=DownloadService.js.map

/***/ }),

/***/ 122:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export DelayExtend */
/* unused harmony export RejectExtend */
/* unused harmony export CancelExtend */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DisableColor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return EnableColor; });
/* unused harmony export NotUploadedColor */
/* unused harmony export Process */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return ProcessEx; });
var DelayExtend = (function () {
    function DelayExtend() {
    }
    return DelayExtend;
}());

var RejectExtend = (function () {
    function RejectExtend() {
    }
    return RejectExtend;
}());

var CancelExtend = (function () {
    function CancelExtend() {
    }
    return CancelExtend;
}());

var DisableColor = 'gray';
var EnableColor = 'primary';
var NotUploadedColor = 'danger';
var Process = (function () {
    function Process() {
    }
    return Process;
}());

var ProcessEx = (function () {
    function ProcessEx() {
    }
    return ProcessEx;
}());

//# sourceMappingURL=Process.js.map

/***/ }),

/***/ 123:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BaseService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(35);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var BaseService = (function () {
    function BaseService(http) {
        this.http = http;
    }
    /**
     *
     * @returns {RequestOptions}
     */
    BaseService.prototype.getOptions = function () {
        var headers = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["a" /* Headers */]({
            'Content-Type': 'application/json;charset=UTF-8',
            'X-Access-Token': '123',
            'X-Device-ID': 'aa5eaa1d715240d8'
        });
        var options = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["d" /* RequestOptions */]({ headers: headers });
        return options;
    };
    /**
     * 出错处理
     * @param error
     * @returns {Promise<never>}
     */
    BaseService.prototype.handleError = function (error) {
        var errMsg = error.json().Message ? error.json().Message :
            error.status ? error.status + " - " + error.statusText : 'Server error';
        console.error(errMsg);
        return Promise.reject(errMsg);
    };
    /**
     * Performs any type of http request. First argument is required, and can either be a url or
     * a {@link Request} instance. If the first argument is a url, an optional {@link RequestOptions}
     * object can be provided as the 2nd argument. The options object will be merged with the values
     * of {@link BaseRequestOptions} before performing the request.
     */
    BaseService.prototype.request = function (url, options) {
        return this.http.request(url, options);
    };
    /**
     * Performs a request with `get` http method.
     */
    BaseService.prototype.get = function (url, options) {
        console.log(url);
        options && console.log(options);
        return this.http.get(url, options);
    };
    /**
     * Performs a request with `post` http method.
     */
    BaseService.prototype.post = function (url, body, options) {
        console.log(url);
        body && console.log(body);
        options && console.log(options);
        return this.http.post(url, body, options);
    };
    /**
     * Performs a request with `put` http method.
     */
    BaseService.prototype.put = function (url, body, options) {
        console.log(url);
        body && console.log(body);
        options && console.log(options);
        return this.http.put(url, body, options);
    };
    /**
     * Performs a request with `delete` http method.
     */
    BaseService.prototype.delete = function (url, options) {
        return this.http.delete(url, options);
    };
    /**
     * Performs a request with `patch` http method.
     */
    BaseService.prototype.patch = function (url, body, options) {
        return this.http.patch(url, body, options);
    };
    /**
     * Performs a request with `head` http method.
     */
    BaseService.prototype.head = function (url, options) {
        return this.http.head(url, options);
    };
    return BaseService;
}());
BaseService = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["B" /* Injectable */])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["b" /* Http */]])
], BaseService);

//# sourceMappingURL=BaseService.js.map

/***/ }),

/***/ 125:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return UploadService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ConfigService__ = __webpack_require__(18);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__BaseService__ = __webpack_require__(123);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_file_transfer__ = __webpack_require__(124);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__model_Media__ = __webpack_require__(126);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__FileService__ = __webpack_require__(23);
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var UploadService = (function (_super) {
    __extends(UploadService, _super);
    function UploadService(http, configService, globalService, transfer, fileService) {
        var _this = _super.call(this, http) || this;
        _this.configService = configService;
        _this.globalService = globalService;
        _this.transfer = transfer;
        _this.fileService = fileService;
        return _this;
    }
    /**
     * 接受
     * @param acceptInfo
     * @returns {Promise<T>}
     */
    UploadService.prototype.accept = function (acceptInfo) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var taskId = acceptInfo.taskId.split('#')[0];
                var time = acceptInfo.taskId.split('#')[1];
                var body = JSON.stringify(acceptInfo);
                if (time) {
                    body = body.replace("#" + time, '');
                }
                var url = data + "wap/v1/mobile/task/" + taskId + "/accept";
                return _this.put(url, body, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to accept");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 出发
     * @param goInfo
     * @returns {Promise<T>}
     */
    UploadService.prototype.go = function (goInfo) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var taskId = goInfo.taskId.split('#')[0];
                var time = goInfo.taskId.split('#')[1];
                var body = JSON.stringify(goInfo);
                if (time) {
                    body = body.replace("#" + time, '');
                }
                var url = data + "wap/v1/mobile/task/" + taskId + "/go";
                return _this.put(url, body, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to go");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 到场
     * @param arriveInfo
     * @returns {Promise<T>}
     */
    UploadService.prototype.arrive = function (arriveInfo) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var taskId = arriveInfo.taskId.split('#')[0];
                var time = arriveInfo.taskId.split('#')[1];
                var body = JSON.stringify(arriveInfo);
                if (time) {
                    body = body.replace("#" + time, '');
                }
                var url = data + "wap/v1/mobile/task/" + taskId + "/arrived";
                return _this.put(url, body, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to arrive");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 回复
     * @param replyInfo
     * @returns {Promise<T>}
     */
    UploadService.prototype.reply = function (replyInfo) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var taskId = replyInfo.taskId.split('#')[0];
                var time = replyInfo.taskId.split('#')[1];
                var body = JSON.stringify(replyInfo);
                if (time) {
                    body = body.replace("#" + time, '');
                }
                var url = data + "wap/v1/mobile/hotline/task/" + taskId + "/reply";
                return _this.post(url, body, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to reply");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 退单
     * @param rejectInfo
     * @returns {Promise<T>}
     */
    UploadService.prototype.reject = function (rejectInfo) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var taskId = rejectInfo.taskId.split('#')[0];
                var time = rejectInfo.taskId.split('#')[1];
                var body = JSON.stringify(rejectInfo);
                if (time) {
                    body = body.replace("#" + time, '');
                }
                var url = data + "wap/v1/mobile/task/" + taskId + "/reject";
                return _this.put(url, body, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to reject");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 延期
     * @param delayInfo
     * @returns {Promise<T>}
     */
    UploadService.prototype.delay = function (delayInfo) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var taskId = delayInfo.taskId.split('#')[0];
                var time = delayInfo.taskId.split('#')[1];
                var body = JSON.stringify(delayInfo);
                if (time) {
                    body = body.replace("#" + time, '');
                }
                var url = data + "wap/v1/mobile/task/" + taskId + "/delay";
                return _this.put(url, body, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to delay");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 销单
     * @param cancelInfo
     * @returns {Promise<T>}
     */
    UploadService.prototype.cancel = function (cancelInfo) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var taskId = cancelInfo.taskId.split('#')[0];
                var time = cancelInfo.taskId.split('#')[1];
                var body = JSON.stringify(cancelInfo);
                if (time) {
                    body = body.replace("#" + time, '');
                }
                var url = data + "wap/v1/mobile/task/" + taskId + "/taskXD";
                return _this.put(url, body, _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to cancel");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 站点任务接单
     * @param acceptExInfo
     * @returns {Promise<T>}
     */
    UploadService.prototype.acceptEx = function (acceptExInfo) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/mobile/stationTask/" + acceptExInfo.taskId + "/accept";
                return _this.put(url, JSON.stringify(acceptExInfo), _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to accept for station task");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 站点派单
     * @param dispatchInfo
     * @returns {Promise<T>}
     */
    UploadService.prototype.dispatch = function (dispatchInfo) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/mobile/stationTask/" + dispatchInfo.taskId + "/dispatch";
                return _this.put(url, JSON.stringify(dispatchInfo), _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to dispatch for station task");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 站点销单
     * @param cancelExInfo
     * @returns {Promise<T>}
     */
    UploadService.prototype.cancelEx = function (cancelExInfo) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/mobile/stationTask/" + cancelExInfo.TaskNo + "/saveTaskXD";
                return _this.post(url, JSON.stringify(cancelExInfo), _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to cancel for station task");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 上传多媒体文件2.0
     * @param media
     * @returns {Promise<T>}
     */
    UploadService.prototype.uploadMediaV2 = function (media) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getFileBaseUri()
                .then(function (data) {
                var url = data + "wap/v2/fs/upload";
                var fileUrl;
                var fileType;
                switch (media.fileType) {
                    case __WEBPACK_IMPORTED_MODULE_6__model_Media__["a" /* MediaType */].Picture:
                        fileUrl = _this.fileService.getImagesDir();
                        fileType = 'IMAGE';
                        break;
                    case __WEBPACK_IMPORTED_MODULE_6__model_Media__["a" /* MediaType */].Audio:
                        fileUrl = _this.fileService.getSoundsDir();
                        fileType = 'SOUND';
                        break;
                    case __WEBPACK_IMPORTED_MODULE_6__model_Media__["a" /* MediaType */].Vedio:
                        fileUrl = _this.fileService.getVideosDir();
                        fileType = 'video/mp4';
                        break;
                    default:
                        return reject('type is error');
                }
                fileUrl = fileUrl + "/" + media.fileName;
                var fileTransfer = _this.transfer.create();
                var options = {
                    fileKey: 'file',
                    fileName: "" + media.fileName,
                    params: {
                        userId: media.userId,
                        fileType: fileType,
                        fileName: media.fileName
                    }
                };
                fileTransfer.upload(fileUrl, url, options)
                    .then(function (data) {
                    // success
                    console.log(data);
                    var body = JSON.parse(data.response);
                    if (body.fileId && body.url && body.downloadUrl && body.fileType
                        && body.fileHash && body.originFileName) {
                        media.extendedInfo = body;
                        resolve(body.fileId);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to uploadMedia");
                    }
                }, function (err) {
                    // error
                    console.error(err);
                    reject(err);
                });
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 上传多媒体文件
     * @param media
     * @returns {Promise<T>}
     */
    UploadService.prototype.uploadMedia = function (media) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/mobile/resource/upload";
                var fileUrl;
                var fileType;
                switch (media.fileType) {
                    case __WEBPACK_IMPORTED_MODULE_6__model_Media__["a" /* MediaType */].Picture:
                        fileUrl = _this.fileService.getImagesDir();
                        fileType = 'IMAGE';
                        break;
                    case __WEBPACK_IMPORTED_MODULE_6__model_Media__["a" /* MediaType */].Audio:
                        fileUrl = _this.fileService.getSoundsDir();
                        fileType = 'SOUND';
                        break;
                    case __WEBPACK_IMPORTED_MODULE_6__model_Media__["a" /* MediaType */].Vedio:
                    default:
                        return reject('type is error');
                }
                fileUrl = fileUrl + "/" + media.fileName;
                url = url + "?userId=" + media.userId + "&fileType=" + fileType + "&fileName=" + media.fileName;
                var fileTransfer = _this.transfer.create();
                var options = {
                    fileKey: 'file',
                    fileName: "" + media.fileName,
                    params: {
                        userId: media.userId,
                        fileType: fileType,
                        fileName: media.fileName
                    }
                };
                fileTransfer.upload(fileUrl, url, options)
                    .then(function (data) {
                    // success
                    console.log(data);
                    var body = JSON.parse(data.response);
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data && body.Data.data && body.Data.data.fileId) {
                        resolve(body.Data.data.fileId);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to uploadMedia");
                    }
                }, function (err) {
                    // error
                    console.error(err);
                    reject(err);
                });
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 上传文件关联 V2.0
     * @param taskId
     * @param files
     * @returns {Promise<T>}
     */
    UploadService.prototype.uploadMediaIdsV2 = function (taskId, userId, files) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/mobile/task/" + taskId + "/files/wap/upload";
                var content = {
                    taskId: taskId,
                    userId: userId,
                    files: files
                };
                return _this.put(url, JSON.stringify(content), _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to uploadMediaIds");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 上传文件关联
     * @param taskId
     * @param files
     * @returns {Promise<T>}
     */
    UploadService.prototype.uploadMediaIds = function (taskId, files) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getServerBaseUri()
                .then(function (data) {
                var url = data + "wap/v1/mobile/task/" + taskId + "/files/upload";
                var content = {
                    taskId: taskId,
                    files: files
                };
                return _this.put(url, JSON.stringify(content), _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.Code === _this.globalService.httpCode
                        && body.StatusCode === _this.globalService.httpSuccessStatusCode
                        && body.Data) {
                        resolve(body.Data);
                    }
                    else {
                        reject(body.Message ? body.Message : "failure to uploadMediaIds");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    /**
     * 上传材料登记信息
     * @param materialArr
     * @returns {Promise<T>}
     */
    UploadService.prototype.uploadMaterialsAdd = function (materialArr) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getMaterialsBaseUri()
                .then(function (data) {
                var url = data + "api/wap/v1/materialusage/batch";
                return _this.post(url, JSON.stringify(materialArr), _this.getOptions())
                    .toPromise()
                    .then(function (data) {
                    var body = data.json();
                    if (body.status == _this.globalService.httpSuccessStatusCode
                        && body.message == 'OK') {
                        resolve(true);
                    }
                    else {
                        resolve(body.message ? body.message : "failure to uploadMaterials");
                    }
                })
                    .catch(_this.handleError);
            })
                .catch(function (error) { return reject(error); });
        });
    };
    return UploadService;
}(__WEBPACK_IMPORTED_MODULE_4__BaseService__["a" /* BaseService */]));
UploadService = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["B" /* Injectable */])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["b" /* Http */],
        __WEBPACK_IMPORTED_MODULE_2__ConfigService__["a" /* ConfigService */],
        __WEBPACK_IMPORTED_MODULE_3__GlobalService__["a" /* GlobalService */],
        __WEBPACK_IMPORTED_MODULE_5__ionic_native_file_transfer__["a" /* FileTransfer */],
        __WEBPACK_IMPORTED_MODULE_7__FileService__["a" /* FileService */]])
], UploadService);

//# sourceMappingURL=UploadService.js.map

/***/ }),

/***/ 126:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MediaType; });
var MediaType;
(function (MediaType) {
    MediaType[MediaType["Picture"] = 0] = "Picture";
    MediaType[MediaType["Audio"] = 1] = "Audio";
    MediaType[MediaType["Vedio"] = 2] = "Vedio";
})(MediaType || (MediaType = {}));
//# sourceMappingURL=Media.js.map

/***/ }),

/***/ 127:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MediaService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__BaseService__ = __webpack_require__(123);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__DbService__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__FileService__ = __webpack_require__(23);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_camera__ = __webpack_require__(227);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_media__ = __webpack_require__(228);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_media_capture__ = __webpack_require__(229);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_video_player__ = __webpack_require__(230);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__model_Media__ = __webpack_require__(126);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__angular_http__ = __webpack_require__(35);
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











var MediaService = (function (_super) {
    __extends(MediaService, _super);
    function MediaService(http, globalService, dbService, camera, media, mediaCapture, fileService, videoPlayer) {
        var _this = _super.call(this, http) || this;
        _this.globalService = globalService;
        _this.dbService = dbService;
        _this.camera = camera;
        _this.media = media;
        _this.mediaCapture = mediaCapture;
        _this.fileService = fileService;
        _this.videoPlayer = videoPlayer;
        _this.isPlayingAlarm = false;
        return _this;
    }
    /**
     * 拍照
     * @param taskId
     * @returns {Promise<TResult>}
     */
    MediaService.prototype.takePicture = function (taskId) {
        var _this = this;
        var options = {
            quality: 50,
            destinationType: this.camera.DestinationType.FILE_URI,
            encodingType: this.camera.EncodingType.JPEG,
            mediaType: this.camera.MediaType.PICTURE
        };
        return this.camera.getPicture(options)
            .then(function (imageUri) {
            // imageData is either a base64 encoded string or a file URI
            // If it's base64:
            //let base64Image = 'data:image/jpeg;base64,' + imageData;
            console.log(imageUri);
            //const startName: string = 'file://';
            var path = imageUri.toString();
            // if (path.indexOf(startName) === 0 && startName.length < path.length) {
            //   path = path.substring(startName.length);
            // }
            return Promise.resolve(path);
        }, function (err) {
            // Handle error
            console.error(err);
            return Promise.reject(err);
        })
            .then(function (path) { return _this.fileService.movePicture(path); })
            .then(function (fileName) { return _this.dbService.saveMedia({
            userId: _this.globalService.userId,
            taskId: taskId,
            fileType: __WEBPACK_IMPORTED_MODULE_9__model_Media__["a" /* MediaType */].Picture,
            fileName: fileName,
            uploadedFlag: _this.globalService.uploadedFlagForLocal
        })
            .then(function (result) { return result
            ? Promise.resolve({ filePath: _this.fileService.getImagesDir() + "/" + fileName, fileName: fileName })
            : Promise.reject('failure to save the db'); }); });
    };
    /**
     * 视频
     * @param taskId
     * @returns {Promise<TResult>}
     */
    MediaService.prototype.takeVideo = function (taskId) {
        var _this = this;
        var options = { limit: 1 };
        return this.mediaCapture.captureVideo(options)
            .then(function (data) {
            console.log(data);
            // Promise.reject('success to save the db')
            var path = data[0].fullPath.toString();
            return Promise.resolve(path);
        }, function (err) {
            console.error(err);
            return Promise.reject(err);
        })
            .then(function (path) { return _this.fileService.moveVideo(path); })
            .then(function (fileName) { return _this.dbService.saveMedia({
            userId: _this.globalService.userId,
            taskId: taskId,
            fileType: __WEBPACK_IMPORTED_MODULE_9__model_Media__["a" /* MediaType */].Vedio,
            fileName: fileName,
            uploadedFlag: _this.globalService.uploadedFlagForLocal
        })
            .then(function (result) { return result
            ? Promise.resolve({ filePath: _this.fileService.getVideosDir() + "/" + fileName, fileName: fileName })
            : Promise.reject('failure to save the db'); }); });
    };
    MediaService.prototype.playVideo = function (path) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            // Playing a video.
            _this.videoPlayer.play(path).then(function () {
                console.log('video completed');
                return reject('video completed');
            }).catch(function (err) {
                console.log(err);
                return reject(err);
            });
        });
    };
    /**
     * 录音
     * @returns {Promise<T>}
     */
    MediaService.prototype.startRecordAudio = function () {
        var _this = this;
        var error = 'failure to record audio';
        return new Promise(function (resolve, reject) {
            var file;
            try {
                // Create a Media instance.  Expects path to file or url as argument
                // We can optionally pass a second argument to track the status of the media
                var name_1 = new Date().getTime() + ".mp3";
                file = _this.media.create(_this.fileService.getSoundsDir() + "/" + name_1);
                if (!file) {
                    return reject(error);
                }
                file.startRecord();
                return resolve({
                    file: file,
                    name: name_1
                });
            }
            catch (err) {
                console.error(err);
                if (file) {
                    file.release();
                }
                return reject(err);
            }
        });
    };
    /**
     *
     * @param file
     * @returns {any}
     */
    MediaService.prototype.endRecordAudio = function (file) {
        if (file instanceof __WEBPACK_IMPORTED_MODULE_6__ionic_native_media__["b" /* MediaObject */]) {
            try {
                file.stopRecord();
                file.release();
                return Promise.resolve(true);
            }
            catch (err) {
                console.error(err);
                return Promise.reject(err);
            }
        }
        else {
            return Promise.reject('file is error');
        }
    };
    MediaService.prototype.playAudio = function (name) {
        var _this = this;
        var error = 'failure to play audio';
        return new Promise(function (resolve, reject) {
            var file;
            try {
                // Create a Media instance.  Expects path to file or url as argument
                // We can optionally pass a second argument to track the status of the media
                file = _this.media.create(_this.fileService.getSoundsDir() + "/" + name);
                if (!file) {
                    return reject(error);
                }
                file.play();
                return resolve(file);
            }
            catch (err) {
                console.error(err);
                if (file) {
                    file.release();
                }
                return reject(err);
            }
        });
    };
    MediaService.prototype.playAlarm = function (name) {
        var _this = this;
        if (this.isPlayingAlarm) {
            return;
        }
        this.isPlayingAlarm = true;
        var file;
        try {
            // Create a Media instance.  Expects path to file or url as argument
            // We can optionally pass a second argument to track the status of the media
            file = this.media.create("file:///android_asset/www/assets/sound/" + name);
            if (!file) {
                this.isPlayingAlarm = false;
                return;
            }
            file.play();
            setTimeout(function () {
                try {
                    file.stop();
                    file.release();
                }
                catch (err) {
                    console.error(err);
                }
                finally {
                    _this.isPlayingAlarm = false;
                }
            }, 5000);
        }
        catch (err) {
            this.isPlayingAlarm = false;
            console.error(err);
            if (file) {
                file.release();
            }
        }
    };
    MediaService.prototype.stopAudio = function (file) {
        if (file instanceof __WEBPACK_IMPORTED_MODULE_6__ionic_native_media__["b" /* MediaObject */]) {
            try {
                file.stop();
                file.release();
                return Promise.resolve(true);
            }
            catch (err) {
                console.error(err);
                return Promise.reject(err);
            }
        }
        else {
            return Promise.reject('file is error');
        }
    };
    return MediaService;
}(__WEBPACK_IMPORTED_MODULE_1__BaseService__["a" /* BaseService */]));
MediaService = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["B" /* Injectable */])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_10__angular_http__["b" /* Http */],
        __WEBPACK_IMPORTED_MODULE_2__GlobalService__["a" /* GlobalService */],
        __WEBPACK_IMPORTED_MODULE_3__DbService__["a" /* DbService */],
        __WEBPACK_IMPORTED_MODULE_5__ionic_native_camera__["a" /* Camera */],
        __WEBPACK_IMPORTED_MODULE_6__ionic_native_media__["a" /* Media */],
        __WEBPACK_IMPORTED_MODULE_7__ionic_native_media_capture__["a" /* MediaCapture */],
        __WEBPACK_IMPORTED_MODULE_4__FileService__["a" /* FileService */],
        __WEBPACK_IMPORTED_MODULE_8__ionic_native_video_player__["a" /* VideoPlayer */]])
], MediaService);

//# sourceMappingURL=MediaService.js.map

/***/ }),

/***/ 128:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return MaterialsInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return UploadMaterials; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DataMaterialInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return MaterialInfoEx; });
/**
 * Created by zhangjing on 2017/7/31.
 */
var MaterialsInfo = (function () {
    function MaterialsInfo() {
    }
    return MaterialsInfo;
}());

/**
 * 接口
 */
var UploadMaterials = (function () {
    function UploadMaterials() {
    }
    return UploadMaterials;
}());

/**
 * 本地
 */
var DataMaterialInfo = (function () {
    function DataMaterialInfo() {
    }
    return DataMaterialInfo;
}());

var MaterialInfoEx = (function () {
    function MaterialInfoEx() {
    }
    return MaterialInfoEx;
}());

//# sourceMappingURL=MaterialsInfo.js.map

/***/ }),

/***/ 129:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return WorkDetailPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__model_Task__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_DataService__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__model_Process__ = __webpack_require__(122);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__record_PopoverRecordPage__ = __webpack_require__(231);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__map_map__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__model_MapParam__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_FileService__ = __webpack_require__(23);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__attachment_attachment__ = __webpack_require__(232);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_native_photo_viewer__ = __webpack_require__(233);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};












var WorkDetailPage = (function () {
    function WorkDetailPage(navCtrl, navParams, alertCtrl, events, dataService, globalService, popoverCtrl, fileService, photoViewer) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.alertCtrl = alertCtrl;
        this.events = events;
        this.dataService = dataService;
        this.globalService = globalService;
        this.popoverCtrl = popoverCtrl;
        this.fileService = fileService;
        this.photoViewer = photoViewer;
        this.tag = "[WorkDetailPage]";
        this.disableColor = '#808080';
        this.enableColor = '#5d81c1';
        this.optPerson = '处理人';
        this.optTypeName = '处理类别';
        this.optContentName = '处理内容';
        this.optReasonName = '发生原因';
        this.optSolutionName = '解决措施';
        this.optResultName = '处理结果';
        this.optRemarkName = '处理备注';
        this.optTypeDefaultValue = '请选择处理类别';
        this.optContentDefaultValue = '请选择处理内容';
        this.optReasonDefaultValue = '请选择发生原因';
        this.optSolutionDefaultValue = '请选择解决措施';
        this.optResultDefaultValue = '请选择处理结果';
        this.optRemarkDefaultValue = '备注可为空';
        //private readonly picturePlaceHolder: string = 'assets/img/ic_photo_default.png';
        this.pictureMaxCount = 3;
        this.audioPlaceHolder = 'assets/img/ic_audio_default.png';
        this.audioMaxCount = 3;
        this.videoMaxCount = 3;
        this.title = '工单处理';
        this.segmentName = "detailInfo";
        this.segmentColor = "primary";
        this.detail = [
            { name: '联系人名', value: '', key: 'contactName', isTime: false, isActive: false },
            { name: '联系电话', value: '', key: 'contactPhone', isTime: false, isActive: false },
            { name: '反映类别', value: '', key: 'issueType', isTime: false, isActive: false },
            { name: '反映内容', value: '', key: 'issueContent', isTime: false, isActive: false },
            { name: '发生地址', value: '', key: 'issueAddress', isTime: false, isActive: false },
            { name: '发生时间', value: '', key: 'issueTime', isTime: true, isActive: false },
            { name: '受理备注', value: '', key: 'receiveComment', isTime: false, isActive: false },
            { name: '开始时间', value: '', key: 'bookingStartTime', isTime: true, isActive: false },
            { name: '结束时间', value: '', key: 'bookingEndTime', isTime: true, isActive: false },
            { name: '到场时限', value: '', key: 'arrivedDeadLine', isTime: true, isActive: false },
            { name: '处理时限', value: '', key: 'replyDeadLine', isTime: true, isActive: false },
            { name: '延时时限', value: '', key: 'delayReplyDeadLine', isTime: true, isActive: false },
            { name: '派遣站点', value: '', key: 'assignStation', isTime: false, isActive: false },
            { name: '派遣人', value: '', key: 'assignPerson', isTime: false, isActive: false },
            { name: '派遣备注', value: '', key: 'assignComment', isTime: false, isActive: false },
            { name: '附件', value: '', key: 'attachments', isTime: false, isActive: true }
        ];
        this.reply = [
            { name: '处理时间', value: '', isActive: false, color: this.disableColor },
            { name: '处理部门', value: '', isActive: false, color: this.disableColor },
            { name: this.optPerson, value: '', isActive: false, color: this.disableColor },
            { name: this.optTypeName, value: this.optTypeDefaultValue, isActive: true, color: this.enableColor },
            { name: this.optContentName, value: this.optContentDefaultValue, isActive: true, color: this.enableColor },
            { name: this.optReasonName, value: this.optReasonDefaultValue, isActive: true, color: this.enableColor },
            { name: this.optSolutionName, value: this.optSolutionDefaultValue, isActive: true, color: this.enableColor },
            { name: this.optResultName, value: this.optResultDefaultValue, isActive: true, color: this.enableColor },
            { name: this.optRemarkName, value: this.optRemarkDefaultValue, isActive: true, color: this.enableColor }
        ];
        this.pictures = [
            '',
            '',
            ''
        ];
        this.videos = [
            '',
            '',
            ''
        ];
        this.audios = [
            { name: '', time: 0 },
            { name: '', time: 0 },
            { name: '', time: 0 }
        ];
        this.mediaNames = [];
        this.picCount = 0;
        this.audioCount = 0;
        this.videoCount = 0;
        _a = this.navParams.data, this.taskEx = _a[0], this.history = _a[1], this.overdueTime = _a[2], this.isLocked = _a[3];
        this.isPreview = this.taskEx.isPreview;
        this.isLocationValid = this.taskEx.isLocationValid;
        var _a;
    }
    /**
     * 初始化
     */
    WorkDetailPage.prototype.ngOnInit = function () {
        var _this = this;
        console.log(this.tag + 'ngOnInit');
        this.dataService.getTaskDetail(this.taskEx.id)
            .then(function (taskDetail) {
            console.log(_this.tag + "getTaskDetail: " + taskDetail);
            _this.taskDetail = taskDetail;
            _this.convertTaskDetail(_this.taskDetail);
        })
            .catch(function (error) { return console.error(error); });
        if (this.history && this.history.reply) {
            this.replyInfo = this.history.reply;
        }
        if (!this.replyInfo) {
            this.replyInfo = {
                opTime: 0,
                opDepartment: this.globalService.department,
                opPerson: '',
                opLeiBie: 0,
                opContent: 0,
                reason: 0,
                solution: 0,
                result: 0,
                replayComment: '',
                files: '',
                location: {
                    type: "bd09ll",
                    lng: "121.525766",
                    lat: "31.280693"
                },
                taskId: this.taskEx.id,
                userId: this.globalService.userId
            };
        }
        this.subscribeEvent(this.events);
    };
    /**
     * 销毁
     */
    WorkDetailPage.prototype.ngOnDestroy = function () {
        this.events.unsubscribe(this.globalService.recordAudioFinishEvent);
    };
    /**
     * 定位
     * @param ev
     */
    WorkDetailPage.prototype.onLocate = function (ev) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_7__map_map__["a" /* MapPage */], new __WEBPACK_IMPORTED_MODULE_8__model_MapParam__["a" /* MapParam */](__WEBPACK_IMPORTED_MODULE_8__model_MapParam__["b" /* MapType */].Locate, this.taskEx.location, this.taskEx.id));
    };
    /**
     * 回填
     * @param ev
     */
    WorkDetailPage.prototype.onReply = function (ev) {
        var _this = this;
        if (!this.replyInfo.opLeiBie
            || !this.replyInfo.opContent
            || !this.replyInfo.reason
            || !this.replyInfo.solution
            || !this.replyInfo.result) {
            // || !this.replyInfo.opPerson) {
            return this.globalService.showToast("数据填写不完整!");
        }
        var processEx = new __WEBPACK_IMPORTED_MODULE_5__model_Process__["c" /* ProcessEx */]();
        if (!Object(__WEBPACK_IMPORTED_MODULE_2__model_Task__["c" /* transform2ProcessEx */])(this.taskEx, processEx)
            || processEx.reply.done) {
            return this.globalService.showToast("数据转换失败!");
        }
        var task = Object(__WEBPACK_IMPORTED_MODULE_2__model_Task__["d" /* transform2Task */])(this.replyInfo, this.taskEx, processEx);
        var output = {
            uploadedFlag: this.globalService.uploadedFlagForLocal
        };
        this.globalService.getLocation()
            .then(function (location) {
            _this.replyInfo.location = location;
            return _this.dataService.reply(_this.replyInfo, task, _this.taskDetail, _this.mediaNames, output);
        })
            .then(function (date) {
            console.log("success");
            _this.taskEx.photoCount = _this.picCount;
            _this.taskEx.audioCount = _this.audioCount;
            _this.taskEx.videoCount = _this.videoCount;
            var history = {
                userId: _this.globalService.userId,
                taskId: task.taskId,
                state: __WEBPACK_IMPORTED_MODULE_2__model_Task__["b" /* TaskState */].Reply,
                task: task,
                reply: _this.replyInfo,
                uploadedFlag: output.uploadedFlag,
                taskDetail: _this.taskDetail,
                mediaNames: _this.mediaNames
            };
            _this.dataService.uploadMediasOfOneTask(task.taskId);
            _this.events.publish(_this.globalService.myWorkUpdateEvent, {
                type: 'reply',
                taskEx: _this.taskEx,
                history: history
            });
            _this.navCtrl.pop();
        })
            .catch(function (error) {
            console.error(error);
            _this.globalService.showToast(error);
        });
    };
    /**
     * 切换tab
     * @param segment
     */
    WorkDetailPage.prototype.segmentChanged = function (segment) {
        console.log(segment);
        switch (segment.value) {
            case 'detailInfo':
                break;
            case 'replyInfo':
                this.setReplyInfo();
                break;
            case 'mediaInfo':
                this.setMediaInfo();
                break;
            default:
                return;
        }
    };
    /**
     * 选择item
     * @param item
     */
    WorkDetailPage.prototype.itemSelected = function (item) {
        if (this.isPreview || this.isLocked) {
            return;
        }
        switch (item.name) {
            case this.optPerson:
                //this.popupOptPersonAlert();
                break;
            case this.optTypeName:
                this.popupOptTypeAlert();
                break;
            case this.optContentName:
                this.popupOptContentAlert();
                break;
            case this.optReasonName:
                this.popupOptReasonAlert();
                break;
            case this.optSolutionName:
                this.popupOptSolutionAlert();
                break;
            case this.optResultName:
                this.popupOptResultAlert();
                break;
            case this.optRemarkName:
                this.popupRemarkAlert();
                break;
        }
    };
    WorkDetailPage.prototype.detailItemSelected = function (item) {
        if (item.key && item.key === "attachments") {
            console.log("attachments");
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_10__attachment_attachment__["a" /* AttachmentPage */]);
        }
    };
    /**
     * 拍照
     * @param ev
     */
    WorkDetailPage.prototype.onTakePicture = function (ev) {
        var _this = this;
        if (this.globalService.isChrome || this.isPreview || this.isLocked) {
            return;
        }
        if (this.picCount >= this.pictureMaxCount) {
            return this.globalService.showToast('照片已满');
        }
        this.dataService.takePicture(this.taskEx.id)
            .then(function (result) {
            var filePath = result.filePath, fileName = result.fileName;
            console.log(filePath);
            console.log(fileName);
            if (filePath && fileName) {
                _this.pictures[_this.picCount++] = filePath;
                _this.mediaNames.push(fileName);
            }
        })
            .catch(function (error) { return console.error(error); });
    };
    /**
     * 视频
     * @param ev
     */
    WorkDetailPage.prototype.onTakeVideo = function (ev) {
        var _this = this;
        if (this.globalService.isChrome || this.isPreview || this.isLocked) {
            return;
        }
        if (this.videoCount >= this.videoMaxCount) {
            return this.globalService.showToast('视频已满');
        }
        this.dataService.takeVideo(this.taskEx.id)
            .then(function (result) {
            var filePath = result.filePath, fileName = result.fileName;
            console.log(filePath);
            console.log(fileName);
            if (filePath && fileName) {
                _this.videos[_this.videoCount++] = filePath;
                _this.mediaNames.push(fileName);
            }
        })
            .catch(function (error) { return console.error(error); });
    };
    WorkDetailPage.prototype.onPlayVideo = function (path) {
        if (!path) {
            return;
        }
        this.dataService.playVideo(path)
            .then(function (data) {
            console.log(data);
        });
    };
    WorkDetailPage.prototype.onPreviewPicture = function (name) {
        console.log(name);
        if (!this.globalService.isChrome && name) {
            this.photoViewer.show(name);
        }
    };
    WorkDetailPage.prototype.onDeletePicture = function (name) {
        var _this = this;
        if (this.globalService.isChrome || this.isPreview || !name || this.isLocked) {
            return;
        }
        var index = this.pictures.findIndex(function (item) { return item === name; });
        if (index === -1) {
            return;
        }
        var lastIndex = name.lastIndexOf('/');
        if (lastIndex <= 0) {
            return;
        }
        name = name.substring(lastIndex + 1);
        if (!name) {
            return;
        }
        var index2 = this.mediaNames.findIndex(function (item) { return item === name; });
        if (index2 === -1) {
            return;
        }
        this.dataService.deleteOneMedia(name)
            .then(function (result) {
            for (var i = index; i < _this.pictures.length - 1; i++) {
                _this.pictures[i] = _this.pictures[i + 1];
            }
            _this.picCount--;
            _this.pictures[_this.picCount] = '';
            for (var i = index2; i < _this.mediaNames.length - 1; i++) {
                _this.mediaNames[i] = _this.mediaNames[i + 1];
            }
            _this.mediaNames.pop();
        })
            .catch(function (err) { return console.error(err); });
    };
    WorkDetailPage.prototype.onDeleteVideo = function (name) {
        var _this = this;
        if (this.globalService.isChrome || this.isPreview || !name || this.isLocked) {
            return;
        }
        var index = this.videos.findIndex(function (item) { return item === name; });
        if (index === -1) {
            return;
        }
        var lastIndex = name.lastIndexOf('/');
        if (lastIndex <= 0) {
            return;
        }
        name = name.substring(lastIndex + 1);
        if (!name) {
            return;
        }
        var index2 = this.mediaNames.findIndex(function (item) { return item === name; });
        if (index2 === -1) {
            return;
        }
        this.dataService.deleteOneMedia(name)
            .then(function (result) {
            for (var i = index; i < _this.videos.length - 1; i++) {
                _this.videos[i] = _this.videos[i + 1];
            }
            _this.videoCount--;
            _this.videos[_this.videoCount] = '';
            for (var i = index2; i < _this.mediaNames.length - 1; i++) {
                _this.mediaNames[i] = _this.mediaNames[i + 1];
            }
            _this.mediaNames.pop();
        })
            .catch(function (err) { return console.error(err); });
    };
    /**
     * 录音
     * @param ev
     */
    WorkDetailPage.prototype.onRecordAudio = function (ev) {
        console.log(this.tag, 'onRecordAudio');
        if (this.globalService.isChrome || this.isPreview || this.isLocked) {
            return;
        }
        if (this.audioCount >= this.audioMaxCount) {
            return this.globalService.showToast('录音已满');
        }
        this.popoverCtrl.create(__WEBPACK_IMPORTED_MODULE_6__record_PopoverRecordPage__["a" /* PopoverRecordPage */], {
            taskId: this.taskEx.id
        }, {
            showBackdrop: true,
            enableBackdropDismiss: false
        }).present();
    };
    WorkDetailPage.prototype.onPlay = function (audio) {
        var _this = this;
        if (!audio.name) {
            return;
        }
        var names = audio.name.split('#');
        if (!names || names.length !== 2) {
            return;
        }
        this.dataService.playAudio(names[0])
            .then(function (file) {
            if (file) {
                var prompt_1 = _this.alertCtrl.create({
                    title: '提示',
                    message: "结束播放语音",
                    enableBackdropDismiss: false,
                    buttons: [
                        {
                            text: '确定',
                            handler: function (data) {
                                console.log('Saved clicked');
                                _this.dataService.stopAudio(file)
                                    .catch(function (err) { return console.error(err); });
                            }
                        }
                    ]
                });
                prompt_1.present();
            }
        })
            .catch(function (err) { return console.error(err); });
    };
    WorkDetailPage.prototype.onDeleteAudio = function (audio) {
        var _this = this;
        if (this.globalService.isChrome || this.isPreview || !audio.name || this.isLocked) {
            return;
        }
        var names = audio.name.split('#');
        if (!names || names.length !== 2) {
            return;
        }
        var name = names[0];
        var index = this.audios.findIndex(function (item) { return item.name === audio.name; });
        if (index === -1) {
            return;
        }
        var index2 = this.mediaNames.findIndex(function (item) { return item === audio.name; });
        if (index2 === -1) {
            return;
        }
        this.dataService.deleteOneMedia(name)
            .then(function (result) {
            for (var i = index; i < _this.audios.length - 1; i++) {
                _this.audios[i].name = _this.audios[i + 1].name;
                _this.audios[i].time = _this.audios[i + 1].time;
            }
            _this.audioCount--;
            _this.audios[_this.audioCount].name = '';
            _this.audios[_this.audioCount].time = 0;
            for (var i = index2; i < _this.mediaNames.length - 1; i++) {
                _this.mediaNames[i] = _this.mediaNames[i + 1];
            }
            _this.mediaNames.pop();
        })
            .catch(function (err) { return console.error(err); });
    };
    /**
     * 转换显示信息
     * @param taskDetail
     */
    WorkDetailPage.prototype.convertTaskDetail = function (taskDetail) {
        for (var _i = 0, _a = this.detail; _i < _a.length; _i++) {
            var item = _a[_i];
            item.value = taskDetail[item.key];
            if (item.key === 'issueTime'
                || item.key === 'bookingStartTime'
                || item.key === 'bookingEndTime'
                || item.key === 'arrivedDeadLine'
                || item.key === 'replyDeadLine'
                || item.key === 'delayReplyDeadLine'
                || typeof item.value === 'number') {
                item.value = item.value > 0 ? new Date(item.value) : '';
            }
        }
        if (this.overdueTime && this.overdueTime.arrived && this.overdueTime.reply) {
            var currentTime = new Date().getTime();
            var arrivedDeadLine = currentTime + this.overdueTime.arrived;
            var replyDeadLine = currentTime + this.overdueTime.reply;
            if (taskDetail.arrivedDeadLine < arrivedDeadLine
                || taskDetail.replyDeadLine < replyDeadLine) {
                this.segmentColor = "danger";
                if (!this.globalService.isChrome) {
                    this.dataService.playAlarm();
                }
            }
        }
    };
    /**
     * 设置回复信息
     */
    WorkDetailPage.prototype.setReplyInfo = function () {
        if (this.replyInfo.opTime === 0) {
            this.replyInfo.opTime = new Date().getTime();
        }
        this.reply[0].value = this.globalService.getFormatTime(new Date(this.replyInfo.opTime));
        // department
        this.reply[1].value = this.replyInfo.opDepartment;
        // person
        this.getOptPersons(this.replyInfo.opPerson);
        // operation type
        this.getOptTypes(this.replyInfo.opLeiBie, this.replyInfo.opContent);
        // operation reason
        this.getOptReasons(this.replyInfo.reason);
        // operation solution
        this.getOptSolutions(this.replyInfo.solution);
        // operation result
        this.getOptResults(this.replyInfo.result);
        // remark
        this.reply[8].isActive = !this.isPreview && !this.isLocked;
        this.reply[8].value = this.replyInfo.replayComment;
    };
    /**
     * 获取处理类别
     * @param typeId
     * @param contentId
     */
    WorkDetailPage.prototype.getOptTypes = function (typeId, contentId) {
        var _this = this;
        this.dataService.getOptTypes()
            .then(function (words) {
            console.log(_this.tag, "getOptTypes");
            _this.optTypes = words;
            if (_this.optTypes.length > 0) {
                var word = void 0;
                if (typeId) {
                    word = _this.optTypes.find(function (word) { return word.wid === typeId; });
                }
                if (!word) {
                    word = _this.optTypes[0];
                    contentId = undefined;
                }
                _this.reply[3].value = word.wName;
                _this.reply[3].isActive = !_this.isPreview && !_this.isLocked;
                _this.reply[3].remark = word.wRemark;
                _this.replyInfo.opLeiBie = word.wid;
                _this.getOptContents(Number.parseInt(word.wRemark), contentId);
            }
        })
            .catch(function (error) { return console.error(error); });
    };
    /**
     * 获取处理内容
     * @param parentId
     * @param contentId
     */
    WorkDetailPage.prototype.getOptContents = function (parentId, contentId) {
        var _this = this;
        this.dataService.getOptContents(parentId)
            .then(function (words) {
            console.log(_this.tag, "getOptContents");
            _this.optContents = words;
            if (_this.optContents.length > 0) {
                var word = void 0;
                if (contentId) {
                    word = _this.optContents.find(function (word) { return word.wid === contentId; });
                }
                if (!word) {
                    word = _this.optContents[0];
                }
                _this.reply[4].value = word.wName;
                _this.reply[4].remark = word.wRemark;
                _this.reply[4].color = _this.enableColor;
                _this.replyInfo.opContent = word.wid;
            }
            else {
                _this.reply[4].value = "请选择处理内容";
                _this.reply[4].remark = "";
                _this.reply[4].color = _this.disableColor;
                _this.replyInfo.opContent = 0;
            }
            _this.reply[4].isActive = !_this.isPreview && !_this.isLocked;
        })
            .catch(function (error) { return console.error(error); });
    };
    /**
     * 获取发生原因
     */
    WorkDetailPage.prototype.getOptReasons = function (id) {
        var _this = this;
        this.dataService.getOptReasons()
            .then(function (words) {
            console.log(_this.tag, "getOptReasons");
            _this.optReasons = words;
            if (_this.optReasons.length > 0) {
                var word = void 0;
                if (id) {
                    word = _this.optReasons.find(function (word) { return word.wid === id; });
                }
                if (!word) {
                    word = _this.optReasons[0];
                }
                _this.reply[5].value = word.wName;
                _this.reply[5].isActive = !_this.isPreview && !_this.isLocked;
                _this.reply[5].remark = word.wRemark;
                _this.replyInfo.reason = word.wid;
            }
        })
            .catch(function (error) { return console.error(error); });
    };
    /**
     * 获取解决措施
     */
    WorkDetailPage.prototype.getOptSolutions = function (id) {
        var _this = this;
        this.dataService.getOptSolutions()
            .then(function (words) {
            console.log(_this.tag, "getOptSolutions");
            _this.optSolutions = words;
            if (_this.optSolutions.length > 0) {
                var word = void 0;
                if (id) {
                    word = _this.optSolutions.find(function (word) { return word.wid === id; });
                }
                if (!word) {
                    word = _this.optSolutions[0];
                }
                _this.reply[6].value = word.wName;
                _this.reply[6].isActive = !_this.isPreview && !_this.isLocked;
                _this.reply[6].remark = word.wRemark;
                _this.replyInfo.solution = word.wid;
            }
        })
            .catch(function (error) { return console.error(error); });
    };
    /**
     * 获取处理结果
     */
    WorkDetailPage.prototype.getOptResults = function (id) {
        var _this = this;
        this.dataService.getOptResults()
            .then(function (words) {
            console.log(_this.tag, "getOptResult");
            _this.optResults = words;
            if (_this.optResults.length > 0) {
                var word = void 0;
                if (id) {
                    word = _this.optResults.find(function (word) { return word.wid === id; });
                }
                if (!word) {
                    word = _this.optResults[0];
                }
                _this.reply[7].value = word.wName;
                _this.reply[7].isActive = !_this.isPreview && !_this.isLocked;
                _this.reply[7].remark = word.wRemark;
                _this.replyInfo.result = word.wid;
            }
        })
            .catch(function (error) { return console.error(error); });
    };
    /**
     * 处理类别
     */
    WorkDetailPage.prototype.popupOptTypeAlert = function () {
        if (!this.optTypes || this.optTypes.length <= 0) {
            return this.globalService.showToast("处理类别为空!");
        }
        this.popupAlert(this.optTypes, this.optTypeName, this.reply[3], this.replyInfo, "opLeiBie");
    };
    /**
     * 处理内容
     */
    WorkDetailPage.prototype.popupOptContentAlert = function () {
        if (!this.optContents || this.optContents.length <= 0) {
            return this.globalService.showToast("处理内容为空!");
        }
        this.popupAlert(this.optContents, this.optContentName, this.reply[4], this.replyInfo, "opContent");
    };
    /**
     * 发生原因
     */
    WorkDetailPage.prototype.popupOptReasonAlert = function () {
        if (!this.optReasons || this.optReasons.length <= 0) {
            return this.globalService.showToast("发生原因为空!");
        }
        this.popupAlert(this.optReasons, this.optReasonName, this.reply[5], this.replyInfo, "reason");
    };
    /**
     * 解决措施
     */
    WorkDetailPage.prototype.popupOptSolutionAlert = function () {
        if (!this.optSolutions || this.optSolutions.length <= 0) {
            return this.globalService.showToast("解决措施为空!");
        }
        this.popupAlert(this.optSolutions, this.optSolutionName, this.reply[6], this.replyInfo, "solution");
    };
    /**
     * 处理结果
     */
    WorkDetailPage.prototype.popupOptResultAlert = function () {
        if (!this.optResults || this.optResults.length <= 0) {
            return this.globalService.showToast("处理结果为空!");
        }
        this.popupAlert(this.optResults, this.optResultName, this.reply[7], this.replyInfo, "result");
    };
    /**
     * 处理备注
     */
    WorkDetailPage.prototype.popupRemarkAlert = function () {
        var _this = this;
        var prompt = this.alertCtrl.create({
            title: '处理备注',
            message: "请输入处理备注",
            inputs: [
                {
                    name: 'remark',
                    placeholder: ''
                },
            ],
            buttons: [
                {
                    text: '取消',
                    handler: function (data) {
                        console.log('Cancel clicked');
                    }
                },
                {
                    text: '确定',
                    handler: function (data) {
                        console.log('Saved clicked');
                        _this.reply[8].value = data.remark;
                        _this.replyInfo.replayComment = data.remark;
                    }
                }
            ]
        });
        prompt.present();
    };
    /**
     * 对话框
     * @param words
     * @param title
     * @param reply
     * @param replyInfo
     * @param propertyName
     */
    WorkDetailPage.prototype.popupAlert = function (words, title, reply, replyInfo, propertyName) {
        var _this = this;
        var alert = this.alertCtrl.create();
        alert.setTitle(title);
        for (var _i = 0, words_1 = words; _i < words_1.length; _i++) {
            var word = words_1[_i];
            alert.addInput({
                type: 'radio',
                label: word.wName,
                value: word.wName + "#" + word.wid + "#" + word.wRemark,
                checked: reply.value === word.wName
            });
        }
        alert.addButton('取消');
        alert.addButton({
            text: '确定',
            handler: function (data) {
                console.log('Radio data:', data);
                var values = data.split("#");
                reply.value = values[0];
                replyInfo[propertyName] = Number.parseInt(values[1]);
                reply.remark = values[2];
                if (title === _this.optTypeName) {
                    _this.getOptContents(Number.parseInt(reply.remark));
                }
            }
        });
        alert.present().then(function () {
            //this.testRadioOpen = true;
        });
    };
    WorkDetailPage.prototype.subscribeEvent = function (events) {
        var _this = this;
        events.subscribe(this.globalService.recordAudioFinishEvent, function (name, time) {
            console.log(name);
            if (name && time > 0) {
                time = Number.parseInt((time / 1000).toString());
                _this.audios[_this.audioCount].name = name + "#" + time;
                _this.audios[_this.audioCount++].time = time;
                _this.mediaNames.push(name + "#" + time);
            }
        });
    };
    WorkDetailPage.prototype.setMediaInfo = function () {
        if (this.history
            && this.history.mediaNames
            && this.history.mediaNames.length > 0) {
            this.picCount = 0;
            this.audioCount = 0;
            this.videoCount = 0;
            this.mediaNames = [];
            for (var _i = 0, _a = this.history.mediaNames; _i < _a.length; _i++) {
                var name_1 = _a[_i];
                if (name_1.lastIndexOf(this.globalService.photoSuffix) !== -1) {
                    this.pictures[this.picCount++] = this.fileService.getImagesDir() + "/" + name_1;
                    this.mediaNames.push(name_1);
                }
                else if (name_1.lastIndexOf(this.globalService.videoSuffix) !== -1) {
                    this.videos[this.videoCount++] = this.fileService.getVideosDir() + "/" + name_1;
                    this.mediaNames.push(name_1);
                }
                else if (name_1.lastIndexOf(this.globalService.audioSuffix) !== -1) {
                    this.audios[this.audioCount].name = name_1;
                    var values = name_1.split('#');
                    if (values && values.length === 2) {
                        this.audios[this.audioCount++].time = Number.parseInt(values[1]);
                    }
                    else {
                        this.audios[this.audioCount++].time = 10;
                    }
                    this.mediaNames.push(name_1);
                }
            }
        }
    };
    WorkDetailPage.prototype.getOptPersons = function (opPerson) {
        this.reply[2].value = this.globalService.userName;
        this.reply[2].isActive = false;
        this.replyInfo.opPerson = this.globalService.userName;
        // this.dataService.getPersonnels(this.globalService.userId)
        //   .then(personnels => {
        //     console.log(this.tag, "getOptPersons");
        //     this.optPersons = personnels;
        //     if (this.optPersons.length > 0) {
        //       let names: string[] = [];
        //       if (opPerson) {
        //         let persons: string[] = opPerson.split(',');
        //         for (let personnel of personnels) {
        //           if (persons.find(person => person === personnel.fieldPersonnelId.toString())) {
        //             names.push(personnel.fieldPersonnelName);
        //           }
        //         }
        //       }
        //
        //       if (names.length <= 0 || !opPerson) {
        //         names.push(this.optPersons[0].fieldPersonnelName);
        //         opPerson = this.optPersons[0].fieldPersonnelId.toString();
        //       }
        //
        //       this.reply[2].value = names.join(',');
        //       this.reply[2].isActive = !this.isPreview;
        //       this.replyInfo.opPerson = opPerson;
        //     }
        //   })
        //   .catch(error => console.error(error));
    };
    return WorkDetailPage;
}());
WorkDetailPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-workdetail',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\workdetail\workdetail.html"*/'<ion-header>\n\n  <ion-navbar color="primary">\n\n    <ion-title>\n\n      {{title}}\n\n    </ion-title>\n\n\n\n    <ion-buttons end *ngIf="!isPreview && !isLocked">\n\n      <button ion-button icon-only color="white" *ngIf="isLocationValid" (click)="onLocate($event)">\n\n        <ion-icon name="map"></ion-icon>\n\n      </button>\n\n\n\n      <button ion-button icon-only color="white" (click)="onReply($event)">\n\n        <ion-icon name="checkmark-circle"></ion-icon>\n\n      </button>\n\n    </ion-buttons>\n\n  </ion-navbar>\n\n\n\n  <ion-toolbar no-border-top>\n\n    <ion-segment [(ngModel)]="segmentName" (ionChange)="segmentChanged($event)" color="{{segmentColor}}">\n\n      <ion-segment-button value="detailInfo">\n\n        基本信息\n\n      </ion-segment-button>\n\n      <ion-segment-button value="replyInfo" *ngIf="!isPreview">\n\n        回填信息\n\n      </ion-segment-button>\n\n      <ion-segment-button value="mediaInfo" *ngIf="!isPreview">\n\n        多媒体\n\n      </ion-segment-button>\n\n    </ion-segment>\n\n  </ion-toolbar>\n\n</ion-header>\n\n\n\n<ion-content class="page-workdetail">\n\n\n\n  <div [ngSwitch]="segmentName">\n\n    <!--基本信息-->\n\n    <ion-list *ngSwitchCase="\'detailInfo\'">\n\n      <ion-item *ngFor="let item of detail" (click)="detailItemSelected(item)">\n\n        <ion-label fixed class="label-name">\n\n          {{item.name}}\n\n        </ion-label>\n\n        <div item-content *ngIf="item.isTime">\n\n          {{item.value | date:\'y-MM-dd HH:mm:ss\'}}\n\n        </div>\n\n        <div item-content *ngIf="!item.isTime">\n\n          {{item.value}}\n\n        </div>\n\n        <ion-icon name="ios-arrow-forward" item-end *ngIf="item.isActive"></ion-icon>\n\n      </ion-item>\n\n    </ion-list>\n\n\n\n    <!--回填信息-->\n\n    <ion-list *ngSwitchCase="\'replyInfo\'">\n\n      <ion-item *ngFor="let item of reply" class="reply-item" (click)="itemSelected(item)">\n\n        <ion-label fixed class="label-name">\n\n          {{item.name}}\n\n        </ion-label>\n\n        <div item-content>\n\n          {{item.value}}\n\n        </div>\n\n        <ion-icon name="ios-arrow-forward" item-end *ngIf="item.isActive"></ion-icon>\n\n      </ion-item>\n\n\n\n      <!--<ion-row>-->\n\n      <!--<ion-col class="col-button">-->\n\n      <!--<button ion-button icon-left>-->\n\n      <!--<ion-icon name="camera"></ion-icon>-->\n\n      <!--拍照-->\n\n      <!--</button>-->\n\n      <!--</ion-col>-->\n\n      <!--<ion-col class="col-button">-->\n\n      <!--<button ion-button icon-left>-->\n\n      <!--<ion-icon name="microphone"></ion-icon>-->\n\n      <!--录音-->\n\n      <!--</button>-->\n\n      <!--</ion-col>-->\n\n      <!--<ion-col class="col-button">-->\n\n      <!--<button ion-button icon-left>-->\n\n      <!--<ion-icon name="videocam"></ion-icon>-->\n\n      <!--视频-->\n\n      <!--</button>-->\n\n      <!--</ion-col>-->\n\n      <!--</ion-row>-->\n\n    </ion-list>\n\n\n\n    <!--多媒体-->\n\n    <div *ngSwitchCase="\'mediaInfo\'">\n\n      <button ion-item icon-left (click)="onTakePicture($event)">\n\n        <ion-icon name="camera"></ion-icon>\n\n        拍照\n\n      </button>\n\n\n\n      <ion-grid style="width: 100%; height: 100px;">\n\n        <ion-row>\n\n          <ion-col col-4 class="col-img" *ngIf="pictures[0]">\n\n            <img class="picture" src="{{pictures[0]}}" (click)="onPreviewPicture(pictures[0])"/>\n\n            <ion-icon name="close" (click)="onDeletePicture(pictures[0])" *ngIf="!isLocked"></ion-icon>\n\n          </ion-col>\n\n\n\n          <ion-col col-4 class="col-img" *ngIf="pictures[1]">\n\n            <img class="picture" src="{{pictures[1]}}" (click)="onPreviewPicture(pictures[1])"/>\n\n            <ion-icon name="close" (click)="onDeletePicture(pictures[1])" *ngIf="!isLocked"></ion-icon>\n\n          </ion-col>\n\n\n\n          <ion-col col-4 class="col-img" *ngIf="pictures[2]">\n\n            <img class="picture" src="{{pictures[2]}}" (click)="onPreviewPicture(pictures[2])"/>\n\n            <ion-icon name="close" (click)="onDeletePicture(pictures[2])" *ngIf="!isLocked"></ion-icon>\n\n          </ion-col>\n\n        </ion-row>\n\n      </ion-grid>\n\n\n\n      <br>\n\n      <br>\n\n\n\n      <button ion-item icon-left (click)="onRecordAudio($event)">\n\n        <ion-icon name="microphone"></ion-icon>\n\n        录音\n\n      </button>\n\n\n\n      <ion-grid style="width: 100%; height: 150px;">\n\n        <ion-row *ngIf="audios[0].time > 0" class="audio">\n\n          <ion-col col-6 class="audio-info">{{audios[0].time}}s</ion-col>\n\n          <ion-col col-2>\n\n            <ion-icon name="play" class="audio-btn" (click)="onPlay(audios[0])"></ion-icon>\n\n          </ion-col>\n\n          <ion-col col-1 *ngIf="!isLocked">\n\n            <ion-icon name="close" class="audio-btn" (click)="onDeleteAudio(audios[0])"></ion-icon>\n\n          </ion-col>\n\n          <ion-col></ion-col>\n\n        </ion-row>\n\n\n\n        <ion-row *ngIf="audios[1].time > 0" class="audio">\n\n          <ion-col col-6 class="audio-info">{{audios[1].time}}s</ion-col>\n\n          <ion-col col-2>\n\n            <ion-icon name="play" class="audio-btn" (click)="onPlay(audios[1])"></ion-icon>\n\n          </ion-col>\n\n          <ion-col col-1 *ngIf="!isLocked">\n\n            <ion-icon name="close" class="audio-btn" (click)="onDeleteAudio(audios[1])"></ion-icon>\n\n          </ion-col>\n\n          <ion-col></ion-col>\n\n        </ion-row>\n\n\n\n        <ion-row *ngIf="audios[2].time > 0" class="audio">\n\n          <ion-col col-6 class="audio-info">{{audios[2].time}}s</ion-col>\n\n          <ion-col col-2>\n\n            <ion-icon name="play" class="audio-btn" (click)="onPlay(audios[2])"></ion-icon>\n\n          </ion-col>\n\n          <ion-col col-1 *ngIf="!isLocked">\n\n            <ion-icon name="close" class="audio-btn" (click)="onDeleteAudio(audios[2])"></ion-icon>\n\n          </ion-col>\n\n          <ion-col></ion-col>\n\n        </ion-row>\n\n      </ion-grid>\n\n\n\n      <br>\n\n      <br>\n\n      <button ion-item icon-left (click)="onTakeVideo($event)">\n\n        <ion-icon name="videocam"></ion-icon>\n\n        视频\n\n      </button>\n\n\n\n      <ion-grid style="width: 100%; height: 100px;">\n\n        <ion-row>\n\n          <ion-col col-4 class="col-video" *ngIf="videos[0]">\n\n            <video class="video" (click)="onPlayVideo(videos[0])"></video>\n\n            <ion-icon name="close" (click)="onDeleteVideo(videos[0])" *ngIf="!isLocked"></ion-icon>\n\n          </ion-col>\n\n\n\n          <ion-col col-4 class="col-video" *ngIf="videos[1]">\n\n            <video class="video" (click)="onPlayVideo(videos[1])"></video>\n\n            <ion-icon name="close" (click)="onDeleteVideo(videos[1])" *ngIf="!isLocked"></ion-icon>\n\n          </ion-col>\n\n\n\n          <ion-col col-4 class="col-video" *ngIf="pictures[2]">\n\n            <video class="video" (click)="onPlayVideo(videos[2])"></video>\n\n            <ion-icon name="close" (click)="onDeleteVideo(videos[2])" *ngIf="!isLocked"></ion-icon>\n\n          </ion-col>\n\n        </ion-row>\n\n      </ion-grid>\n\n      <br>\n\n      <br>\n\n      <!--<ion-row>-->\n\n      <!--<ion-col class="col-img">-->\n\n      <!--<img width="80" height="80" src="assets/img/ic_video_default.png"/>-->\n\n      <!--</ion-col>-->\n\n\n\n      <!--<ion-col class="col-img">-->\n\n      <!--<img width="80" height="80" src="assets/img/ic_video_default.png"/>-->\n\n      <!--</ion-col>-->\n\n\n\n      <!--<ion-col class="col-img">-->\n\n      <!--<img width="80" height="80" src="assets/img/ic_video_default.png"/>-->\n\n      <!--</ion-col>-->\n\n      <!--</ion-row>-->\n\n    </div>\n\n  </div>\n\n\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\workdetail\workdetail.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["k" /* NavParams */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_3__providers_DataService__["a" /* DataService */],
        __WEBPACK_IMPORTED_MODULE_4__providers_GlobalService__["a" /* GlobalService */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* PopoverController */],
        __WEBPACK_IMPORTED_MODULE_9__providers_FileService__["a" /* FileService */],
        __WEBPACK_IMPORTED_MODULE_11__ionic_native_photo_viewer__["a" /* PhotoViewer */]])
], WorkDetailPage);

//# sourceMappingURL=workdetail.js.map

/***/ }),

/***/ 13:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DataService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__DownloadService__ = __webpack_require__(121);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__model_Task__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__UploadService__ = __webpack_require__(125);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__DbService__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__MediaService__ = __webpack_require__(127);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__model_Media__ = __webpack_require__(126);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__SyncService__ = __webpack_require__(324);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__model_MaterialsInfo__ = __webpack_require__(128);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ConfigService__ = __webpack_require__(18);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__FileService__ = __webpack_require__(23);
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};













var DataService = (function (_super) {
    __extends(DataService, _super);
    function DataService(downloadService, uploadService, globalService, dbService, configService, mediaService, events, fileService) {
        var _this = _super.call(this, downloadService, uploadService, globalService, dbService, mediaService, events, configService) || this;
        _this.fileService = fileService;
        _this.isInitialized = false;
        return _this;
    }
    /**
     * 初始化
     * @returns {Promise<boolean>}
     */
    DataService.prototype.init = function () {
        var _this = this;
        if (this.isInitialized) {
            return Promise.resolve(true);
        }
        else {
            _super.prototype.init.call(this);
            return this.dbService.init()
                .then(function (result) { return _this.configService.initConfigs(); })
                .then(function (result) { return _this.isInitialized = true; })
                .catch(function (error) {
                console.error(error);
                _this.isInitialized = false;
            });
        }
    };
    /**
     * 销毁
     */
    DataService.prototype.destroy = function () {
        if (this.isInitialized) {
            _super.prototype.destroy.call(this);
            this.dbService.destroy();
        }
    };
    /**
     * 下载所有任务和详情
     */
    DataService.prototype.downloadTasksAndDetails = function () {
        _super.prototype.sendMsg.call(this, { msgType: __WEBPACK_IMPORTED_MODULE_8__SyncService__["a" /* MsgType */].DownloadTasksAndDetails });
    };
    /**
     * 上传历史工单和多媒体信息
     */
    DataService.prototype.uploadHistoriesAndMedias = function () {
        _super.prototype.sendMsg.call(this, { msgType: __WEBPACK_IMPORTED_MODULE_8__SyncService__["a" /* MsgType */].UploadHistoriesAndMedias });
    };
    /**
     * 上传所有信息
     */
    DataService.prototype.uploadAllInfos = function () {
        _super.prototype.sendMsg.call(this, { msgType: __WEBPACK_IMPORTED_MODULE_8__SyncService__["a" /* MsgType */].UploadAllInfos });
    };
    /**
     * 上传一条任务的多媒体信息
     * @param taskId
     */
    DataService.prototype.uploadMediasOfOneTask = function (taskId) {
        _super.prototype.sendMsg.call(this, {
            msgType: __WEBPACK_IMPORTED_MODULE_8__SyncService__["a" /* MsgType */].UploadMediasOfHistory,
            taskId: taskId
        });
    };
    /**
     * 分页获取任务
     * @param since
     * @param count
     * @param key
     * @returns {Promise<Array<Task>>}
     */
    DataService.prototype.getTasks = function (since, count, key) {
        if (this.globalService.isChrome) {
            return this.downloadService.getTasks(this.globalService.userId, since, count)
                .then(function (tasks) { return tasks.filter(function (task) { return task.state !== __WEBPACK_IMPORTED_MODULE_2__model_Task__["b" /* TaskState */].Reply && task.state !== __WEBPACK_IMPORTED_MODULE_2__model_Task__["b" /* TaskState */].Reject; }); });
        }
        else {
            return this.dbService.getTasks(this.globalService.userId, since, count, [__WEBPACK_IMPORTED_MODULE_2__model_Task__["b" /* TaskState */].Dispatch, __WEBPACK_IMPORTED_MODULE_2__model_Task__["b" /* TaskState */].Accept, __WEBPACK_IMPORTED_MODULE_2__model_Task__["b" /* TaskState */].Go, __WEBPACK_IMPORTED_MODULE_2__model_Task__["b" /* TaskState */].Arrived, __WEBPACK_IMPORTED_MODULE_2__model_Task__["b" /* TaskState */].Delay, __WEBPACK_IMPORTED_MODULE_2__model_Task__["b" /* TaskState */].Continue], key);
        }
    };
    /**
     * 获取任务总数
     * @returns {Promise<number>}
     */
    DataService.prototype.getTaskCount = function () {
        if (this.globalService.isChrome) {
            return Promise.resolve(0);
        }
        else {
            return this.dbService.getTaskCount(this.globalService.userId);
        }
    };
    /**
     * 获取任务详情
     * @param taskId
     * @returns {Promise<TaskDetail>}
     */
    DataService.prototype.getTaskDetail = function (taskId) {
        var _this = this;
        if (this.globalService.isChrome) {
            return this.downloadService.getTaskDetail(taskId);
        }
        else {
            return this.dbService.getTaskDetail(taskId)
                .then(function (detail) {
                return detail && detail.taskId
                    ? Promise.resolve(detail)
                    : _this.downloadService.getTaskDetail(taskId.split('#')[0])
                        .then(function (detail) {
                        detail.taskId = taskId;
                        return _this.dbService.saveTaskDetail(detail)
                            .then(function (result) { return result ? _this.dbService.updateTaskExtendInfo(detail) : false; });
                    })
                        .then(function (result) { return _this.dbService.getTaskDetail(taskId); });
            });
        }
    };
    /**
     * 检查超期工单
     * @param overdueTime
     * @returns {any}
     */
    DataService.prototype.checkOverdueTimeTasks = function (overdueTime) {
        var _this = this;
        if (this.globalService.isChrome) {
            if (!overdueTime) {
                return Promise.resolve([]);
            }
            return this.downloadService.getTasks(this.globalService.userId, 1, 100)
                .then(function (tasks) {
                if (!tasks || tasks.length <= 0) {
                    return Promise.resolve([]);
                }
                var promises = tasks.map(function (task) { return _this.downloadService.getTaskDetail(task.taskId); });
                return Promise.all(promises)
                    .then(function (taskDetails) {
                    if (!taskDetails || taskDetails.length <= 0) {
                        return Promise.resolve([]);
                    }
                    var currentTime = new Date().getTime();
                    var arrivedTime = overdueTime.arrived + currentTime;
                    var replyTime = overdueTime.reply + currentTime;
                    var candidateTasks = [];
                    var _loop_1 = function (taskDetail) {
                        if ((taskDetail.arrivedDeadLine && taskDetail.arrivedDeadLine < arrivedTime)
                            || (taskDetail.replyDeadLine && taskDetail.replyDeadLine < replyTime)) {
                            var task = tasks.find(function (task) { return task.taskId === taskDetail.taskId; });
                            if (task) {
                                if (taskDetail.arrivedDeadLine < arrivedTime) {
                                    task.extendedInfo = {
                                        arrivedDeadLine: taskDetail.arrivedDeadLine
                                    };
                                }
                                else if (taskDetail.replyDeadLine < replyTime) {
                                    task.extendedInfo = {
                                        replyDeadLine: taskDetail.replyDeadLine
                                    };
                                }
                                candidateTasks.push(task);
                            }
                        }
                    };
                    for (var _i = 0, taskDetails_1 = taskDetails; _i < taskDetails_1.length; _i++) {
                        var taskDetail = taskDetails_1[_i];
                        _loop_1(taskDetail);
                    }
                    return Promise.resolve(candidateTasks);
                });
            });
        }
        else {
            return this.dbService.checkOverdueTimeTasks(this.globalService.userId, overdueTime, new Date().getTime());
        }
    };
    /**
     * 获取任务详情
     * @returns {Promise<Array<TaskDetail>>}
     */
    // public getTaskDetailByUserId(): Promise<Array<TaskDetail>> {
    //   if (this.globalService.isChrome) {
    //     return Promise.reject([]);
    //   } else {
    //     return this.dbService.getTaskIds(this.globalService.userId)
    //       .then(taskIds => this.dbService.getTaskDetails(taskIds))
    //       .catch(error => console.error(error));
    //   }
    // }
    /**
     * 历史工单获取记录
     * @param since
     * @param count
     * @param key
     * @returns {any}
     */
    DataService.prototype.getHistories = function (since, count, key) {
        if (this.globalService.isChrome) {
            return Promise.reject('chrome');
        }
        else {
            return this.dbService.getHistories(this.globalService.userId, undefined, [__WEBPACK_IMPORTED_MODULE_2__model_Task__["b" /* TaskState */].Reject, __WEBPACK_IMPORTED_MODULE_2__model_Task__["b" /* TaskState */].Reply], [], key, since, count);
        }
    };
    DataService.prototype.getReplyHistories = function (taskIds) {
        if (this.globalService.isChrome) {
            return Promise.resolve([]);
        }
        else {
            return this.dbService.getSpecialHistories(this.globalService.userId, taskIds, __WEBPACK_IMPORTED_MODULE_2__model_Task__["b" /* TaskState */].Reply);
        }
    };
    DataService.prototype.getHistory = function (taskId, state) {
        if (this.globalService.isChrome) {
            return Promise.reject('chrome');
        }
        else {
            return this.dbService.getSpecialHistories(this.globalService.userId, [taskId], state)
                .then(function (histories) { return histories.length > 0 ? Promise.resolve(histories[0]) : Promise.reject('none history'); });
        }
    };
    DataService.prototype.checkIfExistNotUploadedHistories = function (taskIds) {
        if (this.globalService.isChrome) {
            return Promise.resolve([]);
        }
        else {
            return this.dbService.getSpecialHistories(this.globalService.userId, taskIds, undefined, [this.globalService.uploadedFlagForLocal, this.globalService.uploadedFlagForUploading]);
        }
    };
    DataService.prototype.deleteOneTaskWithAllInfos = function (taskId) {
        if (this.globalService.isChrome) {
            return Promise.resolve(false);
        }
        else {
            return this.dbService.deleteOneTaskWithAllInfos(this.globalService.userId, taskId);
        }
    };
    /**
     * 获取未派工任务
     * @param since
     * @param count
     * @returns {Promise<Array<SearchTask>>}
     */
    DataService.prototype.getUnDispatchedTasks = function (since, count) {
        return this.downloadService.getUnDispatchedTasks(this.globalService.userId, since, count);
    };
    /**
     * 获取已派工任务
     * @param since
     * @param count
     * @param minutes
     * @returns {Promise<Array<SearchTask>>}
     */
    DataService.prototype.getDispatchedTasks = function (since, count, minutes) {
        return this.downloadService.getDispatchedTasks(this.globalService.userId, since, count, minutes);
    };
    /**
     * 站点任务接单
     * @param acceptExInfo
     * @returns {Promise<boolean>}
     */
    DataService.prototype.acceptEx = function (acceptExInfo) {
        return this.uploadService.acceptEx(acceptExInfo);
    };
    /**
     * 站点派单
     * @param dispatchInfo
     * @returns {Promise<boolean>}
     */
    DataService.prototype.dispatch = function (dispatchInfo) {
        return this.uploadService.dispatch(dispatchInfo);
    };
    /**
     * 站点销单
     * @param cancelExInfo
     * @returns {Promise<boolean>}
     */
    DataService.prototype.cancelEx = function (cancelExInfo) {
        return this.uploadService.cancelEx(cancelExInfo);
    };
    /**
     * 下载词语信息
     * @returns {Promise<Array<Word>>}
     */
    DataService.prototype.downloadWords = function () {
        var _this = this;
        return this.downloadService.getAllWords('all')
            .then(function (words) { return _this.dbService.saveWords(words); })
            .catch(function (error) {
            console.error(error);
            _this.globalService.showToast(error);
            return Promise.resolve(false);
        });
    };
    /**
     *
     * @returns {Promise<boolean>}
     */
    DataService.prototype.checkIfDownloadWords = function () {
        var _this = this;
        return this.dbService.getWordsCount()
            .then(function (count) { return count > 0
            ? Promise.resolve(true)
            : _this.downloadService.getAllWords('all')
                .then(function (words) { return _this.dbService.saveWords(words); }); })
            .catch(function (error) {
            console.error(error);
            _this.globalService.showToast(error);
            return Promise.resolve(false);
        });
    };
    /**
     *
     * @returns {Promise<boolean|boolean>}
     */
    DataService.prototype.checkIfDownloadMaterials = function () {
        var _this = this;
        return this.configService.getSysRegion()
            .then(function (region) {
            if (region && region === __WEBPACK_IMPORTED_MODULE_11__ConfigService__["a" /* ConfigService */].fushunRegion) {
                return _this.dbService.getMaterialsCount()
                    .then(function (count) { return count > 0
                    ? Promise.resolve(true)
                    : _this.downloadService.getAllMaterials('all')
                        .then(function (materials) { return _this.dbService.saveMaterials(materials); }); })
                    .catch(function (error) {
                    console.error(error);
                    _this.globalService.showToast(error);
                    return Promise.resolve(false);
                });
            }
            else {
                return Promise.resolve(true);
            }
        });
    };
    /**
     * 下载材料信息
     */
    DataService.prototype.downloadMaterials = function () {
        var _this = this;
        return this.configService.getSysRegion()
            .then(function (region) {
            if (region && region === __WEBPACK_IMPORTED_MODULE_11__ConfigService__["a" /* ConfigService */].fushunRegion) {
                return _this.downloadService.getAllMaterials('all')
                    .then(function (materials) { return _this.dbService.saveMaterials(materials); })
                    .catch(function (error) {
                    console.error(error);
                    _this.globalService.showToast(error);
                    return Promise.resolve(false);
                });
            }
            else {
                return Promise.resolve(true);
            }
        });
    };
    /**
     * 材料类别
     * @returns {Promise<Array<Material>>}
     */
    DataService.prototype.getOptMaterialLB = function () {
        var _this = this;
        var groupKey = 'LB';
        return (this.optMaterialLB && this.optMaterialLB.length > 0)
            ? Promise.resolve(this.optMaterialLB)
            : this.dbService.getMaterials(groupKey)
                .then(function (materials) {
                return _this.optMaterialLB = materials;
            })
                .catch(function (error) {
                console.log(error);
            });
    };
    /**
     * 材料型号
     * @param parentId
     */
    DataService.prototype.getOptMaterialXH = function (parentId) {
        var _this = this;
        var groupKey = 'XH';
        return (this.optMaterialXH && this.optMaterialXH.length > 0 && this.optMaterialXH[0].parentId == parentId)
            ? Promise.resolve(this.optMaterialXH)
            : this.dbService.getMaterials(groupKey)
                .then(function (materials) {
                var newMaterials = [];
                for (var _i = 0, materials_1 = materials; _i < materials_1.length; _i++) {
                    var material = materials_1[_i];
                    if (material.parentId == parentId) {
                        newMaterials.push(material);
                    }
                }
                return _this.optMaterialXH = newMaterials;
            })
                .catch(function (error) {
                console.log(error);
            });
    };
    /**
     * 材料规格
     * @param parentId
     * @returns {Promise<Array<Material>>|Promise<TResult|TResult2|Array<Material>>}
     */
    DataService.prototype.getOptMaterialGG = function (parentId) {
        var _this = this;
        var groupKey = 'GG';
        return (this.optMaterialGG && this.optMaterialGG.length > 0 && this.optMaterialGG[0].parentId == parentId)
            ? Promise.resolve(this.optMaterialGG)
            : this.dbService.getMaterials(groupKey)
                .then(function (materials) {
                var newMaterials = [];
                for (var _i = 0, materials_2 = materials; _i < materials_2.length; _i++) {
                    var material = materials_2[_i];
                    if (material.parentId == parentId) {
                        newMaterials.push(material);
                    }
                }
                return _this.optMaterialGG = newMaterials;
            })
                .catch(function (error) {
                console.log(error);
            });
    };
    /**
     * 材料厂家
     * @param parentId
     * @returns {Promise<Array<Material>>|Promise<TResult|TResult2|Array<Material>>}
     */
    DataService.prototype.getOptMaterialCJ = function (parentId) {
        var _this = this;
        var groupKey = 'CJ';
        return (this.optMaterialCJ && this.optMaterialCJ.length > 0 && this.optMaterialCJ[0].parentId == parentId)
            ? Promise.resolve(this.optMaterialCJ)
            : this.dbService.getMaterials(groupKey)
                .then(function (materials) {
                var newMaterials = [];
                for (var _i = 0, materials_3 = materials; _i < materials_3.length; _i++) {
                    var material = materials_3[_i];
                    if (material.parentId == parentId) {
                        newMaterials.push(material);
                    }
                }
                return _this.optMaterialCJ = newMaterials;
            })
                .catch(function (error) {
                console.log(error);
            });
    };
    /**
     * 获取处理类别
     * @returns {Promise<Array<Word>>|Promise<TResult>}
     */
    DataService.prototype.getOptTypes = function () {
        var _this = this;
        var group = 'CL_LEIBIE';
        var rootName = '处理类别';
        return (this.optTypes && this.optTypes.length > 0)
            ? Promise.resolve(this.optTypes)
            : this.dbService.getWords(group)
                .catch(function (error) {
                console.error(error);
                return _this.downloadService.getAllWords(group);
            })
                .then(function (words) {
                return _this.optTypes = _this.tree2list(words, rootName);
            });
    };
    /**
     * 获取处理内容
     * @param parentId
     * @returns {Promise<Array<Word>>}
     */
    DataService.prototype.getOptContents = function (parentId) {
        var _this = this;
        var group = 'CL_NEIRONG';
        return (this.optContents && this.optContents.length > 0 && this.optContents[0].wParentId === parentId)
            ? Promise.resolve(this.optContents)
            : this.dbService.getWords(group)
                .catch(function (error) {
                console.error(error);
                return _this.downloadService.getAllWords(group);
            })
                .then(function (words) {
                var newWords = [];
                for (var _i = 0, words_1 = words; _i < words_1.length; _i++) {
                    var word = words_1[_i];
                    if (word.wParentId === parentId) {
                        newWords.push(word);
                    }
                }
                return _this.optContents = newWords;
            });
    };
    /**
     * 获取发生原因
     * @returns {Promise<Array<Word>>|Promise<TResult>}
     */
    DataService.prototype.getOptReasons = function () {
        var _this = this;
        var group = 'FS_YUANYIN';
        var rootName = '发生原因';
        return (this.optReasons && this.optReasons.length > 0)
            ? Promise.resolve(this.optReasons)
            : this.dbService.getWords(group)
                .catch(function (error) {
                console.error(error);
                return _this.downloadService.getAllWords(group);
            })
                .then(function (words) {
                return _this.optReasons = _this.tree2list(words, rootName);
            });
    };
    /**
     * 获取解决措施
     * @returns {Promise<Array<Word>>|Promise<TResult>}
     */
    DataService.prototype.getOptSolutions = function () {
        var _this = this;
        var group = 'JJ_CUOSHI';
        var rootName = '解决措施';
        return (this.optSolutions && this.optSolutions.length > 0)
            ? Promise.resolve(this.optSolutions)
            : this.dbService.getWords(group)
                .catch(function (error) {
                console.error(error);
                return _this.downloadService.getAllWords(group);
            })
                .then(function (words) {
                return _this.optSolutions = _this.tree2list(words, rootName);
            });
    };
    /**
     * 获取处理结果
     * @returns {Promise<Array<Word>>|Promise<TResult>}
     */
    DataService.prototype.getOptResults = function () {
        var _this = this;
        var group = 'CL_JIEGUO';
        var rootName = '处理结果';
        return (this.optResults && this.optResults.length > 0)
            ? Promise.resolve(this.optResults)
            : this.dbService.getWords(group)
                .catch(function (error) {
                console.error(error);
                return _this.downloadService.getAllWords(group);
            })
                .then(function (words) {
                return _this.optResults = _this.tree2list(words, rootName);
            });
    };
    /**
     * 获取反映类别（查询界面）
     * @returns {Promise<Array<Word>>|Promise<TResult>}
     */
    DataService.prototype.getReflectTypes = function () {
        var _this = this;
        var group = 'FY_LEIBIE';
        var rootName = '反映类别';
        return (this.reflectTypes && this.reflectTypes.length > 0)
            ? Promise.resolve(this.reflectTypes)
            : this.dbService.getWords(group)
                .catch(function (error) {
                console.error(error);
                return _this.downloadService.getAllWords(group);
            })
                .then(function (words) {
                return _this.reflectTypes = _this.tree2list(words, rootName);
            });
    };
    /**
     * 获取反映内容
     * @returns {Promise<Array<Word>>|Promise<TResult>}
     */
    DataService.prototype.getReflectContents = function () {
        var _this = this;
        var group = 'FY_NEIRONG';
        var rootName = '反映内容';
        return (this.reflectContents && this.reflectContents.length > 0)
            ? Promise.resolve(this.reflectContents)
            : this.dbService.getWords(group)
                .catch(function (error) {
                console.error(error);
                return _this.downloadService.getAllWords(group);
            })
                .then(function (words) {
                return _this.reflectContents = _this.tree2list(words, rootName);
            });
    };
    /**
     * 查询任务
     */
    DataService.prototype.searchTask = function (request) {
        return this.downloadService.getSearchTasks(this.globalService.userId, request);
    };
    /**
     * 查询工单数量
     */
    DataService.prototype.searchTaskCount = function (request) {
        return this.downloadService.getSearchTaskCount(this.globalService.userId, request);
    };
    /**
     * 查询任务详情
     * @param taskId 任务编号
     */
    DataService.prototype.searchTaskDetails = function (taskId) {
        return this.downloadService.getSearchTaskDetails(taskId);
    };
    /**
     * 获取公告信息
     * @returns {Promise<Array<News>>}
     */
    DataService.prototype.getNews = function () {
        return this.downloadService.getNews();
    };
    /**
     * 获取用户信息
     * @param user
     * @returns {Promise<UserResult>}
     */
    DataService.prototype.doLogin = function (user) {
        return this.downloadService.doLogin(user);
    };
    /**
     * 获取管理员用户信息
     * @returns {Promise<UserRole>}
     */
    DataService.prototype.getManageInfo = function () {
        return this.downloadService.getManagerUserInfo(this.globalService.userId);
    };
    /**
     * 获取外勤用户信息
     * @returns {Promise<UserWorkInfo>}
     */
    DataService.prototype.getWorkInfo = function () {
        return this.downloadService.getWorkerUserInfo(this.globalService.userId);
    };
    /**
     * 检查app更新
     * @param version
     * @returns {Promise<VersionInfo>}
     */
    DataService.prototype.checkAppVersion = function (version) {
        return this.downloadService.checkAppVersion(version);
    };
    /**
     * 检查数据包更新
     * @param version
     * @returns {Promise<VersionInfo>}
     */
    DataService.prototype.checkDataVersion = function (version) {
        return this.downloadService.checkDataVersion(version);
    };
    /**
     * 获取施工人员
     * @param userId
     * @returns {Promise<Array<Personnel>>}
     */
    DataService.prototype.getPersonnels = function (userId) {
        var _this = this;
        return (this.personnels && this.personnels.length > 0)
            ? Promise.resolve(this.personnels)
            : this.dbService.getPersonnels()
                .catch(function (error) {
                console.error(error);
                return _this.downloadService.getPersonnels(_this.globalService.userId);
            })
                .then(function (personnels) {
                return _this.personnels = personnels;
            });
    };
    /**
     *
     * @returns {Promise<boolean|boolean>}
     */
    DataService.prototype.downloadPersonnels = function () {
        var _this = this;
        return this.globalService.isWorker
            ? Promise.resolve(true)
            : this.downloadService.getPersonnels(this.globalService.userId)
                .then(function (personnels) { return _this.dbService.savePersonnels(personnels); })
                .catch(function (error) {
                console.error(error);
                _this.globalService.showToast(error);
                return Promise.resolve(false);
            });
    };
    /**
     *
     * @returns {Promise<boolean|boolean>}
     */
    DataService.prototype.checkIfDownloadPersonnels = function () {
        var _this = this;
        return this.dbService.getPersonnelsCount()
            .then(function (count) { return count > 0
            ? Promise.resolve(true)
            : _this.downloadService.getPersonnels(_this.globalService.userId)
                .then(function (personnels) { return _this.dbService.savePersonnels(personnels); }); })
            .catch(function (error) {
            console.error(error);
            _this.globalService.showToast(error);
            return Promise.resolve(false);
        });
    };
    /**
     * 拍照
     * @param taskId
     * @returns {Promise<any>}
     */
    DataService.prototype.takePicture = function (taskId) {
        return this.mediaService.takePicture(taskId);
    };
    /**
     * 视频
     * @param taskId
     * @returns {Promise<any>}
     */
    DataService.prototype.takeVideo = function (taskId) {
        return this.mediaService.takeVideo(taskId);
    };
    DataService.prototype.playVideo = function (path) {
        return this.mediaService.playVideo(path);
    };
    /**
     * 开始录音
     * @returns {Promise<any>}
     */
    DataService.prototype.startRecordAudio = function () {
        return this.mediaService.startRecordAudio();
    };
    /**
     * 结束录音
     * @param file
     * @returns {Promise<boolean>}
     */
    DataService.prototype.endRecordAudio = function (file) {
        return this.mediaService.endRecordAudio(file);
    };
    DataService.prototype.playAudio = function (name) {
        return this.mediaService.playAudio(name);
    };
    DataService.prototype.stopAudio = function (file) {
        return this.mediaService.stopAudio(file);
    };
    DataService.prototype.playAlarm = function () {
        this.mediaService.playAlarm("alertDeadline.mp3");
    };
    /**
     * 保存录音到数据库
     * @param taskId
     * @param fileName
     * @returns {Promise<boolean>}
     */
    DataService.prototype.saveAudio = function (taskId, fileName) {
        if (taskId && fileName) {
            return this.dbService.saveMedia({
                userId: this.globalService.userId,
                taskId: taskId,
                fileType: __WEBPACK_IMPORTED_MODULE_7__model_Media__["a" /* MediaType */].Audio,
                fileName: fileName,
                uploadedFlag: this.globalService.uploadedFlagForLocal
            });
        }
        else {
            return Promise.reject('taskId or fileName is error');
        }
    };
    /**
     *
     * @param fileName
     * @returns {any}
     */
    DataService.prototype.deleteOneMedia = function (fileName) {
        if (fileName) {
            return this.dbService.deleteOneMedia(this.globalService.userId, fileName);
        }
        else {
            return Promise.reject('taskId or fileName is error');
        }
    };
    /**
     * 多级索引转一级索引
     * @param words
     * @param rootName
     * @returns {any}
     */
    DataService.prototype.tree2list = function (words, rootName) {
        function find(srcWords, destWords, srcWord) {
            var found = false;
            for (var _i = 0, srcWords_1 = srcWords; _i < srcWords_1.length; _i++) {
                var word = srcWords_1[_i];
                if (word.wParentId === srcWord.wid) {
                    find(srcWords, destWords, word);
                    found = true;
                }
            }
            if (!found) {
                destWords.push(srcWord);
            }
        }
        var rootWord;
        for (var _i = 0, words_2 = words; _i < words_2.length; _i++) {
            var word = words_2[_i];
            if (word.wName === rootName && word.wParentId === 0) {
                rootWord = word;
                break;
            }
        }
        if (!rootWord) {
            return [];
        }
        var newWords = [];
        find(words, newWords, rootWord);
        return newWords;
    };
    /**
     * 材料清单保存以及上传
     * @param data
     * @returns {Promise<T>}
     */
    DataService.prototype.saveMaterialInfo = function (data) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.dbService.saveMaterialInfo(data)
                .then(function (result) {
                if (result) {
                    // resolve(true);
                    return _this.uploadService.uploadMaterialsAdd(data.infos)
                        .then(function (result) {
                        //更新上传标志
                        if (result) {
                            data.uploadFlag = _this.globalService.uploadedFlagForUploaded; //已上传
                            resolve(_this.dbService.updateFlagMaterials(data));
                        }
                        else {
                            reject("upload failed");
                        }
                    })
                        .catch(function (error) {
                        reject(false);
                    });
                }
                else {
                    reject("save to db failed");
                }
            })
                .catch(function (error) {
                reject(error);
            });
        });
    };
    /**
     * 获取本地某工单编号的材料清单
     * @param serialNumber
     * @returns {Promise<Array<DataMaterialInfo>>}
     */
    DataService.prototype.getMaterialInfo = function (serialNumber) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.dbService.getMaterialInfo(serialNumber)
                .then(function (data) {
                var arrays = data.infos;
                var promiseArray = [];
                for (var _i = 0, arrays_1 = arrays; _i < arrays_1.length; _i++) {
                    var temp = arrays_1[_i];
                    promiseArray.push(_this.getMaterialAndUnit(temp));
                }
                Promise.all(promiseArray)
                    .then(function (result) {
                    var materialInfoEx = new __WEBPACK_IMPORTED_MODULE_10__model_MaterialsInfo__["b" /* MaterialInfoEx */]();
                    materialInfoEx.taskId = serialNumber;
                    materialInfoEx.infos = result;
                    materialInfoEx.uploadFlag = data.uploadFlag;
                    resolve(materialInfoEx);
                })
                    .catch(function (error) {
                    reject(error);
                });
            })
                .catch(function (error) {
                reject(error);
            });
        });
    };
    DataService.prototype.getMaterialAndUnit = function (temp) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            Promise.all([_this.dbService.getMaterial(temp.materialCategory),
                _this.dbService.getMaterial(temp.materialType), _this.dbService.getMaterial(temp.materialSize),
                _this.dbService.getMaterial(temp.manufacturer), _this.configService.getOneMaterialUnit(temp.materialUnit)])
                .then(function (result) {
                console.log(result);
                var info = new __WEBPACK_IMPORTED_MODULE_10__model_MaterialsInfo__["c" /* MaterialsInfo */]();
                info.category = result[0];
                info.type = result[1];
                info.size = result[2];
                info.productor = result[3];
                info.unit = result[4];
                info.count = temp.count;
                info.remark = temp.remark;
                resolve(info);
            })
                .catch(function (error) {
                console.log(error);
            });
        });
    };
    /**
     * 获得维修信息
     * @param serialNumber
     * @returns {Promise<MaintainInfo>}
     */
    DataService.prototype.getMaintainInfo = function (serialNumber) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.dbService.queryMaintainInfo(serialNumber)
                .then(function (maintainInfo) {
                resolve(maintainInfo);
            })
                .catch(function (error) {
                console.log("getMaintainInfo:" + error);
                return _this.downloadService.getMaintainInfo(serialNumber)
                    .then(function (maintainInfo) {
                    _this.dbService.saveMaintainInfo(maintainInfo)
                        .then(function (result) {
                        if (result) {
                            resolve(maintainInfo);
                        }
                        else {
                            reject(result);
                        }
                    })
                        .catch(function (error) {
                        reject(error);
                    });
                })
                    .catch(function (error) {
                    reject(error);
                });
            });
        });
    };
    /**
     * 上传所有未上传的材料工单信息
     */
    DataService.prototype.uploadNotUploadMaterialInfos = function () {
        _super.prototype.sendMsg.call(this, { msgType: __WEBPACK_IMPORTED_MODULE_8__SyncService__["a" /* MsgType */].UploadMaterialInfos });
    };
    DataService.prototype.playCachedVideo = function (url, name) {
        var _this = this;
        return this.fileService.checkFile(this.fileService.getCacheDir() + "/", name)
            .then(function (result) {
            var path = _this.fileService.getCacheDir() + "/" + name;
            if (result) {
                return Promise.resolve(path);
            }
            else {
                return _this.downloadService.downloadFile(url, path);
            }
        })
            .then(function (path) { return path && _this.playVideo(path); });
    };
    return DataService;
}(__WEBPACK_IMPORTED_MODULE_8__SyncService__["b" /* SyncService */]));
DataService = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["B" /* Injectable */])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__DownloadService__["a" /* DownloadService */],
        __WEBPACK_IMPORTED_MODULE_4__UploadService__["a" /* UploadService */],
        __WEBPACK_IMPORTED_MODULE_3__GlobalService__["a" /* GlobalService */],
        __WEBPACK_IMPORTED_MODULE_5__DbService__["a" /* DbService */],
        __WEBPACK_IMPORTED_MODULE_11__ConfigService__["a" /* ConfigService */],
        __WEBPACK_IMPORTED_MODULE_6__MediaService__["a" /* MediaService */],
        __WEBPACK_IMPORTED_MODULE_9_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_12__FileService__["a" /* FileService */]])
], DataService);

//# sourceMappingURL=DataService.js.map

/***/ }),

/***/ 138:
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncatched exception popping up in devtools
	return Promise.resolve().then(function() {
		throw new Error("Cannot find module '" + req + "'.");
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = 138;

/***/ }),

/***/ 179:
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncatched exception popping up in devtools
	return Promise.resolve().then(function() {
		throw new Error("Cannot find module '" + req + "'.");
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = 179;

/***/ }),

/***/ 18:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ConfigService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_storage__ = __webpack_require__(60);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_file__ = __webpack_require__(120);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_rxjs_add_operator_toPromise__ = __webpack_require__(322);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_rxjs_add_operator_toPromise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_rxjs_add_operator_toPromise__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__FileService__ = __webpack_require__(23);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * Created by zhangjing on 2017/6/19.
 * 读取配置文件
 */
var ConfigService = ConfigService_1 = (function () {
    function ConfigService(http, storage, file, globalService, fileService) {
        this.http = http;
        this.storage = storage;
        this.file = file;
        this.globalService = globalService;
        this.fileService = fileService;
        this.basePath = './assets/config/';
        this.systemFileName = 'system.json';
        this.mapFileName = 'map.json';
        this.systemFilePath = "" + this.basePath + this.systemFileName;
        this.mapFilePath = "" + this.basePath + this.mapFileName;
        this.systemStorageName = 'system';
        this.mapStorageName = 'map';
        if (this.globalService.isChrome) {
            this.storage.clear();
        }
    }
    /**
     * 初始化
     * @returns {Promise<boolean|boolean>}
     */
    ConfigService.prototype.initConfigs = function () {
        var _this = this;
        return this.readSystemConfig()
            .then(function (data) { return _this.systemConfig = data; })
            .then(function () { return _this.readMapConfig(); })
            .then(function (data) { return _this.mapConfig = data; });
    };
    /**
     * 获取数据服务地址
     * @returns {Promise<string>|Promise<T>}
     */
    ConfigService.prototype.getServerBaseUri = function () {
        var _this = this;
        return ConfigService_1.isValid(this.systemConfig, 'serverBaseUri')
            ? Promise.resolve(this.systemConfig.serverBaseUri)
            : new Promise(function (resolve, reject) {
                _this.readSystemConfig()
                    .then(function (data) {
                    _this.systemConfig = data;
                    if (ConfigService_1.isValid(_this.systemConfig, 'outerBaseUri')
                        && ConfigService_1.isValid(_this.systemConfig, 'innerBaseUri')
                        && ConfigService_1.isValid(_this.systemConfig, 'isOuterNetwork')) {
                        _this.systemConfig.serverBaseUri =
                            _this.systemConfig.isOuterNetwork ? _this.systemConfig.outerBaseUri : _this.systemConfig.innerBaseUri;
                        resolve(_this.systemConfig.serverBaseUri);
                    }
                    else {
                        reject("failure to getServerBaseUri");
                    }
                })
                    .catch(function (error) { return reject(error); });
            });
    };
    /**
     * 获取数据服务地址
     * @returns {Promise<[string,string]>|Promise<T>}
     */
    ConfigService.prototype.getServerBaseUris = function () {
        var _this = this;
        return ConfigService_1.isValid(this.systemConfig, 'serverBaseUri')
            ? Promise.resolve([this.systemConfig.outerBaseUri, this.systemConfig.innerBaseUri])
            : new Promise(function (resolve, reject) {
                _this.readSystemConfig()
                    .then(function (data) {
                    _this.systemConfig = data;
                    if (ConfigService_1.isValid(_this.systemConfig, 'outerBaseUri')
                        && ConfigService_1.isValid(_this.systemConfig, 'innerBaseUri')
                        && ConfigService_1.isValid(_this.systemConfig, 'isOuterNetwork')) {
                        resolve([_this.systemConfig.outerBaseUri, _this.systemConfig.innerBaseUri]);
                    }
                    else {
                        reject("failure to getServerBaseUris");
                    }
                })
                    .catch(function (error) { return reject(error); });
            });
    };
    /**
     *
     * @returns {Promise<string>|Promise<T>}
     */
    ConfigService.prototype.getFileBaseUri = function () {
        var _this = this;
        return ConfigService_1.isValid(this.systemConfig, 'fileServerBaseUri')
            ? Promise.resolve(this.systemConfig.fileServerBaseUri)
            : new Promise(function (resolve, reject) {
                _this.readSystemConfig()
                    .then(function (data) {
                    _this.systemConfig = data;
                    if (ConfigService_1.isValid(_this.systemConfig, 'fileOuterBaseUri')
                        && ConfigService_1.isValid(_this.systemConfig, 'fileInnerBaseUri')
                        && ConfigService_1.isValid(_this.systemConfig, 'isOuterNetwork')) {
                        _this.systemConfig.fileServerBaseUri =
                            _this.systemConfig.isOuterNetwork ? _this.systemConfig.fileOuterBaseUri : _this.systemConfig.fileInnerBaseUri;
                        resolve(_this.systemConfig.fileServerBaseUri);
                    }
                    else {
                        reject("failure to getFileBaseUri");
                    }
                })
                    .catch(function (error) { return reject(error); });
            });
    };
    /**
     *
     * @returns {Promise<[string,string]>|Promise<T>}
     */
    ConfigService.prototype.getFileBaseUris = function () {
        var _this = this;
        return ConfigService_1.isValid(this.systemConfig, 'fileServerBaseUri')
            ? Promise.resolve([this.systemConfig.fileOuterBaseUri, this.systemConfig.fileInnerBaseUri])
            : new Promise(function (resolve, reject) {
                _this.readSystemConfig()
                    .then(function (data) {
                    _this.systemConfig = data;
                    if (ConfigService_1.isValid(_this.systemConfig, 'fileOuterBaseUri')
                        && ConfigService_1.isValid(_this.systemConfig, 'fileInnerBaseUri')
                        && ConfigService_1.isValid(_this.systemConfig, 'isOuterNetwork')) {
                        resolve([_this.systemConfig.fileOuterBaseUri, _this.systemConfig.fileInnerBaseUri]);
                    }
                    else {
                        reject("failure to getFileBaseUris");
                    }
                })
                    .catch(function (error) { return reject(error); });
            });
    };
    /**
     * 获得材料接口地址
     * @returns {Promise<string>|Promise<T>}
     */
    ConfigService.prototype.getMaterialsBaseUri = function () {
        var _this = this;
        return ConfigService_1.isValid(this.systemConfig, 'materialsBaseUri')
            ? Promise.resolve(this.systemConfig.materialsBaseUri)
            : new Promise(function (resolve, reject) {
                _this.readSystemConfig()
                    .then(function (data) {
                    _this.systemConfig = data;
                    if (ConfigService_1.isValid(_this.systemConfig, 'isOuterNetwork')
                        && ConfigService_1.isValid(_this.systemConfig, 'materialsOuterBaseUri')
                        && ConfigService_1.isValid(_this.systemConfig, 'materialsInnerBaseUri')) {
                        _this.systemConfig.materialsBaseUri = _this.systemConfig.isOuterNetwork ? _this.systemConfig.materialsOuterBaseUri
                            : _this.systemConfig.materialsInnerBaseUri;
                        resolve(_this.systemConfig.materialsBaseUri);
                    }
                    else {
                        reject("failure to getMaterialsBaseUri");
                    }
                })
                    .catch(function (error) { return reject(error); });
            });
    };
    /**
     * 获取材料服务地址
     * @returns {Promise<[string,string]>|Promise<T>}
     */
    ConfigService.prototype.getMaterialsBaseUris = function () {
        var _this = this;
        return ConfigService_1.isValid(this.systemConfig, 'materialsBaseUri')
            ? Promise.resolve([this.systemConfig.materialsOuterBaseUri, this.systemConfig.materialsInnerBaseUri])
            : new Promise(function (resolve, reject) {
                _this.readSystemConfig()
                    .then(function (data) {
                    _this.systemConfig = data;
                    if (ConfigService_1.isValid(_this.systemConfig, 'isOuterNetwork')
                        && ConfigService_1.isValid(_this.systemConfig, 'materialsOuterBaseUri')
                        && ConfigService_1.isValid(_this.systemConfig, 'materialsInnerBaseUri')) {
                        resolve([_this.systemConfig.materialsOuterBaseUri, _this.systemConfig.materialsInnerBaseUri]);
                    }
                    else {
                        reject("failure to getMaterialsBaseUri");
                    }
                })
                    .catch(function (error) { return reject(error); });
            });
    };
    /**
     * 获得材料单位
     * @returns {Promise<Array<MaterialUnit>>|Promise<T>}
     */
    ConfigService.prototype.getMaterialUnit = function () {
        var _this = this;
        return ConfigService_1.isValid(this.systemConfig, "materialUnit")
            ? Promise.resolve(this.systemConfig.materialUnit)
            : new Promise(function (resolve, reject) {
                _this.readSystemConfig()
                    .then(function (data) {
                    _this.systemConfig = data;
                    if (ConfigService_1.isValid(_this.systemConfig, 'materialUnit')) {
                        resolve(_this.systemConfig.materialUnit);
                    }
                    else {
                        reject("failure to getmaterialUnit");
                    }
                })
                    .catch(function (error) { return reject(error); });
            });
    };
    /**
     * 获得某一个单位对象
     * @param id
     * @returns {Promise<MaterialUnit>|Promise<T>}
     */
    ConfigService.prototype.getOneMaterialUnit = function (id) {
        var _this = this;
        return ConfigService_1.isValid(this.systemConfig, "materialUnit")
            ? Promise.resolve(this.filterMaterialUnit(id, this.systemConfig.materialUnit))
            : new Promise(function (resolve, reject) {
                _this.readSystemConfig()
                    .then(function (data) {
                    _this.systemConfig = data;
                    if (ConfigService_1.isValid(_this.systemConfig, 'materialUnit')) {
                        resolve(_this.filterMaterialUnit(id, _this.systemConfig.materialUnit));
                    }
                    else {
                        reject("failure to getmaterialUnit");
                    }
                })
                    .catch(function (error) { return reject(error); });
            });
    };
    ConfigService.prototype.filterMaterialUnit = function (id, arrays) {
        if (!id || !arrays || arrays.length <= 0) {
            return null;
        }
        for (var _i = 0, arrays_1 = arrays; _i < arrays_1.length; _i++) {
            var temp = arrays_1[_i];
            if (temp.id == id) {
                return temp;
            }
        }
        return null;
    };
    /**
     * 是否是九宫格
     * @returns {Promise<T>}
     */
    ConfigService.prototype.isGridStyle = function () {
        var _this = this;
        return ConfigService_1.isValid(this.systemConfig, 'isGridStyle')
            ? Promise.resolve(this.systemConfig.isGridStyle)
            : new Promise(function (resolve, reject) {
                _this.readSystemConfig()
                    .then(function (data) {
                    _this.systemConfig = data;
                    if (ConfigService_1.isValid(_this.systemConfig, 'isGridStyle')) {
                        resolve(_this.systemConfig.isGridStyle);
                    }
                    else {
                        reject("failure to check isGridStyle");
                    }
                })
                    .catch(function (error) { return reject(error); });
            });
    };
    /**
     * 是否是外网
     * @returns {Promise<T>}
     */
    ConfigService.prototype.isOuterNetwork = function () {
        var _this = this;
        return ConfigService_1.isValid(this.systemConfig, 'isOuterNetwork')
            ? Promise.resolve(this.systemConfig.isOuterNetwork)
            : new Promise(function (resolve, reject) {
                _this.readSystemConfig()
                    .then(function (data) {
                    _this.systemConfig = data;
                    if (ConfigService_1.isValid(_this.systemConfig, 'isOuterNetwork')) {
                        resolve(_this.systemConfig.isOuterNetwork);
                    }
                    else {
                        reject("failure to check isOuterNetwork");
                    }
                })
                    .catch(function (error) { return reject(error); });
            });
    };
    /**
     * 是否是debug模式
     * @returns {Promise<T>}
     */
    ConfigService.prototype.isDebugMode = function () {
        var _this = this;
        return ConfigService_1.isValid(this.systemConfig, 'isDebugMode')
            ? Promise.resolve(this.systemConfig.isDebugMode)
            : new Promise(function (resolve, reject) {
                _this.readSystemConfig()
                    .then(function (data) {
                    _this.systemConfig = data;
                    if (ConfigService_1.isValid(_this.systemConfig, 'isDebugMode')) {
                        resolve(_this.systemConfig.isDebugMode);
                    }
                    else {
                        reject("failure to check isDebugMode");
                    }
                })
                    .catch(function (error) { return reject(error); });
            });
    };
    /**
     * 获取呼吸包间隔
     * @returns {Promise<T>}
     */
    ConfigService.prototype.getKeepAliveInterval = function () {
        var _this = this;
        return ConfigService_1.isValid(this.systemConfig, 'keepAliveInterval')
            ? Promise.resolve(this.systemConfig.keepAliveInterval)
            : new Promise(function (resolve, reject) {
                _this.readSystemConfig()
                    .then(function (data) {
                    _this.systemConfig = data;
                    if (ConfigService_1.isValid(_this.systemConfig, 'keepAliveInterval')) {
                        resolve(_this.systemConfig.keepAliveInterval);
                    }
                    else {
                        reject("failure to getKeepAliveInterval");
                    }
                })
                    .catch(function (error) { return reject(error); });
            });
    };
    /**
     * 获取超期时限设置
     * @returns {Promise<OverdueTime>|Promise<T>}
     */
    ConfigService.prototype.getOverdueTime = function () {
        var _this = this;
        return ConfigService_1.isValid(this.systemConfig, 'overdueTime')
            ? Promise.resolve(this.systemConfig.overdueTime)
            : new Promise(function (resolve, reject) {
                _this.readSystemConfig()
                    .then(function (data) {
                    _this.systemConfig = data;
                    if (ConfigService_1.isValid(_this.systemConfig, 'overdueTime')) {
                        resolve(_this.systemConfig.overdueTime);
                    }
                    else {
                        reject("failure to getOverdueTime");
                    }
                })
                    .catch(function (error) { return reject(error); });
            });
    };
    /**
     * 获取区域
     * @returns {Promise<T>}
     */
    ConfigService.prototype.getSysRegion = function () {
        var _this = this;
        return ConfigService_1.isValid(this.systemConfig, 'sysRegion')
            ? Promise.resolve(this.systemConfig.sysRegion)
            : new Promise(function (resolve, reject) {
                _this.readSystemConfig()
                    .then(function (data) {
                    _this.systemConfig = data;
                    if (ConfigService_1.isValid(_this.systemConfig, 'sysRegion')) {
                        resolve(_this.systemConfig.sysRegion);
                    }
                    else {
                        reject("failure to getSysRegion");
                    }
                })
                    .catch(function (error) { return reject(error); });
            });
    };
    /**
     * 是否使用新文件服务
     * @returns {Promise<boolean>|Promise<T>}
     */
    ConfigService.prototype.isNewFilService = function () {
        var _this = this;
        return ConfigService_1.isValid(this.systemConfig, 'newFileService')
            ? Promise.resolve(this.systemConfig.newFileService)
            : new Promise(function (resolve, reject) {
                _this.readSystemConfig()
                    .then(function (data) {
                    _this.systemConfig = data;
                    if (ConfigService_1.isValid(_this.systemConfig, 'newFileService')) {
                        resolve(_this.systemConfig.newFileService);
                    }
                    else {
                        reject("failure to check isNewFilService");
                    }
                })
                    .catch(function (error) { return reject(error); });
            });
    };
    /**
     * 获取地图url
     * @returns {Promise<T>}
     */
    ConfigService.prototype.getMapServerUrl = function () {
        var _this = this;
        return ConfigService_1.isValid(this.mapConfig, 'mapServerUrl')
            ? Promise.resolve(this.mapConfig.mapServerUrl)
            : new Promise(function (resolve, reject) {
                _this.readMapConfig()
                    .then(function (data) {
                    _this.mapConfig = data;
                    if (ConfigService_1.isValid(_this.mapConfig, 'mapServerUrl')) {
                        resolve(_this.mapConfig.mapServerUrl);
                    }
                    else {
                        reject("the url of map server is error");
                    }
                })
                    .catch(function (error) { return reject(error); });
            });
    };
    /**
     * 设置九宫格样式
     * @param isGridStyle
     * @returns {any}
     */
    ConfigService.prototype.setGridStyle = function (isGridStyle) {
        var _this = this;
        if (ConfigService_1.isValid(this.systemConfig, 'isGridStyle')) {
            return new Promise(function (resolve, reject) {
                var systemConfig = Object.create(_this.systemConfig);
                systemConfig.isGridStyle = isGridStyle;
                _this.writeSystemConfig(systemConfig)
                    .then(function (result) {
                    if (result) {
                        _this.systemConfig.isGridStyle = isGridStyle;
                    }
                    resolve(!!result);
                })
                    .catch(function (error) { return reject(error); });
            });
        }
        else {
            return Promise.reject("systemConfig has no data");
        }
    };
    /**
     * 设置内外网
     * @param isOuterNet
     * @returns {any}
     */
    ConfigService.prototype.setIsOuterNet = function (isOuterNet) {
        var _this = this;
        var promise;
        if (!this.systemConfig) {
            promise = this.readSystemConfig().then(function (data) { return _this.systemConfig = data; });
        }
        else {
            promise = Promise.resolve();
        }
        return promise.then(function () {
            if (ConfigService_1.isValid(_this.systemConfig, 'isOuterNetwork')) {
                return new Promise(function (resolve, reject) {
                    var systemConfig = Object.create(_this.systemConfig);
                    systemConfig.isOuterNetwork = isOuterNet;
                    _this.writeSystemConfig(systemConfig)
                        .then(function (result) {
                        if (result) {
                            _this.systemConfig.isOuterNetwork = isOuterNet;
                            _this.systemConfig.serverBaseUri = _this.systemConfig.isOuterNetwork ?
                                _this.systemConfig.outerBaseUri : _this.systemConfig.innerBaseUri;
                            _this.systemConfig.materialsBaseUri = _this.systemConfig.isOuterNetwork ?
                                _this.systemConfig.materialsOuterBaseUri : _this.systemConfig.materialsInnerBaseUri;
                        }
                        resolve(!!result);
                    })
                        .catch(function (error) { return reject(error); });
                });
            }
            else {
                return Promise.reject('sysytemConfig has no data');
            }
        });
    };
    /**
     * 设置数据地址
     * @param outerBaseUri
     * @param innerBaseUri
     * @param isOuterNetwork
     * @returns {any}
     */
    ConfigService.prototype.setServerBaseUris = function (outerBaseUri, innerBaseUri, isOuterNetwork) {
        var _this = this;
        if (ConfigService_1.isValid(this.systemConfig, 'outerBaseUri')
            && ConfigService_1.isValid(this.systemConfig, 'innerBaseUri')
            && ConfigService_1.isValid(this.systemConfig, 'serverBaseUri')
            && ConfigService_1.isValid(this.systemConfig, 'isOuterNetwork')) {
            return new Promise(function (resolve, reject) {
                var systemConfig = Object.create(_this.systemConfig);
                systemConfig.outerBaseUri = outerBaseUri;
                systemConfig.innerBaseUri = innerBaseUri;
                systemConfig.serverBaseUri = isOuterNetwork ? outerBaseUri : innerBaseUri;
                systemConfig.isOuterNetwork = isOuterNetwork;
                _this.writeSystemConfig(systemConfig)
                    .then(function (result) {
                    if (result) {
                        _this.systemConfig.outerBaseUri = outerBaseUri;
                        _this.systemConfig.innerBaseUri = innerBaseUri;
                        _this.systemConfig.serverBaseUri = isOuterNetwork ? outerBaseUri : innerBaseUri;
                        _this.systemConfig.isOuterNetwork = isOuterNetwork;
                    }
                    resolve(!!result);
                })
                    .catch(function (error) { return reject(error); });
            });
        }
        else {
            return Promise.reject('systemConfig has no data');
        }
    };
    /**
     * 设置文件服务地址
     * @param outerBaseUri
     * @param innerBaseUri
     * @param isOuterNetwork
     * @returns {any}
     */
    ConfigService.prototype.setFileBaseUris = function (outerBaseUri, innerBaseUri, isOuterNetwork) {
        var _this = this;
        if (ConfigService_1.isValid(this.systemConfig, 'fileOuterBaseUri')
            && ConfigService_1.isValid(this.systemConfig, 'fileInnerBaseUri')
            && ConfigService_1.isValid(this.systemConfig, 'fileServerBaseUri')
            && ConfigService_1.isValid(this.systemConfig, 'isOuterNetwork')) {
            return new Promise(function (resolve, reject) {
                var systemConfig = Object.create(_this.systemConfig);
                systemConfig.fileOuterBaseUri = outerBaseUri;
                systemConfig.fileInnerBaseUri = innerBaseUri;
                systemConfig.fileServerBaseUri = isOuterNetwork ? outerBaseUri : innerBaseUri;
                systemConfig.isOuterNetwork = isOuterNetwork;
                _this.writeSystemConfig(systemConfig)
                    .then(function (result) {
                    if (result) {
                        _this.systemConfig.fileOuterBaseUri = outerBaseUri;
                        _this.systemConfig.fileInnerBaseUri = innerBaseUri;
                        _this.systemConfig.fileServerBaseUri = isOuterNetwork ? outerBaseUri : innerBaseUri;
                        _this.systemConfig.isOuterNetwork = isOuterNetwork;
                    }
                    resolve(!!result);
                })
                    .catch(function (error) { return reject(error); });
            });
        }
        else {
            return Promise.reject('systemConfig has no data');
        }
    };
    /**
     * 设置材料地址
     * @param outerBaseUri
     * @param innerBaseUri
     * @param isOuterNetwork
     * @returns {any}
     */
    ConfigService.prototype.setMaterialBaseUris = function (outerBaseUri, innerBaseUri, isOuterNetwork) {
        var _this = this;
        if (ConfigService_1.isValid(this.systemConfig, 'materialsOuterBaseUri')
            && ConfigService_1.isValid(this.systemConfig, 'materialsInnerBaseUri')
            && ConfigService_1.isValid(this.systemConfig, 'materialsBaseUri')
            && ConfigService_1.isValid(this.systemConfig, 'isOuterNetwork')) {
            return new Promise(function (resolve, reject) {
                var systemConfig = Object.create(_this.systemConfig);
                systemConfig.materialsOuterBaseUri = outerBaseUri;
                systemConfig.materialsInnerBaseUri = innerBaseUri;
                systemConfig.materialsBaseUri = isOuterNetwork ? outerBaseUri : innerBaseUri;
                systemConfig.isOuterNetwork = isOuterNetwork;
                _this.writeSystemConfig(systemConfig)
                    .then(function (result) {
                    if (result) {
                        _this.systemConfig.materialsOuterBaseUri = outerBaseUri;
                        _this.systemConfig.materialsInnerBaseUri = innerBaseUri;
                        _this.systemConfig.materialsBaseUri = isOuterNetwork ? outerBaseUri : innerBaseUri;
                        _this.systemConfig.isOuterNetwork = isOuterNetwork;
                    }
                    resolve(!!result);
                })
                    .catch(function (error) { return reject(error); });
            });
        }
        else {
            return Promise.reject('systemConfig has no data');
        }
    };
    /**
     * 设置呼吸频率
     * @param keepAlive
     * @returns {any}
     */
    ConfigService.prototype.setKeepAlive = function (keepAlive) {
        var _this = this;
        if (ConfigService_1.isValid(this.systemConfig, 'keepAliveInterval')) {
            return new Promise(function (resolve, reject) {
                var systemConfig = Object.create(_this.systemConfig);
                systemConfig.keepAliveInterval = keepAlive;
                _this.writeSystemConfig(systemConfig)
                    .then(function (result) {
                    if (result) {
                        _this.systemConfig.keepAliveInterval = keepAlive;
                    }
                    resolve(!!result);
                })
                    .catch(function (error) { return reject(error); });
            });
        }
        else {
            return Promise.reject('systemConfig has no data');
        }
    };
    /**
     * 设置超期时限
     * @param overdueTime
     * @returns {any}
     */
    ConfigService.prototype.setOverdueTime = function (overdueTime) {
        var _this = this;
        if (ConfigService_1.isValid(this.systemConfig, 'overdueTime')) {
            return new Promise(function (resolve, reject) {
                var systemConfig = Object.create(_this.systemConfig);
                systemConfig.overdueTime = overdueTime;
                _this.writeSystemConfig(systemConfig)
                    .then(function (result) {
                    if (result) {
                        _this.systemConfig.overdueTime = overdueTime;
                    }
                    resolve(!!result);
                })
                    .catch(function (error) { return reject(error); });
            });
        }
        else {
            return Promise.reject('systemConfig has no data');
        }
    };
    /**
     * 读取system.json
     * @returns {Promise<TResult2|SystemConfig>|Promise<any>|Promise<SystemConfig>}
     */
    ConfigService.prototype.readSystemConfig = function () {
        var _this = this;
        if (this.globalService.isChrome) {
            return this.storage.get(this.systemStorageName)
                .then(function (val) {
                if (!val) {
                    return _this.http.get(_this.systemFilePath)
                        .toPromise()
                        .then(function (res) { return _this.storage.set(_this.systemStorageName, JSON.stringify(res.json())); })
                        .then(function (val) { return ConfigService_1.transform2SystemConfig(val); });
                }
                else {
                    return ConfigService_1.transform2SystemConfig(val);
                }
            });
        }
        else {
            console.log("start readAsText:" + this.fileService.getConfigDir() + ":" + this.systemFileName);
            return this.file.readAsText(this.fileService.getConfigDir(), this.systemFileName)
                .then(function (result) {
                console.log("readAsText" + result);
                return ConfigService_1.transform2SystemConfig(result);
            })
                .catch(function (error) {
                console.log(error);
            });
        }
    };
    /**
     * 写入system.json
     * @returns {Promise<TResult|T>}
     */
    ConfigService.prototype.writeSystemConfig = function (systemConfig) {
        if (this.globalService.isChrome) {
            return this.storage.set(this.systemStorageName, ConfigService_1.transform2SystemString(systemConfig));
        }
        else {
            return this.file.writeExistingFile(this.fileService.getConfigDir(), this.systemFileName, ConfigService_1.transform2SystemString(systemConfig));
        }
    };
    /**
     * 读取map.json
     * @returns {Promise<TResult2|MapConfig>|Promise<any>|Promise<MapConfig>}
     */
    ConfigService.prototype.readMapConfig = function () {
        var _this = this;
        return this.storage.get(this.mapStorageName)
            .then(function (val) {
            if (!val) {
                return _this.http.get(_this.mapFilePath)
                    .toPromise()
                    .then(function (res) { return _this.storage.set(_this.mapStorageName, JSON.stringify(res.json())); })
                    .then(function (val) { return ConfigService_1.transform2MapConfig(val); });
            }
            else {
                return ConfigService_1.transform2MapConfig(val);
            }
        });
    };
    /**
     * 判断是否有效
     * @param config
     * @param field
     * @returns {T|boolean}
     */
    ConfigService.isValid = function (config, field) {
        return config && config[field] != undefined && config[field] != null;
    };
    /**
     * json string转换对象
     * @param data
     * @returns {{outerBaseUri: any, innerBaseUri: any, serverBaseUri: any, isOuterNetwork: any, isGridStyle: any, isDebugMode: any, keepAliveInterval: any, sysRegion: any}}
     */
    ConfigService.transform2SystemConfig = function (data) {
        var obj = JSON.parse(data);
        return {
            outerBaseUri: obj["server.outer.baseuri"],
            innerBaseUri: obj["server.inner.baseuri"],
            serverBaseUri: obj["sys.connect.outer.network"] ? obj["server.outer.baseuri"] : obj["server.inner.baseuri"],
            fileOuterBaseUri: obj["server.file.outer.baseuri"],
            fileInnerBaseUri: obj["server.file.inner.baseuri"],
            fileServerBaseUri: obj["sys.connect.outer.network"] ? obj["server.file.outer.baseuri"] : obj["server.file.inner.baseuri"],
            materialsOuterBaseUri: obj["server.materials.outer.baseuri"],
            materialsInnerBaseUri: obj["server.materials.inner.baseuri"],
            materialsBaseUri: obj["sys.connect.outer.network"] ? obj["server.materials.outer.baseuri"] : obj["server.materials.inner.baseuri"],
            isOuterNetwork: obj["sys.connect.outer.network"],
            isGridStyle: obj["sys.grid.style"],
            isDebugMode: obj["sys.debug.mode"],
            keepAliveInterval: obj["sys.keep.alive.interval"],
            overdueTime: obj["sys.overdue.time"],
            sysRegion: obj["sys.region"],
            newFileService: obj["sys.new.file.service"],
            materialUnit: obj["sys.material.unit"]
        };
    };
    /**
     * json string转换对象
     * @param data
     * @returns {{mapServerUrl: any}}
     */
    ConfigService.transform2MapConfig = function (data) {
        var obj = JSON.parse(data);
        return {
            mapServerUrl: obj["map.server.url"]
        };
    };
    /**
     * 对象转json string
     * @param systemConfig
     * @returns {string}
     */
    ConfigService.transform2SystemString = function (systemConfig) {
        return JSON.stringify({
            "server.outer.baseuri": systemConfig.outerBaseUri,
            "server.inner.baseuri": systemConfig.innerBaseUri,
            "server.file.outer.baseuri": systemConfig.fileOuterBaseUri,
            "server.file.inner.baseuri": systemConfig.fileInnerBaseUri,
            "server.materials.outer.baseuri": systemConfig.materialsOuterBaseUri,
            "server.materials.inner.baseuri": systemConfig.materialsInnerBaseUri,
            "sys.connect.outer.network": systemConfig.isOuterNetwork,
            "sys.grid.style": systemConfig.isGridStyle,
            "sys.debug.mode": systemConfig.isDebugMode,
            "sys.keep.alive.interval": systemConfig.keepAliveInterval,
            "sys.overdue.time": systemConfig.overdueTime,
            "sys.region": systemConfig.sysRegion,
            "sys.new.file.service": systemConfig.newFileService,
            "sys.material.unit": systemConfig.materialUnit
        });
    };
    return ConfigService;
}());
ConfigService.fushunRegion = "fushun";
ConfigService = ConfigService_1 = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["B" /* Injectable */])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["b" /* Http */],
        __WEBPACK_IMPORTED_MODULE_2__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_4__ionic_native_file__["a" /* File */],
        __WEBPACK_IMPORTED_MODULE_3__GlobalService__["a" /* GlobalService */],
        __WEBPACK_IMPORTED_MODULE_6__FileService__["a" /* FileService */]])
], ConfigService);

var ConfigService_1;
//# sourceMappingURL=ConfigService.js.map

/***/ }),

/***/ 23:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FileService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ionic_native_file__ = __webpack_require__(120);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_transfer__ = __webpack_require__(222);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_zip__ = __webpack_require__(223);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_file_opener__ = __webpack_require__(224);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






/**
 * Created by zhangjing on 2017/6/13.
 */
var FileService = (function () {
    function FileService(file, transfer, alertCtrl, zip, fileOpener) {
        this.file = file;
        this.transfer = transfer;
        this.alertCtrl = alertCtrl;
        this.zip = zip;
        this.fileOpener = fileOpener;
        this.dirPath = null;
        this.dirRoot = 'sh3h';
        this.dir = 'hotlinemanager';
        this.arrDirs = ['config', 'data', 'images', 'videos', 'log', 'sounds', 'update', 'user', 'cache'];
        this.apkName = "/TaskManager.apk";
    }
    /**
     * 获取db路径
     * @returns {string}
     */
    FileService.prototype.getDbDir = function () {
        return "" + this.dirPath + this.dirRoot + "/" + this.dir + "/data";
    };
    /**
     * 获取config路径
     * @returns {string}
     */
    FileService.prototype.getConfigDir = function () {
        return "" + this.dirPath + this.dirRoot + "/" + this.dir + "/config";
    };
    /**
     * 获取images路径
     * @returns {string}
     */
    FileService.prototype.getImagesDir = function () {
        return "" + this.dirPath + this.dirRoot + "/" + this.dir + "/images";
    };
    /**
     * 获取video路径
     * @returns {string}
     */
    FileService.prototype.getVideosDir = function () {
        return "" + this.dirPath + this.dirRoot + "/" + this.dir + "/videos";
    };
    /**
     * 获取sounds路径
     * @returns {string}
     */
    FileService.prototype.getSoundsDir = function () {
        return "" + this.dirPath + this.dirRoot + "/" + this.dir + "/sounds";
    };
    /**
     * 获取cache路径
     * @returns {string}
     */
    FileService.prototype.getCacheDir = function () {
        return this.dirPath + "/" + this.dirRoot + "/" + this.dir + "/cache";
    };
    /**
     * 检查文件是否存在
     * @param dir
     * @param file
     * @returns {Promise<boolean>}
     */
    FileService.prototype.checkFile = function (dir, file) {
        return this.file.checkFile(dir, file)
            .catch(function (error) {
            console.error(error);
            return false;
        });
    };
    /**
     * 创建sh3h目录
     * @returns {Promise<T>}
     */
    FileService.prototype.createDirRoot = function () {
        var _this = this;
        this.dirPath = this.file.externalRootDirectory;
        return new Promise(function (resolve, reject) {
            _this.file.createDir(_this.dirPath, _this.dirRoot, true)
                .then(function (result) {
                console.log('createDirRoot success');
                resolve(_this.createAppDir());
            })
                .catch(function (error) {
                reject(error);
            });
        });
    };
    /**
     * 创建app目录(hotlineManager)
     * @returns {Promise<T>}
     */
    FileService.prototype.createAppDir = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.file.createDir(_this.dirPath + _this.dirRoot, _this.dir, true)
                .then(function (result) {
                console.log('createAppDir success');
                resolve(_this.createChildDir());
            })
                .catch(function (error) {
                reject(error);
            });
        });
    };
    /**
     * 创建子目录(七个子文件夹)
     * @returns Promise
     */
    FileService.prototype.createChildDir = function () {
        var _this = this;
        var url = this.dirPath + this.dirRoot + '/' + this.dir;
        var promiseArr = [];
        for (var i = 0; i < this.arrDirs.length; i++) {
            promiseArr.push(this.file.createDir(url, this.arrDirs[i], true));
        }
        return new Promise(function (resolve, reject) {
            Promise.all(promiseArr)
                .then(function (result) {
                console.log('createChildDir Promise all success');
                resolve(_this.copySystemConfig());
            })
                .catch(function (error) {
                console.log(error);
                return Promise.reject(false);
            });
        });
    };
    /**
     * 拷贝配置文件
     * @returns {Promise<Entry>}
     */
    FileService.prototype.copySystemConfig = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            var originUrl = 'file:///android_asset/www/assets/config/';
            var newUrl = _this.dirPath + _this.dirRoot + '/' + _this.dir + '/config/';
            console.log('copySystemConfig:' + newUrl);
            var fileName = 'system.json';
            _this.file.checkFile(newUrl, fileName)
                .then(function (result) {
                //文件存在
                console.log("systemConfig has exist!" + result);
                resolve(true);
            })
                .catch(function (error) {
                console.log(error);
                _this.file.copyFile(originUrl, fileName, newUrl, fileName)
                    .then(function (result) {
                    console.log('copySystemConfig success' + result);
                    resolve(true);
                })
                    .catch(function (error) {
                    console.log(error);
                    reject(false);
                });
            });
        });
    };
    /**
     * 下载文件
     */
    FileService.prototype.downloadFile = function (isData, url) {
        var _this = this;
        var alert = this.alertCtrl.create({
            title: '下载更新包',
            message: '下载进度:0%',
            enableBackdropDismiss: false,
        });
        alert.present();
        var fileTransfer = this.transfer.create();
        var downloadUrl;
        var defaultUrl = this.dirPath + this.dirRoot + '/' + this.dir + '/' + this.arrDirs[5];
        downloadUrl = isData ? (defaultUrl + '/data.zip') : (defaultUrl + '/app.zip');
        fileTransfer.onProgress(function (event) {
            var downloadProgress = Math.floor((event.loaded / event.total) * 100);
            if (downloadProgress == 100) {
                alert.dismiss();
            }
            else {
                var message = document.getElementsByClassName('alert-message')[0];
                message && (message.innerHTML = '下载进度：' + downloadProgress + '%');
            }
        });
        return new Promise(function (resolve, reject) {
            fileTransfer.download(url, downloadUrl)
                .then(function (entry) {
                var destUrl = _this.dirPath + _this.dirRoot + '/' + _this.dir + '/' + _this.arrDirs[5];
                resolve(_this.unZipFile(entry.toURL(), destUrl, isData));
            })
                .catch(function (err) {
                reject(err);
            });
        });
    };
    /**
     *
     * @param srcFilePath
     * @returns {any}
     */
    FileService.prototype.movePicture = function (srcFilePath) {
        var _this = this;
        var error = "failure to move " + srcFilePath;
        if (!srcFilePath) {
            return Promise.reject(error);
        }
        var index = srcFilePath.lastIndexOf('/');
        if (index <= 0) {
            return Promise.reject(error);
        }
        var srcPath = srcFilePath.substring(0, index + 1);
        if (!srcPath) {
            return Promise.reject(error);
        }
        var fileName = srcFilePath.substring(index + 1);
        if (!fileName) {
            return Promise.reject(error);
        }
        return this.file.checkFile(srcPath, fileName)
            .then(function (result) { return _this.file.moveFile(srcPath, fileName, _this.getImagesDir(), fileName); })
            .then(function (entry) { return entry ? Promise.resolve(fileName) : Promise.reject(error); });
    };
    /**
     *
     * @param srcFilePath
     * @returns {any}
     */
    FileService.prototype.moveVideo = function (srcFilePath) {
        var _this = this;
        var error = "failure to move " + srcFilePath;
        if (!srcFilePath) {
            return Promise.reject(error);
        }
        var index = srcFilePath.lastIndexOf('/');
        if (index <= 0) {
            return Promise.reject(error);
        }
        var srcPath = srcFilePath.substring(0, index + 1);
        if (!srcPath) {
            return Promise.reject(error);
        }
        var fileName = srcFilePath.substring(index + 1);
        if (!fileName) {
            return Promise.reject(error);
        }
        return this.file.checkFile(srcPath, fileName)
            .then(function (result) { return _this.file.moveFile(srcPath, fileName, _this.getVideosDir(), fileName); })
            .then(function (entry) { return entry ? Promise.resolve(fileName) : Promise.reject(error); });
    };
    /**
     * 解压文件
     * @param sourceUrl
     * @param destUrl
     */
    FileService.prototype.unZipFile = function (sourceUrl, destUrl, isData) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.zip.unzip(sourceUrl, destUrl)
                .then(function (result) {
                console.log("unzip file success");
                if (!isData) {
                    resolve(_this.openApkFile(destUrl));
                }
                else {
                    resolve(true);
                }
            })
                .catch(function (error) {
                reject(error);
            });
        });
    };
    /**
     * 打开安装包
     * @param destPath
     */
    FileService.prototype.openApkFile = function (destPath) {
        var _this = this;
        var destUrl = destPath + this.apkName;
        return new Promise(function (resolve, reject) {
            _this.fileOpener.open(destUrl, 'application/vnd.android.package-archive')
                .then(function () {
                console.log('File is opened');
                resolve(true);
            })
                .catch(function (err) {
                console.log('Error openning file', err);
                reject(err);
            });
        });
    };
    return FileService;
}());
FileService = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["B" /* Injectable */])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__ionic_native_file__["a" /* File */],
        __WEBPACK_IMPORTED_MODULE_2__ionic_native_transfer__["a" /* Transfer */],
        __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["b" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_4__ionic_native_zip__["a" /* Zip */],
        __WEBPACK_IMPORTED_MODULE_5__ionic_native_file_opener__["a" /* FileOpener */]])
], FileService);

//# sourceMappingURL=FileService.js.map

/***/ }),

/***/ 231:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PopoverRecordPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_DataService__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_GlobalService__ = __webpack_require__(7);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var PopoverRecordPage = (function () {
    function PopoverRecordPage(viewCtrl, navParams, events, dataService, globalService) {
        this.viewCtrl = viewCtrl;
        this.navParams = navParams;
        this.events = events;
        this.dataService = dataService;
        this.globalService = globalService;
        this.isRecording = false;
    }
    PopoverRecordPage.prototype.ngOnInit = function () {
        if (this.navParams.data) {
            this.taskId = this.navParams.data.taskId;
        }
    };
    /**
     * 开始录音
     * @param ev
     */
    PopoverRecordPage.prototype.onStart = function (ev) {
        var _this = this;
        this.dataService.startRecordAudio()
            .then(function (result) {
            (_this.file = result.file, _this.name = result.name);
            if (_this.file && _this.name) {
                _this.isRecording = true;
                _this.time = new Date().getTime();
            }
            else {
                console.error('failure to record audio');
            }
        })
            .catch(function (error) { return console.error(error); });
    };
    /**
     * 结束录音&保存
     * @param ev
     */
    PopoverRecordPage.prototype.onEnd = function (ev) {
        this.close(true);
    };
    // onOk(ev: any): void {
    //   this.viewCtrl.dismiss();
    // }
    /**
     * 取消录音&不保存
     * @param ev
     */
    PopoverRecordPage.prototype.onCancel = function (ev) {
        this.close(false);
    };
    /**
     *
     * @param needSave
     */
    PopoverRecordPage.prototype.close = function (needSave) {
        var _this = this;
        if (this.file) {
            this.time = new Date().getTime() - this.time;
            this.dataService.endRecordAudio(this.file)
                .then(function (result) { return result && needSave && _this.time > 0 ? _this.dataService.saveAudio(_this.taskId, _this.name) : Promise.resolve(false); })
                .then(function (result) { return result ? _this.events.publish(_this.globalService.recordAudioFinishEvent, _this.name, _this.time) : Promise.resolve([]); })
                .catch(function (error) { return console.error(error); })
                .then(function () { return _this.viewCtrl.dismiss(); });
        }
        else {
            this.viewCtrl.dismiss();
        }
    };
    return PopoverRecordPage;
}());
PopoverRecordPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        template: "\n    <ion-list>\n      <!--<ion-list-header color=\"primary\">\u5F55\u97F3</ion-list-header>-->\n      <ion-row>\n        <ion-col style=\"display: flex; justify-content: center; align-items: center; margin-top: 10px;\">\n          <img src=\"assets/img/ic_record.png\" width=\"64\" height=\"64\">\n        </ion-col>\n      </ion-row>\n      \n      <ion-row *ngIf=\"isRecording\">\n        <ion-col style=\"display: flex; justify-content: center; align-items: center;\">\n          <ion-spinner name=\"dots\"></ion-spinner>\n        </ion-col>\n      </ion-row>\n      \n      <button ion-item style=\"text-align:center; color:#f53d3d;\" (click)=\"onStart($event)\" [class.selected]=\"isRecording\" *ngIf=\"!isRecording\">\u5F00\u59CB</button>\n      <button ion-item style=\"text-align:center; color:#f53d3d;\" (click)=\"onEnd($event)\" *ngIf=\"isRecording\">\u7ED3\u675F</button>\n      <!--<button ion-item style=\"text-align:center; color:#488aff;\" (click)=\"onOk($event)\">\u786E\u5B9A</button>-->\n      <button ion-item style=\"text-align:center; color:#488aff;\" (click)=\"onCancel($event)\">\u53D6\u6D88</button>\n    </ion-list>\n  ",
        styles: [
            ".selected {\n      font-weight: bold;\n    }"
        ]
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* ViewController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["k" /* NavParams */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_2__providers_DataService__["a" /* DataService */],
        __WEBPACK_IMPORTED_MODULE_3__providers_GlobalService__["a" /* GlobalService */]])
], PopoverRecordPage);

//# sourceMappingURL=PopoverRecordPage.js.map

/***/ }),

/***/ 232:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AttachmentPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_DataService__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_GlobalService__ = __webpack_require__(7);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var AttachmentPage = (function () {
    function AttachmentPage(navCtrl, dataService, globalService, alertCtrl) {
        this.navCtrl = navCtrl;
        this.dataService = dataService;
        this.globalService = globalService;
        this.alertCtrl = alertCtrl;
        this.title = "附件";
        this.pictures = [
            'assets/img/ic_add_materials.png',
            'assets/img/ic_add_materials.png',
            'assets/img/ic_add_materials.png',
            'assets/img/ic_add_materials.png',
            'assets/img/ic_add_materials.png',
            'assets/img/ic_add_materials.png'
        ];
        this.audios = [
            { name: '1', time: 10 },
            { name: '2', time: 20 },
            { name: '3', time: 30 }
        ];
        this.videos = [
            'http://128.1.3.60:38001/api/update/SVID_20171113_131106.mp4',
            'http://128.1.3.60:38001/api/update/SVID_20171113_131106.mp4',
            'http://128.1.3.60:38001/api/update/SVID_20171113_131106.mp4'
        ];
    }
    AttachmentPage.prototype.onPlay = function (audio) {
        /*if (!audio.name) {
          return;
        }
    
        let names: string[] = audio.name.split('#');
        if (!names || names.length !== 2) {
          return;
        }
    
        this.dataService.playAudio(names[0])
          .then(file => {
            if (file) {
              let prompt = this.alertCtrl.create({
                title: '提示',
                message: "结束播放语音",
                enableBackdropDismiss: false,
                buttons: [
                  {
                    text: '确定',
                    handler: data => {
                      console.log('Saved clicked');
                      this.dataService.stopAudio(file)
                        .catch(err => console.error(err));
                    }
                  }
                ]
              });
              prompt.present();
            }
          })
          .catch(err => console.error(err));*/
    };
    AttachmentPage.prototype.onPlayVideo = function (path) {
        /*if (!this.globalService.isChrome && path) {
          this.dataService.playCachedVideo(path, "SVID_20171113_131106.mp4")
            .then(data => console.log(data))
            .catch(error => console.error(error));
        }*/
    };
    return AttachmentPage;
}());
AttachmentPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-attachment',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\attachment\attachment.html"*/'<ion-header>\n\n  <ion-navbar color="primary">\n\n    <ion-title>\n\n      {{title}}\n\n    </ion-title>\n\n  </ion-navbar>\n\n</ion-header>\n\n\n\n<ion-content class="page-attachment">\n\n  <button ion-item icon-left>\n\n    <ion-icon name="camera"></ion-icon>\n\n    照片\n\n  </button>\n\n\n\n  <ion-grid style="width: 100%; height: 100px;">\n\n    <ion-row>\n\n      <ion-col col-4 class="col-img" *ngIf="pictures[0]">\n\n        <img class="picture" src="{{pictures[0]}}"/>\n\n      </ion-col>\n\n\n\n      <ion-col col-4 class="col-img" *ngIf="pictures[1]">\n\n        <img class="picture" src="{{pictures[1]}}"/>\n\n      </ion-col>\n\n\n\n      <ion-col col-4 class="col-img" *ngIf="pictures[2]">\n\n        <img class="picture" src="{{pictures[2]}}"/>\n\n      </ion-col>\n\n    </ion-row>\n\n  </ion-grid>\n\n\n\n  <ion-grid style="width: 100%; height: 100px;">\n\n    <ion-row>\n\n      <ion-col col-4 class="col-img" *ngIf="pictures[0]">\n\n        <img class="picture" src="{{pictures[3]}}"/>\n\n      </ion-col>\n\n\n\n      <ion-col col-4 class="col-img" *ngIf="pictures[1]">\n\n        <img class="picture" src="{{pictures[4]}}"/>\n\n      </ion-col>\n\n\n\n      <ion-col col-4 class="col-img" *ngIf="pictures[2]">\n\n        <img class="picture" src="{{pictures[5]}}"/>\n\n      </ion-col>\n\n    </ion-row>\n\n  </ion-grid>\n\n  <br>\n\n  <br>\n\n\n\n  <button ion-item icon-left>\n\n    <ion-icon name="microphone"></ion-icon>\n\n    语音\n\n  </button>\n\n\n\n  <ion-grid style="width: 100%; height: 150px;">\n\n    <ion-row *ngIf="audios[0].time > 0" class="audio">\n\n      <ion-col col-6 class="audio-info">{{audios[0].time}}s</ion-col>\n\n      <ion-col col-2>\n\n        <ion-icon name="play" class="audio-btn" (click)="onPlay(audios[0])"></ion-icon>\n\n      </ion-col>\n\n      <ion-col></ion-col>\n\n    </ion-row>\n\n\n\n    <ion-row *ngIf="audios[1].time > 0" class="audio">\n\n      <ion-col col-6 class="audio-info">{{audios[1].time}}s</ion-col>\n\n      <ion-col col-2>\n\n        <ion-icon name="play" class="audio-btn" (click)="onPlay(audios[1])"></ion-icon>\n\n      </ion-col>\n\n      <ion-col></ion-col>\n\n    </ion-row>\n\n\n\n    <ion-row *ngIf="audios[2].time > 0" class="audio">\n\n      <ion-col col-6 class="audio-info">{{audios[2].time}}s</ion-col>\n\n      <ion-col col-2>\n\n        <ion-icon name="play" class="audio-btn" (click)="onPlay(audios[2])"></ion-icon>\n\n      </ion-col>\n\n      <ion-col></ion-col>\n\n    </ion-row>\n\n  </ion-grid>\n\n\n\n  <br>\n\n  <br>\n\n  <button ion-item icon-left>\n\n    <ion-icon name="videocam"></ion-icon>\n\n    视频\n\n  </button>\n\n\n\n  <ion-grid style="width: 100%; height: 100px;">\n\n    <ion-row>\n\n      <ion-col col-4 class="col-video" *ngIf="videos[0]">\n\n        <video class="video" (click)="onPlayVideo(videos[0])" src="{{videos[0]}}"></video>\n\n      </ion-col>\n\n\n\n      <ion-col col-4 class="col-video" *ngIf="videos[1]">\n\n        <video class="video" (click)="onPlayVideo(videos[1])" src="{{videos[1]}}"></video>\n\n      </ion-col>\n\n\n\n      <ion-col col-4 class="col-video" *ngIf="pictures[2]">\n\n        <video class="video" (click)="onPlayVideo(videos[2])" src="{{videos[2]}}"></video>\n\n      </ion-col>\n\n    </ion-row>\n\n  </ion-grid>\n\n  <br>\n\n  <br>\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\attachment\attachment.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_2__providers_DataService__["a" /* DataService */],
        __WEBPACK_IMPORTED_MODULE_3__providers_GlobalService__["a" /* GlobalService */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */]])
], AttachmentPage);

//# sourceMappingURL=attachment.js.map

/***/ }),

/***/ 234:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SearchResultPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__searchdetail_searchdetails__ = __webpack_require__(235);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_DataService__ = __webpack_require__(13);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Created by zhangjing on 2017/6/26.
 */
var SearchResultPage = (function () {
    function SearchResultPage(navCtrl, navParams, loadingCtrl, dataService, alertCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.loadingCtrl = loadingCtrl;
        this.dataService = dataService;
        this.alertCtrl = alertCtrl;
        this.tag = "[SearchResultPage]";
        this.title = '查询结果';
        this.segmentName = "allTasks";
        this.items = [];
    }
    SearchResultPage.prototype.dismiss = function () {
        console.log('----- dismiss loading ------ ');
        this.loading.dismiss();
    };
    SearchResultPage.prototype.ngOnInit = function () {
        this.loading = this.loadingCtrl.create({
            content: '查询中...',
            dismissOnPageChange: true
        });
        this.loading.present();
        this.searchTask(this.navParams.get('tasks'));
    };
    /**
     * 查询工单
     * @param request
     */
    SearchResultPage.prototype.searchTask = function (request) {
        var _this = this;
        this.dataService.searchTask(request)
            .then(function (tasks) {
            _this.searchTaskCount(_this.navParams.get('tasks'));
            console.log(_this.tag + "getTasks: " + tasks);
            if (tasks.length <= 0) {
                var alert_1 = _this.alertCtrl.create({
                    title: '提示：',
                    buttons: ['确定'],
                });
                alert_1.setSubTitle('无结果');
                alert_1.present();
                _this.loading.dismiss();
            }
            else {
                _this.loading.dismiss();
                for (var _i = 0, tasks_1 = tasks; _i < tasks_1.length; _i++) {
                    var temp = tasks_1[_i];
                    _this.items.push({
                        customerId: temp.serialNo,
                        taskId: temp.taskNo,
                        contents: [
                            { name: '发生地址', value: temp.happenedAddress },
                            { name: '联系电话', value: temp.contactPhone },
                            { name: '反映人', value: temp.reportPerson },
                            { name: '反映类别', value: temp.reportType },
                            { name: '反映内容', value: temp.reportTypeText },
                            { name: '派遣时间', value: _this.formatDateTime(temp.sendTime) },
                            { name: '处理时限', value: _this.formatDateTime(temp.resolveLimitedTime) },
                            { name: '任务状态', value: temp.taskState }
                        ]
                    });
                }
            }
        })
            .catch(function (err) {
            console.log(err);
            var alert = _this.alertCtrl.create({
                title: '提示：',
                subTitle: err ? err : '出现错误',
                buttons: ['确定']
            });
            alert.present();
        });
    };
    /**
     * 查询工单数量
     * @param request
     */
    SearchResultPage.prototype.searchTaskCount = function (request) {
        var _this = this;
        this.dataService.searchTaskCount(request)
            .then(function (count) {
            console.log(_this.tag + "getTasksCount: " + count);
            if (count != null || undefined) {
                _this.totalTaskCount = count.totalTaskCount;
                _this.completedTaskCount = count.completedTaskCount;
                _this.unCompletedTaskCount = count.uncompletedTaskCount;
            }
        })
            .catch(function (err) {
            console.log(err);
        });
    };
    /**
     * jump to details
     * @param taskId
     */
    SearchResultPage.prototype.onDetails = function (taskId) {
        console.log(this.tag + taskId);
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__searchdetail_searchdetails__["a" /* SearchDetailsPage */], { 'taskId': taskId });
    };
    /**
     * utc时间格式化
     * @param inputTime
     * @returns {string}
     */
    SearchResultPage.prototype.formatDateTime = function (inputTime) {
        var date = new Date(inputTime);
        var y = date.getFullYear();
        var m = date.getMonth() + 1;
        var month = m < 10 ? ('0' + m) : m;
        var d = date.getDate();
        var day = d < 10 ? ('0' + d) : d;
        var h = date.getHours();
        var hour = h < 10 ? ('0' + h) : h;
        var minute = date.getMinutes();
        var second = date.getSeconds();
        var minutestr = minute < 10 ? ('0' + minute) : minute;
        var secondstr = second < 10 ? ('0' + second) : second;
        return y + '-' + month + '-' + day + ' ' + hour + ':' + minutestr + ':' + secondstr;
    };
    ;
    return SearchResultPage;
}());
SearchResultPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-searchresult',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\searchresult\searchresult.html"*/'<ion-header>\n\n  <ion-navbar color="primary">\n\n    <ion-title>\n\n      {{title}}\n\n    </ion-title>\n\n  </ion-navbar>\n\n</ion-header>\n\n\n\n<ion-content class="page-searchresult">\n\n  <ion-grid no-padding>\n\n    <ion-row>\n\n      <ion-col>\n\n        <div class="allTasks">总共单:{{totalTaskCount}}</div>\n\n      </ion-col>\n\n      <ion-col>\n\n        <div class="finishedTasks">已完成:{{completedTaskCount}}</div>\n\n      </ion-col>\n\n      <ion-col>\n\n        <div class="unFinishedTasks">未完成:{{unCompletedTaskCount}}</div>\n\n      </ion-col>\n\n    </ion-row>\n\n  </ion-grid>\n\n  <!--总工单-->\n\n  <ion-list>\n\n    <ion-card *ngFor="let item of items">\n\n      <ion-item>\n\n        <ion-avatar item-start>\n\n          <img src="assets/img/ic_mywork_avatar.png">\n\n        </ion-avatar>\n\n        <div><h2 class="card-header-label-hint">客服编号</h2>\n\n          <h2 class="card-header-label-content">{{item.customerId}}</h2></div>\n\n        <div><h2 class="card-header-label-hint">任务编号</h2>\n\n          <h2 class="card-header-label-content">{{item.taskId}}</h2></div>\n\n      </ion-item>\n\n\n\n      <ion-list>\n\n        <ion-item *ngFor="let content of item.contents">\n\n          <ion-label fixed class="label-name">{{content.name}}</ion-label>\n\n          <div item-content>{{content.value}}</div>\n\n        </ion-item>\n\n        <ion-item (click)="onDetails(item.taskId)">\n\n          <ion-label fixed class="label-name">详细信息</ion-label>\n\n          <ion-icon name=\'arrow-forward\' item-end></ion-icon>\n\n        </ion-item>\n\n      </ion-list>\n\n    </ion-card>\n\n  </ion-list>\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\searchresult\searchresult.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["k" /* NavParams */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* LoadingController */],
        __WEBPACK_IMPORTED_MODULE_3__providers_DataService__["a" /* DataService */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */]])
], SearchResultPage);

//# sourceMappingURL=searchresult.js.map

/***/ }),

/***/ 235:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export TaskState */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SearchDetailsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_DataService__ = __webpack_require__(13);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Created by zhangjing on 2017/6/27.
 */



var TaskState = (function () {
    function TaskState() {
    }
    return TaskState;
}());

var SearchDetailsPage = (function () {
    function SearchDetailsPage(navCtrl, navParams, dataService) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.dataService = dataService;
        this.tag = "[SearchDetailsPage]";
        this.title = '详情';
        this.segmentName = "basicInfo";
        this.states = [];
        this.taskId = this.navParams.get('taskId');
        this.searchTaskDetails(this.taskId);
    }
    SearchDetailsPage.prototype.searchTaskDetails = function (taskId) {
        var _this = this;
        this.dataService.searchTaskDetails(taskId)
            .then(function (details) {
            console.log(_this.tag + "getTasks: " + details);
            if (details != null || undefined) {
                _this.details = [
                    { name: '联系人名', value: details.contactName },
                    { name: '联系电话', value: details.contactPhone },
                    { name: '反映类别', value: details.issueType },
                    { name: '反映内容', value: details.issueContent },
                    { name: '发生地址', value: details.issueAddress },
                    { name: '发生时间', value: _this.formatDateTime(details.issueTime) },
                    { name: '受理备注', value: details.receiveComment },
                    { name: '开始时间', value: _this.formatDateTime(details.bookingStartTime) },
                    { name: '结束时间', value: _this.formatDateTime(details.bookingEndTime) },
                    { name: '到场时限', value: _this.formatDateTime(details.arrivedDeadLine) },
                    { name: '处理时限', value: _this.formatDateTime(details.replyDeadLine) },
                    { name: '延时时限', value: _this.formatDateTime(details.delayReplyDeadLine) },
                    { name: '派遣站点', value: details.assignStation },
                    { name: '派遣人', value: details.assignPerson },
                    { name: '派遣备注', value: details.assignComment }
                ];
                _this.setTaskState(details);
            }
        });
    };
    /**
     * 设置任务状态流程
     * @param details
     */
    SearchDetailsPage.prototype.setTaskState = function (details) {
        if (details.createTime != 0) {
            var temp = new TaskState();
            temp.state = '已派遣';
            temp.time = this.formatDateTime(details.createTime);
            this.states.push(temp);
        }
        if (details.stationAcceptTime != 0) {
            var temp = new TaskState();
            temp.state = '接收';
            temp.time = this.formatDateTime(details.stationAcceptTime);
            this.states.push(temp);
        }
        if (details.assignTime != 0) {
            var temp = new TaskState();
            temp.state = '已派工';
            temp.time = this.formatDateTime(details.assignTime);
            this.states.push(temp);
        }
        if (details.goTime != 0) {
            var temp = new TaskState();
            temp.state = '已出发';
            temp.time = this.formatDateTime(details.goTime);
            this.states.push(temp);
        }
        if (details.arrivedTime != 0) {
            var temp = new TaskState();
            temp.state = '已到场';
            temp.time = this.formatDateTime(details.arrivedTime);
            this.states.push(temp);
        }
        if (details.replyTime != 0) {
            var temp = new TaskState();
            temp.state = '已处理';
            temp.time = this.formatDateTime(details.replyTime);
            this.states.push(temp);
        }
        if (details.completedTime != 0) {
            var temp = new TaskState();
            temp.state = '已完成';
            temp.time = this.formatDateTime(details.completedTime);
            this.states.push(temp);
        }
        if (details.rejectTime != 0) {
            var temp = new TaskState();
            temp.state = '已拒绝';
            temp.time = this.formatDateTime(details.rejectTime);
            this.states.push(temp);
        }
        if (details.superviseTime != 0) {
            var temp = new TaskState();
            temp.state = '已销单';
            temp.time = this.formatDateTime(details.superviseTime);
            this.states.push(temp);
        }
        //排序
        this.states.sort(function (n1, n2) {
            if (n1.time < n2.time) {
                return 1;
            }
            if (n1.time > n2.time) {
                return -1;
            }
            if (n1.time == n2.time) {
                if (n1.state > n2.state) {
                    return 1;
                }
                else {
                    return -1;
                }
            }
            return 0;
        });
        console.log(this.tag + this.states);
    };
    /**
     * utc时间格式化
     * @param inputTime
     * @returns {string}
     */
    SearchDetailsPage.prototype.formatDateTime = function (inputTime) {
        var date = new Date(inputTime);
        var y = date.getFullYear();
        var m = date.getMonth() + 1;
        var month = m < 10 ? ('0' + m) : m;
        var d = date.getDate();
        var day = d < 10 ? ('0' + d) : d;
        var h = date.getHours();
        var hour = h < 10 ? ('0' + h) : h;
        var minute = date.getMinutes();
        var second = date.getSeconds();
        var minutestr = minute < 10 ? ('0' + minute) : minute;
        var secondstr = second < 10 ? ('0' + second) : second;
        return y + '-' + month + '-' + day + ' ' + hour + ':' + minutestr + ':' + secondstr;
    };
    ;
    return SearchDetailsPage;
}());
SearchDetailsPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-searchdetails',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\searchdetail\searchdetails.html"*/'<ion-header>\n\n  <ion-navbar color="primary">\n\n    <ion-title>\n\n      {{title}}\n\n    </ion-title>\n\n  </ion-navbar>\n\n\n\n  <ion-segment [(ngModel)]="segmentName">\n\n    <ion-segment-button value="basicInfo">\n\n      基本信息\n\n    </ion-segment-button>\n\n    <ion-segment-button value="taskState">\n\n      任务状态\n\n    </ion-segment-button>\n\n  </ion-segment>\n\n</ion-header>\n\n\n\n<ion-content class="page-searchdetails">\n\n\n\n\n\n  <div [ngSwitch]="segmentName">\n\n    <!--基本信息-->\n\n    <ion-list *ngSwitchCase="\'basicInfo\'">\n\n      <ion-item *ngFor="let detail of details">\n\n        <ion-label fixed class="label-name">\n\n          {{detail.name}}\n\n        </ion-label>\n\n        <div item-content>\n\n          {{detail.value}}\n\n        </div>\n\n      </ion-item>\n\n    </ion-list>\n\n\n\n\n\n    <!--任务状态-->\n\n    <ion-list *ngSwitchCase="\'taskState\'">\n\n      <ul class="list">\n\n        <li *ngFor="let state of states" [ngClass]="{\'current\':state==states[0]}">{{state.state}}<br/>{{state.time}}\n\n          <div class="circle"><b class="circle"></b></div>\n\n        </li>\n\n      </ul>\n\n    </ion-list>\n\n\n\n  </div>\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\searchdetail\searchdetails.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["k" /* NavParams */],
        __WEBPACK_IMPORTED_MODULE_2__providers_DataService__["a" /* DataService */]])
], SearchDetailsPage);

//# sourceMappingURL=searchdetails.js.map

/***/ }),

/***/ 236:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return WorkInfoPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_DataService__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_GlobalService__ = __webpack_require__(7);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var WorkInfoPage = (function () {
    function WorkInfoPage(navCtrl, navParams, alertCtrl, events, dataService, globalService) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.alertCtrl = alertCtrl;
        this.events = events;
        this.dataService = dataService;
        this.globalService = globalService;
        this.tag = "[WorkInfoPage]";
        this.detailNames = {
            contactName: '联系人名',
            contactPhone: '联系电话',
            issueType: '反映类别',
            issueContent: '反映内容',
            issueAddress: '发生地址',
            issueTime: '发生时间',
            receiveComment: '受理备注',
            bookingStartTime: '开始时间',
            bookingEndTime: '结束时间',
            arrivedDeadLine: '到场时限',
            replyDeadLine: '处理时限',
            delayReplyDeadLine: '延时时限',
            assignStation: '派遣站点',
            assignPerson: '派遣人',
            assignComment: '派遣备注'
        };
        this.title = '任务详情';
        this.segmentName = "detailInfo";
        this.details = [];
        this.dispatches = [
            { name: '派工编号', value: '', isActive: false },
            { name: '施工人员', value: '请选择施工人员', isActive: true },
            { name: '施工日期', value: '', isActive: true, isDate: true },
            { name: '施工时间', value: '', isActive: true, isTime: true },
            { name: '处理备注', value: '备注可为空', isActive: true }
        ];
        this.myDate1 = '2017-07-19';
        this.myDate2 = '15:30:55';
    }
    /**
     * 初始化
     */
    WorkInfoPage.prototype.ngOnInit = function () {
        console.log(this.tag, "ngOnInit");
        var taskId = this.navParams.data;
        this.getDetail(taskId);
        this.dispatchInfo = {
            taskId: taskId,
            dispatchOperator: this.globalService.userId,
            beDispatchedPerson: Number.NaN,
            dispatchTime: new Date().getTime(),
            dispatchType: 1,
            dispatchComment: ''
        };
        this.dispatches[0].value = taskId;
        var time = this.globalService.getFormatTime(new Date(this.dispatchInfo.dispatchTime));
        var times = time.split(' ');
        this.dispatches[2].value = times[0];
        this.dispatches[3].value = times[1];
    };
    /**
     * 派单
     * @param ev
     */
    WorkInfoPage.prototype.onDispatch = function (ev) {
        var _this = this;
        var time = this.dispatches[2].value + " " + this.dispatches[3].value;
        var utc = new Date(time).getTime() + 1000;
        if (this.dispatchInfo.dispatchTime > utc) {
            return this.globalService.showToast('施工日期或施工时间不准确!');
        }
        this.dispatchInfo.dispatchTime = utc;
        this.dataService.dispatch(this.dispatchInfo)
            .then(function (result) {
            _this.events.publish(_this.globalService.stationWorkUpdateEvent);
            _this.navCtrl.pop();
        })
            .catch(function (error) { return console.error(error); });
    };
    /**
     * tab切换
     * @param segment
     */
    WorkInfoPage.prototype.segmentChanged = function (segment) {
        console.log(this.tag, segment);
        if (segment.value === 'dispatchInfo') {
            this.setDispatchInfo();
        }
    };
    /**
     * 选择派工信息
     * @param dispatch
     */
    WorkInfoPage.prototype.itemSelected = function (dispatch) {
        switch (dispatch.name) {
            case '施工人员':
                this.popupPersonnelAlert();
                break;
            case '处理备注':
                this.popupRemarkAlert();
                break;
            default:
                break;
        }
    };
    /**
     * 获取详细详细
     * @param taskId
     */
    WorkInfoPage.prototype.getDetail = function (taskId) {
        var _this = this;
        this.dataService.searchTaskDetails(taskId)
            .then(function (detail) {
            console.log(detail);
            _this.detailObject2Array(detail, _this.details);
        })
            .catch(function (error) { return console.error(error); });
    };
    /**
     * 对象转数组
     * @param srcDetail
     * @param destDetail
     */
    WorkInfoPage.prototype.detailObject2Array = function (srcDetail, destDetail) {
        for (var key in this.detailNames) {
            if (srcDetail.hasOwnProperty(key)) {
                destDetail.push({
                    name: this.detailNames[key],
                    value: this.transform2String(srcDetail[key])
                });
            }
        }
    };
    /**
     * 转换成字符串
     * @param value
     * @returns {string}
     */
    WorkInfoPage.prototype.transform2String = function (value) {
        if (typeof value === 'number' && value > 1000000) {
            return this.globalService.getFormatTime(new Date(value));
        }
        return value.toString();
    };
    /**
     * 设置派单信息
     */
    WorkInfoPage.prototype.setDispatchInfo = function () {
        var _this = this;
        if (!this.dispatchInfo.beDispatchedPerson) {
            this.dataService.getPersonnels(this.globalService.userId)
                .then(function (personnels) {
                _this.personnels = personnels;
                if (personnels.length > 0) {
                    _this.dispatches[1].value = personnels[0].fieldPersonnelName;
                    _this.dispatchInfo.beDispatchedPerson = personnels[0].fieldPersonnelId;
                }
            })
                .catch(function (error) { return console.error(error); });
        }
    };
    /**
     * 选择施工人员
     */
    WorkInfoPage.prototype.popupPersonnelAlert = function () {
        var _this = this;
        if (!this.personnels || this.personnels.length <= 0) {
            return this.globalService.showToast("施工人员为空!");
        }
        var alert = this.alertCtrl.create();
        alert.setTitle('请选择施工人员');
        for (var _i = 0, _a = this.personnels; _i < _a.length; _i++) {
            var personnel = _a[_i];
            alert.addInput({
                type: 'radio',
                label: personnel.fieldPersonnelName,
                value: personnel.fieldPersonnelName + "#" + personnel.fieldPersonnelId,
                checked: this.dispatchInfo.beDispatchedPerson === personnel.fieldPersonnelId
            });
        }
        alert.addButton('取消');
        alert.addButton({
            text: '确定',
            handler: function (data) {
                var values = data.split("#");
                _this.dispatches[1].value = values[0];
                _this.dispatchInfo.beDispatchedPerson = Number.parseInt(values[1]);
            }
        });
        alert.present().then(function () {
            //this.testRadioOpen = true;
        });
    };
    /**
     * 处理备注
     */
    WorkInfoPage.prototype.popupRemarkAlert = function () {
        var _this = this;
        var prompt = this.alertCtrl.create({
            title: '处理备注',
            message: "请输入处理备注",
            inputs: [
                {
                    name: 'remark',
                    placeholder: ''
                },
            ],
            buttons: [
                {
                    text: '取消',
                    handler: function (data) {
                        console.log('Cancel clicked');
                    }
                },
                {
                    text: '确定',
                    handler: function (data) {
                        console.log('Saved clicked');
                        _this.dispatches[4].value = data.remark;
                        _this.dispatchInfo.dispatchComment = data.remark;
                    }
                }
            ]
        });
        prompt.present();
    };
    return WorkInfoPage;
}());
WorkInfoPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-workinfo',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\workinfo\workinfo.html"*/'<ion-header>\n\n  <ion-navbar color="primary">\n\n    <ion-title>\n\n      {{title}}\n\n    </ion-title>\n\n\n\n    <ion-buttons end>\n\n      <button ion-button icon-only color="white" (click)="onDispatch($event)">\n\n        <ion-icon name="checkmark-circle"></ion-icon>\n\n      </button>\n\n    </ion-buttons>\n\n  </ion-navbar>\n\n\n\n  <ion-toolbar no-border-top>\n\n    <ion-segment [(ngModel)]="segmentName" (ionChange)="segmentChanged($event)">\n\n      <ion-segment-button value="detailInfo">\n\n        基本信息\n\n      </ion-segment-button>\n\n      <ion-segment-button value="dispatchInfo">\n\n        派工信息\n\n      </ion-segment-button>\n\n    </ion-segment>\n\n  </ion-toolbar>\n\n</ion-header>\n\n\n\n<ion-content class="page-workinfo">\n\n\n\n  <div [ngSwitch]="segmentName">\n\n    <ion-list *ngSwitchCase="\'detailInfo\'">\n\n      <ion-item *ngFor="let detail of details">\n\n        <ion-label fixed class="label-name">\n\n          {{detail.name}}\n\n        </ion-label>\n\n        <div item-content>\n\n          {{detail.value}}\n\n        </div>\n\n      </ion-item>\n\n    </ion-list>\n\n\n\n    <ion-list *ngSwitchCase="\'dispatchInfo\'">\n\n      <ion-item *ngFor="let dispatch of dispatches" class="dispatch-item" (click)="itemSelected(dispatch)">\n\n        <ion-label fixed class="label-name">\n\n          {{dispatch.name}}\n\n        </ion-label>\n\n        <div item-content *ngIf="!dispatch.isDate&&!dispatch.isTime">\n\n          {{dispatch.value}}\n\n        </div>\n\n        <ion-datetime *ngIf="dispatch.isDate" style="padding-left: 0px;"\n\n                      cancelText=\'取消\' doneText=\'确定\' displayFormat="YYYY-MM-DD"\n\n                      pickerFormat="YYYY-MM-DD" [(ngModel)]="dispatch.value"></ion-datetime>\n\n        <ion-datetime *ngIf="dispatch.isTime" style="padding-left: 0px;"\n\n                      cancelText=\'取消\' doneText=\'确定\' displayFormat="HH:mm:ss"\n\n                      pickerFormat="HH:mm:ss" [(ngModel)]="dispatch.value"></ion-datetime>\n\n        <ion-icon name="ios-arrow-forward" item-end *ngIf="dispatch.isActive"></ion-icon>\n\n      </ion-item>\n\n    </ion-list>\n\n  </div>\n\n\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\workinfo\workinfo.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["k" /* NavParams */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_2__providers_DataService__["a" /* DataService */],
        __WEBPACK_IMPORTED_MODULE_3__providers_GlobalService__["a" /* GlobalService */]])
], WorkInfoPage);

//# sourceMappingURL=workinfo.js.map

/***/ }),

/***/ 237:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return NewsDetailsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var NewsDetailsPage = (function () {
    function NewsDetailsPage(navCtrl, navParams) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.title = '公告详情';
        this.newsTitle = this.navParams.get('title');
        this.newsTime = this.navParams.get('time');
        this.newsContent = this.navParams.get('newsContent');
    }
    return NewsDetailsPage;
}());
NewsDetailsPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-newsdetails',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\newsdetails\newsdetails.html"*/'<ion-header>\n\n  <ion-navbar color="primary">\n\n    <ion-title>\n\n      {{title}}\n\n    </ion-title>\n\n  </ion-navbar>\n\n</ion-header>\n\n\n\n<ion-content class="page-newsdetails">\n\n\n\n  <h2>{{newsTitle}}</h2>\n\n  <h3>{{newsTime}}</h3>\n\n  <p>{{newsContent}}</p>\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\newsdetails\newsdetails.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["k" /* NavParams */]])
], NewsDetailsPage);

//# sourceMappingURL=newsdetails.js.map

/***/ }),

/***/ 238:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MaterialsAddPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__model_MaterialsInfo__ = __webpack_require__(128);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_DataService__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_ConfigService__ = __webpack_require__(18);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var MaterialsAddPage = (function () {
    function MaterialsAddPage(navCtrl, globalService, dataService, configService, alertCtrl, events, navParams) {
        this.navCtrl = navCtrl;
        this.globalService = globalService;
        this.dataService = dataService;
        this.configService = configService;
        this.alertCtrl = alertCtrl;
        this.events = events;
        this.navParams = navParams;
        this.tag = "[MaterialsAddPage]";
        this.title = '材料登记';
        this.buttonStr = '添加';
        this.count = 0; //数量
    }
    MaterialsAddPage.prototype.ngOnInit = function () {
        var _this = this;
        Promise.all([this.getOptMaterialLB(), this.getMaterialUnit()])
            .then(function (result) {
            _this.editMaterialInfo();
        })
            .catch(function (error) {
            console.log(error);
        });
    };
    /**
     * 获得材料类别
     * @returns {Promise<T>}
     */
    MaterialsAddPage.prototype.getOptMaterialLB = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.dataService.getOptMaterialLB()
                .then(function (materials) {
                if (materials && materials.length > 0) {
                    _this.optMaterialsLB = materials;
                    resolve(true);
                }
                else {
                    reject(false);
                }
            })
                .catch(function (error) {
                reject(error);
            });
        });
    };
    /**
     * 型号
     * @param parentId
     * @returns {Promise<T>}
     */
    MaterialsAddPage.prototype.getOptMaterialXH = function (parentId) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.dataService.getOptMaterialXH(parentId)
                .then(function (materials) {
                if (materials && materials.length > 0) {
                    _this.optMaterialsXH = materials;
                    resolve(true);
                }
                else {
                    reject(false);
                }
            })
                .catch(function (error) {
                reject(error);
            });
        });
    };
    /**
     * 规格
     * @param parentId
     * @returns {Promise<T>}
     */
    MaterialsAddPage.prototype.getOptMaterialGG = function (parentId) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.dataService.getOptMaterialGG(parentId)
                .then(function (materials) {
                if (materials && materials.length > 0) {
                    _this.optMaterialsGG = materials;
                    resolve(true);
                }
                else {
                    reject(false);
                }
            })
                .catch(function (error) {
                reject(error);
            });
        });
    };
    /**
     * 厂家
     * @param parentId
     * @returns {Promise<T>}
     */
    MaterialsAddPage.prototype.getOptMaterialCJ = function (parentId) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.dataService.getOptMaterialCJ(parentId)
                .then(function (materials) {
                if (materials && materials.length > 0) {
                    _this.optMaterialsCJ = materials;
                    resolve(true);
                }
                else {
                    reject(false);
                }
            })
                .catch(function (error) {
                reject(error);
            });
        });
    };
    /**
     * 单位
     * @returns {Promise<T>}
     */
    MaterialsAddPage.prototype.getMaterialUnit = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.configService.getMaterialUnit()
                .then(function (units) {
                if (units && units.length > 0) {
                    _this.materialsUnits = units;
                    resolve(true);
                }
                else {
                    reject(false);
                }
            })
                .catch(function (error) {
                reject(error);
            });
        });
    };
    /**
     * 修改材料信息
     */
    MaterialsAddPage.prototype.editMaterialInfo = function () {
        if (this.navParams.get('edit')) {
            var materials = this.navParams.get('edit');
            this.materialLBID = materials.category.id;
            this.materialXHID = materials.type.id;
            this.materialGGID = materials.size.id;
            this.materialCJID = materials.productor.id;
            this.unitID = materials.unit.id;
            this.count = materials.count;
            this.remark = materials.remark;
            this.buttonStr = '保存修改';
            Promise.all([this.getOptMaterialXH(this.materialLBID), this.getOptMaterialGG(this.materialXHID),
                this.getOptMaterialCJ(this.materialGGID)]);
        }
    };
    /**
     * 选择材料类别
     */
    MaterialsAddPage.prototype.selectMaterialLB = function () {
        var _this = this;
        console.log(this.tag, this.materialLBID);
        this.dataService.getOptMaterialXH(this.materialLBID)
            .then(function (materials) {
            _this.optMaterialsXH = materials;
            _this.materialXHID = null;
            _this.optMaterialsGG.splice(0, _this.optMaterialsGG.length); //清空规格
            _this.optMaterialsCJ.splice(0, _this.optMaterialsCJ.length); //清空厂家
        })
            .catch(function (error) {
            console.log(error);
        });
    };
    /**
     * 选择材料型号
     */
    MaterialsAddPage.prototype.selectMaterialXH = function () {
        var _this = this;
        this.dataService.getOptMaterialGG(this.materialXHID)
            .then(function (materials) {
            _this.optMaterialsGG = materials;
            _this.materialGGID = null;
            _this.optMaterialsCJ.splice(0, _this.optMaterialsCJ.length);
        })
            .catch(function (error) {
            console.log(error);
        });
    };
    /**
     * 选择材料规格
     */
    MaterialsAddPage.prototype.selectMaterialGG = function () {
        var _this = this;
        this.dataService.getOptMaterialCJ(this.materialGGID)
            .then(function (materials) {
            _this.optMaterialsCJ = materials;
            _this.materialCJID = null;
        })
            .catch(function (error) {
            console.log(error);
        });
    };
    /**
     * 数量（增加）
     */
    MaterialsAddPage.prototype.addAccount = function () {
        this.count++;
    };
    /**
     * 数量（减少）
     */
    MaterialsAddPage.prototype.reduceAccount = function () {
        this.count = (--this.count <= 0) ? 0 : this.count;
    };
    /**
     * 添加材料
     */
    MaterialsAddPage.prototype.addClick = function () {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '确认信息无误？',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log('Disagree clicked');
                    }
                },
                {
                    text: '确定',
                    handler: function () {
                        var materialInfo = new __WEBPACK_IMPORTED_MODULE_3__model_MaterialsInfo__["c" /* MaterialsInfo */]();
                        _this.foreachMaterial(materialInfo);
                        materialInfo.count = _this.count; //数量
                        materialInfo.remark = _this.remark; //备注
                        var isSave = _this.buttonStr == '添加';
                        _this.events.publish(_this.globalService.materialsUpdateEvent, isSave, materialInfo);
                        _this.navCtrl.pop();
                    }
                }
            ]
        });
        confirm.present();
    };
    /**
     * 遍历材料和单位
     * @param info
     */
    MaterialsAddPage.prototype.foreachMaterial = function (info) {
        for (var _i = 0, _a = this.optMaterialsLB; _i < _a.length; _i++) {
            var material = _a[_i];
            if (material.id == this.materialLBID) {
                info.category = material;
                break;
            }
        }
        for (var _b = 0, _c = this.optMaterialsXH; _b < _c.length; _b++) {
            var material = _c[_b];
            if (material.id == this.materialXHID) {
                info.type = material;
                break;
            }
        }
        for (var _d = 0, _e = this.optMaterialsGG; _d < _e.length; _d++) {
            var material = _e[_d];
            if (material.id == this.materialGGID) {
                info.size = material;
                break;
            }
        }
        for (var _f = 0, _g = this.optMaterialsCJ; _f < _g.length; _f++) {
            var material = _g[_f];
            if (material.id == this.materialCJID) {
                info.productor = material;
                break;
            }
        }
        for (var _h = 0, _j = this.materialsUnits; _h < _j.length; _h++) {
            var unit = _j[_h];
            if (unit.id == this.unitID) {
                info.unit = unit;
                break;
            }
        }
    };
    return MaterialsAddPage;
}());
MaterialsAddPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-materialsadd',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\materialsadd\materialsadd.html"*/'<ion-header>\n\n  <ion-navbar color="primary">\n\n    <ion-title>\n\n      {{title}}\n\n    </ion-title>\n\n  </ion-navbar>\n\n</ion-header>\n\n\n\n<ion-content>\n\n\n\n  <ion-list>\n\n\n\n    <ion-item>\n\n      <ion-label>材料类别：</ion-label>\n\n      <ion-select okText="确定" cancelText="取消" [(ngModel)]="materialLBID" (ionChange)="selectMaterialLB()">\n\n        <ion-option *ngFor="let type of optMaterialsLB" value={{type.id}}>{{type.name}}</ion-option>\n\n      </ion-select>\n\n    </ion-item>\n\n\n\n\n\n    <ion-item>\n\n      <ion-label>材料型号：</ion-label>\n\n      <ion-select okText="确定" cancelText="取消" [(ngModel)]="materialXHID" (ionChange)="selectMaterialXH()">\n\n        <ion-option *ngFor="let type of optMaterialsXH" value={{type.id}}>{{type.name}}</ion-option>\n\n      </ion-select>\n\n    </ion-item>\n\n\n\n    <ion-item>\n\n      <ion-label>材料规格：</ion-label>\n\n      <ion-select okText="确定" cancelText="取消" [(ngModel)]="materialGGID" (ionChange)="selectMaterialGG()">\n\n        <ion-option *ngFor="let type of optMaterialsGG" value={{type.id}}>{{type.name}}</ion-option>\n\n      </ion-select>\n\n    </ion-item>\n\n\n\n    <ion-item>\n\n      <ion-label>生产厂家：</ion-label>\n\n      <ion-select okText="确定" cancelText="取消" [(ngModel)]="materialCJID">\n\n        <ion-option *ngFor="let type of optMaterialsCJ" value={{type.id}}>{{type.name}}</ion-option>\n\n      </ion-select>\n\n    </ion-item>\n\n\n\n    <ion-item>\n\n      <ion-label>单位：</ion-label>\n\n      <ion-select okText="确定" cancelText="取消" [(ngModel)]="unitID" (ionChange)="selectMaterialUnit()">\n\n        <ion-option *ngFor="let type of materialsUnits" value={{type.id}}>{{type.text}}</ion-option>\n\n      </ion-select>\n\n    </ion-item>\n\n\n\n    <ion-item>\n\n      <button item-left ion-button color="primary" clear icon-only (click)="reduceAccount()">\n\n        <ion-icon name=\'remove-circle\' is-active="false"></ion-icon>\n\n      </button>\n\n      <ion-label class="account">{{count}}</ion-label>\n\n      <button item-right ion-button color="primary" clear icon-only (click)="addAccount()">\n\n        <ion-icon name=\'add-circle\' is-active="false"></ion-icon>\n\n      </button>\n\n    </ion-item>\n\n\n\n    <ion-item>\n\n      <ion-label>备注：</ion-label>\n\n      <ion-input type="text" [(ngModel)]="remark"></ion-input>\n\n    </ion-item>\n\n  </ion-list>\n\n\n\n  <ion-row>\n\n    <ion-col>\n\n      <div class="add-button">\n\n        <button ion-button [disabled]="!materialLBID||!materialXHID||!materialGGID||!materialCJID||!unitID||count==0"\n\n                type="submit" block (click)="addClick()">{{buttonStr}}\n\n        </button>\n\n      </div>\n\n    </ion-col>\n\n  </ion-row>\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\materialsadd\materialsadd.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_2__providers_GlobalService__["a" /* GlobalService */],
        __WEBPACK_IMPORTED_MODULE_4__providers_DataService__["a" /* DataService */],
        __WEBPACK_IMPORTED_MODULE_5__providers_ConfigService__["a" /* ConfigService */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["k" /* NavParams */]])
], MaterialsAddPage);

//# sourceMappingURL=materialsadd.js.map

/***/ }),

/***/ 239:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return StorageService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/**
 * Created by zhangjing on 2017/6/14.
 */
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

/**
 * 本地存储
 */
var StorageService = (function () {
    function StorageService() {
    }
    StorageService.prototype.write = function (key, value) {
        if (value) {
            value = JSON.stringify(value);
        }
        localStorage.setItem(key, value);
    };
    StorageService.prototype.read = function (key) {
        var value = localStorage.getItem(key);
        if (value && value != "undefined" && value != "null") {
            return JSON.parse(value);
        }
        return null;
    };
    StorageService.prototype.remove = function (key) {
        localStorage.removeItem(key);
    };
    StorageService.prototype.clear = function () {
        sessionStorage.clear();
    };
    return StorageService;
}());
StorageService = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["B" /* Injectable */])(),
    __metadata("design:paramtypes", [])
], StorageService);

//# sourceMappingURL=StorageService.js.map

/***/ }),

/***/ 240:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return NetworkSetPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_ConfigService__ = __webpack_require__(18);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/**
 * 网络设置
 * Created by zhangjing on 2017/8/24.
 */
var NetworkSetPage = (function () {
    function NetworkSetPage(configService, toastCtrl, viewCtrl) {
        this.configService = configService;
        this.toastCtrl = toastCtrl;
        this.viewCtrl = viewCtrl;
    }
    NetworkSetPage.prototype.ngOnInit = function () {
        var _this = this;
        Promise.all([this.configService.getServerBaseUris(), this.configService.getFileBaseUris(), this.configService.getMaterialsBaseUris()])
            .then(function (_a) {
            var _b = _a[0], hotLineOuterBaseUri = _b[0], hotLineInnerBaseUri = _b[1], _c = _a[1], fileOuterBaseUri = _c[0], fileInnerBaseUri = _c[1], _d = _a[2], materialsOuterBaseUri = _d[0], materialsInnerBaseUri = _d[1];
            _this.hotLineOuterBaseUri = hotLineOuterBaseUri;
            _this.hotLineInnerBaseUri = hotLineInnerBaseUri;
            _this.fileOuterBaseUri = fileOuterBaseUri;
            _this.fileInnerBaseUri = fileInnerBaseUri;
            _this.materialsOuterBaseUri = materialsOuterBaseUri;
            _this.materialsInnerBaseUri = materialsInnerBaseUri;
        })
            .then(function () { return _this.configService.isOuterNetwork(); })
            .then(function (result) { return _this.isOuterNet = result; })
            .then(function () { return _this.showOrHideMaterial(); })
            .catch(function (err) { return console.log(err); });
    };
    NetworkSetPage.prototype.showOrHideMaterial = function () {
        var _this = this;
        return this.configService.getSysRegion()
            .then(function (region) {
            if (region && region === __WEBPACK_IMPORTED_MODULE_2__providers_ConfigService__["a" /* ConfigService */].fushunRegion) {
                _this.showMaterial = true;
            }
        })
            .catch(function (error) { return console.error(error); })
            .then(function () { return _this.showMaterial = false; });
    };
    /**
     * 切换内外网
     */
    // notifyIsOutNet(): void {
    //   this.isOuterNet = !this.isOuterNet;
    //   // console.log(this.tag + "Toggled:" + this.isOuterNet);
    //   // this.configService.setIsOuterNet(this.isOuterNet)
    //   //   .then(result => {
    //   //     if (!result) {
    //   //       this.isOuterNet = !this.isOuterNet;
    //   //     } else {
    //   //       this.getServerBaseUri();
    //   //     }
    //   //   })
    //   //   .catch(error => {
    //   //     console.log(error);
    //   //   })
    // }
    // /**
    //  * 数据服务地址
    //  */
    // private getServerBaseUri() {
    //   Promise.all([this.getHotlineNetwork(), this.getMaterialNetwork()])
    //     .then(result => {
    //       console.log(this.tag, result);
    //       this.serverBaseUri = result[0];
    //       this.materialsBaseUri = result[1];
    //     })
    //     .catch(err => {
    //       console.log(err);
    //     })
    // }
    //
    // /**
    //  * 热线地址
    //  * @returns {Promise<T>}
    //  */
    // private getHotlineNetwork(): Promise<string> {
    //   return new Promise((resolve, reject) => {
    //     this.configService.getServerBaseUri()
    //       .then(uri => {
    //         resolve(uri);
    //       })
    //       .catch(err => {
    //         reject(err);
    //       })
    //   })
    // }
    //
    // /**
    //  * 材料地址
    //  * @returns {Promise<T>}
    //  */
    // private getMaterialNetwork(): Promise<string> {
    //   return new Promise((resolve, reject) => {
    //     this.configService.getMaterialsBaseUri()
    //       .then(uri => {
    //         resolve(uri);
    //       })
    //       .catch(err => {
    //         reject(err);
    //       })
    //   })
    // }
    NetworkSetPage.prototype.onOk = function (ev) {
        var _this = this;
        var toast = this.toastCtrl.create({
            duration: 2000,
            position: 'bottom',
        });
        if (!this.hotLineOuterBaseUri
            || !this.hotLineInnerBaseUri
            || !this.fileOuterBaseUri
            || !this.fileInnerBaseUri
            || !this.materialsOuterBaseUri
            || !this.materialsInnerBaseUri) {
            toast.setMessage('请输入有效地址').present();
            return;
        }
        Promise.all([this.configService.setServerBaseUris(this.hotLineOuterBaseUri, this.hotLineInnerBaseUri, this.isOuterNet),
            this.configService.setFileBaseUris(this.fileOuterBaseUri, this.fileInnerBaseUri, this.isOuterNet),
            this.configService.setMaterialBaseUris(this.materialsOuterBaseUri, this.materialsInnerBaseUri, this.isOuterNet)])
            .then(function (result) {
            toast.setMessage('保存成功').present();
        })
            .catch(function (error) {
            console.error(error);
            toast.setMessage('保存失败').present();
        })
            .then(function () { return _this.viewCtrl.dismiss(); });
    };
    NetworkSetPage.prototype.onCancel = function (ev) {
        this.viewCtrl.dismiss();
    };
    return NetworkSetPage;
}());
NetworkSetPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        template: "\n    <ion-list>\n      <ion-list-header color=\"primary\">\u7F51\u7EDC\u8BBE\u7F6E</ion-list-header>\n      \n      <ion-item>\n        <ion-label color=\"label\">\u6570\u636E\u670D\u52A1\u5916\u7F51\u5730\u5740:</ion-label>\n      </ion-item>\n      <ion-item>\n        <ion-input type=\"text\" [(ngModel)]=\"hotLineOuterBaseUri\" clearInput></ion-input>\n      </ion-item>\n      \n      <ion-item>\n        <ion-label color=\"label\">\u6570\u636E\u670D\u52A1\u5185\u7F51\u5730\u5740:</ion-label>\n      </ion-item>\n      <ion-item>\n        <ion-input type=\"text\" [(ngModel)]=\"hotLineInnerBaseUri\" clearInput></ion-input>\n      </ion-item>\n      \n      <ion-item>\n        <ion-label color=\"label\">\u6587\u4EF6\u670D\u52A1\u5916\u7F51\u5730\u5740:</ion-label>\n      </ion-item>\n      <ion-item>\n        <ion-input type=\"text\" [(ngModel)]=\"fileOuterBaseUri\" clearInput></ion-input>\n      </ion-item>\n      \n      <ion-item>\n        <ion-label color=\"label\">\u6587\u4EF6\u670D\u52A1\u5185\u7F51\u5730\u5740:</ion-label>\n      </ion-item>\n      <ion-item>\n        <ion-input type=\"text\" [(ngModel)]=\"fileInnerBaseUri\" clearInput></ion-input>\n      </ion-item>\n      \n      <ion-item *ngIf=\"showMaterial\">\n        <ion-label color=\"label\">\u6750\u6599\u670D\u52A1\u5916\u7F51\u5730\u5740:</ion-label>\n      </ion-item>\n      <ion-item *ngIf=\"showMaterial\">\n        <ion-input type=\"text\" [(ngModel)]=\"materialsOuterBaseUri\" clearInput></ion-input>\n      </ion-item>\n      \n      <ion-item *ngIf=\"showMaterial\">\n        <ion-label color=\"label\">\u6750\u6599\u670D\u52A1\u5185\u7F51\u5730\u5740:</ion-label>\n      </ion-item>\n      <ion-item *ngIf=\"showMaterial\">\n        <ion-input type=\"text\" [(ngModel)]=\"materialsInnerBaseUri\" clearInput></ion-input>\n      </ion-item>\n      \n      <ion-item>\n        <ion-checkbox [(ngModel)]=\"isOuterNet\"></ion-checkbox>\n        <ion-label>\u4F7F\u7528\u5916\u7F51</ion-label>\n      </ion-item>\n\n      <button ion-item style=\"text-align:center; color:#488aff;\" (click)=\"onOk($event)\">\u786E\u5B9A</button>\n      <button ion-item style=\"text-align:center; color:#488aff;\" (click)=\"onCancel($event)\">\u53D6\u6D88</button>\n    </ion-list>\n  ",
        styles: [
            ".selected {\n      font-weight: bold;\n    }"
        ]
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__providers_ConfigService__["a" /* ConfigService */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["o" /* ToastController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* ViewController */]])
], NetworkSetPage);

//# sourceMappingURL=networkset.js.map

/***/ }),

/***/ 241:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OverdueTimePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_ConfigService__ = __webpack_require__(18);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var OverdueTimePage = (function () {
    function OverdueTimePage(configService, toastCtrl, viewCtrl) {
        this.configService = configService;
        this.toastCtrl = toastCtrl;
        this.viewCtrl = viewCtrl;
        this.tag = "[OverdueTimePage]";
    }
    OverdueTimePage.prototype.ngOnInit = function () {
        this.getOverdueTime();
    };
    OverdueTimePage.prototype.getOverdueTime = function () {
        var _this = this;
        return this.configService.getOverdueTime()
            .then(function (overdueTime) { return _this.overdueTime = overdueTime; })
            .catch(function (err) { return console.error(_this.tag + err); })
            .then(function () {
            if (!_this.overdueTime) {
                _this.overdueTime = {
                    arrived: 1800000,
                    reply: 1800000,
                    delayReply: 1800000,
                    checkInterval: 60000
                };
            }
            else {
                if (!_this.overdueTime.arrived) {
                    _this.overdueTime.arrived = 1800000;
                }
                if (!_this.overdueTime.reply) {
                    _this.overdueTime.reply = 1800000;
                }
                if (!_this.overdueTime.delayReply) {
                    _this.overdueTime.delayReply = 1800000;
                }
                if (!_this.overdueTime.checkInterval) {
                    _this.overdueTime.checkInterval = 60000;
                }
            }
        })
            .then(function () {
            _this.arrivedDeadLine = _this.overdueTime.arrived;
            _this.replyDeadLine = _this.overdueTime.reply;
            _this.checkInterval = _this.overdueTime.checkInterval;
        });
    };
    OverdueTimePage.prototype.onOk = function (ev) {
        var _this = this;
        var toast = this.toastCtrl.create({
            duration: 2000,
            position: 'bottom',
        });
        if (!this.arrivedDeadLine || this.arrivedDeadLine <= 0
            || !this.replyDeadLine || this.replyDeadLine <= 0
            || !this.checkInterval || this.checkInterval <= 0) {
            toast.setMessage('请输入有效数值').present();
            return;
        }
        this.overdueTime.arrived = this.arrivedDeadLine;
        this.overdueTime.reply = this.replyDeadLine;
        this.overdueTime.checkInterval = this.checkInterval;
        this.configService.setOverdueTime(this.overdueTime)
            .then(function (result) {
            toast.setMessage('保存成功').present();
        })
            .catch(function (error) {
            console.error(error);
            toast.setMessage('保存失败').present();
        })
            .then(function () { return _this.viewCtrl.dismiss(); });
    };
    OverdueTimePage.prototype.onCancel = function (ev) {
        this.viewCtrl.dismiss();
    };
    return OverdueTimePage;
}());
OverdueTimePage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        template: "\n    <ion-list>\n      <ion-list-header color=\"primary\">\u8D85\u671F\u8BBE\u7F6E(\u5355\u4F4D:\u6BEB\u79D2)</ion-list-header>\n      \n      <ion-item>\n        <ion-label color=\"label\">\u5230\u573A\u8D85\u671F</ion-label>\n      </ion-item>\n      <ion-item>\n        <ion-input type=\"text\" [(ngModel)]=\"arrivedDeadLine\" clearInput></ion-input>\n      </ion-item>\n      \n      <ion-item>\n        <ion-label color=\"label\">\u5904\u7406\u8D85\u671F</ion-label>\n      </ion-item>\n      <ion-item>\n        <ion-input type=\"text\" [(ngModel)]=\"replyDeadLine\" clearInput></ion-input>\n      </ion-item>\n      \n      <ion-item>\n        <ion-label color=\"label\">\u68C0\u67E5\u9891\u7387</ion-label>\n      </ion-item>\n      <ion-item>\n        <ion-input type=\"text\" [(ngModel)]=\"checkInterval\" clearInput></ion-input>\n      </ion-item>\n\n      <button ion-item style=\"text-align:center; color:#488aff;\" (click)=\"onOk($event)\">\u786E\u5B9A</button>\n      <button ion-item style=\"text-align:center; color:#488aff;\" (click)=\"onCancel($event)\">\u53D6\u6D88</button>\n    </ion-list>\n  ",
        styles: [
            ".selected {\n      font-weight: bold;\n    }"
        ]
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__providers_ConfigService__["a" /* ConfigService */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["o" /* ToastController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* ViewController */]])
], OverdueTimePage);

//# sourceMappingURL=overdueTimePage.js.map

/***/ }),

/***/ 242:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LoginPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__main_main__ = __webpack_require__(243);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_forms__ = __webpack_require__(16);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_app_preferences__ = __webpack_require__(244);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_network__ = __webpack_require__(245);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__model_UserInfo__ = __webpack_require__(330);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_DataService__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_native_device__ = __webpack_require__(246);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var LoginPage = (function () {
    function LoginPage(navCtrl, alertCtrl, formBuilder, appPreferences, network, toastCtrl, globalService, dataService, device) {
        this.navCtrl = navCtrl;
        this.alertCtrl = alertCtrl;
        this.formBuilder = formBuilder;
        this.appPreferences = appPreferences;
        this.network = network;
        this.toastCtrl = toastCtrl;
        this.globalService = globalService;
        this.dataService = dataService;
        this.device = device;
        this.tag = "[LoginPage]";
        this.user = new __WEBPACK_IMPORTED_MODULE_7__model_UserInfo__["a" /* UserInfo */]();
    }
    LoginPage.prototype.ngOnInit = function () {
        this.loginForm = this.formBuilder.group({
            'LoginID': [this.globalService.userName, __WEBPACK_IMPORTED_MODULE_3__angular_forms__["f" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_3__angular_forms__["f" /* Validators */].minLength(2), __WEBPACK_IMPORTED_MODULE_3__angular_forms__["f" /* Validators */].maxLength(11),
                    __WEBPACK_IMPORTED_MODULE_3__angular_forms__["f" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_3__angular_forms__["f" /* Validators */].pattern('[0-9a-zA-Z ]*')])],
            'LoginPwd': ['0000', __WEBPACK_IMPORTED_MODULE_3__angular_forms__["f" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_3__angular_forms__["f" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_3__angular_forms__["f" /* Validators */].minLength(4)])],
            'LoginSelect': ['worker', __WEBPACK_IMPORTED_MODULE_3__angular_forms__["f" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_3__angular_forms__["f" /* Validators */].required])]
        });
        if (!this.globalService.isChrome) {
            this.getPreferences();
        }
    };
    /**
     * 获得app preferences
     */
    LoginPage.prototype.getPreferences = function () {
        var _this = this;
        //用户名
        this.appPreferences.fetch("userinfo", 'username')
            .then(function (result) {
            _this.user.userName = result.toString();
            _this.loginForm.patchValue({ LoginID: _this.user.userName });
        }).catch(function (err) {
            console.log(err);
        });
        //密码
        this.appPreferences.fetch("userinfo", 'pwd')
            .then(function (result) {
            _this.user.password = result.toString();
            _this.loginForm.patchValue({ LoginPwd: result.toString() });
        }).catch(function (err) {
            console.log(err);
        });
        //角色
        this.appPreferences.fetch("userinfo", 'role')
            .then(function (result) {
            _this.user.role = result.toString();
            _this.loginForm.patchValue({ LoginSelect: result.toString() });
        }).catch(function (err) {
            console.log(err);
        });
    };
    /**
     * 登录事件
     * @param user
     */
    LoginPage.prototype.loginClick = function (user) {
        //判断网络
        if (this.network.type == 'none' || this.network.type == 'unknow') {
            //有网就连网登录，无网判断本地是否有存储信息,有则离线登录
            if (!this.globalService.isChrome) {
                var toastInfo = void 0;
                var toast = this.toastCtrl.create({
                    duration: 2000,
                    position: 'bottom'
                });
                if (user['LoginID'] == this.user.userName && user['LoginPwd'] == this.user.password) {
                    toastInfo = '离线登录';
                    console.log(toastInfo);
                    toast.setMessage(toastInfo);
                    this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__main_main__["a" /* MainPage */], {});
                }
                else {
                    toastInfo = '账号和密码未保存，请连网认证';
                    console.log(toastInfo);
                    toast.setMessage(toastInfo);
                }
                toast.present();
                return;
            }
        }
        //在线登录
        this.user.userName = user['LoginID'];
        this.user.password = user['LoginPwd'];
        this.user.role = user['LoginSelect'];
        this.doLogin();
    };
    /**
     * 登录操作
     * @param baseurl
     * @param userName
     * @param password
     */
    LoginPage.prototype.doLogin = function () {
        var _this = this;
        if (this.user.userName && this.user.password) {
            this.dataService.doLogin(this.user)
                .then(function (userResult) {
                _this.onSuccessCallBack(_this.user.userName, userResult);
            })
                .catch(function (err) {
                _this.onErrorCallBack(err);
            });
        }
    };
    /**
     * 成功回调
     * @param data
     */
    LoginPage.prototype.onSuccessCallBack = function (userName, userResult) {
        var _this = this;
        this.globalService.userName = userName;
        this.globalService.userId = userResult.userId;
        this.globalService.department = userResult.Department;
        this.globalService.isWorker = (this.user.role == 'worker');
        //外勤
        if (this.globalService.isWorker) {
            this.dataService.getWorkInfo()
                .then(function (userWorkInfo) {
                console.log(userWorkInfo);
                _this.onSuccessLogin();
            })
                .catch(function (err) {
                _this.onErrorCallBack(err);
            });
            return;
        }
        //管理
        this.dataService.getManageInfo()
            .then(function (managerInfo) {
            console.log(managerInfo);
            _this.onSuccessLogin();
        })
            .catch(function (err) {
            _this.onErrorCallBack(err);
        });
    };
    /**
     * 最终成功登录
     */
    LoginPage.prototype.onSuccessLogin = function () {
        var toast = this.toastCtrl.create({
            duration: 2000,
            message: '在线登录成功',
            position: 'bottom',
        });
        toast.present();
        this.saveAppPreferences();
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__main_main__["a" /* MainPage */], {});
    };
    /**
     * 保存参数
     */
    LoginPage.prototype.saveAppPreferences = function () {
        var _this = this;
        Promise.all([this.saveUserInfo('username', this.user.userName),
            this.saveUserInfo('pwd', this.user.password),
            this.saveUserInfo('role', this.user.role)])
            .then(function (result) {
            console.log(_this.tag + 'saveAppPreferences:' + result);
        })
            .catch(function (error) {
            console.log(_this.tag + 'saveAppPreferences:' + error);
        });
    };
    /**
     * 用户信息
     * @param infoType
     * @param valueInfo
     * @returns {Promise<TResult|TResult2|TResult1>}
     */
    LoginPage.prototype.saveUserInfo = function (infoType, valueInfo) {
        var _this = this;
        return this.appPreferences.store('userinfo', infoType, valueInfo)
            .then(function (result) {
            console.log(_this.tag + ':saveUserName:' + result);
        })
            .catch(function (error) {
            console.log(_this.tag + ':saveUserName:' + error);
        });
    };
    /**
     * 失败回调
     * @param error
     */
    LoginPage.prototype.onErrorCallBack = function (error) {
        console.log(error);
        var alert = this.alertCtrl.create({
            title: '提示：',
            subTitle: error ? error : '登录失败',
            buttons: ['确定']
        });
        alert.present();
    };
    return LoginPage;
}());
LoginPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-login',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\login\login.html"*/'<ion-header>\n\n</ion-header>\n\n\n\n<ion-content>\n\n  <div class="login-logo">\n\n    <img src="assets/img/login_logo.png">\n\n  </div>\n\n\n\n  <ion-row>\n\n    <ion-col>\n\n      <ion-list>\n\n        <form [formGroup]="loginForm">\n\n          <ion-item>\n\n            <ion-icon name="person" item-start></ion-icon>\n\n            <ion-input type="text" formControlName="LoginID" clearInput></ion-input>\n\n          </ion-item>\n\n          <p *ngIf="!loginForm.controls.LoginID.valid && loginForm.controls.LoginID.touched" color="danger">请输入有效的用户名.</p>\n\n\n\n          <ion-item>\n\n            <ion-icon name="lock" item-start></ion-icon>\n\n            <ion-input type="password" formControlName="LoginPwd" clearInput></ion-input>\n\n          </ion-item>\n\n          <p *ngIf="!loginForm.controls.LoginPwd.valid && loginForm.controls.LoginPwd.touched" color="danger">请输入有效的密码.</p>\n\n\n\n          <ion-item>\n\n            <ion-label>选择人员</ion-label>\n\n            <ion-select okText="确定" cancelText="取消" formControlName="LoginSelect">\n\n              <ion-option value="worker">外勤人员</ion-option>\n\n              <ion-option value="manager">管理人员</ion-option>\n\n            </ion-select>\n\n          </ion-item>\n\n          <p *ngIf="!loginForm.controls.LoginSelect.valid && loginForm.controls.LoginSelect.touched" color="danger">请选择人员.</p>\n\n        </form>\n\n      </ion-list>\n\n    </ion-col>\n\n  </ion-row>\n\n\n\n  <ion-row>\n\n    <ion-col>\n\n      <div class="login-button">\n\n        <button ion-button type="submit" [disabled]="!loginForm.valid" block (click)="loginClick(loginForm.value)">登录</button>\n\n      </div>\n\n    </ion-col>\n\n  </ion-row>\n\n\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\login\login.html"*/,
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_3__angular_forms__["a" /* FormBuilder */],
        __WEBPACK_IMPORTED_MODULE_4__ionic_native_app_preferences__["a" /* AppPreferences */],
        __WEBPACK_IMPORTED_MODULE_5__ionic_native_network__["a" /* Network */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["o" /* ToastController */],
        __WEBPACK_IMPORTED_MODULE_6__providers_GlobalService__["a" /* GlobalService */],
        __WEBPACK_IMPORTED_MODULE_8__providers_DataService__["a" /* DataService */],
        __WEBPACK_IMPORTED_MODULE_9__ionic_native_device__["a" /* Device */]])
], LoginPage);

//# sourceMappingURL=login.js.map

/***/ }),

/***/ 243:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MainPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__mywork_mywork__ = __webpack_require__(49);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__news_news__ = __webpack_require__(65);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__stationwork_stationwork__ = __webpack_require__(64);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__search_search__ = __webpack_require__(63);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__setting_setting__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__history_myhistory__ = __webpack_require__(61);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__map_map__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__model_MapParam__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__materials_materials__ = __webpack_require__(66);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






//import {DataService} from "../../providers/DataService";



//import {ConfigService} from "../../providers/ConfigService";



var ItemId;
(function (ItemId) {
    ItemId[ItemId["MyWork"] = 0] = "MyWork";
    ItemId[ItemId["History"] = 1] = "History";
    ItemId[ItemId["Map"] = 2] = "Map";
    ItemId[ItemId["StationWork"] = 3] = "StationWork";
    ItemId[ItemId["Search"] = 4] = "Search";
    ItemId[ItemId["News"] = 5] = "News";
    ItemId[ItemId["Materials"] = 6] = "Materials";
})(ItemId || (ItemId = {}));
var MainPage = (function () {
    function MainPage(navCtrl, 
        //private events: Events,
        //private dataService: DataService,
        globalService) {
        this.navCtrl = navCtrl;
        this.globalService = globalService;
        this.tag = "[MainPage]";
        this.title = '主界面';
        this.imgWidth = 64;
        this.imgHeight = 64;
        this.gridStyle = true;
        this.gridItems = [];
        this.listItems = [];
    }
    /**
     * 初始化
     */
    MainPage.prototype.ngOnInit = function () {
        console.log(this.tag, "ngOnInit");
        this.initListItem();
        this.initGirdItems();
        // this.subscribeEvent(this.events);
        // this.initGridStyle();
        // this.initData();
    };
    /**
     * 销毁
     */
    MainPage.prototype.ngOnDestroy = function () {
        console.log(this.tag, "ngOnDestroy");
        //this.events.unsubscribe(this.globalService.mainUpdateEvent);
        //this.dataService.destroy();
    };
    /**
     * 选择功能按钮
     * @param id
     */
    MainPage.prototype.itemSelected = function (id) {
        console.log(id);
        switch (id) {
            case ItemId.MyWork:
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__mywork_mywork__["a" /* MyWorkPage */]);
                break;
            case ItemId.History:
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_7__history_myhistory__["a" /* MyHistory */]);
                break;
            case ItemId.Map:
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_9__map_map__["a" /* MapPage */], new __WEBPACK_IMPORTED_MODULE_10__model_MapParam__["a" /* MapParam */](__WEBPACK_IMPORTED_MODULE_10__model_MapParam__["b" /* MapType */].View, undefined, undefined));
                break;
            case ItemId.Search:
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__search_search__["a" /* SearchPage */]);
                break;
            case ItemId.StationWork:
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__stationwork_stationwork__["a" /* StationWorkPage */]);
                break;
            case ItemId.News:
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__news_news__["a" /* NewsPage */]);
                break;
            case ItemId.Materials:
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_11__materials_materials__["a" /* MaterialsPage */]);
                break;
            default:
                break;
        }
    };
    /**
     * 选择设置按钮
     * @param event
     */
    MainPage.prototype.selectSettings = function (event) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__setting_setting__["a" /* SettingPage */]);
        // this.gridStyle = !this.gridStyle;
        // this.configService.setGridStyle(this.gridStyle)
        //   .then(result => console.log(result))
        //   .catch(error => console.error(error));
    };
    /**
     * 初始化list
     */
    MainPage.prototype.initListItem = function () {
        this.listItems.push({
            id: ItemId.MyWork,
            src: 'assets/img/ic_mywork.png',
            name: '我的任务',
            active: true,
            count: 0
        });
        this.listItems.push({
            id: ItemId.History,
            src: 'assets/img/ic_history.png',
            name: '历史记录',
            active: true,
            count: 0
        });
        this.listItems.push({
            id: ItemId.Map,
            src: 'assets/img/ic_map.png',
            name: '地图',
            active: true,
            count: 0
        });
        if (!this.globalService.isWorker) {
            this.listItems.push({
                id: ItemId.StationWork,
                src: 'assets/img/ic_stationwork.png',
                name: '站点任务',
                active: true,
                count: 0
            });
            this.listItems.push({
                id: ItemId.Search,
                src: 'assets/img/ic_searching.png',
                name: '查询',
                active: true,
                count: 0
            });
        }
        this.listItems.push({
            id: ItemId.News,
            src: 'assets/img/ic_news.png',
            name: '公告',
            active: true,
            count: 0
        });
        this.listItems.push({
            id: ItemId.Materials,
            src: 'assets/img/ic_add_materials.png',
            name: '材料登记',
            active: true,
            count: 0
        });
    };
    /**
     * 初始化grid
     */
    MainPage.prototype.initGirdItems = function () {
        var rowData = [];
        for (var _i = 0, _a = this.listItems; _i < _a.length; _i++) {
            var item = _a[_i];
            if (rowData.length == 3) {
                this.gridItems.push(rowData);
                rowData = [];
            }
            rowData.push(item);
        }
        this.gridItems.push(rowData);
    };
    return MainPage;
}());
MainPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-main',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\main\main.html"*/'<ion-header>\n\n  <ion-toolbar color="primary">\n\n    <ion-title>\n\n      {{title}}\n\n    </ion-title>\n\n    <ion-buttons end>\n\n      <button ion-button icon-only color="white" (click)="selectSettings($event)">\n\n        <ion-icon name="settings"></ion-icon>\n\n      </button>\n\n    </ion-buttons>\n\n  </ion-toolbar>\n\n</ion-header>\n\n\n\n<ion-content class="page-main">\n\n  <!--grid style-->\n\n  <ion-grid *ngIf="gridStyle">\n\n    <ion-row *ngFor="let item of gridItems">\n\n      <ion-col col-4 (click)="itemSelected(item[0].id)" *ngIf="item[0] && item[0].active">\n\n        <img src="{{item[0].src}}" width="{{imgWidth}}" height="{{imgHeight}}"/>\n\n        <ion-badge color="danger" class="grid-item-badge" *ngIf="item[0].count>0">{{item[0].count}}</ion-badge>\n\n        <ion-label>{{item[0].name}}</ion-label>\n\n      </ion-col>\n\n      <ion-col col-4 (click)="itemSelected(item[1].id)" *ngIf="item[1] && item[1].active">\n\n        <img src="{{item[1].src}}" width="{{imgWidth}}" height="{{imgHeight}}"/>\n\n        <ion-badge color="danger" class="grid-item-badge" *ngIf="item[1].count>0">{{item[1].count}}</ion-badge>\n\n        <ion-label>{{item[1].name}}</ion-label>\n\n      </ion-col>\n\n      <ion-col col-4 (click)="itemSelected(item[2].id)" *ngIf="item[2] && item[2].active">\n\n        <img src="{{item[2].src}}" width="{{imgWidth}}" height="{{imgHeight}}"/>\n\n        <ion-badge color="danger" class="grid-item-badge" *ngIf="item[2].count>0">{{item[2].count}}</ion-badge>\n\n        <ion-label>{{item[2].name}}</ion-label>\n\n      </ion-col>\n\n    </ion-row>\n\n  </ion-grid>\n\n\n\n  <!--list style-->\n\n  <ion-list *ngIf="!gridStyle">\n\n    <ion-item *ngFor="let item of listItems">\n\n      <div class="list-item" *ngIf="item.active" (click)="itemSelected(item.id)">\n\n        <img src="{{item.src}}" width="{{imgWidth}}" height="imgHeight" class="item-img"/>\n\n        <p class="item-name">{{item.name}}</p>\n\n        <ion-badge color="danger" class="list-item-badge" *ngIf="item.count>0">{{item.count}}</ion-badge>\n\n      </div>\n\n    </ion-item>\n\n  </ion-list>\n\n\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\main\main.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_8__providers_GlobalService__["a" /* GlobalService */]])
], MainPage);

//# sourceMappingURL=main.js.map

/***/ }),

/***/ 248:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HttpInterceptor; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

var HttpInterceptor = (function () {
    function HttpInterceptor() {
    }
    HttpInterceptor.prototype.beforeRequest = function (request) {
        console.log(request);
        return request;
    };
    HttpInterceptor.prototype.afterResponse = function (res) {
        res.subscribe(function (data) {
            console.log(data);
        });
        return res;
    };
    return HttpInterceptor;
}());
HttpInterceptor = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["B" /* Injectable */])()
], HttpInterceptor);

//# sourceMappingURL=HttpInterceptor.js.map

/***/ }),

/***/ 249:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MorePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__setting_setting__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__news_news__ = __webpack_require__(65);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * Created by zhangjing on 2017/8/23.
 */
var ItemId;
(function (ItemId) {
    ItemId[ItemId["News"] = 0] = "News";
    ItemId[ItemId["Setting"] = 1] = "Setting";
})(ItemId || (ItemId = {}));
var MorePage = (function () {
    function MorePage(navCtrl, globalService) {
        this.navCtrl = navCtrl;
        this.globalService = globalService;
        //private readonly tag: string = "[MorePage]";
        this.title = '更多';
        this.imgWidth = 64;
        this.imgHeight = 64;
        this.listItems = [];
    }
    /**
     * 初始化list
     */
    MorePage.prototype.initListItem = function () {
        this.listItems.push({
            id: ItemId.News,
            src: 'assets/img/ic_news.png',
            name: '公告',
            active: true,
            count: 0
        });
        this.listItems.push({
            id: ItemId.Setting,
            src: 'assets/img/ic_setting.png',
            name: '设置',
            active: true,
            count: 0
        });
    };
    MorePage.prototype.ngOnInit = function () {
        this.initListItem();
    };
    /**
     * 选择功能按钮
     * @param id
     */
    MorePage.prototype.itemSelected = function (id) {
        console.log(id);
        switch (id) {
            case ItemId.News:
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__news_news__["a" /* NewsPage */]);
                break;
            case ItemId.Setting:
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__setting_setting__["a" /* SettingPage */]);
                break;
            default:
                break;
        }
    };
    return MorePage;
}());
MorePage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-main',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\more\more.html"*/'<ion-header>\n\n  <ion-toolbar color="primary">\n\n    <ion-title>\n\n      {{title}}\n\n    </ion-title>\n\n  </ion-toolbar>\n\n</ion-header>\n\n\n\n<ion-content class="page-main">\n\n  <!--list style-->\n\n  <ion-list>\n\n    <ion-item *ngFor="let item of listItems">\n\n      <div class="list-item" *ngIf="item.active" (click)="itemSelected(item.id)">\n\n        <img src="{{item.src}}" width="{{imgWidth}}" height="{{imgHeight}}" class="item-img"/>\n\n        <p class="item-name">{{item.name}}</p>\n\n        <ion-badge color="danger" class="list-item-badge" *ngIf="item.count>0">{{item.count}}</ion-badge>\n\n      </div>\n\n    </ion-item>\n\n  </ion-list>\n\n\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\more\more.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_2__providers_GlobalService__["a" /* GlobalService */]])
], MorePage);

//# sourceMappingURL=more.js.map

/***/ }),

/***/ 250:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser_dynamic__ = __webpack_require__(251);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__app_module__ = __webpack_require__(268);


Object(__WEBPACK_IMPORTED_MODULE_0__angular_platform_browser_dynamic__["a" /* platformBrowserDynamic */])().bootstrapModule(__WEBPACK_IMPORTED_MODULE_1__app_module__["a" /* AppModule */]);
//# sourceMappingURL=main.js.map

/***/ }),

/***/ 268:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_splash_screen__ = __webpack_require__(219);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_status_bar__ = __webpack_require__(221);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__app_component__ = __webpack_require__(317);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pages_home_home__ = __webpack_require__(327);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__pages_welcome_welcome__ = __webpack_require__(328);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__pages_login_login__ = __webpack_require__(242);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__pages_main_main__ = __webpack_require__(243);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__pages_mywork_mywork__ = __webpack_require__(49);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__pages_news_news__ = __webpack_require__(65);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__pages_workdetail_workdetail__ = __webpack_require__(129);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__pages_stationwork_stationwork__ = __webpack_require__(64);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__pages_workinfo_workinfo__ = __webpack_require__(236);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__pages_history_myhistory__ = __webpack_require__(61);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__ionic_native_file__ = __webpack_require__(120);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__providers_FileService__ = __webpack_require__(23);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__ionic_native_transfer__ = __webpack_require__(222);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__providers_StorageService__ = __webpack_require__(239);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__angular_http__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__ionic_native_app_version__ = __webpack_require__(247);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__ionic_native_zip__ = __webpack_require__(223);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__providers_ConfigService__ = __webpack_require__(18);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__ionic_native_file_opener__ = __webpack_require__(224);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__providers_DataService__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__providers_DownloadService__ = __webpack_require__(121);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__providers_GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__providers_UploadService__ = __webpack_require__(125);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__ionic_native_network__ = __webpack_require__(245);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__pages_search_search__ = __webpack_require__(63);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__ionic_native_app_preferences__ = __webpack_require__(244);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_32__pages_searchresult_searchresult__ = __webpack_require__(234);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_33__pages_searchdetail_searchdetails__ = __webpack_require__(235);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_34__pages_newsdetails_newsdetails__ = __webpack_require__(237);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_35__pages_setting_setting__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_36__providers_HttpInterceptorBackend__ = __webpack_require__(331);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_37__providers_HttpInterceptor__ = __webpack_require__(248);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_38__ionic_native_sqlite__ = __webpack_require__(225);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_39__ionic_native_sqlite_porter__ = __webpack_require__(226);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_40__providers_DbService__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_41__ionic_storage__ = __webpack_require__(60);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_42__ionic_native_device__ = __webpack_require__(246);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_43__pipes_ValueValidPipe__ = __webpack_require__(332);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_44__ionic_native_camera__ = __webpack_require__(227);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_45__ionic_native_media_capture__ = __webpack_require__(229);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_46__ionic_native_video_player__ = __webpack_require__(230);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_47__ionic_native_android_permissions__ = __webpack_require__(118);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_48__ionic_native_media__ = __webpack_require__(228);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_49__providers_MediaService__ = __webpack_require__(127);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_50__pages_record_PopoverRecordPage__ = __webpack_require__(231);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_51__ionic_native_file_transfer__ = __webpack_require__(124);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_52__pages_map_map__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_53__pages_materials_materials__ = __webpack_require__(66);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_54__pages_materialsadd_materialsadd__ = __webpack_require__(238);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_55__ionic_native_my_plugin__ = __webpack_require__(119);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_56__pages_tabs_tabs__ = __webpack_require__(333);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_57__pages_more_more__ = __webpack_require__(249);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_58__pages_setting_networkset__ = __webpack_require__(240);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_59__pages_about_about__ = __webpack_require__(334);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_60__pages_contact_contact__ = __webpack_require__(335);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_61__pages_setting_overdueTimePage__ = __webpack_require__(241);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_62__pages_attachment_attachment__ = __webpack_require__(232);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_63__ionic_native_photo_viewer__ = __webpack_require__(233);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};






































//import {httpFactory} from "../providers/httpFactory";


























var AppModule = (function () {
    function AppModule() {
    }
    return AppModule;
}());
AppModule = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["L" /* NgModule */])({
        declarations: [
            __WEBPACK_IMPORTED_MODULE_5__app_component__["a" /* MyApp */],
            __WEBPACK_IMPORTED_MODULE_6__pages_home_home__["a" /* HomePage */],
            __WEBPACK_IMPORTED_MODULE_7__pages_welcome_welcome__["a" /* WelcomePage */],
            __WEBPACK_IMPORTED_MODULE_8__pages_login_login__["a" /* LoginPage */],
            __WEBPACK_IMPORTED_MODULE_9__pages_main_main__["a" /* MainPage */],
            __WEBPACK_IMPORTED_MODULE_10__pages_mywork_mywork__["a" /* MyWorkPage */],
            __WEBPACK_IMPORTED_MODULE_12__pages_workdetail_workdetail__["a" /* WorkDetailPage */],
            __WEBPACK_IMPORTED_MODULE_13__pages_stationwork_stationwork__["a" /* StationWorkPage */],
            __WEBPACK_IMPORTED_MODULE_14__pages_workinfo_workinfo__["a" /* WorkInfoPage */],
            __WEBPACK_IMPORTED_MODULE_11__pages_news_news__["a" /* NewsPage */],
            __WEBPACK_IMPORTED_MODULE_34__pages_newsdetails_newsdetails__["a" /* NewsDetailsPage */],
            __WEBPACK_IMPORTED_MODULE_30__pages_search_search__["a" /* SearchPage */],
            __WEBPACK_IMPORTED_MODULE_32__pages_searchresult_searchresult__["a" /* SearchResultPage */],
            __WEBPACK_IMPORTED_MODULE_33__pages_searchdetail_searchdetails__["a" /* SearchDetailsPage */],
            __WEBPACK_IMPORTED_MODULE_43__pipes_ValueValidPipe__["a" /* ValueValidPipe */],
            __WEBPACK_IMPORTED_MODULE_15__pages_history_myhistory__["a" /* MyHistory */],
            __WEBPACK_IMPORTED_MODULE_52__pages_map_map__["a" /* MapPage */],
            __WEBPACK_IMPORTED_MODULE_35__pages_setting_setting__["a" /* SettingPage */],
            __WEBPACK_IMPORTED_MODULE_43__pipes_ValueValidPipe__["a" /* ValueValidPipe */],
            __WEBPACK_IMPORTED_MODULE_53__pages_materials_materials__["a" /* MaterialsPage */],
            __WEBPACK_IMPORTED_MODULE_54__pages_materialsadd_materialsadd__["a" /* MaterialsAddPage */],
            __WEBPACK_IMPORTED_MODULE_43__pipes_ValueValidPipe__["a" /* ValueValidPipe */],
            __WEBPACK_IMPORTED_MODULE_50__pages_record_PopoverRecordPage__["a" /* PopoverRecordPage */],
            __WEBPACK_IMPORTED_MODULE_56__pages_tabs_tabs__["a" /* TabsPage */],
            __WEBPACK_IMPORTED_MODULE_57__pages_more_more__["a" /* MorePage */],
            __WEBPACK_IMPORTED_MODULE_58__pages_setting_networkset__["a" /* NetworkSetPage */],
            __WEBPACK_IMPORTED_MODULE_59__pages_about_about__["a" /* AboutPage */],
            __WEBPACK_IMPORTED_MODULE_60__pages_contact_contact__["a" /* ContactPage */],
            __WEBPACK_IMPORTED_MODULE_61__pages_setting_overdueTimePage__["a" /* OverdueTimePage */],
            __WEBPACK_IMPORTED_MODULE_62__pages_attachment_attachment__["a" /* AttachmentPage */]
        ],
        imports: [
            __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__["a" /* BrowserModule */],
            __WEBPACK_IMPORTED_MODULE_20__angular_http__["c" /* HttpModule */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["h" /* IonicModule */].forRoot(__WEBPACK_IMPORTED_MODULE_5__app_component__["a" /* MyApp */], {
                tabsHideOnSubPages: 'true' //隐藏全部子页面tabs
            }, {
                links: []
            }),
            __WEBPACK_IMPORTED_MODULE_41__ionic_storage__["a" /* IonicStorageModule */].forRoot()
        ],
        bootstrap: [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["f" /* IonicApp */]],
        entryComponents: [
            __WEBPACK_IMPORTED_MODULE_5__app_component__["a" /* MyApp */],
            __WEBPACK_IMPORTED_MODULE_6__pages_home_home__["a" /* HomePage */],
            __WEBPACK_IMPORTED_MODULE_7__pages_welcome_welcome__["a" /* WelcomePage */],
            __WEBPACK_IMPORTED_MODULE_8__pages_login_login__["a" /* LoginPage */],
            __WEBPACK_IMPORTED_MODULE_9__pages_main_main__["a" /* MainPage */],
            __WEBPACK_IMPORTED_MODULE_10__pages_mywork_mywork__["a" /* MyWorkPage */],
            __WEBPACK_IMPORTED_MODULE_12__pages_workdetail_workdetail__["a" /* WorkDetailPage */],
            __WEBPACK_IMPORTED_MODULE_13__pages_stationwork_stationwork__["a" /* StationWorkPage */],
            __WEBPACK_IMPORTED_MODULE_14__pages_workinfo_workinfo__["a" /* WorkInfoPage */],
            __WEBPACK_IMPORTED_MODULE_11__pages_news_news__["a" /* NewsPage */],
            __WEBPACK_IMPORTED_MODULE_34__pages_newsdetails_newsdetails__["a" /* NewsDetailsPage */],
            __WEBPACK_IMPORTED_MODULE_30__pages_search_search__["a" /* SearchPage */],
            __WEBPACK_IMPORTED_MODULE_32__pages_searchresult_searchresult__["a" /* SearchResultPage */],
            __WEBPACK_IMPORTED_MODULE_33__pages_searchdetail_searchdetails__["a" /* SearchDetailsPage */],
            __WEBPACK_IMPORTED_MODULE_35__pages_setting_setting__["a" /* SettingPage */],
            __WEBPACK_IMPORTED_MODULE_50__pages_record_PopoverRecordPage__["a" /* PopoverRecordPage */],
            __WEBPACK_IMPORTED_MODULE_15__pages_history_myhistory__["a" /* MyHistory */],
            __WEBPACK_IMPORTED_MODULE_52__pages_map_map__["a" /* MapPage */],
            __WEBPACK_IMPORTED_MODULE_53__pages_materials_materials__["a" /* MaterialsPage */],
            __WEBPACK_IMPORTED_MODULE_54__pages_materialsadd_materialsadd__["a" /* MaterialsAddPage */],
            __WEBPACK_IMPORTED_MODULE_56__pages_tabs_tabs__["a" /* TabsPage */],
            __WEBPACK_IMPORTED_MODULE_57__pages_more_more__["a" /* MorePage */],
            __WEBPACK_IMPORTED_MODULE_58__pages_setting_networkset__["a" /* NetworkSetPage */],
            __WEBPACK_IMPORTED_MODULE_59__pages_about_about__["a" /* AboutPage */],
            __WEBPACK_IMPORTED_MODULE_60__pages_contact_contact__["a" /* ContactPage */],
            __WEBPACK_IMPORTED_MODULE_61__pages_setting_overdueTimePage__["a" /* OverdueTimePage */],
            __WEBPACK_IMPORTED_MODULE_62__pages_attachment_attachment__["a" /* AttachmentPage */]
        ],
        providers: [
            __WEBPACK_IMPORTED_MODULE_4__ionic_native_status_bar__["a" /* StatusBar */],
            __WEBPACK_IMPORTED_MODULE_3__ionic_native_splash_screen__["a" /* SplashScreen */],
            __WEBPACK_IMPORTED_MODULE_16__ionic_native_file__["a" /* File */],
            __WEBPACK_IMPORTED_MODULE_18__ionic_native_transfer__["a" /* Transfer */],
            __WEBPACK_IMPORTED_MODULE_17__providers_FileService__["a" /* FileService */],
            __WEBPACK_IMPORTED_MODULE_21__ionic_native_app_version__["a" /* AppVersion */],
            __WEBPACK_IMPORTED_MODULE_22__ionic_native_zip__["a" /* Zip */],
            __WEBPACK_IMPORTED_MODULE_19__providers_StorageService__["a" /* StorageService */],
            __WEBPACK_IMPORTED_MODULE_31__ionic_native_app_preferences__["a" /* AppPreferences */],
            __WEBPACK_IMPORTED_MODULE_24__ionic_native_file_opener__["a" /* FileOpener */],
            __WEBPACK_IMPORTED_MODULE_23__providers_ConfigService__["a" /* ConfigService */],
            __WEBPACK_IMPORTED_MODULE_20__angular_http__["c" /* HttpModule */],
            __WEBPACK_IMPORTED_MODULE_36__providers_HttpInterceptorBackend__["a" /* HttpInterceptorBackend */],
            __WEBPACK_IMPORTED_MODULE_37__providers_HttpInterceptor__["a" /* HttpInterceptor */],
            __WEBPACK_IMPORTED_MODULE_29__ionic_native_network__["a" /* Network */],
            __WEBPACK_IMPORTED_MODULE_25__providers_DataService__["a" /* DataService */],
            __WEBPACK_IMPORTED_MODULE_26__providers_DownloadService__["a" /* DownloadService */],
            __WEBPACK_IMPORTED_MODULE_28__providers_UploadService__["a" /* UploadService */],
            __WEBPACK_IMPORTED_MODULE_38__ionic_native_sqlite__["a" /* SQLite */],
            __WEBPACK_IMPORTED_MODULE_39__ionic_native_sqlite_porter__["a" /* SQLitePorter */],
            __WEBPACK_IMPORTED_MODULE_27__providers_GlobalService__["a" /* GlobalService */],
            __WEBPACK_IMPORTED_MODULE_40__providers_DbService__["a" /* DbService */],
            __WEBPACK_IMPORTED_MODULE_42__ionic_native_device__["a" /* Device */],
            __WEBPACK_IMPORTED_MODULE_44__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_45__ionic_native_media_capture__["a" /* MediaCapture */],
            __WEBPACK_IMPORTED_MODULE_46__ionic_native_video_player__["a" /* VideoPlayer */],
            __WEBPACK_IMPORTED_MODULE_47__ionic_native_android_permissions__["a" /* AndroidPermissions */],
            __WEBPACK_IMPORTED_MODULE_48__ionic_native_media__["a" /* Media */],
            __WEBPACK_IMPORTED_MODULE_49__providers_MediaService__["a" /* MediaService */],
            __WEBPACK_IMPORTED_MODULE_51__ionic_native_file_transfer__["a" /* FileTransfer */],
            __WEBPACK_IMPORTED_MODULE_55__ionic_native_my_plugin__["a" /* MyPlugin */],
            __WEBPACK_IMPORTED_MODULE_63__ionic_native_photo_viewer__["a" /* PhotoViewer */],
            { provide: __WEBPACK_IMPORTED_MODULE_1__angular_core__["v" /* ErrorHandler */], useClass: __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["g" /* IonicErrorHandler */] },
        ]
    })
], AppModule);

//# sourceMappingURL=app.module.js.map

/***/ }),

/***/ 317:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MyApp; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_status_bar__ = __webpack_require__(221);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_splash_screen__ = __webpack_require__(219);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__app_component_service__ = __webpack_require__(318);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pages_mywork_mywork__ = __webpack_require__(49);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







//import {TabsPage} from "../pages/tabs/tabs";
var MyApp = (function () {
    function MyApp(platform, statusBar, splashScreen, appComponentService, globalService) {
        var _this = this;
        this.appComponentService = appComponentService;
        this.globalService = globalService;
        this.rootPage = undefined;
        this.globalService.showLoading();
        platform.ready()
            .then(function () {
            // Okay, so the platform is ready and our plugins are available.
            // Here you can do any higher level native things you might need.
            statusBar.styleDefault();
            splashScreen.hide();
            return _this.appComponentService.init();
        })
            .then(function (page) { return _this.rootPage = page; })
            .catch(function (error) {
            console.error(error);
            _this.globalService.showToast(error);
            _this.rootPage = __WEBPACK_IMPORTED_MODULE_6__pages_mywork_mywork__["a" /* MyWorkPage */];
        })
            .then(function () { return _this.appComponentService.downloadConstantData(); })
            .catch(function (error) { return console.error(error); })
            .then(function () { return _this.globalService.hideLoading(); });
    }
    return MyApp;
}());
MyApp = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\app\app.html"*/'<ion-nav [root]="rootPage"></ion-nav>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\app\app.html"*/,
        providers: [__WEBPACK_IMPORTED_MODULE_4__app_component_service__["a" /* AppComponentService */]]
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["l" /* Platform */],
        __WEBPACK_IMPORTED_MODULE_2__ionic_native_status_bar__["a" /* StatusBar */],
        __WEBPACK_IMPORTED_MODULE_3__ionic_native_splash_screen__["a" /* SplashScreen */],
        __WEBPACK_IMPORTED_MODULE_4__app_component_service__["a" /* AppComponentService */],
        __WEBPACK_IMPORTED_MODULE_5__providers_GlobalService__["a" /* GlobalService */]])
], MyApp);

//# sourceMappingURL=app.component.js.map

/***/ }),

/***/ 318:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppComponentService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ionic_native_android_permissions__ = __webpack_require__(118);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_FileService__ = __webpack_require__(23);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_my_plugin__ = __webpack_require__(119);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_history_myhistory__ = __webpack_require__(61);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pages_map_map__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__pages_search_search__ = __webpack_require__(63);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__pages_stationwork_stationwork__ = __webpack_require__(64);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__pages_news_news__ = __webpack_require__(65);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__pages_materials_materials__ = __webpack_require__(66);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__pages_setting_setting__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__pages_mywork_mywork__ = __webpack_require__(49);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__providers_DataService__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__providers_ConfigService__ = __webpack_require__(18);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};















var AppComponentService = (function () {
    function AppComponentService(androidPermissions, globalService, fileService, dataService, myPlugin, configService) {
        this.androidPermissions = androidPermissions;
        this.globalService = globalService;
        this.fileService = fileService;
        this.dataService = dataService;
        this.myPlugin = myPlugin;
        this.configService = configService;
    }
    /**
     * 初始化
     * @returns {Promise<any>}
     */
    AppComponentService.prototype.init = function () {
        var _this = this;
        if (this.globalService.isChrome) {
            this.myPlugin = this.globalService.getMyPluginMock();
            return this.dataService.init()
                .then(function (result) { return _this.parsePageIntent(); });
        }
        else {
            return this.checkPermissions()
                .then(function (result) { return _this.fileService.createDirRoot(); })
                .then(function (result) { return _this.dataService.init(); })
                .then(function (result) { return _this.parsePageIntent(); });
        }
    };
    AppComponentService.prototype.downloadConstantData = function () {
        var _this = this;
        if (this.globalService.isChrome) {
            return this.dataService.downloadWords()
                .then(function (result) { return _this.dataService.downloadMaterials(); })
                .then(function (result) { return _this.globalService.isWorker ? true : _this.dataService.downloadPersonnels(); });
        }
        else {
            return this.dataService.checkIfDownloadWords()
                .then(function (result) { return _this.dataService.checkIfDownloadMaterials(); })
                .then(function (result) { return _this.globalService.isWorker ? true : _this.dataService.checkIfDownloadPersonnels(); });
        }
    };
    /**
     * 检查权限
     * @returns {Promise<Promise<any>|void>|Promise<void>|Promise<TResult>|Promise<any>}
     */
    AppComponentService.prototype.checkPermissions = function () {
        var permissions = [
            this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION,
            this.androidPermissions.PERMISSION.ACCESS_FINE_LOCATION,
            this.androidPermissions.PERMISSION.ACCESS_WIFI_STATE,
            this.androidPermissions.PERMISSION.CHANGE_WIFI_STATE,
            this.androidPermissions.PERMISSION.READ_PHONE_STATE,
            this.androidPermissions.PERMISSION.WRITE_EXTERNAL_STORAGE,
            this.androidPermissions.PERMISSION.INTERNET,
            this.androidPermissions.PERMISSION.CAMERA,
            this.androidPermissions.PERMISSION.RECORD_AUDIO
        ];
        return this.androidPermissions.requestPermissions(permissions)
            .then(function (success) { return console.log('Permission granted'); }, function (err) { return console.error(err); });
    };
    /**
     * 解析参数
     * @returns {Promise<Page>|Promise<PageIntent>|Promise<TResult2|Page>}
     */
    AppComponentService.prototype.parsePageIntent = function () {
        var _this = this;
        return this.myPlugin.getPageIntent()
            .then(function (pageIntent) {
            console.log(pageIntent);
            if (!pageIntent.roles) {
                pageIntent.roles = _this.globalService.worker;
            }
            else if (pageIntent.roles.includes('PDA热线管理人员')) {
                pageIntent.roles = _this.globalService.manager;
            }
            else {
                pageIntent.roles = _this.globalService.worker;
            }
            if (!pageIntent.account
                || !pageIntent.userName
                || !pageIntent.departmentAndId
                || !pageIntent.params
                || pageIntent.params.length <= 0) {
                pageIntent = __WEBPACK_IMPORTED_MODULE_2__providers_GlobalService__["b" /* MyPluginMock */].pageIntent;
            }
            return _this.getExtendedInfo(pageIntent.extendedInfo)
                .then(function (extendedInfo) {
                if (extendedInfo
                    && extendedInfo.hasOwnProperty("network")
                    && extendedInfo['network'] !== undefined
                    && extendedInfo['network'] !== null) {
                    return _this.configService.setIsOuterNet(extendedInfo['network']);
                }
                else {
                    return Promise.resolve(true);
                }
            })
                .then(function () { return _this.setUserDetailInfo(pageIntent); })
                .then(function (result) {
                var params = pageIntent.params.split('#');
                var page;
                switch (params[0]) {
                    case 'MyHistory':
                        page = __WEBPACK_IMPORTED_MODULE_5__pages_history_myhistory__["a" /* MyHistory */];
                        break;
                    case 'MapPage':
                        page = __WEBPACK_IMPORTED_MODULE_6__pages_map_map__["a" /* MapPage */];
                        break;
                    case 'SearchPage':
                        page = __WEBPACK_IMPORTED_MODULE_7__pages_search_search__["a" /* SearchPage */];
                        break;
                    case 'StationWorkPage':
                        page = __WEBPACK_IMPORTED_MODULE_8__pages_stationwork_stationwork__["a" /* StationWorkPage */];
                        break;
                    case 'NewsPage':
                        page = __WEBPACK_IMPORTED_MODULE_9__pages_news_news__["a" /* NewsPage */];
                        break;
                    case 'MaterialsPage':
                        page = __WEBPACK_IMPORTED_MODULE_10__pages_materials_materials__["a" /* MaterialsPage */];
                        break;
                    case 'SettingPage':
                        page = __WEBPACK_IMPORTED_MODULE_11__pages_setting_setting__["a" /* SettingPage */];
                        break;
                    case 'MyWorkPage':
                    default:
                        page = __WEBPACK_IMPORTED_MODULE_12__pages_mywork_mywork__["a" /* MyWorkPage */];
                        break;
                }
                return Promise.resolve(page);
            });
        });
    };
    /**
     *
     * @param pageIntent
     * @returns {Promise<TResult|boolean>}
     */
    AppComponentService.prototype.setUserDetailInfo = function (pageIntent) {
        var _this = this;
        return this.globalService.saveUserDetailInfo({
            account: pageIntent.account,
            userId: pageIntent.userId,
            userName: pageIntent.userName,
            roles: pageIntent.roles,
            department: pageIntent.departmentAndId.split('#')[0],
            departmentId: 0
        }).catch(function (error) {
            console.error(error);
            _this.globalService.account = pageIntent.account;
            _this.globalService.userId = pageIntent.userId;
            _this.globalService.userName = pageIntent.userName;
            _this.globalService.isWorker = pageIntent.roles === _this.globalService.worker;
        });
        /*return this.globalService.getUserDetailInfo()
         .then(userDetailInfo => {
         // userId passed from main shell is not same as saved id
         // it will be changed in future
         //pageIntent.userId = userDetailInfo.userId;
         if (pageIntent.account === userDetailInfo.account
         && pageIntent.userId === userDetailInfo.userId
         && pageIntent.userName === userDetailInfo.userName) {
         return Promise.resolve(true);
         } else {
         return Promise.reject('different user');
         }
         })
         .catch(error => {
         console.error(error);
         return this.dataService.doLogin({
         userName: pageIntent.account,
         password: pageIntent.password,
         role: pageIntent.roles
         }).then(userResult => this.globalService.saveUserDetailInfo({
         account: pageIntent.account,
         userId: userResult.userId,
         userName: pageIntent.userName,
         roles: pageIntent.roles,
         department: userResult.Department,
         departmentId: 0
         })).catch(error => {
         console.error(error);
         this.globalService.account = pageIntent.account;
         this.globalService.userId = pageIntent.userId;
         this.globalService.userName = pageIntent.userName;
         this.globalService.isWorker = pageIntent.roles === this.globalService.worker;
         });
         });*/
    };
    AppComponentService.prototype.getExtendedInfo = function (extendedInfo) {
        var info;
        try {
            if (extendedInfo) {
                info = JSON.parse(extendedInfo);
            }
        }
        catch (e) {
            console.error(e);
        }
        return Promise.resolve(info);
    };
    return AppComponentService;
}());
AppComponentService = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["B" /* Injectable */])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__ionic_native_android_permissions__["a" /* AndroidPermissions */],
        __WEBPACK_IMPORTED_MODULE_2__providers_GlobalService__["a" /* GlobalService */],
        __WEBPACK_IMPORTED_MODULE_3__providers_FileService__["a" /* FileService */],
        __WEBPACK_IMPORTED_MODULE_13__providers_DataService__["a" /* DataService */],
        __WEBPACK_IMPORTED_MODULE_4__ionic_native_my_plugin__["a" /* MyPlugin */],
        __WEBPACK_IMPORTED_MODULE_14__providers_ConfigService__["a" /* ConfigService */]])
], AppComponentService);

//# sourceMappingURL=app.component.service.js.map

/***/ }),

/***/ 324:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MsgType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return SyncService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__DownloadService__ = __webpack_require__(121);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__UploadService__ = __webpack_require__(125);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__model_Task__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__DbService__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__MediaService__ = __webpack_require__(127);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ConfigService__ = __webpack_require__(18);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var MsgType;
(function (MsgType) {
    MsgType[MsgType["DownloadTasksAndDetails"] = 0] = "DownloadTasksAndDetails";
    //DownloadDetailOfTask,
    MsgType[MsgType["UploadMediasOfHistory"] = 1] = "UploadMediasOfHistory";
    MsgType[MsgType["UploadHistoriesAndMedias"] = 2] = "UploadHistoriesAndMedias";
    MsgType[MsgType["UploadMaterialInfos"] = 3] = "UploadMaterialInfos";
    //UploadMedias
    MsgType[MsgType["UploadAllInfos"] = 4] = "UploadAllInfos"; // history & media & material
})(MsgType || (MsgType = {}));
var SyncService = (function () {
    function SyncService(downloadService, uploadService, globalService, dbService, mediaService, events, configService) {
        this.downloadService = downloadService;
        this.uploadService = uploadService;
        this.globalService = globalService;
        this.dbService = dbService;
        this.mediaService = mediaService;
        this.events = events;
        this.configService = configService;
        this.syncEvent = 'sync:service';
        this.downloadTaskEvent = 'task:download';
        this.downloadTaskDetailEvent = 'task:detail:download';
        this.uploadHistoryEvent = 'history:upload';
        this.uploadMediaEvent = 'media:upload';
        this.uploadMaterialInfoEvent = 'materialInfo:upload';
        this.queue = [];
    }
    /**
     * 初始化
     */
    SyncService.prototype.init = function () {
        this.isServiceBusy = false;
        this.subscribeSyncEvent();
        this.subscribeDownloadEvent();
        this.subscribeUploadEvent();
        this.subscribeUploadMaterialInfoEvent();
    };
    /**
     * 销毁
     */
    SyncService.prototype.destroy = function () {
        this.events.unsubscribe(this.syncEvent);
        this.events.unsubscribe(this.downloadTaskEvent);
        this.events.unsubscribe(this.downloadTaskDetailEvent);
        this.events.unsubscribe(this.uploadHistoryEvent);
        this.events.unsubscribe(this.uploadMediaEvent);
        this.events.unsubscribe(this.uploadMaterialInfoEvent);
    };
    /**
     * 发送同步事件
     * @param syncMsg
     */
    SyncService.prototype.sendMsg = function (syncMsg) {
        this.queue.push(syncMsg);
        this.events.publish(this.syncEvent);
    };
    /**
     * 接收
     * @param acceptInfo
     * @param task
     * @param output
     * @returns {any}
     */
    SyncService.prototype.accept = function (acceptInfo, task, output) {
        var _this = this;
        if (output === void 0) { output = { uploadedFlag: this.globalService.uploadedFlagForLocal }; }
        if (this.configService.isDebugMode()) {
            debugger;
        }
        if (!acceptInfo || !task) {
            return Promise.reject('param is error');
        }
        else if (this.globalService.isChrome) {
            return this.uploadService.accept(acceptInfo)
                .then(function (result) {
                output.uploadedFlag = result ? _this.globalService.uploadedFlagForUploaded : _this.globalService.uploadedFlagForLocal;
                return result;
            });
        }
        else {
            return this.dbService.getHistories(acceptInfo.userId, acceptInfo.taskId)
                .then(function (histories) {
                if (_this.isExistingNotUploadedHistory(histories, __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Accept)) {
                    return _this.dbService.saveHistory({
                        userId: acceptInfo.userId,
                        taskId: acceptInfo.taskId,
                        state: __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Accept,
                        task: task,
                        reply: acceptInfo,
                        uploadedFlag: output.uploadedFlag = _this.globalService.uploadedFlagForLocal
                    }).then(function (result) { return _this.dbService.saveTask(task); });
                }
                else {
                    return _this.uploadService.accept(acceptInfo)
                        .then(function (result) { return _this.dbService.saveHistory({
                        userId: acceptInfo.userId,
                        taskId: acceptInfo.taskId,
                        state: __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Accept,
                        task: task,
                        reply: acceptInfo,
                        uploadedFlag: output.uploadedFlag = result ? _this.globalService.uploadedFlagForUploaded : _this.globalService.uploadedFlagForLocal
                    }); })
                        .then(function (result) { return _this.dbService.saveTask(task); });
                }
            });
        }
    };
    /**
     * 出发
     * @param goInfo
     * @param task
     * @param output
     * @returns {any}
     */
    SyncService.prototype.go = function (goInfo, task, output) {
        var _this = this;
        if (output === void 0) { output = { uploadedFlag: this.globalService.uploadedFlagForLocal }; }
        if (this.configService.isDebugMode()) {
            debugger;
        }
        if (!goInfo || !task) {
            return Promise.reject('param is error');
        }
        else if (this.globalService.isChrome) {
            return this.uploadService.go(goInfo)
                .then(function (result) {
                output.uploadedFlag = result ? _this.globalService.uploadedFlagForUploaded : _this.globalService.uploadedFlagForLocal;
                return result;
            });
        }
        else {
            return this.dbService.getHistories(goInfo.userId, goInfo.taskId)
                .then(function (histories) {
                if (_this.isExistingNotUploadedHistory(histories, __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Go)) {
                    return _this.dbService.saveHistory({
                        userId: goInfo.userId,
                        taskId: goInfo.taskId,
                        state: __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Go,
                        task: task,
                        reply: goInfo,
                        uploadedFlag: output.uploadedFlag = _this.globalService.uploadedFlagForLocal
                    }).then(function (result) { return _this.dbService.saveTask(task); });
                }
                else {
                    return _this.uploadService.go(goInfo)
                        .then(function (result) { return _this.dbService.saveHistory({
                        userId: goInfo.userId,
                        taskId: goInfo.taskId,
                        state: __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Go,
                        task: task,
                        reply: goInfo,
                        uploadedFlag: output.uploadedFlag = result ? _this.globalService.uploadedFlagForUploaded : _this.globalService.uploadedFlagForLocal
                    }); })
                        .then(function (result) { return _this.dbService.saveTask(task); });
                }
            });
        }
    };
    /**
     * 到场
     * @param arriveInfo
     * @param task
     * @param output
     * @returns {any}
     */
    SyncService.prototype.arrive = function (arriveInfo, task, output) {
        var _this = this;
        if (output === void 0) { output = { uploadedFlag: this.globalService.uploadedFlagForLocal }; }
        if (this.configService.isDebugMode()) {
            debugger;
        }
        if (!arriveInfo || !task) {
            return Promise.reject('param is error');
        }
        else if (this.globalService.isChrome) {
            return this.uploadService.arrive(arriveInfo)
                .then(function (result) {
                output.uploadedFlag = result ? _this.globalService.uploadedFlagForUploaded : _this.globalService.uploadedFlagForLocal;
                return result;
            });
        }
        else {
            return this.dbService.getHistories(arriveInfo.userId, arriveInfo.taskId)
                .then(function (histories) {
                if (_this.isExistingNotUploadedHistory(histories, __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Arrived)) {
                    return _this.dbService.saveHistory({
                        userId: arriveInfo.userId,
                        taskId: arriveInfo.taskId,
                        state: __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Arrived,
                        task: task,
                        reply: arriveInfo,
                        uploadedFlag: output.uploadedFlag = _this.globalService.uploadedFlagForLocal
                    }).then(function (result) { return _this.dbService.saveTask(task); });
                }
                else {
                    return _this.uploadService.arrive(arriveInfo)
                        .then(function (result) { return _this.dbService.saveHistory({
                        userId: arriveInfo.userId,
                        taskId: arriveInfo.taskId,
                        state: __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Arrived,
                        task: task,
                        reply: arriveInfo,
                        uploadedFlag: output.uploadedFlag = result ? _this.globalService.uploadedFlagForUploaded : _this.globalService.uploadedFlagForLocal
                    }); })
                        .then(function (result) { return _this.dbService.saveTask(task); });
                }
            });
        }
    };
    /**
     * 回复
     * @param replyInfo
     * @param task
     * @param taskDetail
     * @param mediaNames
     * @param output
     * @returns {any}
     */
    SyncService.prototype.reply = function (replyInfo, task, taskDetail, mediaNames, output) {
        var _this = this;
        if (output === void 0) { output = { uploadedFlag: this.globalService.uploadedFlagForLocal }; }
        if (this.configService.isDebugMode()) {
            debugger;
        }
        if (!replyInfo || !task || !taskDetail || !mediaNames) {
            return Promise.reject('param is error');
        }
        else if (this.globalService.isChrome) {
            return this.uploadService.reply(replyInfo)
                .then(function (result) {
                output.uploadedFlag = result ? _this.globalService.uploadedFlagForUploaded : _this.globalService.uploadedFlagForLocal;
                return result;
            });
        }
        else {
            return this.dbService.getHistories(replyInfo.userId, replyInfo.taskId)
                .then(function (histories) {
                if (_this.isExistingNotUploadedHistory(histories, __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Reply)) {
                    return _this.dbService.saveHistory({
                        userId: replyInfo.userId,
                        taskId: replyInfo.taskId,
                        state: __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Reply,
                        task: task,
                        reply: replyInfo,
                        uploadedFlag: output.uploadedFlag = _this.globalService.uploadedFlagForLocal,
                        taskDetail: taskDetail,
                        mediaNames: mediaNames
                    }).then(function (result) { return _this.dbService.saveTask(task); });
                }
                else {
                    return _this.uploadService.reply(replyInfo)
                        .catch(function (error) { return console.error(error); })
                        .then(function (result) { return _this.dbService.saveHistory({
                        userId: replyInfo.userId,
                        taskId: replyInfo.taskId,
                        state: __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Reply,
                        task: task,
                        reply: replyInfo,
                        uploadedFlag: output.uploadedFlag = result ? _this.globalService.uploadedFlagForUploaded : _this.globalService.uploadedFlagForLocal,
                        taskDetail: taskDetail,
                        mediaNames: mediaNames
                    }); })
                        .then(function (result) { return _this.dbService.saveTask(task); });
                }
            });
        }
    };
    /**
     * 退单
     * @param rejectInfo
     * @param task
     * @param output
     * @returns {any}
     */
    SyncService.prototype.reject = function (rejectInfo, task, output) {
        var _this = this;
        if (output === void 0) { output = { uploadedFlag: this.globalService.uploadedFlagForLocal }; }
        if (this.configService.isDebugMode()) {
            debugger;
        }
        if (!rejectInfo || !task) {
            return Promise.reject('param is error');
        }
        else if (this.globalService.isChrome) {
            return this.uploadService.reject(rejectInfo)
                .then(function (result) {
                output.uploadedFlag = result ? _this.globalService.uploadedFlagForUploaded : _this.globalService.uploadedFlagForLocal;
                return result;
            });
        }
        else {
            return this.dbService.getHistories(rejectInfo.userId, rejectInfo.taskId)
                .then(function (histories) {
                if (_this.isExistingNotUploadedHistory(histories, __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Reject)) {
                    return _this.dbService.saveHistory({
                        userId: rejectInfo.userId,
                        taskId: rejectInfo.taskId,
                        state: __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Reject,
                        task: task,
                        reply: rejectInfo,
                        uploadedFlag: output.uploadedFlag = _this.globalService.uploadedFlagForLocal
                    }).then(function (result) { return _this.dbService.saveTask(task); });
                }
                else {
                    return _this.uploadService.reject(rejectInfo)
                        .then(function (result) { return _this.dbService.saveHistory({
                        userId: rejectInfo.userId,
                        taskId: rejectInfo.taskId,
                        state: __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Reject,
                        task: task,
                        reply: rejectInfo,
                        uploadedFlag: output.uploadedFlag = result ? _this.globalService.uploadedFlagForUploaded : _this.globalService.uploadedFlagForLocal
                    }); })
                        .then(function (result) { return _this.dbService.saveTask(task); });
                }
            });
        }
    };
    /**
     * 延期
     * @param delayInfo
     * @param task
     * @param output
     * @returns {any}
     */
    SyncService.prototype.delay = function (delayInfo, task, output) {
        var _this = this;
        if (output === void 0) { output = { uploadedFlag: this.globalService.uploadedFlagForLocal }; }
        if (this.configService.isDebugMode()) {
            debugger;
        }
        if (!delayInfo || !task) {
            return Promise.reject('param is error');
        }
        else if (this.globalService.isChrome) {
            return this.uploadService.delay(delayInfo)
                .then(function (result) {
                output.uploadedFlag = result ? _this.globalService.uploadedFlagForUploaded : _this.globalService.uploadedFlagForLocal;
                return result;
            });
        }
        else {
            return this.dbService.getHistories(delayInfo.userId, delayInfo.taskId)
                .then(function (histories) {
                if (_this.isExistingNotUploadedHistory(histories, __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Delay)) {
                    return _this.dbService.saveHistory({
                        userId: delayInfo.userId,
                        taskId: delayInfo.taskId,
                        state: __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Delay,
                        task: task,
                        reply: delayInfo,
                        uploadedFlag: output.uploadedFlag = _this.globalService.uploadedFlagForLocal
                    }).then(function (result) { return _this.dbService.saveTask(task); });
                }
                else {
                    return _this.uploadService.delay(delayInfo)
                        .then(function (result) { return _this.dbService.saveHistory({
                        userId: delayInfo.userId,
                        taskId: delayInfo.taskId,
                        state: __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Delay,
                        task: task,
                        reply: delayInfo,
                        uploadedFlag: output.uploadedFlag = result ? _this.globalService.uploadedFlagForUploaded : _this.globalService.uploadedFlagForLocal
                    }); })
                        .then(function (result) { return _this.dbService.saveTask(task); });
                }
            });
        }
    };
    /**
     * 销单
     * @param cancelInfo
     * @param task
     * @param output
     * @returns {any}
     */
    SyncService.prototype.cancel = function (cancelInfo, task, output) {
        var _this = this;
        if (output === void 0) { output = { uploadedFlag: this.globalService.uploadedFlagForLocal }; }
        if (this.configService.isDebugMode()) {
            debugger;
        }
        if (!cancelInfo || !task) {
            return Promise.reject('param is error');
        }
        else if (this.globalService.isChrome) {
            return this.uploadService.cancel(cancelInfo)
                .then(function (result) {
                output.uploadedFlag = result ? _this.globalService.uploadedFlagForUploaded : _this.globalService.uploadedFlagForLocal;
                return result;
            });
        }
        else {
            return this.dbService.getHistories(cancelInfo.userId, cancelInfo.taskId)
                .then(function (histories) {
                if (_this.isExistingNotUploadedHistory(histories, __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Cancel)) {
                    return _this.dbService.saveHistory({
                        userId: cancelInfo.userId,
                        taskId: cancelInfo.taskId,
                        state: __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Cancel,
                        task: task,
                        reply: cancelInfo,
                        uploadedFlag: output.uploadedFlag = _this.globalService.uploadedFlagForLocal
                    }).then(function (result) { return _this.dbService.saveTask(task); });
                }
                else {
                    return _this.uploadService.cancel(cancelInfo)
                        .then(function (result) { return _this.dbService.saveHistory({
                        userId: cancelInfo.userId,
                        taskId: cancelInfo.taskId,
                        state: __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Cancel,
                        task: task,
                        reply: cancelInfo,
                        uploadedFlag: output.uploadedFlag = result ? _this.globalService.uploadedFlagForUploaded : _this.globalService.uploadedFlagForLocal
                    }); })
                        .then(function (result) { return _this.dbService.saveTask(task); });
                }
            });
        }
    };
    /**
     * 订阅同步事件
     */
    SyncService.prototype.subscribeSyncEvent = function () {
        var _this = this;
        this.events.subscribe(this.syncEvent, function () {
            if (_this.isServiceBusy) {
                console.log('service is busy');
            }
            else if (_this.queue.length <= 0) {
                console.log('the length of this queue is 0');
            }
            else {
                _this.isServiceBusy = true;
                var syncMsg = _this.queue.shift();
                switch (syncMsg.msgType) {
                    case MsgType.DownloadTasksAndDetails:
                        _this.downloadTasks(syncMsg.msgType);
                        break;
                    case MsgType.UploadMediasOfHistory:
                        _this.uploadMedias(syncMsg.msgType, syncMsg.taskId);
                        break;
                    case MsgType.UploadHistoriesAndMedias:
                        _this.uploadHistories(syncMsg.msgType);
                        break;
                    case MsgType.UploadMaterialInfos:
                        _this.uploadUnUploadMaterialInfo(syncMsg.msgType);
                        break;
                    case MsgType.UploadAllInfos:
                        _this.uploadHistories(syncMsg.msgType);
                        break;
                    default:
                        _this.next();
                        break;
                }
            }
        });
    };
    /**
     * 订阅下载事件
     */
    SyncService.prototype.subscribeDownloadEvent = function () {
        var _this = this;
        // download all tasks
        this.events.subscribe(this.downloadTaskEvent, function (msgType, since, count) {
            _this.downloadService.getTasks(_this.globalService.userId, since, count)
                .then(function (tasks) {
                var retTasks = [];
                var _loop_1 = function (task) {
                    task.taskId += "#" + task.assignTime; // modify for the rejected task
                    var item = retTasks.find(function (item) {
                        return item.taskId === task.taskId
                            && item.acceptTime === task.acceptTime
                            && item.arrivedTime === task.arrivedTime
                            && item.assignTime === task.assignTime
                            && item.compltedTime === task.compltedTime
                            && item.createTime === task.createTime
                            && item.desc === task.desc
                            && item.goTime === task.goTime
                            && item.replyTime === task.replyTime
                            && item.source === task.source
                            && item.state === task.state
                            && item.taskType === task.taskType;
                    });
                    if (!item) {
                        retTasks.push(task);
                    }
                };
                for (var _i = 0, tasks_1 = tasks; _i < tasks_1.length; _i++) {
                    var task = tasks_1[_i];
                    _loop_1(task);
                }
                return retTasks;
            })
                .then(function (tasks) { return _this.dbService.saveTasks(_this.globalService.userId, tasks); })
                .then(function (result) {
                _this.events.publish(_this.downloadTaskEvent, msgType, since + count, count);
            })
                .catch(function (error) {
                console.error(error);
                if (msgType == MsgType.DownloadTasksAndDetails) {
                    _this.downloadDetails(msgType);
                }
                else {
                    _this.next();
                    _this.events.publish(_this.globalService.myWorkDownloadFinishEvent);
                }
            });
        });
        // download task detail
        this.events.subscribe(this.downloadTaskDetailEvent, function (msgType, taskIds) {
            if (taskIds && taskIds.length > 0) {
                var taskId_1 = taskIds.shift();
                if (taskId_1) {
                    // modify for the rejected task
                    return _this.downloadService.getTaskDetail(taskId_1.split('#')[0])
                        .then(function (detail) {
                        detail.taskId = taskId_1; // modify for the rejected task
                        return _this.dbService.saveTaskDetail(detail)
                            .then(function (result) { return result ? _this.dbService.updateTaskExtendInfo(detail) : false; });
                    })
                        .catch(function (error) { return console.error(error); })
                        .then(function (result) { return _this.events.publish(_this.downloadTaskDetailEvent, msgType, taskIds); });
                }
            }
            _this.next();
            _this.events.publish(_this.globalService.myWorkDownloadFinishEvent);
        });
    };
    /**
     * 订阅上传事件
     */
    SyncService.prototype.subscribeUploadEvent = function () {
        var _this = this;
        // upload histories
        this.events.subscribe(this.uploadHistoryEvent, function (msgType, histories) {
            if (histories && histories.length > 0) {
                var history_1 = histories.shift();
                var task = history_1.task;
                var promise = void 0;
                if (task && history_1.reply) {
                    var taskDetail = history_1.taskDetail;
                    var mediaNames = history_1.mediaNames;
                    switch (history_1.state) {
                        case __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Accept:
                            promise = _this.accept(history_1.reply, task);
                            break;
                        case __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Go:
                            promise = _this.go(history_1.reply, task);
                            break;
                        case __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Arrived:
                            promise = _this.arrive(history_1.reply, task);
                            break;
                        case __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Reply:
                            promise = _this.reply(history_1.reply, task, taskDetail, mediaNames);
                            break;
                        case __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Reject:
                            promise = _this.reject(history_1.reply, task);
                            break;
                        case __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Delay:
                            promise = _this.delay(history_1.reply, task);
                            break;
                        case __WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Cancel:
                            promise = _this.cancel(history_1.reply, task);
                            break;
                        default:
                            promise = Promise.reject('state is error');
                            break;
                    }
                }
                else {
                    promise = Promise.reject('state is error');
                }
                promise
                    .then(function (data) { return console.log(data); })
                    .catch(function (error) { return console.error(error); })
                    .then(function () { return _this.events.publish(_this.uploadHistoryEvent, msgType, histories); });
            }
            else {
                if (msgType === MsgType.UploadHistoriesAndMedias || msgType === MsgType.UploadAllInfos) {
                    _this.uploadMedias(msgType);
                }
                else {
                    _this.next();
                    _this.events.publish(_this.globalService.historyUploadFinishEvent);
                }
            }
        });
        // upload media
        this.events.subscribe(this.uploadMediaEvent, function (msgType, histories) {
            if (histories && histories.length > 0) {
                var history_2 = histories.shift();
                var mediaNames = history_2.mediaNames;
                if (mediaNames && mediaNames.length > 0) {
                    for (var i = 0; i < mediaNames.length; i++) {
                        mediaNames[i] = mediaNames[i].replace(/#\d*/, '');
                    }
                    _this.dbService.getMediaList(_this.globalService.userId, history_2.taskId, mediaNames, [_this.globalService.uploadedFlagForLocal, _this.globalService.uploadedFlagForUploading])
                        .then(function (mediaList) { return _this.configService.isNewFilService() ? _this.uploadMediaListV2(mediaList) : _this.uploadMediaList(mediaList); })
                        .catch(function (error) { return console.error(error); })
                        .then(function () { return _this.events.publish(_this.uploadMediaEvent, msgType, histories); });
                }
                else {
                    _this.events.publish(_this.uploadMediaEvent, msgType, histories);
                }
            }
            else {
                if (msgType === MsgType.UploadAllInfos) {
                    _this.uploadUnUploadMaterialInfo(msgType);
                }
                else {
                    _this.next();
                    _this.events.publish(_this.globalService.historyUploadFinishEvent);
                }
            }
        });
    };
    /**
     * 下载任务
     * @param msgType
     */
    SyncService.prototype.downloadTasks = function (msgType) {
        if (this.globalService.isChrome) {
            this.next();
            this.events.publish(this.globalService.myWorkDownloadFinishEvent);
        }
        else {
            this.events.publish(this.downloadTaskEvent, msgType, this.globalService.taskSinceDefault, this.globalService.taskCountDefault100);
        }
    };
    /**
     * 下载任务详情
     * @param msgType
     */
    SyncService.prototype.downloadDetails = function (msgType) {
        var _this = this;
        if (this.globalService.isChrome) {
            this.next();
            this.events.publish(this.globalService.myWorkDownloadFinishEvent);
        }
        else {
            this.dbService.getNoDetailTaskIds(this.globalService.userId)
                .catch(function (error) { return console.error(error); })
                .then(function (taskIds) { return _this.events.publish(_this.downloadTaskDetailEvent, msgType, taskIds); });
        }
    };
    /**
     * 上传历史工单
     * @param msgType
     */
    SyncService.prototype.uploadHistories = function (msgType) {
        var _this = this;
        if (this.globalService.isChrome) {
            this.next();
            this.events.publish(this.globalService.historyUploadFinishEvent);
        }
        else {
            this.dbService.getHistories(this.globalService.userId, undefined, undefined, [this.globalService.uploadedFlagForLocal, this.globalService.uploadedFlagForUploading])
                .catch(function (error) { return console.error(error); })
                .then(function (histories) { return _this.events.publish(_this.uploadHistoryEvent, msgType, histories); });
        }
    };
    /**
     * 上传多媒体
     * @param msgType
     * @param taskId
     */
    SyncService.prototype.uploadMedias = function (msgType, taskId) {
        var _this = this;
        if (this.globalService.isChrome) {
            this.next();
            this.events.publish(this.globalService.historyUploadFinishEvent);
        }
        else {
            this.dbService.getHistories(this.globalService.userId, taskId, [__WEBPACK_IMPORTED_MODULE_5__model_Task__["b" /* TaskState */].Reply], [])
                .catch(function (error) { return console.error(error); })
                .then(function (histories) { return _this.events.publish(_this.uploadMediaEvent, msgType, histories); });
        }
    };
    /**
     * 上传每个任务下的多媒体信息V2
     * @param mediaList
     * @returns {any}
     */
    SyncService.prototype.uploadMediaListV2 = function (mediaList) {
        var _this = this;
        if (mediaList && mediaList.length > 0) {
            var promises = mediaList.map(function (media) { return _this.uploadOneMediaV2(media); });
            return Promise.all(promises)
                .then(function (result) {
                var files = mediaList.map(function (media) { return media.extendedInfo; });
                return _this.uploadService.uploadMediaIdsV2(mediaList[0].taskId.split('#')[0], _this.globalService.userId, files);
            })
                .then(function (result) {
                for (var _i = 0, mediaList_1 = mediaList; _i < mediaList_1.length; _i++) {
                    var media = mediaList_1[_i];
                    media.uploadedFlag = result ? _this.globalService.uploadedFlagForUploaded : _this.globalService.uploadedFlagForLocal;
                }
                var promises = mediaList.map(function (media) { return _this.dbService.saveMedia(media); });
                return Promise.all(promises)
                    .then(function (results) { return true; });
            });
        }
        else {
            return Promise.resolve(true);
        }
    };
    /**
     * 上传每个任务下的多媒体信息
     * @param mediaList
     * @returns {any}
     */
    SyncService.prototype.uploadMediaList = function (mediaList) {
        var _this = this;
        if (mediaList && mediaList.length > 0) {
            var promises = mediaList.map(function (media) { return _this.uploadOneMedia(media); });
            return Promise.all(promises)
                .then(function (result) {
                var files = mediaList.map(function (media) { return media.fileId; });
                return _this.uploadService.uploadMediaIds(mediaList[0].taskId.split('#')[0], files.join(','));
            })
                .then(function (result) {
                for (var _i = 0, mediaList_2 = mediaList; _i < mediaList_2.length; _i++) {
                    var media = mediaList_2[_i];
                    media.uploadedFlag = result ? _this.globalService.uploadedFlagForUploaded : _this.globalService.uploadedFlagForLocal;
                }
                var promises = mediaList.map(function (media) { return _this.dbService.saveMedia(media); });
                return Promise.all(promises)
                    .then(function (results) { return true; });
            });
        }
        else {
            return Promise.resolve(true);
        }
    };
    /**
     * 上传V2
     * @param media
     * @returns {Promise<boolean>}
     */
    SyncService.prototype.uploadOneMediaV2 = function (media) {
        var _this = this;
        return media.fileId && media.fileId !== 'null' && media.fileId !== 'undefined'
            ? Promise.resolve(true)
            : this.uploadService.uploadMediaV2(media)
                .then(function (fileId) {
                if (fileId) {
                    media.fileId = fileId;
                    return _this.dbService.saveMedia(media);
                }
                else {
                    return Promise.reject('fileId is error');
                }
            });
    };
    /**
     * 上传
     * @param media
     * @returns {Promise<boolean>}
     */
    SyncService.prototype.uploadOneMedia = function (media) {
        var _this = this;
        return media.fileId && media.fileId !== 'null' && media.fileId !== 'undefined'
            ? Promise.resolve(true)
            : this.uploadService.uploadMedia(media)
                .then(function (fileId) {
                if (fileId) {
                    media.fileId = fileId;
                    return _this.dbService.saveMedia(media);
                }
                else {
                    return Promise.reject('fileId is error');
                }
            });
    };
    /**
     * 检查是否存在未上传的历史记录
     * @param histories
     * @param state
     * @returns {boolean}
     */
    SyncService.prototype.isExistingNotUploadedHistory = function (histories, state) {
        var existing = false;
        if (histories && histories.length > 0) {
            for (var _i = 0, histories_1 = histories; _i < histories_1.length; _i++) {
                var history_3 = histories_1[_i];
                if (history_3.state === state) {
                    break;
                }
                if (history_3.uploadedFlag !== this.globalService.uploadedFlagForUploaded) {
                    existing = true;
                }
            }
        }
        return existing;
    };
    /**
     * 上传本地未上传的材料登记记录
     * @returns {Promise<T>}
     */
    SyncService.prototype.uploadUnUploadMaterialInfo = function (msgType) {
        var _this = this;
        if (this.globalService.isChrome) {
            this.next();
            this.events.publish(this.globalService.historyUploadFinishEvent);
            return;
        }
        return this.dbService.getNotUploadMaterilalInfo(this.globalService.userId)
            .catch(function (error) { return console.log(error); })
            .then(function (results) { return _this.events.publish(_this.uploadMaterialInfoEvent, results); });
    };
    /**
     * 订阅上传事件 材料清单
     */
    SyncService.prototype.subscribeUploadMaterialInfoEvent = function () {
        var _this = this;
        this.events.subscribe(this.uploadMaterialInfoEvent, function (materialInfos) {
            if (materialInfos && materialInfos.length > 0) {
                var materialInfo = materialInfos.shift();
                if (materialInfo) {
                    _this.uploadMaterialInfo(materialInfo)
                        .then(function (result) { return console.log(result); })
                        .catch(function (error) { return console.log(error); })
                        .then(function () { return _this.events.publish(_this.uploadMaterialInfoEvent, materialInfos); });
                }
            }
            else {
                _this.next();
                _this.events.publish(_this.globalService.historyUploadFinishEvent);
            }
        });
    };
    /**
     * 上传某条工单的记录并且修改标志位
     * @param data
     * @returns {Promise<T>}
     */
    SyncService.prototype.uploadMaterialInfo = function (data) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            return _this.uploadService.uploadMaterialsAdd(data.infos)
                .then(function (result) {
                //更新上传标志
                if (result) {
                    data.uploadFlag = _this.globalService.uploadedFlagForUploaded; //已上传
                    resolve(_this.dbService.updateFlagMaterials(data));
                }
                else {
                    reject("upload failed");
                }
            })
                .catch(function (error) {
                reject(false);
            });
        });
    };
    /**
     *
     */
    SyncService.prototype.next = function () {
        this.isServiceBusy = false;
        this.events.publish(this.syncEvent);
    };
    return SyncService;
}());
SyncService = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["B" /* Injectable */])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__DownloadService__["a" /* DownloadService */],
        __WEBPACK_IMPORTED_MODULE_2__UploadService__["a" /* UploadService */],
        __WEBPACK_IMPORTED_MODULE_3__GlobalService__["a" /* GlobalService */],
        __WEBPACK_IMPORTED_MODULE_6__DbService__["a" /* DbService */],
        __WEBPACK_IMPORTED_MODULE_7__MediaService__["a" /* MediaService */],
        __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_8__ConfigService__["a" /* ConfigService */]])
], SyncService);

//# sourceMappingURL=SyncService.js.map

/***/ }),

/***/ 325:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HistoryEx; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Task__ = __webpack_require__(36);

var HistoryEx = (function () {
    function HistoryEx(history) {
        this.userId = history.userId;
        this.taskId = history.taskId;
        this.state = history.state;
        this.task = history.task;
        this.reply = history.reply;
        this.uploadedFlag = history.uploadedFlag;
        this.taskDetail = history.taskDetail;
        this.mediaNames = history.mediaNames;
        this.isRejected = history.state === __WEBPACK_IMPORTED_MODULE_0__Task__["b" /* TaskState */].Reject;
        this.isCanceled = history.state === __WEBPACK_IMPORTED_MODULE_0__Task__["b" /* TaskState */].Cancel;
        this.photoCount = 0;
        this.audioCount = 0; //todo 录音的数量
        this.videoCount = 0;
        this.isLocationValid = __WEBPACK_IMPORTED_MODULE_0__Task__["a" /* TaskEx */].checkLocation(this.task.location);
        if (this.task.extendedInfo && this.task.extendedInfo.delayTime > 0) {
            this.delayTime = this.task.extendedInfo.delayTime;
            if (this.delayTime > this.task.arrivedTime) {
                this.delayBeyond = "arrived";
            }
            else if (this.delayTime > this.task.goTime) {
                this.delayBeyond = "go";
            }
            else {
                this.delayBeyond = "accept";
            }
        }
    }
    HistoryEx.transformToHistoryEx = function (historyEx, historys) {
        for (var _i = 0, historys_1 = historys; _i < historys_1.length; _i++) {
            var history_1 = historys_1[_i];
            historyEx.push(new HistoryEx(history_1));
        }
    };
    return HistoryEx;
}());

//# sourceMappingURL=History.js.map

/***/ }),

/***/ 326:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SearchTaskRequest; });
/**
 * 查询工单检索模型
 * Created by zhangjing on 2017/7/4.
 */
var SearchTaskRequest = (function () {
    function SearchTaskRequest() {
    }
    return SearchTaskRequest;
}());

//# sourceMappingURL=SearchTaskRequest.js.map

/***/ }),

/***/ 327:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HomePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var HomePage = (function () {
    function HomePage(navCtrl) {
        this.navCtrl = navCtrl;
    }
    return HomePage;
}());
HomePage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-home',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\home\home.html"*/'<ion-header>\n\n  <ion-navbar>\n\n    <ion-title>\n\n      Ionic Blank\n\n    </ion-title>\n\n  </ion-navbar>\n\n</ion-header>\n\n\n\n<ion-content padding>\n\n  The world is your oyster.\n\n  <p>\n\n    If you get lost, the <a href="http://ionicframework.com/docs/v2">docs</a> will be your guide.\n\n  </p>\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\home\home.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */]])
], HomePage);

//# sourceMappingURL=home.js.map

/***/ }),

/***/ 328:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return WelcomePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__login_login__ = __webpack_require__(242);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_FileService__ = __webpack_require__(23);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_app_version__ = __webpack_require__(247);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_DataService__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_android_permissions__ = __webpack_require__(118);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var WelcomePage = (function () {
    function WelcomePage(navCtrl, loadingCtrl, platform, fileService, appVersion, androidPermissions, globalService, dataService) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.loadingCtrl = loadingCtrl;
        this.platform = platform;
        this.fileService = fileService;
        this.appVersion = appVersion;
        this.androidPermissions = androidPermissions;
        this.globalService = globalService;
        this.dataService = dataService;
        this.tag = "[WelcomePage]";
        this.platform.ready().then(function (readySource) { return _this.checkPermissions(); });
    }
    WelcomePage.prototype.checkPermissions = function () {
        var _this = this;
        if (this.globalService.isChrome) {
            this.onDidEnter();
        }
        else {
            this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.CAMERA)
                .then(function (success) { return console.log('Permission granted'); }, function (err) { return _this.androidPermissions.requestPermissions(_this.androidPermissions.PERMISSION.CAMERA); })
                .then(function () { return _this.onDidEnter(); })
                .catch(function (error) {
                console.error(error);
                _this.globalService.showToast(error);
            });
        }
    };
    /**
     * 进入页面回调
     */
    WelcomePage.prototype.onDidEnter = function () {
        var _this = this;
        this.loading = this.loadingCtrl.create({
            content: '加载中...',
            dismissOnPageChange: true
        });
        this.loading.present();
        //判断是否是安卓平台
        if (!this.globalService.isChrome) {
            console.log("platform is on android");
            this.fileService.createDirRoot()
                .then(function (result) {
                console.log(_this.tag + 'onDidEnter:' + result);
                // cordova.plugins.MyPlugin.onGetNavUrl(result => {
                //   if (result == 'addMaterials') {
                //     this.navCtrl.push(MaterialsPage, {});
                //   }
                // }, error => alert(error));
                _this.getVersionCode();
                _this.jump2Login();
            })
                .catch(function (err) {
                console.log("initial files failed" + err);
            });
        }
        else {
            console.log("platform is on chrome");
            this.loading.dismiss();
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__login_login__["a" /* LoginPage */], {});
        }
    };
    /**
     * 获得版本号
     */
    WelcomePage.prototype.getVersionCode = function () {
        var _this = this;
        this.appVersion.getVersionCode()
            .then(function (versionCode) {
            console.log(versionCode);
            _this.checkUpdate(versionCode);
        })
            .catch(function (err) {
            console.log("getVersionCode:" + err);
        });
    };
    /**
     * 检查更新(app和data)
     * @param version
     */
    WelcomePage.prototype.checkUpdate = function (version) {
        var _this = this;
        Promise.all([this.checkAppVersion(version), this.checkDataVersion(version)])
            .then(function (result) {
            console.log(_this.tag + 'checkUpdate:' + result);
            _this.jump2Login();
        })
            .catch(function (error) {
            _this.loading.dismiss();
            console.log(_this.tag + 'checkUpdate:' + error);
        });
    };
    /**
     * 检查app更新
     * @param version
     * @returns {Promise<TResult|TResult2|TResult1>}
     */
    WelcomePage.prototype.checkAppVersion = function (version) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.dataService.checkAppVersion(version)
                .then(function (appVersion) {
                if (appVersion && appVersion.url) {
                    resolve(_this.fileService.downloadFile(false, appVersion.url));
                }
                else {
                    resolve('no update app');
                }
            })
                .catch(function (error) {
                _this.globalService.showToast(error);
                resolve(error);
            });
        });
    };
    /**
     * 检查数据包更新
     * @param version
     * @returns {Promise<TResult|TResult2|TResult1>}
     */
    WelcomePage.prototype.checkDataVersion = function (version) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.dataService.checkDataVersion(version)
                .then(function (dataVersion) {
                if (dataVersion && dataVersion.url) {
                    resolve(_this.fileService.downloadFile(true, dataVersion.url));
                }
                else {
                    resolve('no update data');
                }
            })
                .catch(function (error) {
                _this.globalService.showToast(error);
                resolve(error);
            });
        });
    };
    /**
     * 跳转至登录界面
     */
    WelcomePage.prototype.jump2Login = function () {
        this.loading.dismiss();
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__login_login__["a" /* LoginPage */], {});
    };
    return WelcomePage;
}());
WelcomePage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-welcome',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\welcome\welcome.html"*/'<ion-header>\n\n</ion-header>\n\n\n\n<ion-content class="page-content">\n\n  <div class="welcome-logo">\n\n    <img src="assets/img/splash_logo.png">\n\n  </div>\n\n\n\n\n\n  <div class="welcome-info">\n\n    <p>\n\n      Copyright@2017 ShangHai 3H Ver:{{version}}\n\n    </p>\n\n  </div>\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\welcome\welcome.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* LoadingController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["l" /* Platform */],
        __WEBPACK_IMPORTED_MODULE_3__providers_FileService__["a" /* FileService */],
        __WEBPACK_IMPORTED_MODULE_4__ionic_native_app_version__["a" /* AppVersion */],
        __WEBPACK_IMPORTED_MODULE_7__ionic_native_android_permissions__["a" /* AndroidPermissions */],
        __WEBPACK_IMPORTED_MODULE_5__providers_GlobalService__["a" /* GlobalService */],
        __WEBPACK_IMPORTED_MODULE_6__providers_DataService__["a" /* DataService */]])
], WelcomePage);

//# sourceMappingURL=welcome.js.map

/***/ }),

/***/ 330:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return UserInfo; });
/**
 * Created by zhangjing on 2017/6/14.
 */
var UserInfo = (function () {
    function UserInfo() {
    }
    return UserInfo;
}());

//# sourceMappingURL=UserInfo.js.map

/***/ }),

/***/ 331:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HttpInterceptorBackend; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__HttpInterceptor__ = __webpack_require__(248);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var HttpInterceptorBackend = (function () {
    function HttpInterceptorBackend(httpInterceptor, xhrBackend) {
        this.httpInterceptor = httpInterceptor;
        this.xhrBackend = xhrBackend;
    }
    HttpInterceptorBackend.prototype.createConnection = function (request) {
        var interceptor = this.httpInterceptor;
        var req = interceptor.beforeRequest ? interceptor.beforeRequest(request) : request;
        var result = this.xhrBackend.createConnection(req);
        result.response = interceptor.afterResponse ? interceptor.afterResponse(result.response) : result.response;
        return result;
    };
    return HttpInterceptorBackend;
}());
HttpInterceptorBackend = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["B" /* Injectable */])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__HttpInterceptor__["a" /* HttpInterceptor */], __WEBPACK_IMPORTED_MODULE_1__angular_http__["e" /* XHRBackend */]])
], HttpInterceptorBackend);

//# sourceMappingURL=HttpInterceptorBackend.js.map

/***/ }),

/***/ 332:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ValueValidPipe; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

var ValueValidPipe = (function () {
    function ValueValidPipe() {
    }
    ValueValidPipe.prototype.transform = function (value) {
        if (typeof value === 'string') {
            return value === 'undefined' || value === 'null' ? '' : value;
        }
        else if (typeof value === 'number') {
            return value.toString();
        }
        else {
            return '';
        }
    };
    return ValueValidPipe;
}());
ValueValidPipe = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["V" /* Pipe */])({ name: 'valueValid' })
], ValueValidPipe);

//# sourceMappingURL=ValueValidPipe.js.map

/***/ }),

/***/ 333:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TabsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mywork_mywork__ = __webpack_require__(49);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__history_myhistory__ = __webpack_require__(61);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__map_map__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__search_search__ = __webpack_require__(63);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__stationwork_stationwork__ = __webpack_require__(64);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__more_more__ = __webpack_require__(249);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_ConfigService__ = __webpack_require__(18);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







// import {MyPlugin} from "@ionic-native/my-plugin";


var TabsPage = (function () {
    function TabsPage(globalService, configService) {
        this.globalService = globalService;
        this.configService = configService;
        this.workerTabsInfo = [
            { title: '我的任务', icon: 'home', page: __WEBPACK_IMPORTED_MODULE_1__mywork_mywork__["a" /* MyWorkPage */] },
            { title: '历史记录', icon: 'document', page: __WEBPACK_IMPORTED_MODULE_2__history_myhistory__["a" /* MyHistory */] },
            { title: '地图', icon: 'map', page: __WEBPACK_IMPORTED_MODULE_3__map_map__["a" /* MapPage */] },
            { title: '更多', icon: 'more', page: __WEBPACK_IMPORTED_MODULE_6__more_more__["a" /* MorePage */] } // 公告、设置
        ];
        this.adminTabsInfo = [
            { title: '站点任务', icon: 'home', page: __WEBPACK_IMPORTED_MODULE_5__stationwork_stationwork__["a" /* StationWorkPage */] },
            { title: '查询', icon: 'search', page: __WEBPACK_IMPORTED_MODULE_4__search_search__["a" /* SearchPage */] },
            { title: '地图', icon: 'map', page: __WEBPACK_IMPORTED_MODULE_3__map_map__["a" /* MapPage */] },
            { title: '更多', icon: 'more', page: __WEBPACK_IMPORTED_MODULE_6__more_more__["a" /* MorePage */] } // 公告、设置
        ];
        this.tabsInfo = this.workerTabsInfo;
    }
    TabsPage.prototype.ngOnInit = function () {
        if (!this.globalService.isChrome) {
            var _this_1 = this;
            cordova.plugins.MyPlugin.getPushMessage(function (data) {
                console.log(data);
            }, function (error) {
                console.error(error);
            });
            cordova.plugins.MyPlugin.getChangedInfo(function (data) {
                console.log(data);
                if (data) {
                    var values = data.split('#');
                    if (values[0] === 'outerNetwork' && values[1]) {
                        _this_1.configService.setIsOuterNet(values[1] === 'true');
                    }
                }
            }, function (error) {
                console.error(error);
            });
        }
    };
    TabsPage.prototype.ngOnDestroy = function () {
    };
    return TabsPage;
}());
TabsPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\tabs\tabs.html"*/'<ion-tabs>\n\n  <ion-tab [root]="tabsInfo[0].page" tabTitle="{{tabsInfo[0].title}}" tabIcon="{{tabsInfo[0].icon}}"></ion-tab>\n\n  <ion-tab [root]="tabsInfo[1].page" tabTitle="{{tabsInfo[1].title}}" tabIcon="{{tabsInfo[1].icon}}"></ion-tab>\n\n  <ion-tab [root]="tabsInfo[2].page" tabTitle="{{tabsInfo[2].title}}" tabIcon="{{tabsInfo[2].icon}}"></ion-tab>\n\n  <ion-tab [root]="tabsInfo[3].page" tabTitle="{{tabsInfo[3].title}}" tabIcon="{{tabsInfo[3].icon}}"></ion-tab>\n\n</ion-tabs>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\tabs\tabs.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7__providers_GlobalService__["a" /* GlobalService */],
        __WEBPACK_IMPORTED_MODULE_8__providers_ConfigService__["a" /* ConfigService */]])
], TabsPage);

//# sourceMappingURL=tabs.js.map

/***/ }),

/***/ 334:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AboutPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var AboutPage = (function () {
    function AboutPage(navCtrl) {
        this.navCtrl = navCtrl;
    }
    return AboutPage;
}());
AboutPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-about',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\about\about.html"*/'<ion-header>\n\n  <ion-navbar>\n\n    <ion-title>\n\n      About\n\n    </ion-title>\n\n  </ion-navbar>\n\n</ion-header>\n\n\n\n<ion-content padding>\n\n\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\about\about.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */]])
], AboutPage);

//# sourceMappingURL=about.js.map

/***/ }),

/***/ 335:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ContactPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var ContactPage = (function () {
    function ContactPage(navCtrl) {
        this.navCtrl = navCtrl;
    }
    return ContactPage;
}());
ContactPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-contact',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\contact\contact.html"*/'<ion-header>\n\n  <ion-navbar>\n\n    <ion-title>\n\n      Contact\n\n    </ion-title>\n\n  </ion-navbar>\n\n</ion-header>\n\n\n\n<ion-content>\n\n  <ion-list>\n\n    <ion-list-header>Follow us on Twitter</ion-list-header>\n\n    <ion-item>\n\n      <ion-icon name="ionic" item-start></ion-icon>\n\n      @ionicframework\n\n    </ion-item>\n\n  </ion-list>\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\contact\contact.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */]])
], ContactPage);

//# sourceMappingURL=contact.js.map

/***/ }),

/***/ 36:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return TaskState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TaskEx; });
/* harmony export (immutable) */ __webpack_exports__["c"] = transform2ProcessEx;
/* harmony export (immutable) */ __webpack_exports__["d"] = transform2Task;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Process__ = __webpack_require__(122);

var TaskState;
(function (TaskState) {
    TaskState[TaskState["Dispatch"] = 0] = "Dispatch";
    TaskState[TaskState["Accept"] = 1] = "Accept";
    TaskState[TaskState["Go"] = 2] = "Go";
    TaskState[TaskState["Arrived"] = 3] = "Arrived";
    TaskState[TaskState["Reply"] = 4] = "Reply";
    TaskState[TaskState["Reject"] = 5] = "Reject";
    TaskState[TaskState["Delay"] = 6] = "Delay";
    TaskState[TaskState["Cancel"] = 7] = "Cancel";
    TaskState[TaskState["Continue"] = 8] = "Continue"; // 8
})(TaskState || (TaskState = {}));
var TaskEx = (function () {
    function TaskEx(task) {
        this.id = task.taskId;
        this.type = '热线工单'; //task.taskType;
        this.state = task.state; //TaskEx.convertState(task.state);
        this.describe = task.desc;
        this.location = {
            type: task.location.type,
            lng: task.location.lng,
            lat: task.location.lat
        };
        this.source = task.source;
        this.lastProcess = '';
        this.photoCount = 0;
        this.audioCount = 0;
        this.videoCount = 0;
        this.isPreview = false;
        this.isLocationValid = TaskEx.checkLocation(this.location);
        this.extendedInfo = task.extendedInfo;
        this.isUploaded = true;
        this.isOverdueArrivedLine = false;
        this.isOverdueReplyLine = false;
        this.processes = [];
        this.processes.push({
            event: 'create',
            name: '创建时间',
            time: TaskEx.utc2Date(task.createTime),
            show: true,
            color: __WEBPACK_IMPORTED_MODULE_0__Process__["a" /* DisableColor */],
            done: false,
            extend: null,
            isUploaded: true
        });
        this.processes.push({
            event: 'dispatch',
            name: '派发时间',
            time: TaskEx.utc2Date(task.assignTime),
            show: true,
            color: __WEBPACK_IMPORTED_MODULE_0__Process__["a" /* DisableColor */],
            done: false,
            extend: null,
            isUploaded: true
        });
        this.processes.push({
            event: 'accept',
            name: '接单时间',
            time: TaskEx.utc2Date(task.acceptTime),
            show: true,
            color: __WEBPACK_IMPORTED_MODULE_0__Process__["b" /* EnableColor */],
            done: false,
            extend: null,
            isUploaded: true
        });
        this.processes.push({
            event: 'go',
            name: '出发时间',
            time: TaskEx.utc2Date(task.goTime),
            show: false,
            color: __WEBPACK_IMPORTED_MODULE_0__Process__["b" /* EnableColor */],
            done: false,
            extend: null,
            isUploaded: true
        });
        this.processes.push({
            event: 'arrive',
            name: '到场时间',
            time: TaskEx.utc2Date(task.arrivedTime),
            show: false,
            color: __WEBPACK_IMPORTED_MODULE_0__Process__["b" /* EnableColor */],
            done: false,
            extend: null,
            isUploaded: true
        });
        this.processes.push({
            event: 'reply',
            name: '回复时间',
            time: TaskEx.utc2Date(task.replyTime),
            show: false,
            color: __WEBPACK_IMPORTED_MODULE_0__Process__["b" /* EnableColor */],
            done: false,
            extend: null,
            isUploaded: true
        });
        this.processes.push({
            event: 'reject',
            name: '退单时间',
            time: undefined,
            show: false,
            color: __WEBPACK_IMPORTED_MODULE_0__Process__["b" /* EnableColor */],
            done: false,
            extend: null,
            isUploaded: true
        });
        this.processes.push({
            event: 'delay',
            name: '延迟时间',
            time: undefined,
            show: false,
            color: __WEBPACK_IMPORTED_MODULE_0__Process__["b" /* EnableColor */],
            done: false,
            extend: null,
            isUploaded: true
        });
        this.processes.push({
            event: 'cancel',
            name: '销单时间',
            time: undefined,
            show: false,
            color: __WEBPACK_IMPORTED_MODULE_0__Process__["b" /* EnableColor */],
            done: false,
            extend: null,
            isUploaded: true
        });
    }
    TaskEx.transform = function (tasks, taskExs) {
        var start = taskExs.length;
        for (var _i = 0, tasks_1 = tasks; _i < tasks_1.length; _i++) {
            var task = tasks_1[_i];
            var taskEx = new TaskEx(task);
            taskExs.push(taskEx);
        }
        return taskExs.slice(start);
    };
    TaskEx.utc2Date = function (utc) {
        return utc > 0 ? new Date(utc) : undefined;
    };
    TaskEx.checkLocation = function (location) {
        var lng;
        var lat;
        if (location && location.lng && location.lat) {
            lng = Number.parseFloat(location.lng);
            lat = Number.parseFloat(location.lat);
        }
        return !!lng && !!lat;
    };
    TaskEx.convertState = function (state) {
        var taskState;
        switch (state) {
            case 0: // 已派遣
            case 1: // 接收
            case 2:
                taskState = TaskState.Dispatch;
                break;
            case 3:
                taskState = TaskState.Go;
                break;
            case 4:
                taskState = TaskState.Arrived;
                break;
            case 5:
                taskState = TaskState.Reply;
                break;
            case 99:
                taskState = TaskState.Cancel;
                break;
            case -1: // 已退单
            case -2: // 退单已重新派单
            case -3:
                taskState = TaskState.Reject;
                break;
            default:
                taskState = TaskState.Continue;
                break;
        }
        return taskState;
    };
    return TaskEx;
}());

/**
 * 处理步骤数组转对象
 * @param taskEx
 * @param processEx
 * @returns {boolean}
 */
function transform2ProcessEx(taskEx, processEx) {
    if (!taskEx && !processEx) {
        return false;
    }
    for (var _i = 0, _a = taskEx.processes; _i < _a.length; _i++) {
        var i = _a[_i];
        switch (i.event) {
            case 'create':
                processEx.create = i;
                break;
            case 'dispatch':
                processEx.dispatch = i;
                break;
            case 'accept':
                processEx.accept = i;
                break;
            case 'go':
                processEx.go = i;
                break;
            case 'arrive':
                processEx.arrive = i;
                break;
            case 'reply':
                processEx.reply = i;
                break;
            case 'reject':
                processEx.reject = i;
                break;
            case 'delay':
                processEx.delay = i;
                break;
            case 'cancel':
                processEx.cancel = i;
                break;
            default:
                console.error(this.tag, i.event);
                break;
        }
    }
    return !!(processEx && processEx.create && processEx.dispatch && processEx.accept && processEx.go
        && processEx.arrive && processEx.reply && processEx.reject && processEx.delay && processEx.cancel);
}
function getTime(date) {
    return date ? date.getTime() : 0;
}
/**
 *
 * @param info
 * @param taskEx
 * @param processEx
 * @returns {any}
 */
function transform2Task(info, taskEx, processEx) {
    if (info.hasOwnProperty('acceptTime')) {
        var acceptInfo = info;
        return {
            acceptTime: acceptInfo.acceptTime,
            arrivedTime: getTime(processEx.arrive.time),
            assignTime: getTime(processEx.dispatch.time),
            compltedTime: 0,
            createTime: getTime(processEx.create.time),
            desc: taskEx.describe,
            goTime: getTime(processEx.go.time),
            location: {
                type: taskEx.location.type,
                lng: taskEx.location.lng,
                lat: taskEx.location.lat
            },
            replyTime: getTime(processEx.reply.time),
            source: taskEx.source,
            state: TaskState.Accept,
            taskId: taskEx.id,
            taskType: taskEx.type
        };
    }
    else if (info.hasOwnProperty('goTime')) {
        var goInfo = info;
        return {
            acceptTime: getTime(processEx.accept.time),
            arrivedTime: getTime(processEx.arrive.time),
            assignTime: getTime(processEx.dispatch.time),
            compltedTime: 0,
            createTime: getTime(processEx.create.time),
            desc: taskEx.describe,
            goTime: goInfo.goTime,
            location: {
                type: taskEx.location.type,
                lng: taskEx.location.lng,
                lat: taskEx.location.lat
            },
            replyTime: getTime(processEx.reply.time),
            source: taskEx.source,
            state: TaskState.Go,
            taskId: taskEx.id,
            taskType: taskEx.type
        };
    }
    else if (info.hasOwnProperty('arrivedTime')) {
        var arriveInfo = info;
        return {
            acceptTime: getTime(processEx.accept.time),
            arrivedTime: arriveInfo.arrivedTime,
            assignTime: getTime(processEx.dispatch.time),
            compltedTime: 0,
            createTime: getTime(processEx.create.time),
            desc: taskEx.describe,
            goTime: getTime(processEx.go.time),
            location: {
                type: taskEx.location.type,
                lng: taskEx.location.lng,
                lat: taskEx.location.lat
            },
            replyTime: getTime(processEx.reply.time),
            source: taskEx.source,
            state: TaskState.Arrived,
            taskId: taskEx.id,
            taskType: taskEx.type
        };
    }
    else if (info.hasOwnProperty('rejectTime')) {
        var rejectInfo = info;
        if (!taskEx.extendedInfo) {
            taskEx.extendedInfo = {
                rejectTime: rejectInfo.rejectTime
            };
        }
        else {
            taskEx.extendedInfo.rejectTime = rejectInfo.rejectTime;
        }
        return {
            acceptTime: getTime(processEx.accept.time),
            arrivedTime: getTime(processEx.arrive.time),
            assignTime: getTime(processEx.dispatch.time),
            compltedTime: 0,
            createTime: getTime(processEx.create.time),
            desc: taskEx.describe,
            goTime: getTime(processEx.go.time),
            location: {
                type: taskEx.location.type,
                lng: taskEx.location.lng,
                lat: taskEx.location.lat
            },
            replyTime: getTime(processEx.reply.time),
            source: taskEx.source,
            state: TaskState.Reject,
            taskId: taskEx.id,
            taskType: taskEx.type,
            extendedInfo: taskEx.extendedInfo
        };
    }
    else if (info.hasOwnProperty('delayTime')) {
        var delayInfo = info;
        if (!taskEx.extendedInfo) {
            taskEx.extendedInfo = {
                delayTime: delayInfo.delayTime
            };
        }
        else {
            taskEx.extendedInfo.delayTime = delayInfo.delayTime;
        }
        return {
            acceptTime: getTime(processEx.accept.time),
            arrivedTime: getTime(processEx.arrive.time),
            assignTime: getTime(processEx.dispatch.time),
            compltedTime: 0,
            createTime: getTime(processEx.create.time),
            desc: taskEx.describe,
            goTime: getTime(processEx.go.time),
            location: {
                type: taskEx.location.type,
                lng: taskEx.location.lng,
                lat: taskEx.location.lat
            },
            replyTime: getTime(processEx.reply.time),
            source: taskEx.source,
            state: TaskState.Delay,
            taskId: taskEx.id,
            taskType: taskEx.type,
            extendedInfo: taskEx.extendedInfo
        };
    }
    else if (info.hasOwnProperty('opTime')) {
        var replyInfo = info;
        return {
            acceptTime: getTime(processEx.accept.time),
            arrivedTime: getTime(processEx.arrive.time),
            assignTime: getTime(processEx.dispatch.time),
            compltedTime: 0,
            createTime: getTime(processEx.create.time),
            desc: taskEx.describe,
            goTime: getTime(processEx.go.time),
            location: {
                type: taskEx.location.type,
                lng: taskEx.location.lng,
                lat: taskEx.location.lat
            },
            replyTime: replyInfo.opTime,
            source: taskEx.source,
            state: TaskState.Reply,
            taskId: taskEx.id,
            taskType: taskEx.type,
            extendedInfo: taskEx.extendedInfo
        };
    }
    else if (info.hasOwnProperty('destroyTime')) {
        var cancelInfo = info;
        if (!taskEx.extendedInfo) {
            taskEx.extendedInfo = {
                destroyTime: cancelInfo.destroyTime
            };
        }
        else {
            taskEx.extendedInfo.destroyTime = cancelInfo.destroyTime;
        }
        return {
            acceptTime: getTime(processEx.accept.time),
            arrivedTime: getTime(processEx.arrive.time),
            assignTime: getTime(processEx.dispatch.time),
            compltedTime: 0,
            createTime: getTime(processEx.create.time),
            desc: taskEx.describe,
            goTime: getTime(processEx.go.time),
            location: {
                type: taskEx.location.type,
                lng: taskEx.location.lng,
                lat: taskEx.location.lat
            },
            replyTime: getTime(processEx.reply.time),
            source: taskEx.source,
            state: TaskState.Cancel,
            taskId: taskEx.id,
            taskType: taskEx.type,
            extendedInfo: taskEx.extendedInfo
        };
    }
    else {
        return null;
    }
}
//# sourceMappingURL=Task.js.map

/***/ }),

/***/ 37:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MapPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__model_MapParam__ = __webpack_require__(48);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




//declare var baidumap_location;
var MapStatus;
(function (MapStatus) {
    MapStatus[MapStatus["LOADING"] = 0] = "LOADING";
    MapStatus[MapStatus["LOADED"] = 1] = "LOADED";
})(MapStatus || (MapStatus = {}));
/**
 * Created by zhangjing on 2017/7/21.
 */
var MapPage = (function () {
    function MapPage(navCtrl, navParams, globalService) {
        this.navCtrl = navCtrl;
        this.globalService = globalService;
        this.ZoomMaxLevel = 16;
        if (navParams.data instanceof __WEBPACK_IMPORTED_MODULE_3__model_MapParam__["a" /* MapParam */]) {
            this.mapParam = navParams.data;
        }
        else {
            this.mapParam = new __WEBPACK_IMPORTED_MODULE_3__model_MapParam__["a" /* MapParam */](__WEBPACK_IMPORTED_MODULE_3__model_MapParam__["b" /* MapType */].View, undefined, undefined);
        }
        this.isMark = false;
    }
    MapPage.prototype.ngOnInit = function () {
        //this.loadMap();
        this.isInitSuccess = false;
        this.loadJScript(this._init.bind(this));
    };
    MapPage.prototype.loadJScript = function (callback) {
        var win = window;
        var baiduMap = win['baiduMap'];
        if (baiduMap && baiduMap.status === MapStatus.LOADING) {
            //baiduMap.callbacks.push(callback);
            return;
        }
        if (baiduMap && baiduMap.status === MapStatus.LOADED) {
            return callback();
        }
        win['baiduMap'] = { status: MapStatus.LOADING, callbacks: [] };
        win['baidumapinit'] = function () {
            win['baiduMap'].status = MapStatus.LOADED;
            callback();
            win['baiduMap'].callbacks.forEach(function (cb) { return cb(); });
            win['baiduMap'].callbacks = [];
        };
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = "http://api.map.baidu.com/api?v=2.0&ak=Gsi66vGBjiuX3dlunDogoQYtHjbolbMi&callback=baidumapinit";
        script.onerror = function (err) {
            console.error(err);
        };
        document.body.appendChild(script);
    };
    MapPage.prototype._init = function () {
        this.map = new BMap.Map(this.mapElement.nativeElement, { enableMapClick: true });
        this.map.enableScrollWheelZoom(); //启动滚轮放大缩小，默认禁用
        this.map.enableContinuousZoom(); //连续缩放效果，默认禁用
        switch (this.mapParam.mapType) {
            case __WEBPACK_IMPORTED_MODULE_3__model_MapParam__["b" /* MapType */].Locate:
                this.showInfo();
                break;
            case __WEBPACK_IMPORTED_MODULE_3__model_MapParam__["b" /* MapType */].Mark:
                this.markMap();
                break;
            case __WEBPACK_IMPORTED_MODULE_3__model_MapParam__["b" /* MapType */].View:
            default:
                this.viewMap();
                break;
        }
        this.map.addControl(new BMap.NavigationControl());
        this.map.addControl(new BMap.OverviewMapControl());
        if (this.globalService.isChrome) {
            this.map.addControl(new BMap.GeolocationControl());
        }
        this.isInitSuccess = true;
    };
    MapPage.prototype.ngOnDestroy = function () {
        this.destroy();
    };
    /**
     * 定位
     */
    MapPage.prototype.getCurrentLocation = function () {
        var _this = this;
        if (this.globalService.isChrome) {
            return;
        }
        // 进行定位
        console.log("getCurrentLocation");
        // let map = this.map;
        // baidumap_location.getCurrentPosition(function (result) {
        //   console.log(result);
        //   let latitude = result.latitude;
        //   let lontitude = result.longitude;
        //   let point = new BMap.Point(lontitude, latitude);
        //   map.centerAndZoom(point, this.ZoomMaxLevel);//设置中心和地图显示级别
        // }, function (error) {
        //   console.log(error);
        // });
        this.globalService.getLocationEx()
            .then(function (location) {
            if (location && Math.abs(location.lng) > 0 && Math.abs(location.lat) > 0) {
                var point_1 = new BMap.Point(location.lng, location.lat);
                setTimeout(function () {
                    var convertor = new BMap.Convertor();
                    var pointArr = [];
                    pointArr.push(point_1);
                    convertor.translate(pointArr, 1, 5, function (data) {
                        if (data.status === 0) {
                            _this.map.clearOverlays();
                            _this.map.centerAndZoom(data.points[0], _this.ZoomMaxLevel);
                            var marker = new BMap.Marker(data.points[0]); // 创建标注
                            _this.map.addOverlay(marker); // 将标注添加到地图中
                            //marker.setAnimation('BMAP_ANIMATION_BOUNCE'); //跳动的动画
                        }
                    });
                }, 1000);
            }
        })
            .catch(function (error) { return console.error(error); });
    };
    /**
     * 确定坐标
     */
    MapPage.prototype.markLocation = function () {
        var center = this.map.getCenter();
        alert("选定坐标:" + center.lat + "," + center.lng);
    };
    /**
     * 展示弹框信息
     */
    MapPage.prototype.showInfo = function () {
        var point = new BMap.Point(this.mapParam.lng, this.mapParam.lat);
        if (!this.mapParam.content) {
            var marker = new BMap.Marker(point); // 创建标注
            this.map.addOverlay(marker); // 将标注添加到地图中
        }
        this.map.centerAndZoom(point, this.ZoomMaxLevel); //设置中心和地图显示级别
        if (this.mapParam.content) {
            var opts = {
                width: 100,
                height: 50,
                title: "任务编号",
                //enableAutoPan: false,
                enableCloseOnClick: false //关闭点击地图关闭信息窗口
            };
            var infoWindow = new BMap.InfoWindow(this.mapParam.content, opts);
            this.map.openInfoWindow(infoWindow, point);
        }
    };
    /**
     * 采集坐标
     */
    MapPage.prototype.markMap = function () {
        var myIcon = new BMap.Icon("assets/img/ic_map_center_location.png", new BMap.Size(23, 25));
        this.map.addEventListener("dragend", function (e) {
            this.map.clearOverlays();
            var center = this.map.getCenter();
            var marker = new BMap.Marker(center, { icon: myIcon });
            this.map.addOverlay(marker);
            marker.enableDragging();
            marker.addEventListener("dragend", function (e) {
                this.map.centerAndZoom(e.point, this.ZoomMaxLevel);
            });
        });
        this.isMark = true;
    };
    /**
     * 浏览地图
     */
    MapPage.prototype.viewMap = function () {
        var point = new BMap.Point(this.mapParam.lng, this.mapParam.lat);
        this.map.centerAndZoom(point, this.ZoomMaxLevel); //设置中心和地图显示级别
    };
    MapPage.prototype.destroy = function () {
        if (this.isInitSuccess) {
            if (this.mapParam.mapType === __WEBPACK_IMPORTED_MODULE_3__model_MapParam__["b" /* MapType */].Locate) {
                this.map.closeInfoWindow();
                this.map.clearOverlays();
            }
        }
    };
    return MapPage;
}());
__decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_13" /* ViewChild */])('map'),
    __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["u" /* ElementRef */])
], MapPage.prototype, "mapElement", void 0);
MapPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-map',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\map\map.html"*/'<ion-header>\n\n  <ion-navbar color="primary">\n\n    <ion-title>地图</ion-title>\n\n\n\n    <ion-buttons end>\n\n      <button ion-button icon-only color="white" (click)="getCurrentLocation($event)">\n\n        <ion-icon name="locate"></ion-icon>\n\n      </button>\n\n\n\n      <button ion-button *ngIf="isMark" icon-only color="white" (click)="markLocation($event)">\n\n        <ion-icon name="checkmark"></ion-icon>\n\n      </button>\n\n    </ion-buttons>\n\n\n\n  </ion-navbar>\n\n</ion-header>\n\n\n\n<ion-content>\n\n  <div id="map" #map>\n\n    <div class="markMap">\n\n      <ion-icon name="add" color="danger"></ion-icon>\n\n    </div>\n\n  </div>\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\map\map.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["k" /* NavParams */],
        __WEBPACK_IMPORTED_MODULE_2__providers_GlobalService__["a" /* GlobalService */]])
], MapPage);

//# sourceMappingURL=map.js.map

/***/ }),

/***/ 48:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return MapType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MapParam; });
var MapType;
(function (MapType) {
    MapType[MapType["View"] = 0] = "View";
    MapType[MapType["Locate"] = 1] = "Locate";
    MapType[MapType["Mark"] = 2] = "Mark";
})(MapType || (MapType = {}));
var MapParam = (function () {
    function MapParam(mapType, location, content) {
        this.mapType = mapType;
        if (location && location.lng && location.lat) {
            this.lng = Number.parseFloat(location.lng);
            this.lat = Number.parseFloat(location.lat);
        }
        else {
            this.lng = 121.524577;
            this.lat = 31.281003;
        }
        this.content = content;
    }
    return MapParam;
}());

//# sourceMappingURL=MapParam.js.map

/***/ }),

/***/ 49:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MyWorkPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__workdetail_workdetail__ = __webpack_require__(129);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_DataService__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__model_Task__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__model_Process__ = __webpack_require__(122);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__map_map__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__model_MapParam__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__materials_materials__ = __webpack_require__(66);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_ConfigService__ = __webpack_require__(18);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







//import {CancelInfo} from "../../model/CancelInfo";




var FromWhere;
(function (FromWhere) {
    FromWhere[FromWhere["Download"] = 0] = "Download";
    //CancelOrReject,
    FromWhere[FromWhere["ReplyOrReject"] = 1] = "ReplyOrReject";
    FromWhere[FromWhere["Search"] = 2] = "Search";
    FromWhere[FromWhere["Delete"] = 3] = "Delete";
})(FromWhere || (FromWhere = {}));
var MyWorkPage = (function () {
    function MyWorkPage(navCtrl, dataService, alertCtrl, events, globalService, configService) {
        this.navCtrl = navCtrl;
        this.dataService = dataService;
        this.alertCtrl = alertCtrl;
        this.events = events;
        this.globalService = globalService;
        this.configService = configService;
        this.tag = "[MyWorkPage]";
        this.title = '任务列表';
        this.showToolbar = false;
        this.showFab = false;
        this.showMaterial = false;
        this.items = [];
        this.overdueTime = null; //超期时限
        this.since = this.globalService.taskSinceDefault;
        this.count = this.globalService.taskCountDefault10;
        this.isOperationBusy = false;
        this.key = '';
        this.replyHistories = [];
        this.isCheckingOverdueTime = false;
    }
    /**
     * 初始化
     */
    MyWorkPage.prototype.ngOnInit = function () {
        var _this = this;
        console.log(this.tag, 'ngOnInit');
        this.subscribeEvent(this.events);
        this.showFab = false;
        this.getOverdueTime()
            .then(function () { return _this.showOrHideMaterial(); })
            .then(function () { return _this.getTasks(_this.since, _this.count, _this.key); })
            .then(function (data) {
            _this.infiniteScroll.enable(data);
            _this.getTaskCount();
            _this.intervalId = setInterval(function () {
                if (_this.isActivePage) {
                    _this.checkOverdueTimeTasks();
                }
            }, _this.overdueTime.checkInterval);
        })
            .catch(function (error) { return console.error(error); });
    };
    /**
     * 销毁
     */
    MyWorkPage.prototype.ngOnDestroy = function () {
        console.log(this.tag, 'ngOnDestroy');
        this.events.unsubscribe(this.globalService.myWorkDownloadFinishEvent);
        this.events.unsubscribe(this.globalService.myWorkUpdateEvent);
        if (this.intervalId) {
            clearInterval(this.intervalId);
        }
    };
    MyWorkPage.prototype.ionViewDidEnter = function () {
        console.log("ionViewDidEnter");
        this.isActivePage = true;
    };
    MyWorkPage.prototype.ionViewWillLeave = function () {
        console.log("ionViewWillLeave");
        this.isActivePage = false;
    };
    /**
     * 下拉同步
     * @param refresher
     */
    MyWorkPage.prototype.doRefresh = function (refresher) {
        console.log(this.tag, 'doRefresh');
        // if (this.showToolbar) {
        //   this.showToolbar = false;
        //   this.content.resize();
        // }
        this.key = '';
        this.dataService.downloadTasksAndDetails();
    };
    /**
     * 上拉，加载更多项
     * @param infiniteScroll
     */
    MyWorkPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        console.log(this.tag, 'doInfinite begin');
        setTimeout(function () {
            _this.since += _this.count;
            _this.getTasks(_this.since, _this.count, _this.key)
                .then(function (data) {
                if (!data) {
                    infiniteScroll.enable(false);
                    _this.checkOverdueTimeTasks();
                }
                else {
                    infiniteScroll.complete();
                }
                console.log(_this.tag, 'doInfinite end');
            })
                .catch(function (error) {
                console.error(error);
                infiniteScroll.complete();
            })
                .then(function () {
                _this.showFab = _this.items.length > _this.count;
            });
        }, 100);
    };
    /**
     * 处理各个操作
     * @param taskEx
     * @param index
     */
    MyWorkPage.prototype.itemSelected = function (taskEx, index) {
        var _this = this;
        console.log(this.tag, "Selected Item " + index);
        this.globalService.getLocation()
            .then(function (location) {
            switch (taskEx.processes[index].event) {
                case 'accept':
                    _this.accept(taskEx, location);
                    break;
                case 'go':
                    _this.go(taskEx, location);
                    break;
                case 'arrive':
                    _this.arrive(taskEx, location);
                    break;
                case 'reply':
                    _this.reply(taskEx, location);
                    break;
                case 'reject':
                    _this.rejectPrompt(taskEx, location);
                    break;
                case 'delay':
                    _this.delayPrompt(taskEx, location);
                    break;
            }
        })
            .catch(function (error) {
            console.error(error);
            _this.globalService.showToast(error);
        });
    };
    /**
     * 显示/隐藏搜索框
     * @param ev
     */
    MyWorkPage.prototype.toggleToolbar = function (ev) {
        this.showToolbar = !this.showToolbar;
        this.content.resize();
    };
    /**
     * 搜索
     * @param ev
     */
    MyWorkPage.prototype.onInput = function (ev) {
        if (this.isOperationBusy) {
            return this.globalService.showToast('后台繁忙...');
        }
        // set val to the value of the ev target
        var val = ev.target.value;
        if (val && val.trim() != '') {
            this.key = val;
        }
        else {
            this.key = '';
        }
        this.resetTasks(FromWhere.Search);
    };
    /**
     *
     * @param ev
     */
    MyWorkPage.prototype.onCancel = function (ev) {
        console.log(this.tag, 'onCancel');
    };
    /**
     * list回滚到顶部
     * @param ev
     */
    MyWorkPage.prototype.doScroll2Top = function (ev) {
        this.content.scrollToTop();
    };
    /**
     * 定位地图
     * @param taskEx
     */
    MyWorkPage.prototype.onLocate = function (taskEx) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_7__map_map__["a" /* MapPage */], new __WEBPACK_IMPORTED_MODULE_8__model_MapParam__["a" /* MapParam */](__WEBPACK_IMPORTED_MODULE_8__model_MapParam__["b" /* MapType */].Locate, taskEx.location, taskEx.id));
    };
    /**
     * 预览工单
     * @param taskEx
     */
    MyWorkPage.prototype.onPreview = function (taskEx) {
        taskEx.isPreview = true;
        var history = this.findReplyHistory(taskEx.id);
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__workdetail_workdetail__["a" /* WorkDetailPage */], [taskEx, history, this.overdueTime, true]);
    };
    /**
     * 材料登记
     * @param taskEx
     */
    MyWorkPage.prototype.onMaterials = function (taskEx) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_9__materials_materials__["a" /* MaterialsPage */], taskEx.id);
    };
    /**
     * 删除任务
     * @param taskEx
     */
    MyWorkPage.prototype.onDelete = function (taskEx) {
        var _this = this;
        var alert = this.alertCtrl.create({
            title: '删除任务',
            message: '是否删除该任务及其所有操作?',
            buttons: [
                {
                    text: '取消',
                    role: 'cancel',
                    handler: function () {
                        console.log('Cancel clicked');
                    }
                },
                {
                    text: '确定',
                    handler: function () {
                        console.log('Ok clicked');
                        _this.dataService.deleteOneTaskWithAllInfos(taskEx.id)
                            .then(function (result) { return _this.resetTasks(FromWhere.Delete); })
                            .catch(function (err) { return console.error(err); });
                    }
                }
            ]
        });
        alert.present();
    };
    /**
     * 获取任务列表
     * @param since
     * @param count
     * @param key
     * @returns {Promise<boolean>}
     */
    MyWorkPage.prototype.getTasks = function (since, count, key) {
        var _this = this;
        return this.dataService.getTasks(since, count, key)
            .then(function (tasks) {
            console.log(_this.tag + "getTasks: " + tasks.length);
            if (tasks.length <= 0) {
                return Promise.resolve(false);
            }
            else {
                var taskExs_1 = __WEBPACK_IMPORTED_MODULE_4__model_Task__["a" /* TaskEx */].transform(tasks, _this.items);
                return _this.setProcesses(_this.items)
                    .then(function () { return taskExs_1.map(function (taskEx) { return taskEx.id; }); })
                    .then(function (taskIds) { return _this.dataService.checkIfExistNotUploadedHistories(taskIds); })
                    .then(function (histories) {
                    var _loop_1 = function (taskEx) {
                        var history_1 = histories.find(function (history) { return history.taskId === taskEx.id; });
                        if (history_1) {
                            taskEx.isUploaded = history_1.uploadedFlag === _this.globalService.uploadedFlagForUploaded;
                        }
                    };
                    for (var _i = 0, taskExs_2 = taskExs_1; _i < taskExs_2.length; _i++) {
                        var taskEx = taskExs_2[_i];
                        _loop_1(taskEx);
                    }
                    return Promise.resolve(true);
                });
                /*.then(() => tasks.filter(task => task.state === TaskState.Reply))
                 .then(tasks => tasks.map(task => task.taskId))
                 .then(taskIds => this.dataService.getReplyHistories(taskIds))
                 .then(histories => {
                 let result: boolean = false;
                 try {
                 this.replyHistories.push(...histories);
                 this.replyHistories.forEach(history => {
                 if (history.mediaNames && history.mediaNames.length > 0) {
                 let taskEx: TaskEx = this.items.find(taskEx => taskEx.id === history.taskId);
                 if (taskEx) {
                 let mediaNames = history.mediaNames;
                 taskEx.photoCount = mediaNames.filter(name => name.lastIndexOf(this.globalService.photoSuffix) !== -1).length;
                 taskEx.audioCount = mediaNames.filter(name => name.lastIndexOf(this.globalService.audioSuffix) !== -1).length;
                 taskEx.videoCount = mediaNames.filter(name => name.lastIndexOf(this.globalService.videoSuffix) !== -1).length;
                 }
                 }
                 });
                 result = true;
                 } catch (err) {
                 console.error(err);
                 }
      
                 return Promise.resolve(result);
                 });*/
            }
        });
    };
    /**
     * 获取超期时限
     * @returns {Promise<TResult>}
     */
    MyWorkPage.prototype.getOverdueTime = function () {
        var _this = this;
        return this.configService.getOverdueTime()
            .then(function (overdueTime) { return _this.overdueTime = overdueTime; })
            .catch(function (err) { return console.error(_this.tag + err); })
            .then(function () {
            if (!_this.overdueTime) {
                _this.overdueTime = {
                    arrived: 1800000,
                    reply: 1800000,
                    delayReply: 1800000,
                    checkInterval: 60000
                };
            }
            else {
                if (!_this.overdueTime.arrived) {
                    _this.overdueTime.arrived = 1800000;
                }
                if (!_this.overdueTime.reply) {
                    _this.overdueTime.reply = 1800000;
                }
                if (!_this.overdueTime.delayReply) {
                    _this.overdueTime.delayReply = 1800000;
                }
                if (!_this.overdueTime.checkInterval) {
                    _this.overdueTime.checkInterval = 60000;
                }
            }
        });
    };
    /**
     *
     * @returns {Promise<boolean>}
     */
    MyWorkPage.prototype.showOrHideMaterial = function () {
        var _this = this;
        return this.configService.getSysRegion()
            .then(function (region) {
            if (region && region === __WEBPACK_IMPORTED_MODULE_10__providers_ConfigService__["a" /* ConfigService */].fushunRegion) {
                _this.showMaterial = true;
            }
        })
            .catch(function (error) { return console.error(error); })
            .then(function () { return _this.showMaterial = false; });
    };
    /**
     * 检查超期工单
     */
    MyWorkPage.prototype.checkOverdueTimeTasks = function () {
        var _this = this;
        if (this.isCheckingOverdueTime) {
            return;
        }
        this.isCheckingOverdueTime = true;
        this.dataService.checkOverdueTimeTasks(this.overdueTime)
            .then(function (tasks) {
            if (!tasks || tasks.length <= 0) {
                return;
            }
            var count = 0;
            var _loop_2 = function (task) {
                if (!task.extendedInfo) {
                    return "continue";
                }
                var taskEx = _this.items.find(function (taskEx) { return taskEx.id === task.taskId; });
                if (taskEx) {
                    if (task.extendedInfo.arrivedDeadLine) {
                        taskEx.isOverdueArrivedLine = true;
                        count++;
                    }
                    else if (task.extendedInfo.replyDeadLine) {
                        taskEx.isOverdueReplyLine = true;
                        count++;
                    }
                }
            };
            for (var _i = 0, tasks_1 = tasks; _i < tasks_1.length; _i++) {
                var task = tasks_1[_i];
                _loop_2(task);
            }
            if (count > 0) {
                if (!_this.globalService.isChrome) {
                    _this.dataService.playAlarm();
                }
                _this.showOverdueCountAlert(count);
            }
        })
            .catch(function (err) { return console.error(_this.tag + err); })
            .then(function () { return _this.isCheckingOverdueTime = false; });
    };
    /**
     *
     * @param count
     */
    MyWorkPage.prototype.showOverdueCountAlert = function (count) {
        var alert = this.alertCtrl.create({
            title: '提示!',
            subTitle: '当前有' + count + '个热线工单任务超期',
            buttons: ['OK']
        });
        alert.present();
    };
    /**
     *
     * @param taskExs
     * @returns {Promise<T>}
     */
    MyWorkPage.prototype.setProcesses = function (taskExs) {
        return new Promise(function (resolve, reject) {
            var result = false;
            for (var _i = 0, taskExs_3 = taskExs; _i < taskExs_3.length; _i++) {
                var taskEx = taskExs_3[_i];
                var processEx = new __WEBPACK_IMPORTED_MODULE_5__model_Process__["c" /* ProcessEx */]();
                if (!Object(__WEBPACK_IMPORTED_MODULE_4__model_Task__["c" /* transform2ProcessEx */])(taskEx, processEx)) {
                    continue;
                }
                if (processEx.accept.time) {
                    processEx.accept.show = true;
                    processEx.accept.color = __WEBPACK_IMPORTED_MODULE_5__model_Process__["a" /* DisableColor */];
                    processEx.accept.done = true;
                    taskEx.lastProcess = 'accept';
                }
                if (processEx.go.time) {
                    processEx.go.show = true;
                    processEx.go.color = __WEBPACK_IMPORTED_MODULE_5__model_Process__["a" /* DisableColor */];
                    processEx.go.done = true;
                    if (taskEx.lastProcess != 'accept') {
                        processEx.accept.show = true;
                        processEx.accept.color = __WEBPACK_IMPORTED_MODULE_5__model_Process__["a" /* DisableColor */];
                        processEx.accept.done = true;
                    }
                    taskEx.lastProcess = 'go';
                }
                if (processEx.arrive.time) {
                    processEx.arrive.show = true;
                    processEx.arrive.color = __WEBPACK_IMPORTED_MODULE_5__model_Process__["a" /* DisableColor */];
                    processEx.arrive.done = true;
                    if (taskEx.lastProcess != 'go') {
                        processEx.go.show = true;
                        processEx.go.color = __WEBPACK_IMPORTED_MODULE_5__model_Process__["a" /* DisableColor */];
                        processEx.go.done = true;
                    }
                    taskEx.lastProcess = 'arrive';
                }
                if (processEx.reply.time) {
                    processEx.reply.show = true;
                    processEx.reply.color = __WEBPACK_IMPORTED_MODULE_5__model_Process__["a" /* DisableColor */];
                    processEx.reply.done = true;
                    if (taskEx.lastProcess != 'arrive') {
                        processEx.arrive.show = true;
                        processEx.arrive.color = __WEBPACK_IMPORTED_MODULE_5__model_Process__["a" /* DisableColor */];
                        processEx.arrive.done = true;
                    }
                    taskEx.lastProcess = 'reply';
                }
                if (processEx.reject.time) {
                    processEx.reject.show = true;
                    processEx.reject.color = __WEBPACK_IMPORTED_MODULE_5__model_Process__["a" /* DisableColor */];
                    processEx.reject.done = true;
                    taskEx.lastProcess = 'reject';
                }
                if (processEx.delay.time) {
                    processEx.delay.show = true;
                    processEx.delay.color = __WEBPACK_IMPORTED_MODULE_5__model_Process__["a" /* DisableColor */];
                    processEx.delay.done = true;
                    taskEx.lastProcess = 'delay';
                }
                if (processEx.cancel.time) {
                    processEx.cancel.show = true;
                    processEx.cancel.color = __WEBPACK_IMPORTED_MODULE_5__model_Process__["a" /* DisableColor */];
                    processEx.cancel.done = true;
                    taskEx.lastProcess = 'cancel';
                }
                switch (taskEx.lastProcess) {
                    case 'accept':
                        processEx.go.show = true;
                        processEx.reject.show = true;
                        processEx.delay.show = true;
                        break;
                    case 'go':
                        processEx.arrive.show = true;
                        processEx.reject.show = true;
                        processEx.delay.show = true;
                        break;
                    case 'arrive':
                        processEx.reply.show = true;
                        processEx.reject.show = true;
                        processEx.delay.show = true;
                        break;
                    case 'reply':
                        processEx.reject.show = false;
                        processEx.delay.show = processEx.delay.done;
                        processEx.cancel.show = true;
                        break;
                    case 'reject':
                        processEx.go.show = processEx.go.done;
                        processEx.arrive.show = processEx.arrive.done;
                        processEx.reply.show = processEx.reply.done;
                        processEx.delay.show = processEx.delay.done;
                        break;
                    case 'delay':
                        break;
                    case 'cancel':
                        break;
                    default:
                        break;
                }
                result = true;
            }
            resolve(result);
        });
    };
    /**
     * 获取任务数
     */
    MyWorkPage.prototype.getTaskCount = function () {
        var _this = this;
        this.dataService.getTaskCount()
            .then(function (count) {
            _this.events.publish(_this.globalService.mainUpdateEvent, { type: 'myWorkCount', count: count });
            if (_this.globalService.isChrome) {
                count = _this.items.length;
            }
            if (count > 0) {
                _this.checkOverdueTimeTasks();
            }
        })
            .catch(function (error) { return console.error(error); });
    };
    /**
     * 接单
     * @param taskEx
     * @param location
     */
    MyWorkPage.prototype.accept = function (taskEx, location) {
        var _this = this;
        var processEx = new __WEBPACK_IMPORTED_MODULE_5__model_Process__["c" /* ProcessEx */]();
        if (!Object(__WEBPACK_IMPORTED_MODULE_4__model_Task__["c" /* transform2ProcessEx */])(taskEx, processEx)) {
            return;
        }
        if (!processEx.accept.done) {
            var time_1 = new Date();
            var acceptInfo = {
                acceptTime: time_1.getTime(),
                location: location,
                taskId: taskEx.id,
                userId: this.globalService.userId
            };
            var task = Object(__WEBPACK_IMPORTED_MODULE_4__model_Task__["d" /* transform2Task */])(acceptInfo, taskEx, processEx);
            var output_1 = {
                uploadedFlag: this.globalService.uploadedFlagForLocal
            };
            this.dataService.accept(acceptInfo, task, output_1)
                .then(function (data) {
                var uploadedFlag = output_1.uploadedFlag === _this.globalService.uploadedFlagForUploaded;
                processEx.accept.time = time_1;
                processEx.accept.color = __WEBPACK_IMPORTED_MODULE_5__model_Process__["a" /* DisableColor */];
                processEx.accept.done = true;
                processEx.accept.isUploaded = uploadedFlag;
                processEx.go.show = true;
                processEx.reject.show = true;
                processEx.delay.show = true;
                //processEx.cancel.show = true;
                taskEx.lastProcess = 'accept';
                taskEx.state = __WEBPACK_IMPORTED_MODULE_4__model_Task__["b" /* TaskState */].Accept;
                taskEx.isUploaded = taskEx.isUploaded && uploadedFlag;
            })
                .catch(function (error) {
                console.error(_this.tag, error);
                _this.globalService.showToast(error);
            });
        }
    };
    /**
     * 出发
     * @param taskEx
     * @param location
     */
    MyWorkPage.prototype.go = function (taskEx, location) {
        var _this = this;
        var processEx = new __WEBPACK_IMPORTED_MODULE_5__model_Process__["c" /* ProcessEx */]();
        if (!Object(__WEBPACK_IMPORTED_MODULE_4__model_Task__["c" /* transform2ProcessEx */])(taskEx, processEx)) {
            return;
        }
        if (!processEx.go.done) {
            var time = new Date();
            var goInfo = {
                goTime: time.getTime(),
                location: location,
                taskId: taskEx.id,
                userId: this.globalService.userId
            };
            var task = Object(__WEBPACK_IMPORTED_MODULE_4__model_Task__["d" /* transform2Task */])(goInfo, taskEx, processEx);
            var output_2 = {
                uploadedFlag: this.globalService.uploadedFlagForLocal
            };
            this.dataService.go(goInfo, task, output_2)
                .then(function (data) {
                var uploadedFlag = output_2.uploadedFlag === _this.globalService.uploadedFlagForUploaded;
                processEx.go.time = new Date();
                processEx.go.color = __WEBPACK_IMPORTED_MODULE_5__model_Process__["a" /* DisableColor */];
                processEx.go.done = true;
                processEx.go.isUploaded = uploadedFlag;
                processEx.arrive.show = true;
                processEx.reject.show = true;
                processEx.delay.show = true;
                //processEx.cancel.show = true;
                taskEx.lastProcess = 'go';
                taskEx.state = __WEBPACK_IMPORTED_MODULE_4__model_Task__["b" /* TaskState */].Go;
                taskEx.isUploaded = taskEx.isUploaded && uploadedFlag;
            })
                .catch(function (error) {
                console.error(_this.tag + error);
                _this.globalService.showToast(error);
            });
        }
    };
    /**
     * 到场
     * @param taskEx
     * @param location
     */
    MyWorkPage.prototype.arrive = function (taskEx, location) {
        var _this = this;
        var processEx = new __WEBPACK_IMPORTED_MODULE_5__model_Process__["c" /* ProcessEx */]();
        if (!Object(__WEBPACK_IMPORTED_MODULE_4__model_Task__["c" /* transform2ProcessEx */])(taskEx, processEx)) {
            return;
        }
        if (!processEx.arrive.done) {
            var time_2 = new Date();
            var arriveInfo = {
                arrivedTime: time_2.getTime(),
                location: location,
                taskId: taskEx.id,
                userId: this.globalService.userId
            };
            var task = Object(__WEBPACK_IMPORTED_MODULE_4__model_Task__["d" /* transform2Task */])(arriveInfo, taskEx, processEx);
            var output_3 = {
                uploadedFlag: this.globalService.uploadedFlagForLocal
            };
            this.dataService.arrive(arriveInfo, task, output_3)
                .then(function (data) {
                var uploadedFlag = output_3.uploadedFlag === _this.globalService.uploadedFlagForUploaded;
                processEx.arrive.time = time_2;
                processEx.arrive.color = __WEBPACK_IMPORTED_MODULE_5__model_Process__["a" /* DisableColor */];
                processEx.arrive.done = true;
                processEx.arrive.isUploaded = uploadedFlag;
                processEx.reply.show = true;
                processEx.reject.show = true;
                processEx.delay.show = true;
                //processEx.cancel.show = true;
                taskEx.lastProcess = 'arrive';
                taskEx.state = __WEBPACK_IMPORTED_MODULE_4__model_Task__["b" /* TaskState */].Arrived;
                taskEx.isUploaded = taskEx.isUploaded && uploadedFlag;
            })
                .catch(function (error) {
                console.error(_this.tag + error);
                _this.globalService.showToast(error);
            });
        }
    };
    /**
     * 回复
     * @param taskEx
     * @param location
     */
    MyWorkPage.prototype.reply = function (taskEx, location) {
        var processEx = new __WEBPACK_IMPORTED_MODULE_5__model_Process__["c" /* ProcessEx */]();
        if (!Object(__WEBPACK_IMPORTED_MODULE_4__model_Task__["c" /* transform2ProcessEx */])(taskEx, processEx)) {
            return;
        }
        if (!processEx.reply.done || !processEx.reply.isUploaded) {
            taskEx.isPreview = false;
            var history_2 = this.findReplyHistory(taskEx.id);
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__workdetail_workdetail__["a" /* WorkDetailPage */], [taskEx, history_2, this.overdueTime, false]);
        }
    };
    /**
     * 退单
     * @param taskEx
     * @param location
     */
    MyWorkPage.prototype.reject = function (taskEx, location) {
        var _this = this;
        var processEx = new __WEBPACK_IMPORTED_MODULE_5__model_Process__["c" /* ProcessEx */]();
        if (!Object(__WEBPACK_IMPORTED_MODULE_4__model_Task__["c" /* transform2ProcessEx */])(taskEx, processEx)) {
            return;
        }
        if (!processEx.reject.done) {
            var time_3 = new Date();
            var rejectExtend = processEx.reject.extend;
            var rejectInfo = {
                rejectTime: time_3.getTime(),
                rejectReason: rejectExtend.reason,
                location: location,
                taskId: taskEx.id,
                userId: this.globalService.userId
            };
            var task = Object(__WEBPACK_IMPORTED_MODULE_4__model_Task__["d" /* transform2Task */])(rejectInfo, taskEx, processEx);
            var output_4 = {
                uploadedFlag: this.globalService.uploadedFlagForLocal
            };
            this.dataService.reject(rejectInfo, task, output_4)
                .then(function (data) {
                var uploadedFlag = output_4.uploadedFlag === _this.globalService.uploadedFlagForUploaded;
                processEx.reject.time = time_3;
                processEx.reject.color = __WEBPACK_IMPORTED_MODULE_5__model_Process__["a" /* DisableColor */];
                processEx.reject.done = true;
                processEx.reject.isUploaded = uploadedFlag;
                processEx.go.show = processEx.go.done;
                processEx.arrive.show = processEx.arrive.done;
                processEx.reply.show = processEx.reply.done;
                processEx.delay.show = processEx.delay.done;
                //processEx.cancel.show = false;
                taskEx.lastProcess = 'reject';
                taskEx.state = __WEBPACK_IMPORTED_MODULE_4__model_Task__["b" /* TaskState */].Reject;
                taskEx.isUploaded = taskEx.isUploaded && uploadedFlag;
                _this.events.publish(_this.globalService.myWorkUpdateEvent, { type: 'reject' });
            })
                .catch(function (error) {
                console.error(_this.tag + error);
                _this.globalService.showToast(error);
            });
        }
    };
    /**
     * 延迟
     * @param taskEx
     * @param location
     */
    MyWorkPage.prototype.delay = function (taskEx, location) {
        var _this = this;
        var processEx = new __WEBPACK_IMPORTED_MODULE_5__model_Process__["c" /* ProcessEx */]();
        if (!Object(__WEBPACK_IMPORTED_MODULE_4__model_Task__["c" /* transform2ProcessEx */])(taskEx, processEx)) {
            return;
        }
        if (!processEx.delay.done) {
            var isSuccess = false;
            var lastProcess = "accept";
            var curEvent = "delay";
            var curName = "延迟时间";
            var extend = processEx.delay.extend;
            if (taskEx.lastProcess === lastProcess
                && this.sortDelayProcess(taskEx, lastProcess, curEvent, curName, extend)
                && Object(__WEBPACK_IMPORTED_MODULE_4__model_Task__["c" /* transform2ProcessEx */])(taskEx, processEx = new __WEBPACK_IMPORTED_MODULE_5__model_Process__["c" /* ProcessEx */]())) {
                isSuccess = true;
            }
            lastProcess = "go";
            if (taskEx.lastProcess === lastProcess
                && this.sortDelayProcess(taskEx, lastProcess, curEvent, curName, extend)
                && Object(__WEBPACK_IMPORTED_MODULE_4__model_Task__["c" /* transform2ProcessEx */])(taskEx, processEx = new __WEBPACK_IMPORTED_MODULE_5__model_Process__["c" /* ProcessEx */]())) {
                isSuccess = true;
            }
            lastProcess = "arrive";
            if (taskEx.lastProcess === lastProcess
                && this.sortDelayProcess(taskEx, lastProcess, curEvent, curName, extend)
                && Object(__WEBPACK_IMPORTED_MODULE_4__model_Task__["c" /* transform2ProcessEx */])(taskEx, processEx = new __WEBPACK_IMPORTED_MODULE_5__model_Process__["c" /* ProcessEx */]())) {
                isSuccess = true;
            }
            if (isSuccess) {
                var time_4 = new Date();
                var delayExtend = processEx.delay.extend;
                var delayInfo = {
                    delayTime: time_4.getTime(),
                    deadline: delayExtend.deadline.getTime(),
                    comment: delayExtend.comment,
                    location: location,
                    taskId: taskEx.id,
                    userId: this.globalService.userId
                };
                var task = Object(__WEBPACK_IMPORTED_MODULE_4__model_Task__["d" /* transform2Task */])(delayInfo, taskEx, processEx);
                var output_5 = {
                    uploadedFlag: this.globalService.uploadedFlagForLocal
                };
                this.dataService.delay(delayInfo, task, output_5)
                    .then(function (data) {
                    var uploadedFlag = output_5.uploadedFlag === _this.globalService.uploadedFlagForUploaded;
                    processEx.delay.time = time_4;
                    processEx.delay.color = __WEBPACK_IMPORTED_MODULE_5__model_Process__["a" /* DisableColor */];
                    processEx.delay.done = true;
                    processEx.delay.isUploaded = uploadedFlag;
                    taskEx.lastProcess = 'delay';
                    taskEx.state = __WEBPACK_IMPORTED_MODULE_4__model_Task__["b" /* TaskState */].Delay;
                    taskEx.isUploaded = taskEx.isUploaded && uploadedFlag;
                })
                    .catch(function (error) {
                    console.error(_this.tag + error);
                    _this.globalService.showToast(error);
                });
            }
        }
    };
    /**
     * 销单
     * @param taskEx
     * @param location
     */
    // private cancel(taskEx: TaskEx, location: Location): void {
    //   let processEx: ProcessEx = new ProcessEx();
    //   if (!transform2ProcessEx(taskEx, processEx)) {
    //     return;
    //   }
    //
    //   if (!processEx.cancel.done) {
    //     let time = new Date();
    //     let cancelExtend: CancelExtend = processEx.cancel.extend as CancelExtend;
    //     let cancelInfo: CancelInfo = {
    //       destroyTime: time.getTime(),
    //       destroyRemark: cancelExtend.remark,
    //       location,
    //       taskId: taskEx.id,
    //       userId: this.globalService.userId
    //     };
    //     let task: Task = transform2Task(cancelInfo, taskEx, processEx);
    //     let output: any = {
    //       uploadedFlag: this.globalService.uploadedFlagForLocal
    //     };
    //     this.dataService.cancel(cancelInfo, task, output)
    //       .then(data => {
    //         let uploadedFlag: boolean = output.uploadedFlag === this.globalService.uploadedFlagForUploaded;
    //         processEx.cancel.time = time;
    //         processEx.cancel.color = DisableColor;
    //         processEx.cancel.done = true;
    //         processEx.cancel.isUploaded = uploadedFlag;
    //
    //         processEx.go.show = processEx.go.done;
    //         processEx.arrive.show = processEx.arrive.done;
    //         processEx.reply.show = processEx.reply.done;
    //         processEx.reject.show = processEx.reject.done;
    //         processEx.delay.show = processEx.delay.done;
    //         taskEx.lastProcess = 'cancel';
    //         taskEx.state = TaskState.Cancel;
    //         taskEx.isUploaded = taskEx.isUploaded && uploadedFlag;
    //
    //         this.events.publish(this.globalService.myWorkUpdateEvent, {type: 'cancel'});
    //       })
    //       .catch(error => {
    //         console.error(this.tag + error);
    //         this.globalService.showToast(error);
    //       });
    //   }
    // }
    /**
     * 处理步骤数组转对象
     * @param taskEx
     * @param processEx
     * @returns {boolean}
     */
    // private transform2ProcessEx(taskEx: TaskEx, processEx: ProcessEx): boolean {
    //   if (!taskEx && !processEx) {
    //     return false;
    //   }
    //
    //   for (let i of taskEx.processes) {
    //     switch (i.event) {
    //       case 'create':
    //         processEx.create = i;
    //         break;
    //       case 'dispatch':
    //         processEx.dispatch = i;
    //         break;
    //       case 'accept':
    //         processEx.accept = i;
    //         break;
    //       case 'go':
    //         processEx.go = i;
    //         break;
    //       case 'arrive':
    //         processEx.arrive = i;
    //         break;
    //       case 'reply':
    //         processEx.reply = i;
    //         break;
    //       case 'reject':
    //         processEx.reject = i;
    //         break;
    //       case 'delay':
    //         processEx.delay = i;
    //         break;
    //       case 'cancel':
    //         processEx.cancel = i;
    //         break;
    //       default:
    //         console.error(this.tag, i.event);
    //         break;
    //     }
    //   }
    //
    //   return !!(processEx && processEx.create && processEx.dispatch && processEx.accept && processEx.go && processEx.arrive
    //   && processEx.reply && processEx.reject && processEx.delay && processEx.cancel);
    // }
    /**
     *
     * @param taskEx
     * @param lastEvent
     * @param curEvent
     * @param curName
     * @param curExtend
     * @returns {boolean}
     */
    MyWorkPage.prototype.sortDelayProcess = function (taskEx, lastEvent, curEvent, curName, curExtend) {
        if (taskEx.processes.length > 0 && lastEvent && curEvent && curName && curExtend) {
            var lastIndex = void 0, curIndex = void 0;
            var processes = taskEx.processes;
            for (var i = 0; i < processes.length; i++) {
                if (processes[i].event === lastEvent) {
                    lastIndex = i;
                }
                else if (processes[i].event === curEvent) {
                    curIndex = i;
                }
            }
            if (lastIndex >= curIndex) {
                return false;
            }
            for (var i = curIndex; i > lastIndex; i--) {
                processes[i].event = processes[i - 1].event;
                processes[i].name = processes[i - 1].name;
                processes[i].time = processes[i - 1].time;
                processes[i].show = processes[i - 1].show;
                processes[i].color = processes[i - 1].color;
                processes[i].done = processes[i - 1].done;
                processes[i].extend = processes[i - 1].extend;
            }
            processes[lastIndex + 1].event = curEvent;
            processes[lastIndex + 1].name = curName;
            processes[lastIndex + 1].extend = curExtend;
            return true;
        }
        return false;
    };
    /**
     * 退单对话框
     * @param taskEx
     * @param location
     */
    MyWorkPage.prototype.rejectPrompt = function (taskEx, location) {
        var _this = this;
        var processEx = new __WEBPACK_IMPORTED_MODULE_5__model_Process__["c" /* ProcessEx */]();
        if (!Object(__WEBPACK_IMPORTED_MODULE_4__model_Task__["c" /* transform2ProcessEx */])(taskEx, processEx) || processEx.reject.done) {
            return;
        }
        var prompt = this.alertCtrl.create({
            title: '退单申请',
            message: "请填写退单信息!",
            inputs: [
                {
                    name: 'reason',
                    placeholder: '原因'
                }
            ],
            buttons: [
                {
                    text: '取消',
                    handler: function (data) {
                    }
                },
                {
                    text: '确定',
                    handler: function (data) {
                        console.log(_this.tag, data);
                        if (!data.reason) {
                            return _this.globalService.showToast("请填写原因!");
                        }
                        processEx.reject.extend = {
                            reason: data.reason
                        };
                        _this.reject(taskEx, location);
                    }
                }
            ]
        });
        prompt.present();
    };
    /**
     * 延迟对话框
     * @param taskEx
     * @param location
     */
    MyWorkPage.prototype.delayPrompt = function (taskEx, location) {
        var _this = this;
        var processEx = new __WEBPACK_IMPORTED_MODULE_5__model_Process__["c" /* ProcessEx */]();
        if (!Object(__WEBPACK_IMPORTED_MODULE_4__model_Task__["c" /* transform2ProcessEx */])(taskEx, processEx) || processEx.delay.done) {
            return;
        }
        var prompt = this.alertCtrl.create({
            title: '延迟申请',
            message: "请填写延迟信息!",
            inputs: [
                {
                    name: 'day',
                    placeholder: '天数',
                    type: 'number'
                },
                {
                    name: 'hour',
                    placeholder: '小时',
                    type: 'number'
                },
                {
                    name: 'minute',
                    placeholder: '分钟',
                    type: 'number'
                },
                {
                    name: 'reason',
                    placeholder: '原因'
                }
            ],
            buttons: [
                {
                    text: '取消',
                    handler: function (data) {
                    }
                },
                {
                    text: '确定',
                    handler: function (data) {
                        console.log(_this.tag, data);
                        if (Number.isNaN(data.day)
                            && Number.isNaN(data.hour)
                            && Number.isNaN(data.minute)) {
                            return _this.globalService.showToast("请填写有效的时间!");
                        }
                        else if (!data.reason) {
                            return _this.globalService.showToast("请填写原因!");
                        }
                        else {
                            var day = Number.parseInt(data.day);
                            var hour = Number.parseInt(data.hour);
                            var minute = Number.parseInt(data.minute);
                            if ((Number.isFinite(day) && day < 0)
                                || (Number.isFinite(hour) && hour < 0)
                                || (Number.isFinite(minute) && minute < 0)) {
                                return _this.globalService.showToast("填写的时间必须大于零!");
                            }
                            var time = 0;
                            if (Number.isFinite(day)) {
                                time += day * 24 * 60;
                            }
                            if (Number.isFinite(hour)) {
                                time += hour * 60;
                            }
                            if (Number.isFinite(minute)) {
                                time += minute;
                            }
                            var deadline = new Date(new Date().getTime() + time * 60000);
                            processEx.delay.extend = {
                                comment: data.reason,
                                deadline: deadline
                            };
                            _this.judgeDelayTime(taskEx, processEx.delay.extend, location);
                        }
                    }
                }
            ]
        });
        prompt.present();
    };
    /**
     * 判断申请延期时间
     * @param taskEx
     * @param extend
     * @param location
     */
    MyWorkPage.prototype.judgeDelayTime = function (taskEx, extend, location) {
        var _this = this;
        this.dataService.getTaskDetail(taskEx.id)
            .then(function (taskDetail) {
            if (taskDetail && taskDetail.delayReplyDeadLine) {
                if (extend.deadline.getTime() <= taskDetail.delayReplyDeadLine) {
                    return _this.globalService.showToast("填写的时间必须大于处理时限!");
                }
                else {
                    _this.delay(taskEx, location);
                }
            }
        })
            .catch(function (err) {
            console.log(err);
        });
    };
    /**
     * 销单对话框
     * @param taskEx
     * @param location
     */
    // private cancelPrompt(taskEx: TaskEx, location: Location): void {
    //   let processEx: ProcessEx = new ProcessEx();
    //   if (!transform2ProcessEx(taskEx, processEx) || processEx.cancel.done) {
    //     return;
    //   }
    //
    //   let prompt = this.alertCtrl.create({
    //     title: '销单申请',
    //     message: "请填写销单信息!",
    //     inputs: [
    //       {
    //         name: 'remark',
    //         placeholder: '备注'
    //       }
    //     ],
    //     buttons: [
    //       {
    //         text: '取消',
    //         handler: data => {
    //         }
    //       },
    //       {
    //         text: '确定',
    //         handler: data => {
    //           console.log(this.tag, data);
    //           if (!data.remark) {
    //             return this.globalService.showToast("请填写备注!");
    //           }
    //
    //           processEx.cancel.extend = {
    //             remark: data.remark
    //           };
    //
    //           this.cancel(taskEx, location);
    //         }
    //       }
    //     ]
    //   });
    //   prompt.present();
    // }
    /**
     * 订阅事件
     * @param events
     */
    MyWorkPage.prototype.subscribeEvent = function (events) {
        var _this = this;
        events.subscribe(this.globalService.myWorkDownloadFinishEvent, function () {
            _this.resetTasks(FromWhere.Download);
        });
        events.subscribe(this.globalService.myWorkUpdateEvent, function (myWorkUpdateEvent) {
            console.log("my work need to update");
            if (myWorkUpdateEvent.type === 'reply'
                && myWorkUpdateEvent.taskEx
                && myWorkUpdateEvent.history
                && myWorkUpdateEvent.history.task
                && myWorkUpdateEvent.history.reply
                && myWorkUpdateEvent.history.taskDetail) {
                var processEx = new __WEBPACK_IMPORTED_MODULE_5__model_Process__["c" /* ProcessEx */]();
                if (!Object(__WEBPACK_IMPORTED_MODULE_4__model_Task__["c" /* transform2ProcessEx */])(myWorkUpdateEvent.taskEx, processEx)) {
                    return;
                }
                var replyInfo = myWorkUpdateEvent.history.reply;
                var uploadedFlag = myWorkUpdateEvent.history.uploadedFlag === _this.globalService.uploadedFlagForUploaded;
                processEx.reply.time = replyInfo && replyInfo.opTime ? new Date(replyInfo.opTime) : new Date();
                processEx.reply.color = __WEBPACK_IMPORTED_MODULE_5__model_Process__["a" /* DisableColor */];
                processEx.reply.done = true;
                processEx.reject.show = false;
                processEx.delay.show = processEx.delay.done;
                processEx.cancel.show = true;
                processEx.reply.isUploaded = uploadedFlag;
                myWorkUpdateEvent.taskEx.lastProcess = 'reply';
                myWorkUpdateEvent.taskEx.state = __WEBPACK_IMPORTED_MODULE_4__model_Task__["b" /* TaskState */].Reply;
                myWorkUpdateEvent.taskEx.isUploaded = myWorkUpdateEvent.taskEx.isUploaded && uploadedFlag;
                var history_3 = _this.findReplyHistory(myWorkUpdateEvent.taskEx.id);
                if (history_3) {
                    history_3 = {
                        userId: _this.globalService.userId,
                        taskId: myWorkUpdateEvent.taskEx.id,
                        state: myWorkUpdateEvent.history.state,
                        task: myWorkUpdateEvent.history.task,
                        reply: myWorkUpdateEvent.history.reply,
                        uploadedFlag: myWorkUpdateEvent.history.uploadedFlag,
                        taskDetail: myWorkUpdateEvent.history.taskDetail,
                        mediaNames: myWorkUpdateEvent.history.mediaNames
                    };
                }
                else {
                    _this.replyHistories.push(myWorkUpdateEvent.history);
                }
                _this.resetTasks(FromWhere.ReplyOrReject);
            }
            else if (myWorkUpdateEvent.type === 'reject') {
                _this.resetTasks(FromWhere.ReplyOrReject);
            }
        });
    };
    /**
     * 重置list
     * @param fromWhere
     */
    MyWorkPage.prototype.resetTasks = function (fromWhere) {
        var _this = this;
        this.isOperationBusy = true;
        this.since = this.globalService.taskSinceDefault;
        while (this.items.shift())
            ;
        this.replyHistories = [];
        this.showFab = false;
        this.getTasks(this.since, this.count, this.key)
            .then(function (data) { return _this.infiniteScroll.enable(data); })
            .catch(function (error) { return console.error(error); })
            .then(function () {
            _this.isOperationBusy = false;
            switch (fromWhere) {
                case FromWhere.Download:
                    _this.refresher.complete();
                    _this.getTaskCount();
                    break;
                case FromWhere.ReplyOrReject:
                    _this.getTaskCount();
                    break;
                case FromWhere.Search:
                    break;
                case FromWhere.Delete:
                    _this.getTaskCount();
                    break;
                default:
                    break;
            }
        });
    };
    MyWorkPage.prototype.findReplyHistory = function (taskId) {
        return this.replyHistories.find(function (history) { return history.taskId === taskId; });
    };
    return MyWorkPage;
}());
__decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_13" /* ViewChild */])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* Refresher */]),
    __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* Refresher */])
], MyWorkPage.prototype, "refresher", void 0);
__decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_13" /* ViewChild */])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["c" /* Content */]),
    __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["c" /* Content */])
], MyWorkPage.prototype, "content", void 0);
__decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_13" /* ViewChild */])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["e" /* InfiniteScroll */]),
    __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["e" /* InfiniteScroll */])
], MyWorkPage.prototype, "infiniteScroll", void 0);
MyWorkPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-mywork',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\mywork\mywork.html"*/'<ion-header>\n\n  <ion-navbar color="primary">\n\n    <ion-title>\n\n      {{title}}\n\n    </ion-title>\n\n    <ion-buttons end>\n\n      <button ion-button icon-only color="white" (click)="toggleToolbar($event)">\n\n        <ion-icon name="search"></ion-icon>\n\n      </button>\n\n    </ion-buttons>\n\n  </ion-navbar>\n\n\n\n  <ion-toolbar color="primary" *ngIf="showToolbar">\n\n    <ion-searchbar [(ngModel)]="key" (ionInput)="onInput($event)" (ionCancel)="onCancel($event)"></ion-searchbar>\n\n  </ion-toolbar>\n\n</ion-header>\n\n\n\n<ion-content class="page-mywork">\n\n\n\n  <!--refresher on the top-->\n\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n\n    <ion-refresher-content\n\n      pullingIcon="arrow-dropdown"\n\n      pullingText="Pull to refresh"\n\n      refreshingSpinner="circles"\n\n      refreshingText="Refreshing...">\n\n    </ion-refresher-content>\n\n  </ion-refresher>\n\n\n\n  <!--list content-->\n\n  <ion-list>\n\n    <ion-card *ngFor="let item of items">\n\n      <ion-item (click)="onDelete(item)">\n\n        <ion-avatar item-start>\n\n          <img src="assets/img/ic_mywork_avatar.png">\n\n        </ion-avatar>\n\n        <div><h2 class="card-header-label-hint">任务编号 </h2><h2 class="card-header-label-content">{{item.id.split(\'#\')[0] | valueValid}}</h2></div>\n\n        <div><h2 class="card-header-label-hint">任务类型 </h2><h2 class="card-header-label-content">{{item.type | valueValid}}</h2></div>\n\n        <ion-icon name=\'cloud-upload\' item-end *ngIf="!item.isUploaded"></ion-icon>\n\n        <ion-icon name="timer" item-end color="{{\'danger\'}}" *ngIf="item.isOverdueArrivedLine || item.isOverdueReplyLine"></ion-icon>\n\n      </ion-item>\n\n\n\n      <ion-list>\n\n        <ion-list-header>\n\n          <ion-row>\n\n            <ion-col col-auto>任务描述</ion-col>\n\n            <ion-col>{{item.describe | valueValid}}</ion-col>\n\n          </ion-row>\n\n        </ion-list-header>\n\n\n\n        <!--创建时间-->\n\n        <button ion-item [style.color]="item.processes[0].color" *ngIf="item.processes[0].show">\n\n          <ion-icon name=\'icon-vline\'item-start></ion-icon>\n\n          {{item.processes[0].name}} {{item.processes[0].time | date:\'y-MM-dd HH:mm:ss\'}}\n\n          <!--<ion-icon name=\'ios-arrow-forward\' item-end></ion-icon>-->\n\n        </button>\n\n\n\n        <!--派发时间-->\n\n        <button ion-item [style.color]="item.processes[1].color" *ngIf="item.processes[1].show">\n\n          <ion-icon name=\'icon-vline\'item-start></ion-icon>\n\n          {{item.processes[1].name}} {{item.processes[1].time | date:\'y-MM-dd HH:mm:ss\'}}\n\n          <!--<ion-icon name=\'ios-arrow-forward\' item-end></ion-icon>-->\n\n        </button>\n\n\n\n        <!--接单时间-->\n\n        <button ion-item [style.color]="item.processes[2].color" *ngIf="item.processes[2].show" (click)="itemSelected(item, 2)">\n\n          <ion-icon name=\'icon-vline\'item-start color="{{item.processes[2].color}}"></ion-icon>\n\n          {{item.processes[2].name}} {{item.processes[2].time | date:\'y-MM-dd HH:mm:ss\'}}\n\n          <ion-icon name=\'ios-arrow-forward\' item-end *ngIf="!item.processes[2].done" color="{{item.processes[2].color}}"></ion-icon>\n\n        </button>\n\n\n\n        <!--出发时间-->\n\n        <button ion-item [style.color]="item.processes[3].color" *ngIf="item.processes[3].show" (click)="itemSelected(item, 3)">\n\n          <ion-icon name=\'icon-vline\'item-start color="{{item.processes[3].color}}"></ion-icon>\n\n          {{item.processes[3].name}} {{item.processes[3].time | date:\'y-MM-dd HH:mm:ss\'}}\n\n          <ion-icon name=\'ios-arrow-forward\' item-end *ngIf="!item.processes[3].done" color="{{item.processes[3].color}}"></ion-icon>\n\n        </button>\n\n\n\n        <!--到场时间-->\n\n        <button ion-item [style.color]="item.processes[4].color" *ngIf="item.processes[4].show" (click)="itemSelected(item, 4)">\n\n          <ion-icon name=\'icon-vline\'item-start color="{{item.processes[4].color}}"></ion-icon>\n\n          {{item.processes[4].name}} {{item.processes[4].time | date:\'y-MM-dd HH:mm:ss\'}}\n\n          <ion-icon name=\'ios-arrow-forward\' item-end *ngIf="!item.processes[4].done" color="{{item.processes[4].color}}"></ion-icon>\n\n        </button>\n\n\n\n        <!--回复时间-->\n\n        <button ion-item [style.color]="item.processes[5].color" *ngIf="item.processes[5].show" (click)="itemSelected(item, 5)">\n\n          <ion-icon name=\'icon-vline\'item-start color="{{item.processes[5].color}}"></ion-icon>\n\n          {{item.processes[5].name}} {{item.processes[5].time | date:\'y-MM-dd HH:mm:ss\'}}\n\n          <ion-icon name=\'ios-arrow-forward\' item-end *ngIf="!item.processes[5].done" color="{{item.processes[5].color}}"></ion-icon>\n\n        </button>\n\n\n\n        <!--退单时间-->\n\n        <button ion-item [style.color]="item.processes[6].color" *ngIf="item.processes[6].show" (click)="itemSelected(item, 6)">\n\n          <ion-icon name=\'icon-vline\'item-start color="{{item.processes[6].color}}"></ion-icon>\n\n          {{item.processes[6].name}} {{item.processes[6].time | date:\'y-MM-dd HH:mm:ss\'}}\n\n          <ion-icon name=\'ios-arrow-forward\' item-end *ngIf="!item.processes[6].done" color="{{item.processes[6].color}}"></ion-icon>\n\n        </button>\n\n\n\n        <!--延迟时间-->\n\n        <button ion-item [style.color]="item.processes[7].color" *ngIf="item.processes[7].show" (click)="itemSelected(item, 7)">\n\n          <ion-icon name=\'icon-vline\'item-start color="{{item.processes[7].color}}"></ion-icon>\n\n          {{item.processes[7].name}} {{item.processes[7].time | date:\'y-MM-dd HH:mm:ss\'}}\n\n          <ion-icon name=\'ios-arrow-forward\' item-end *ngIf="!item.processes[7].done" color="{{item.processes[7].color}}"></ion-icon>\n\n        </button>\n\n\n\n        <!--销单时间-->\n\n        <!--<button ion-item [style.color]="item.processes[8].color" *ngIf="item.processes[8].show" (click)="itemSelected(item, 8)">-->\n\n          <!--<ion-icon name=\'icon-vline\'item-start color="{{item.processes[8].color}}"></ion-icon>-->\n\n          <!--{{item.processes[8].name}} {{item.processes[8].time | date:\'y-MM-dd HH:mm:ss\'}}-->\n\n          <!--<ion-icon name=\'ios-arrow-forward\' item-end *ngIf="!item.processes[8].done" color="{{item.processes[8].color}}"></ion-icon>-->\n\n        <!--</button>-->\n\n      </ion-list>\n\n\n\n      <ion-row>\n\n        <ion-col class="card-bottom-btn" *ngIf="false">\n\n          <button ion-button icon-left clear small color="gray">\n\n            <ion-icon name="images"></ion-icon>\n\n            <div>{{item.photoCount}}</div>\n\n          </button>\n\n        </ion-col>\n\n\n\n        <ion-col class="card-bottom-btn" *ngIf="false">\n\n          <button ion-button icon-left clear small color="gray">\n\n            <ion-icon name="musical-notes"></ion-icon>\n\n            <div>{{item.audioCount}}</div>\n\n          </button>\n\n        </ion-col>\n\n\n\n        <ion-col class="card-bottom-btn" *ngIf="false">\n\n          <button ion-button icon-left clear small color="gray">\n\n            <ion-icon name="videocam"></ion-icon>\n\n            <div>{{item.videoCount}}</div>\n\n          </button>\n\n        </ion-col>\n\n\n\n        <ion-col class="card-bottom-btn" *ngIf="item.isLocationValid">\n\n          <button ion-button icon-left clear small (click)="onLocate(item)">\n\n            <ion-icon name="map"></ion-icon>\n\n            <div>地图</div>\n\n          </button>\n\n        </ion-col>\n\n\n\n        <ion-col class="card-bottom-btn">\n\n          <button ion-button icon-left clear small (click)="onPreview(item)">\n\n            <ion-icon name="information-circle"></ion-icon>\n\n            <div>详细</div>\n\n          </button>\n\n        </ion-col>\n\n\n\n        <ion-col class="card-bottom-btn" *ngIf="showMaterial">\n\n          <button ion-button icon-left clear small (click)="onMaterials(item)">\n\n            <ion-icon name="information-circle"></ion-icon>\n\n            <div>材料</div>\n\n          </button>\n\n        </ion-col>\n\n      </ion-row>\n\n\n\n      <!--<ion-row>-->\n\n        <!--<ion-item>-->\n\n          <!--<button item-right ion-button icon-left clear (click)="onMaterials(item)">-->\n\n            <!--<ion-icon name="clipboard"></ion-icon>-->\n\n            <!--<div>材料登记</div>-->\n\n          <!--</button>-->\n\n        <!--</ion-item>-->\n\n      <!--</ion-row>-->\n\n    </ion-card>\n\n  </ion-list>\n\n\n\n  <!--infinite scroll-->\n\n  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\n\n  </ion-infinite-scroll>\n\n\n\n  <!--fab-->\n\n  <ion-fab right bottom *ngIf="showFab">\n\n    <button ion-fab color="primary" (click)="doScroll2Top($event)">\n\n      <ion-icon name="arrow-dropup"></ion-icon>\n\n    </button>\n\n  </ion-fab>\n\n\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\mywork\mywork.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_3__providers_DataService__["a" /* DataService */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_6__providers_GlobalService__["a" /* GlobalService */],
        __WEBPACK_IMPORTED_MODULE_10__providers_ConfigService__["a" /* ConfigService */]])
], MyWorkPage);

//# sourceMappingURL=mywork.js.map

/***/ }),

/***/ 61:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MyHistory; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_DataService__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__model_History__ = __webpack_require__(325);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__workdetail_workdetail__ = __webpack_require__(129);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__model_Task__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__map_map__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__model_MapParam__ = __webpack_require__(48);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var MyHistory = (function () {
    function MyHistory(navCtrl, dataService, alertCtrl, globalService, events) {
        this.navCtrl = navCtrl;
        this.dataService = dataService;
        this.alertCtrl = alertCtrl;
        this.globalService = globalService;
        this.events = events;
        this.tag = "[Myhistory]";
        this.title = '历史记录';
        this.showToolbar = false;
        this.showFab = false;
        this.items = [];
        this.isDownloadFinished = true;
        this.since = this.globalService.taskSinceDefault;
        this.count = this.globalService.taskCountDefault10;
        this.searchKey = '';
        this.isOperationBusy = false;
        this.replyHistories = [];
        this.onServerFlag = this.globalService.uploadedFlagForUploaded;
    }
    MyHistory.prototype.ngOnInit = function () {
        var _this = this;
        console.log(this.tag, 'ngOnInit');
        this.subscribeEvent(this.events);
        this.getHistories(this.since, this.count, this.searchKey)
            .then(function (flag) { return _this.infiniteScroll.enable(flag); })
            .catch(function (error) { return console.error(error); });
    };
    MyHistory.prototype.ngOnDestroy = function () {
        console.log(this.tag, 'ngOnDestroy');
        this.events.unsubscribe(this.globalService.historyUploadFinishEvent);
        //this.events.unsubscribe(this.globalService.materialInfoFinishEvent);
    };
    //搜索
    MyHistory.prototype.onInput = function (ev) {
        var _this = this;
        if (this.isOperationBusy) {
            return this.globalService.showToast('后台繁忙...');
        }
        var val = ev.target.value;
        if (val && val.trim() != '') {
            this.searchKey = val;
        }
        else {
            this.searchKey = '';
        }
        this.isOperationBusy = true;
        this.since = this.globalService.taskSinceDefault;
        while (this.items.shift())
            ;
        this.showFab = false;
        this.replyHistories = [];
        this.getHistories(this.since, this.count, this.searchKey)
            .then(function (data) { return _this.infiniteScroll.enable(data); })
            .catch(function (error) {
            console.error(error);
        }).then(function () { return _this.isOperationBusy = false; });
    };
    /**
     *
     * @param ev
     */
    MyHistory.prototype.onCancel = function (ev) {
        console.log(this.tag, 'onCancel');
    };
    MyHistory.prototype.doRefresh = function (refresher) {
        console.log(this.tag, 'doRefresh');
        this.dataService.uploadAllInfos();
    };
    /**
     * 上拉加载更多
     * @param infiniteScroll
     */
    MyHistory.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        console.log(this.tag, 'doInfinite begin');
        setTimeout(function () {
            _this.isDownloadFinished = false;
            _this.showFab = false;
            _this.getHistories(_this.since, _this.count, _this.searchKey)
                .then(function (data) {
                if (!data) {
                    infiniteScroll.enable(false);
                }
                else {
                    infiniteScroll.complete();
                }
                console.log(_this.tag, 'doInfinite end');
            }).catch(function (error) {
                console.error(error);
                infiniteScroll.complete();
            }).then(function () {
                _this.isDownloadFinished = true;
                _this.showFab = _this.items.length > _this.count;
            });
        }, 100);
    };
    /**
     *滑动到顶部
     * @param ev
     */
    MyHistory.prototype.doScroll2Top = function (ev) {
        this.showFab = false;
        this.content.scrollToTop();
    };
    MyHistory.prototype.toggleToolbar = function (ev) {
        this.showToolbar = !this.showToolbar;
        this.content.resize();
    };
    MyHistory.prototype.getHistories = function (since, count, key) {
        var _this = this;
        return this.dataService
            .getHistories(since, count, key)
            .then(function (histories) {
            console.log(_this.tag + "getHistory" + histories.length);
            if (histories.length <= 0) {
                return Promise.resolve(false);
            }
            else {
                __WEBPACK_IMPORTED_MODULE_3__model_History__["a" /* HistoryEx */].transformToHistoryEx(_this.items, histories);
                _this.since = _this.items.length;
                return Promise.resolve(histories.map(function (history) { return history.taskId; }))
                    .then(function (taskIds) { return _this.dataService.getReplyHistories(taskIds); })
                    .then(function (histories) {
                    var result = false;
                    try {
                        (_a = _this.replyHistories).push.apply(_a, histories);
                        _this.replyHistories.forEach(function (history) {
                            if (history.mediaNames && history.mediaNames.length > 0) {
                                var historyEx = _this.items.find(function (historyEx) { return historyEx.taskId === history.taskId; });
                                if (historyEx) {
                                    var mediaNames = history.mediaNames;
                                    historyEx.photoCount = mediaNames.filter(function (name) { return name.lastIndexOf(_this.globalService.photoSuffix) !== -1; }).length;
                                    historyEx.audioCount = mediaNames.filter(function (name) { return name.lastIndexOf(_this.globalService.audioSuffix) !== -1; }).length;
                                    historyEx.videoCount = mediaNames.filter(function (name) { return name.lastIndexOf(_this.globalService.videoSuffix) !== -1; }).length;
                                }
                            }
                        });
                        result = true;
                    }
                    catch (err) {
                        console.error(err);
                    }
                    return Promise.resolve(result);
                    var _a;
                });
            }
        });
    };
    MyHistory.prototype.toRejectedInfo = function (item) {
        return item;
    };
    MyHistory.prototype.toReplyInfo = function (item) {
        return item;
    };
    MyHistory.prototype.onDelay = function (historyEx) {
        var _this = this;
        this.dataService.getHistory(historyEx.taskId, __WEBPACK_IMPORTED_MODULE_6__model_Task__["b" /* TaskState */].Delay)
            .then(function (history) {
            if (history.reply) {
                var delayInfo = history.reply;
                if (delayInfo.comment) {
                    _this.globalService.showToast("\u5EF6\u8FDF\u539F\u56E0: " + delayInfo.comment);
                }
            }
        })
            .catch(function (err) { return console.error(err); });
    };
    MyHistory.prototype.onReply = function (historyEx) {
        var taskEx = new __WEBPACK_IMPORTED_MODULE_6__model_Task__["a" /* TaskEx */](historyEx.task);
        taskEx.isPreview = false;
        var history = this.findReplyHistory(taskEx.id);
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__workdetail_workdetail__["a" /* WorkDetailPage */], [taskEx, history, undefined, true]);
    };
    MyHistory.prototype.onReject = function (historyEx) {
        var rejectInfo = this.toRejectedInfo(historyEx.reply);
        if (rejectInfo && rejectInfo.rejectReason) {
            this.globalService.showToast("\u9000\u5355\u539F\u56E0: " + rejectInfo.rejectReason);
        }
    };
    MyHistory.prototype.onLocate = function (historyEx) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_7__map_map__["a" /* MapPage */], new __WEBPACK_IMPORTED_MODULE_8__model_MapParam__["a" /* MapParam */](__WEBPACK_IMPORTED_MODULE_8__model_MapParam__["b" /* MapType */].Locate, historyEx.task.location, historyEx.task.taskId));
    };
    MyHistory.prototype.onDelete = function (historyEx) {
        var _this = this;
        var alert = this.alertCtrl.create({
            title: '删除任务',
            message: '是否删除该任务及其所有操作?',
            buttons: [
                {
                    text: '取消',
                    role: 'cancel',
                    handler: function () {
                        console.log('Cancel clicked');
                    }
                },
                {
                    text: '确定',
                    handler: function () {
                        console.log('Ok clicked');
                        _this.dataService.deleteOneTaskWithAllInfos(historyEx.taskId)
                            .then(function (result) { return _this.resetList(); })
                            .catch(function (err) { return console.error(err); });
                    }
                }
            ]
        });
        alert.present();
    };
    /**
     * 订阅事件
     * @param events
     */
    MyHistory.prototype.subscribeEvent = function (events) {
        var _this = this;
        events.subscribe(this.globalService.historyUploadFinishEvent, function () {
            //this.dataService.uploadNotUploadMaterialInfos();
            _this.refresher.complete();
            _this.resetList();
        });
        // events.subscribe(this.globalService.materialInfoFinishEvent, () => {
        //   console.log(this.tag, "materialInfoFinishEvent");
        //   this.refresher.complete();
        // })
    };
    MyHistory.prototype.findReplyHistory = function (taskId) {
        return this.replyHistories.find(function (history) { return history.taskId === taskId; });
    };
    MyHistory.prototype.resetList = function () {
        var _this = this;
        this.isOperationBusy = false;
        this.searchKey = '';
        this.since = this.globalService.taskSinceDefault;
        while (this.items.shift())
            ;
        this.showFab = false;
        this.replyHistories = [];
        this.getHistories(this.since, this.count, this.searchKey)
            .then(function (data) { return _this.infiniteScroll.enable(data); })
            .catch(function (error) { return console.error(error); });
    };
    return MyHistory;
}());
__decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_13" /* ViewChild */])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* Refresher */]),
    __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* Refresher */])
], MyHistory.prototype, "refresher", void 0);
__decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_13" /* ViewChild */])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["c" /* Content */]),
    __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["c" /* Content */])
], MyHistory.prototype, "content", void 0);
__decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_13" /* ViewChild */])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["e" /* InfiniteScroll */]),
    __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["e" /* InfiniteScroll */])
], MyHistory.prototype, "infiniteScroll", void 0);
MyHistory = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-myhistory',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\history\myhistory.html"*/'<ion-header>\n\n  <ion-navbar color="primary">\n\n    <ion-title>\n\n      {{title}}\n\n    </ion-title>\n\n    <ion-buttons end>\n\n      <button ion-button icon-only color="white" (click)="toggleToolbar($event)" *ngIf="showToolbar">\n\n        <ion-icon name="search"></ion-icon>\n\n      </button>\n\n    </ion-buttons>\n\n  </ion-navbar>\n\n  <ion-toolbar color="primary" *ngIf="showToolbar">\n\n    <ion-searchbar (input)="onInput($event)" (ionCancel)="onCancel($event)"></ion-searchbar>\n\n  </ion-toolbar>\n\n</ion-header>\n\n\n\n<ion-content class="page-myhistory">\n\n\n\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n\n    <ion-refresher-content\n\n      pullingIcon="arrow_dropdown"\n\n      pullingText="Pull to refresh"\n\n      refreshingSpinner="circles"\n\n      refreshingText="Refreshing...">\n\n    </ion-refresher-content>\n\n  </ion-refresher>\n\n\n\n  <ion-list>\n\n    <ion-card *ngFor="let item of items">\n\n      <ion-item (click)="onDelete(item)">\n\n        <ion-avatar item-start>\n\n          <img src="assets/img/ic_mywork_avatar.png">\n\n        </ion-avatar>\n\n        <div><h2 class="card-header-label-hint">任务编号 </h2>\n\n          <h2 class="card-header-label-content">{{item.taskId.split(\'#\')[0] | valueValid}}</h2></div>\n\n        <div><h2 class="card-header-label-hint">任务类型 </h2>\n\n          <h2 class="card-header-label-content">{{item.task.taskType | valueValid}}</h2></div>\n\n        <ion-icon name=\'cloud-upload\' item-end *ngIf="item.uploadedFlag !== onServerFlag"></ion-icon>\n\n      </ion-item>\n\n\n\n      <ion-list>\n\n        <ion-list-header>\n\n          <ion-row>\n\n            <ion-col col-auto>任务描述</ion-col>\n\n            <ion-col>{{item.task.desc| valueValid}}</ion-col>\n\n          </ion-row>\n\n        </ion-list-header>\n\n\n\n        <!--创建时间-->\n\n        <button ion-item class="gray-text">\n\n          <ion-icon name=\'icon-vline\' item-start></ion-icon>\n\n          创建时间 {{item.task.createTime| date:\'y-MM-dd HH:mm:ss\'}}\n\n        </button>\n\n\n\n        <!--派发时间-->\n\n        <button ion-item class="gray-text">\n\n          <ion-icon name=\'icon-vline\' item-start></ion-icon>\n\n          派发时间 {{item.task.assignTime | date:\'y-MM-dd HH:mm:ss\'}}\n\n        </button>\n\n\n\n        <!--接单时间 -->\n\n        <button ion-item class="gray-text">\n\n          <ion-icon name=\'icon-vline\' item-start></ion-icon>\n\n          接单时间 {{item.task.acceptTime | date:\'y-MM-dd HH:mm:ss\'}}\n\n        </button>\n\n\n\n        <!--延迟时间-->\n\n        <button ion-item class="gray-text" *ngIf="item.delayBeyond === \'accept\'" (click)="onDelay(item)">\n\n          <ion-icon name=\'icon-vline\' item-start></ion-icon>\n\n          延迟时间 {{item.delayTime | date:\'y-MM-dd HH:mm:ss\'}}\n\n        </button>\n\n\n\n        <!--出发时间-->\n\n        <button ion-item class="gray-text" *ngIf="item.task.goTime">\n\n          <ion-icon name=\'icon-vline\' item-start></ion-icon>\n\n          出发时间 {{item.task.goTime| date:\'y-MM-dd HH:mm:ss\'}}\n\n        </button>\n\n\n\n        <!--延迟时间-->\n\n        <button ion-item class="gray-text" *ngIf="item.delayBeyond === \'go\'" (click)="onDelay(item)">\n\n          <ion-icon name=\'icon-vline\' item-start></ion-icon>\n\n          延迟时间 {{item.delayTime | date:\'y-MM-dd HH:mm:ss\'}}\n\n        </button>\n\n\n\n        <!--到场时间-->\n\n        <button ion-item class="gray-text" *ngIf="item.task.arrivedTime">\n\n          <ion-icon name=\'icon-vline\' item-start></ion-icon>\n\n          到场时间 {{item.task.arrivedTime | date:\'y-MM-dd HH:mm:ss\'}}\n\n        </button>\n\n\n\n        <!--延迟时间-->\n\n        <button ion-item class="gray-text" *ngIf="item.delayBeyond === \'arrived\'" (click)="onDelay(item)">\n\n          <ion-icon name=\'icon-vline\' item-start></ion-icon>\n\n          延迟时间 {{item.delayTime | date:\'y-MM-dd HH:mm:ss\'}}\n\n        </button>\n\n\n\n        <!--回复时间-->\n\n        <button ion-item class="gray-text" *ngIf="item.task.replyTime" (click)="onReply(item)">\n\n          <ion-icon name=\'icon-vline\' item-start></ion-icon>\n\n          回复时间 {{item.task.replyTime | date:\'y-MM-dd HH:mm:ss\'}}\n\n        </button>\n\n\n\n        <!--退单时间-->\n\n        <button ion-item class="gray-text" *ngIf="item.isRejected" (click)="onReject(item)">\n\n          <ion-icon name=\'icon-vline\' item-start></ion-icon>\n\n          退单时间 {{ toRejectedInfo(item.reply).rejectTime | date:\'y-MM-dd HH:mm:ss\'}}\n\n        </button>\n\n\n\n        <!--销单时间-->\n\n        <button ion-item class="gray-text" *ngIf="item.isCanceled">\n\n          <ion-icon name=\'icon-vline\' item-start></ion-icon>\n\n          销单时间 {{toReplyInfo(item.reply).destroyTime | date:\'y-MM-dd HH:mm:ss\'}}\n\n        </button>\n\n      </ion-list>\n\n      <ion-row>\n\n        <ion-col class="card-bottom-btn">\n\n          <button ion-button icon-left clear small color="gray">\n\n            <ion-icon name="images"></ion-icon>\n\n            <div>{{item.photoCount}}</div>\n\n          </button>\n\n        </ion-col>\n\n\n\n        <ion-col class="card-bottom-btn">\n\n          <button ion-button icon-left clear small color="gray">\n\n            <ion-icon name="musical-notes"></ion-icon>\n\n            <div>{{item.audioCount}}</div>\n\n          </button>\n\n        </ion-col>\n\n\n\n        <ion-col class="card-bottom-btn">\n\n           <button ion-button icon-left clear small color="gray">\n\n             <ion-icon name="videocam"></ion-icon>\n\n             <div>{{item.videoCount}}</div>\n\n           </button>\n\n         </ion-col>\n\n\n\n        <ion-col class="card-bottom-btn" *ngIf="item.isLocationValid">\n\n          <button ion-button icon-left clear small (click)="onLocate(item)">\n\n            <ion-icon name="map"></ion-icon>\n\n            <div>地图</div>\n\n          </button>\n\n        </ion-col>\n\n      </ion-row>\n\n    </ion-card>\n\n  </ion-list>\n\n\n\n  <!--infinite scroll-->\n\n  <ion-infinite-scroll (ionInfinite)="doInfinite($event)" immediate-check="false" distance=1%>\n\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\n\n  </ion-infinite-scroll>\n\n\n\n  <!--fab-->\n\n  <ion-fab right bottom *ngIf="showFab">\n\n    <button ion-fab color="primary" (click)="doScroll2Top($event)">\n\n      <ion-icon name="arrow-dropup"></ion-icon>\n\n    </button>\n\n  </ion-fab>\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\history\myhistory.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_2__providers_DataService__["a" /* DataService */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_4__providers_GlobalService__["a" /* GlobalService */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */]])
], MyHistory);

//# sourceMappingURL=myhistory.js.map

/***/ }),

/***/ 62:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DbService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ionic_native_sqlite__ = __webpack_require__(225);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_sqlite_porter__ = __webpack_require__(226);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__FileService__ = __webpack_require__(23);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var DbService = (function () {
    function DbService(sqlite, sqlitePorter, globalService, fileService) {
        this.sqlite = sqlite;
        this.sqlitePorter = sqlitePorter;
        this.globalService = globalService;
        this.fileService = fileService;
        this.dbName = 'main.db';
        //private readonly dbVersion: string = '1.0';
        this.paramError = 'param is error';
    }
    /**
     * 初始化
     * @returns {Promise<boolean>}
     */
    DbService.prototype.init = function () {
        var _this = this;
        if (this.globalService.isChrome) {
            this.dbPath = this.dbName;
            return Promise.resolve(true);
        }
        else {
            this.dbPath = this.fileService.getDbDir() + "/" + this.dbName;
            return this.createTables()
                .then(function (result) { return _this.updateTables(); });
        }
    };
    /**
     * 销毁
     */
    DbService.prototype.destroy = function () {
        if (this.globalService.isChrome) {
        }
        else {
        }
    };
    /**
     * 保存词语信息
     * @param words
     * @returns {any}
     */
    DbService.prototype.saveWords = function (words) {
        var _this = this;
        if (this.globalService.isChrome || !words || words.length <= 0) {
            return Promise.resolve(false);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "DELETE FROM GD_WORDS;";
                for (var _i = 0, words_1 = words; _i < words_1.length; _i++) {
                    var word = words_1[_i];
                    sql += _this.toWordInsertSql(word);
                }
                return _this.sqlitePorter.importSqlToDb(db, sql);
            });
        }
    };
    /**
     * 保存材料信息
     * @param materials
     * @returns {any}
     */
    DbService.prototype.saveMaterials = function (materials) {
        var _this = this;
        if (this.globalService.isChrome || !materials || materials.length <= 0) {
            return Promise.resolve(false);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "DELETE FROM GD_MATERIALS;";
                for (var _i = 0, materials_1 = materials; _i < materials_1.length; _i++) {
                    var material = materials_1[_i];
                    sql += _this.toMaterialInsertSql(material);
                }
                return _this.sqlitePorter.importSqlToDb(db, sql);
            });
        }
    };
    /**
     * 保存维修信息
     * @param maintainInfo
     * @returns {any}
     */
    DbService.prototype.saveMaintainInfo = function (maintainInfo) {
        var _this = this;
        if (this.globalService.isChrome || !maintainInfo) {
            return Promise.resolve(false);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql;
                sql = _this.toMaintainInfoInsertSql(maintainInfo);
                return _this.sqlitePorter.importSqlToDb(db, sql);
            });
        }
    };
    /**
     * 查询维修信息
     * @param taskId
     * @returns {any}
     */
    DbService.prototype.queryMaintainInfo = function (taskId) {
        var _this = this;
        if (this.globalService.isChrome || !taskId) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var selectSql = "SELECT * FROM GD_MAINTAININFO WHERE S_TASKID = '" + taskId + "';";
                return db.executeSql(selectSql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    var maintainInfo;
                    if (rows && rows.length == 1) {
                        var localMaintainInfo = rows.item(0);
                        maintainInfo = _this.toMaintainInfo(localMaintainInfo);
                    }
                    return maintainInfo ? Promise.resolve(maintainInfo) : Promise.reject('no maintainInfo');
                });
            });
        }
    };
    /**
     * 材料清单保存至本地
     * @param materialInfo
     * @returns {any}
     */
    DbService.prototype.saveMaterialInfo = function (materialInfo) {
        var _this = this;
        if (!materialInfo || !materialInfo.taskId || materialInfo.infos.length <= 0) {
            return Promise.resolve(false);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var selectSql = "SELECT * FROM GD_MATERIALINFO WHERE S_TASKID = '" + materialInfo.taskId + "';";
                var sql;
                return db.executeSql(selectSql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    if (rows && rows.length > 0) {
                        sql = _this.toMaterialInfoUpdateSql(materialInfo);
                    }
                    else {
                        sql = _this.toMaterialInfoInsertSql(materialInfo);
                    }
                    return _this.sqlitePorter.importSqlToDb(db, sql);
                })
                    .catch(function (error) {
                    console.log(error);
                });
            });
        }
    };
    /**
     * 材料清单更新上传标志
     * @param materialInfo
     * @returns {any}
     */
    DbService.prototype.updateFlagMaterials = function (materialInfo) {
        var _this = this;
        if (!materialInfo || !materialInfo.taskId || materialInfo.infos.length <= 0) {
            return Promise.resolve(false);
        }
        else {
            return this.openDb()
                .then(function (db) {
                materialInfo.uploadFlag = _this.globalService.uploadedFlagForUploaded;
                var sql = _this.toMaterialInfoUpdateSql(materialInfo);
                return _this.sqlitePorter.importSqlToDb(db, sql);
            });
        }
    };
    /**
     * 获取材料
     * @param group
     */
    DbService.prototype.getMaterials = function (groupKey) {
        var _this = this;
        if (this.globalService.isChrome || !groupKey) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT * FROM GD_MATERIALS WHERE S_GROUPKEY = '" + groupKey + "';";
                return db.executeSql(sql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    var materials = [];
                    if (rows && rows.length > 0) {
                        for (var i = 0; i < rows.length; i++) {
                            var localMaterial = rows.item(i);
                            if (!localMaterial) {
                                continue;
                            }
                            materials.push(_this.toMaterial(localMaterial));
                        }
                    }
                    return materials.length ? Promise.resolve(materials) : Promise.reject('no materials');
                });
            });
        }
    };
    DbService.prototype.getMaterialsCount = function () {
        if (this.globalService.isChrome) {
            return Promise.resolve(0);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT COUNT(*) FROM GD_MATERIALS;";
                return db.executeSql(sql, {})
                    .then(function (data) { return data.rows && data.rows.length > 0 ? data.rows.item(0)["COUNT(*)"] : 0; });
            });
        }
    };
    /**
     * 根据id查询材料信息
     * @param mid
     * @returns {any}
     */
    DbService.prototype.getMaterial = function (mid) {
        var _this = this;
        if (this.globalService.isChrome || !mid) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT * FROM GD_MATERIALS WHERE I_MID =" + mid + ";";
                return db.executeSql(sql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    var result;
                    if (rows && rows.length == 1) {
                        result = _this.toMaterial(rows.item(0));
                    }
                    return result ? Promise.resolve(result) : Promise.reject('no material');
                });
            });
        }
    };
    /**
     * 查询材料清单
     * @param taskId
     * @returns {any}
     */
    DbService.prototype.getMaterialInfo = function (taskId) {
        var _this = this;
        if (this.globalService.isChrome || !taskId) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT * FROM GD_MATERIALINFO WHERE S_TASKID = '" + taskId + "';";
                return db.executeSql(sql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    var result;
                    if (rows && rows.length == 1) {
                        var localMaterialInfo = rows.item(0);
                        if (localMaterialInfo) {
                            result = _this.toMaterialInfo(localMaterialInfo);
                        }
                    }
                    return result ? Promise.resolve(result) : Promise.reject('no materialInfo');
                });
            });
        }
    };
    DbService.prototype.toMaterialInfo = function (localMaterialInfo) {
        return {
            taskId: localMaterialInfo.S_TASKID,
            infos: JSON.parse(localMaterialInfo.S_INFOS),
            uploadFlag: localMaterialInfo.I_UPLOADEDFLAG
        };
    };
    /**
     * 获取词语
     * @param group
     * @returns {any}
     */
    DbService.prototype.getWords = function (group) {
        var _this = this;
        if (this.globalService.isChrome || !group) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT * FROM GD_WORDS WHERE S_WGROUP = '" + group + "';";
                return db.executeSql(sql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    var words = [];
                    if (rows && rows.length > 0) {
                        for (var i = 0; i < rows.length; i++) {
                            var localWord = rows.item(i);
                            if (!localWord) {
                                continue;
                            }
                            words.push(_this.toWord(localWord));
                        }
                    }
                    return words.length ? Promise.resolve(words) : Promise.reject('no words');
                });
            });
        }
    };
    /**
     * 获取词语数目
     * @returns {any}
     */
    DbService.prototype.getWordsCount = function () {
        if (this.globalService.isChrome) {
            return Promise.resolve(0);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT COUNT(*) FROM GD_WORDS;";
                return db.executeSql(sql, {})
                    .then(function (data) { return data.rows && data.rows.length > 0 ? data.rows.item(0)["COUNT(*)"] : 0; });
            });
        }
    };
    /**
     * 保存任务列表
     * @param userId
     * @param serverTasks
     * @returns {any}
     */
    DbService.prototype.saveTasks = function (userId, serverTasks) {
        var _this = this;
        if (this.globalService.isChrome || !serverTasks || serverTasks.length <= 0) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT * FROM GD_TASKS WHERE I_USERID = " + userId + ";";
                return db.executeSql(sql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    var sql = '';
                    if (rows && rows.length > 0) {
                        for (var _i = 0, serverTasks_1 = serverTasks; _i < serverTasks_1.length; _i++) {
                            var serverTask = serverTasks_1[_i];
                            var foundLocalTask = void 0;
                            for (var i = 0; i < rows.length; i++) {
                                var localTask = rows.item(i);
                                if (!localTask || !localTask.S_TASKID) {
                                    continue;
                                }
                                if (localTask.S_TASKID === serverTask.taskId) {
                                    foundLocalTask = localTask;
                                    break;
                                }
                            }
                            if (foundLocalTask) {
                                sql += _this.toTaskUpdateSql(serverTask, foundLocalTask);
                            }
                            else {
                                sql += _this.toTaskInsertSql(serverTask);
                            }
                        }
                    }
                    else {
                        for (var _a = 0, serverTasks_2 = serverTasks; _a < serverTasks_2.length; _a++) {
                            var task = serverTasks_2[_a];
                            sql += _this.toTaskInsertSql(task);
                        }
                    }
                    return sql && sql.length > 0 ? _this.sqlitePorter.importSqlToDb(db, sql) : Promise.reject('failure to saveTasks');
                });
            });
        }
    };
    /**
     * 保存任务
     * @param task
     * @returns {any}
     */
    DbService.prototype.saveTask = function (task) {
        var _this = this;
        if (this.globalService.isChrome || !task) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = _this.toTaskUpdateSql(task);
                return sql && sql.length > 0 ? db.executeSql(sql, {}) : Promise.reject('failure to saveTask');
            });
        }
    };
    /**
     * 获取任务
     * @param userId
     * @param since
     * @param count
     * @param states
     * @param key
     * @returns {any}
     */
    DbService.prototype.getTasks = function (userId, since, count, states, key) {
        var _this = this;
        if (this.globalService.isChrome) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT * FROM GD_TASKS WHERE I_USERID = " + userId;
                if (states && states.length > 0) {
                    sql += " AND I_STATE IN (" + states.join(',') + ")";
                }
                if (key) {
                    sql += " AND S_TASKID LIKE '%" + key + "%'";
                }
                sql += " ORDER BY D_ASSGINTIME DESC LIMIT " + count + " OFFSET " + since + ";";
                return db.executeSql(sql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    var tasks = [];
                    if (rows && rows.length > 0) {
                        for (var i = 0; i < rows.length; i++) {
                            var localTask = rows.item(i);
                            if (!localTask || !localTask.S_TASKID) {
                                continue;
                            }
                            tasks.push(_this.toTask(localTask));
                        }
                    }
                    return Promise.resolve(tasks);
                });
            });
        }
    };
    /**
     * 获取任务数
     * @param userId
     * @returns {any}
     */
    DbService.prototype.getTaskCount = function (userId) {
        if (this.globalService.isChrome) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT COUNT(*) FROM GD_TASKS WHERE I_USERID = " + userId + ";";
                return db.executeSql(sql, {})
                    .then(function (data) { return data.rows && data.rows.length > 0 ? data.rows.item(0)["COUNT(*)"] : 0; });
            });
        }
    };
    /**
     * 获取当前登录人TaskIds
     * @param userId
     * @returns {Array<string>}
     */
    DbService.prototype.getTaskIds = function (userId) {
        if (this.globalService.isChrome) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT S_TASKID FROM GD_TASKS WHERE I_USERID = " + userId + ";";
                return db.executeSql(sql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    var taskIds = [];
                    if (rows && rows.length > 0) {
                        for (var i = 0; i < rows.length; i++) {
                            var item = rows.item(i);
                            if (item.hasOwnProperty('S_TASKID') && item['S_TASKID']) {
                                taskIds.push(item['S_TASKID']);
                            }
                        }
                    }
                    return Promise.resolve(taskIds);
                });
            });
        }
    };
    /**
     * 保存任务详情
     * @param taskDetail
     * @returns {any}
     */
    DbService.prototype.saveTaskDetail = function (taskDetail) {
        var _this = this;
        if (this.globalService.isChrome || !taskDetail) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT * FROM GD_TASKDETAILS WHERE S_TASKID = '" + taskDetail.taskId + "';";
                return db.executeSql(sql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    var sql;
                    if (rows && rows.length > 0) {
                        sql = _this.toTaskDetailUpdateSql(taskDetail);
                    }
                    else {
                        sql = _this.toTaskDetailInsertSql(taskDetail);
                    }
                    return db.executeSql(sql, {});
                });
            });
        }
    };
    /**
     * 更新task extend info字段
     * @param taskDetail
     * @returns {any}
     */
    DbService.prototype.updateTaskExtendInfo = function (taskDetail) {
        var _this = this;
        if (this.globalService.isChrome || !taskDetail) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT * FROM GD_TASKS WHERE S_TASKID = '" + taskDetail.taskId + "';";
                return db.executeSql(sql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    var sql;
                    var extendedInfo;
                    if (rows && rows.length > 0) {
                        var item = rows.item(0);
                        if (item.hasOwnProperty('S_EXTENDEDINFO')) {
                            extendedInfo = item['S_EXTENDEDINFO'];
                        }
                    }
                    else {
                        return Promise.resolve(false);
                    }
                    sql = _this.toTaskUpdateExtendedInfoSql(taskDetail, extendedInfo);
                    return db.executeSql(sql, {});
                });
            });
        }
    };
    /**
     * 检查超期工单
     * @param userId
     * @param overdueTime
     * @param currentTime
     * @returns {any}
     */
    DbService.prototype.checkOverdueTimeTasks = function (userId, overdueTime, currentTime) {
        var _this = this;
        if (this.globalService.isChrome || !overdueTime) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var arrivedTime = overdueTime.arrived + currentTime;
                var replyTime = overdueTime.reply + currentTime;
                var sql = "SELECT * FROM GD_TASKS WHERE I_USERID = " + userId + " ORDER BY ID;";
                return db.executeSql(sql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    var tasks = [];
                    if (rows && rows.length > 0) {
                        for (var i = 0; i < rows.length; i++) {
                            var localTask = rows.item(i);
                            if (!localTask || !localTask.S_TASKID) {
                                continue;
                            }
                            var task = _this.toTask(localTask);
                            if (task.extendedInfo) {
                                if (task.extendedInfo.arrivedDeadLine && task.extendedInfo.arrivedDeadLine < arrivedTime) {
                                    task.extendedInfo.replyDeadLine = undefined;
                                    task.extendedInfo.delayReplyDeadLine = undefined;
                                }
                                else if (task.extendedInfo.replyDeadLine && task.extendedInfo.replyDeadLine < replyTime) {
                                    task.extendedInfo.arrivedDeadLine = undefined;
                                    task.extendedInfo.delayReplyDeadLine = undefined;
                                }
                                else {
                                    continue;
                                }
                                tasks.push(task);
                            }
                        }
                    }
                    return Promise.resolve(tasks);
                });
            });
        }
    };
    /**
     * 获取任务详情
     * @param taskId
     * @returns {any}
     */
    DbService.prototype.getTaskDetail = function (taskId) {
        var _this = this;
        if (this.globalService.isChrome || !taskId) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT * FROM GD_TASKDETAILS WHERE S_TASKID = '" + taskId + "';";
                return db.executeSql(sql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    var taskDetail;
                    if (rows && rows.length > 0) {
                        for (var i = 0; i < rows.length; i++) {
                            var localTaskDetail = rows.item(i);
                            if (!localTaskDetail || !localTaskDetail.S_TASKID) {
                                continue;
                            }
                            taskDetail = _this.toTaskDetail(localTaskDetail);
                        }
                    }
                    return Promise.resolve(taskDetail);
                });
            });
        }
    };
    /**
     * 获取任务详情
     * @param taskIds
     * @returns {Array<TaskDetail>}
     */
    DbService.prototype.getTaskDetails = function (taskIds) {
        var _this = this;
        if (this.globalService.isChrome || !taskIds || taskIds.length <= 0) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT * FROM GD_TASKDETAILS WHERE";
                var ids = taskIds.map(function (id) { return "'" + id + "'"; });
                sql += " S_TASKID IN (" + ids.join(',') + ")";
                return db.executeSql(sql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    var taskDetails = [];
                    if (rows && rows.length > 0) {
                        for (var i = 0; i < rows.length; i++) {
                            var localTaskDetail = rows.item(i);
                            if (!localTaskDetail) {
                                continue;
                            }
                            taskDetails.push(_this.toTaskDetail(localTaskDetail));
                        }
                    }
                    return Promise.resolve(taskDetails);
                });
            });
        }
    };
    /**
     * 获取无详细信息的taskId列表
     * @param userId
     * @returns {any}
     */
    DbService.prototype.getNoDetailTaskIds = function (userId) {
        if (this.globalService.isChrome) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT S_TASKID FROM GD_TASKS WHERE I_USERID = " + userId + " AND S_TASKID NOT IN (SELECT S_TASKID FROM GD_TASKDETAILS);";
                return db.executeSql(sql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    var taskIds = [];
                    if (rows && rows.length > 0) {
                        for (var i = 0; i < rows.length; i++) {
                            var item = rows.item(i);
                            if (item.hasOwnProperty('S_TASKID') && item['S_TASKID']) {
                                taskIds.push(item['S_TASKID']);
                            }
                        }
                    }
                    return Promise.resolve(taskIds);
                });
            });
        }
    };
    /**
     * 保存每次操作到历史表
     * @param history
     * @returns {any}
     */
    DbService.prototype.saveHistory = function (history) {
        var _this = this;
        if (this.globalService.isChrome || !history) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT * FROM GD_HISTORIES WHERE I_USERID = " + history.userId + " AND S_TASKID = '" + history.taskId + "' AND I_STATE = " + history.state + " ORDER BY ID;";
                return db.executeSql(sql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    var sql;
                    if (rows && rows.length > 0) {
                        //let localHistory: LocalHistory = rows.item(0) as LocalHistory;
                        sql = _this.toHistoryUpdateSql(history);
                    }
                    else {
                        sql = _this.toHistoryInsertSql(history);
                    }
                    return db.executeSql(sql, {});
                });
            });
        }
    };
    /**
     * 获取历史记录
     * @param userId
     * @param taskId
     * @param states
     * @param uploadedFlags
     * @param key
     * @param since
     * @param count
     * @returns {any}
     */
    DbService.prototype.getHistories = function (userId, taskId, states, uploadedFlags, key, since, count) {
        var _this = this;
        if (this.globalService.isChrome) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT * FROM GD_HISTORIES WHERE I_USERID = " + userId;
                if (taskId != undefined && taskId != null) {
                    sql += " AND S_TASKID = '" + taskId + "'";
                }
                if (states && states.length > 0) {
                    sql += " AND I_STATE IN (" + states.join(',') + ")";
                }
                if (uploadedFlags && uploadedFlags.length > 0) {
                    sql += " AND I_UPLOADEDFLAG IN (" + uploadedFlags.join(',') + ")";
                }
                if (key) {
                    sql += " AND S_TASKID LIKE '%" + key + "%'";
                }
                if (since !== undefined && since !== null && count !== undefined && count !== null) {
                    sql += " ORDER BY ID LIMIT " + count + " OFFSET " + since + ";";
                }
                else {
                    sql += ' ORDER BY ID;';
                }
                return db.executeSql(sql, {});
            })
                .then(function (data) {
                var rows = data.rows;
                var histories = [];
                if (rows && rows.length > 0) {
                    for (var i = 0; i < rows.length; i++) {
                        var localHistory = rows.item(i);
                        if (!localHistory) {
                            continue;
                        }
                        histories.push(_this.toHistory(localHistory));
                    }
                }
                return Promise.resolve(histories);
            });
        }
    };
    /**
     *
     * @param userId
     * @param taskIds
     * @param state
     * @param uploadedFlags
     * @returns {any}
     */
    DbService.prototype.getSpecialHistories = function (userId, taskIds, state, uploadedFlags) {
        var _this = this;
        if (this.globalService.isChrome || !taskIds || taskIds.length <= 0) {
            return Promise.resolve([]);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var ids = taskIds.map(function (id) { return "'" + id + "'"; });
                var sql = "SELECT * FROM GD_HISTORIES WHERE I_USERID = " + userId + " AND S_TASKID IN (" + ids.join(',') + ")";
                if (state !== undefined && state !== null) {
                    sql += " AND I_STATE = " + state;
                }
                if (uploadedFlags && uploadedFlags.length > 0) {
                    sql += " AND I_UPLOADEDFLAG IN (" + uploadedFlags.join(',') + ")";
                }
                sql += " ORDER BY ID;";
                return db.executeSql(sql, {});
            })
                .then(function (data) {
                var rows = data.rows;
                var histories = [];
                if (rows && rows.length > 0) {
                    for (var i = 0; i < rows.length; i++) {
                        var localHistory = rows.item(i);
                        if (!localHistory) {
                            continue;
                        }
                        histories.push(_this.toHistory(localHistory));
                    }
                }
                return Promise.resolve(histories);
            });
        }
    };
    /**
     * 销单删除任务及详情
     * @param userId
     * @param taskId
     * @returns {any}
     */
    // public deleteTaskAndDetail(userId: number, taskId: string) {
    //   if (this.globalService.isChrome) {
    //     return Promise.reject('chrome');
    //   } else {
    //     return this.openDb()
    //       .then(db => {
    //         let sql = `DELETE FROM GD_TASKS WHERE I_USERID = ${userId} AND S_TASKID = '${taskId}';`
    //           + `DELETE FROM GD_TASKDETAILS WHERE S_TASKID = '${taskId}';`;
    //         return this.sqlitePorter.importSqlToDb(db, sql);
    //       });
    //   }
    // }
    /**
     * 保存多媒体信息
     * @param media
     * @returns {any}
     */
    DbService.prototype.saveMedia = function (media) {
        var _this = this;
        if (this.globalService.isChrome || !media) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT * FROM GD_MULTIMEDIAS WHERE I_USERID = " + media.userId + " AND S_TASKID = '" + media.taskId + "' AND I_FILETYPE = " + media.fileType + " AND S_FILENAME = '" + media.fileName + "';";
                return db.executeSql(sql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    if (rows && rows.length > 0) {
                        var localMedia = rows.item(0);
                        sql = _this.toMediaUpdateSql(media, localMedia);
                    }
                    else {
                        sql = _this.toMediaInsertSql(media);
                    }
                    return db.executeSql(sql, {});
                });
            });
        }
    };
    /**
     * 获取多媒体列表
     * @param userId
     * @param taskId
     * @param fileNames
     * @param uploadedFlags
     * @returns {any}
     */
    DbService.prototype.getMediaList = function (userId, taskId, fileNames, uploadedFlags) {
        var _this = this;
        if (this.globalService.isChrome || !taskId) {
            return Promise.reject(this.paramError);
        }
        else if (fileNames.length <= 0) {
            return Promise.reject([]);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var names = fileNames.map(function (name) { return "'" + name + "'"; });
                var sql = "SELECT * FROM GD_MULTIMEDIAS WHERE I_USERID = " + userId + " AND S_TASKID = '" + taskId + "'\n           AND S_FILENAME IN (" + names.join(',') + ")";
                if (uploadedFlags && uploadedFlags.length > 0) {
                    sql += " AND I_UPLOADEDFLAG IN (" + uploadedFlags.join(',') + ")";
                }
                sql += ' ORDER BY ID;';
                return db.executeSql(sql, {});
            })
                .then(function (data) {
                var rows = data.rows;
                var mediaList = [];
                if (rows && rows.length > 0) {
                    for (var i = 0; i < rows.length; i++) {
                        var localMedia = rows.item(i);
                        if (!localMedia) {
                            continue;
                        }
                        mediaList.push(_this.toMedia(localMedia));
                    }
                }
                return Promise.resolve(mediaList);
            });
        }
    };
    /**
     *
     * @param userId
     * @param taskId
     * @returns {any}
     */
    DbService.prototype.deleteOneTaskWithAllInfos = function (userId, taskId) {
        var _this = this;
        if (this.globalService.isChrome) {
            return Promise.reject('chrome');
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "DELETE FROM GD_TASKS WHERE I_USERID = " + userId + " AND S_TASKID = '" + taskId + "';"
                    + ("DELETE FROM GD_TASKDETAILS WHERE S_TASKID = '" + taskId + "';")
                    + ("DELETE FROM GD_HISTORIES WHERE I_USERID = " + userId + " AND S_TASKID = '" + taskId + "';")
                    + ("DELETE FROM GD_MULTIMEDIAS WHERE I_USERID = " + userId + " AND S_TASKID = '" + taskId + "';");
                return _this.sqlitePorter.importSqlToDb(db, sql);
            });
        }
    };
    /**
     *
     * @param userId
     * @param fileNames
     * @returns {any}
     */
    DbService.prototype.deleteOneMedia = function (userId, fileNames) {
        var _this = this;
        if (this.globalService.isChrome) {
            return Promise.reject('chrome');
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "DELETE FROM GD_MULTIMEDIAS WHERE S_FILENAME = '" + fileNames + "' AND I_USERID = " + userId + ";";
                return _this.sqlitePorter.importSqlToDb(db, sql);
            });
        }
    };
    /**
     *
     * @param personnels
     * @returns {any}
     */
    DbService.prototype.savePersonnels = function (personnels) {
        var _this = this;
        if (this.globalService.isChrome || !personnels || personnels.length <= 0) {
            return Promise.resolve(false);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "DELETE FROM GD_PERSONNELS;";
                for (var _i = 0, personnels_1 = personnels; _i < personnels_1.length; _i++) {
                    var personnel = personnels_1[_i];
                    sql += _this.toPersonnelInsertSql(personnel);
                }
                return _this.sqlitePorter.importSqlToDb(db, sql);
            });
        }
    };
    /**
     *
     * @returns {any}
     */
    DbService.prototype.getPersonnels = function () {
        var _this = this;
        if (this.globalService.isChrome) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT * FROM GD_PERSONNELS;";
                return db.executeSql(sql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    var personnels = [];
                    if (rows && rows.length > 0) {
                        for (var i = 0; i < rows.length; i++) {
                            var localPersonnel = rows.item(i);
                            if (!localPersonnel) {
                                continue;
                            }
                            personnels.push(_this.toPersonnel(localPersonnel));
                        }
                    }
                    return personnels.length ? Promise.resolve(personnels) : Promise.reject('no personnels');
                });
            });
        }
    };
    DbService.prototype.getPersonnelsCount = function () {
        if (this.globalService.isChrome) {
            return Promise.resolve(0);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT COUNT(*) FROM GD_PERSONNELS;";
                return db.executeSql(sql, {})
                    .then(function (data) { return data.rows && data.rows.length > 0 ? data.rows.item(0)["COUNT(*)"] : 0; });
            });
        }
    };
    /**
     * 打开数据库
     * @returns {any}
     */
    DbService.prototype.openDb = function () {
        return this.sqlite.create({
            name: this.dbPath,
            location: 'default'
        });
    };
    /**
     * 创建tables
     */
    DbService.prototype.createTables = function () {
        var _this = this;
        var sql = "CREATE TABLE IF NOT EXISTS [GD_HISTORIES] (\n        [ID] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n        [I_USERID] INTEGER NOT NULL, \n        [S_TASKID] TEXT(50) NOT NULL,\n        [I_STATE] INTEGER NOT NULL,\n        [S_CONTENT] TEXT NOT NULL,\n        [S_REPLY] TEXT,\n        [I_UPLOADEDFLAG] INTEGER NOT NULL DEFAULT 0,\n        [S_EXTENDEDINFO] TEXT);\n           \n      CREATE TABLE IF NOT EXISTS [GD_MULTIMEDIAS] (\n        [ID] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n        [I_USERID] INTEGER NOT NULL,\n        [S_TASKID] TEXT(50) NOT NULL,\n        [I_FILETYPE] INTEGER NOT NULL,\n        [S_FILENAME] TEXT(100) NOT NULL,\n        [I_UPLOADEDFLAG] INTEGER NOT NULL DEFAULT 0,\n        [S_FILEID] TEXT,\n        [S_EXTENDEDINFO] TEXT);\n      \n      CREATE TABLE IF NOT EXISTS [GD_NEWS] (\n        [ID] INTEGER NOT NULL, \n        [S_TITLE] TEXT(100) NOT NULL,\n        [D_PUBTIME] INTEGER NOT NULL,\n        [S_CONTENT] TEXT NOT NULL,\n        [I_READFLAG] INTEGER NOT NULL DEFAULT 0,\n        [S_EXTENDEDINFO] TEXT);\n      \n      CREATE TABLE IF NOT EXISTS [GD_TASKDETAILS] (\n        [ID] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n        [S_TASKID] TEXT(50) NOT NULL,\n        [S_DETAILINFO] TEXT NOT NULL,\n        [S_EXTENDEDINFO] TEXT);\n      \n      CREATE TABLE IF NOT EXISTS [GD_TASKS] (\n        [ID] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n        [I_USERID] INTEGER NOT NULL, \n        [S_TASKID] TEXT(50) NOT NULL,\n        [S_TASKTYPE] TEXT(50) NOT NULL,\n        [S_DESC] TEXT(50),\n        [S_SOURCE] TEXT(50),\n        [D_CREATETIME] INTEGER,\n        [D_ASSGINTIME] INTEGER,\n        [D_ACCEPTTIME] INTEGER,\n        [D_GOTIME] INTEGER,\n        [D_ARRIVEDTIME] INTEGER,\n        [D_REPLYTIME] INTEGER,\n        [D_COMPLETEDTIME] INTEGER,\n        [I_STATE] INTEGER NOT NULL,\n        [S_LNGLATTYPE] TEXT(50),\n        [S_LONGITUDE] TEXT(50),\n        [S_LATITUDE] TEXT(50),\n        [S_EXTENDEDINFO] TEXT);\n      \n      CREATE TABLE IF NOT EXISTS [GD_WORDS] (\n        [ID] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n        [I_WID] INTEGER NOT NULL,\n        [S_WNAME] TEXT(100) NOT NULL,\n        [S_WVALUE] TEXT(100) NOT NULL,\n        [S_WVALUEEX] TEXT(100),\n        [S_WGROUP] TEXT(100),\n        [I_WPARENTID] INTEGER,\n        [S_WREMARK] TEXT(100),\n        [S_WISACTIVE] TEXT(100));\n        \n      CREATE TABLE IF NOT EXISTS [GD_MATERIALS] (\n        [ID] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n        [I_MID] INTEGER NOT NULL,\n        [I_PARENTID] INTEGER NOT NULL,\n        [S_GROUPKEY] TEXT(100) NOT NULL,\n        [S_KEY] TEXT(100) NOT NULL,\n        [S_NAME] TEXT(100));\n        \n      CREATE TABLE IF NOT EXISTS [GD_MATERIALINFO](\n        [ID] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n        [I_USERID] INTEGER NOT NULL,\n        [S_TASKID] TEXT(50) NOT NULL,\n        [S_INFOS] TEXT(1000) NOT NULL,\n        [I_UPLOADEDFLAG] INTEGER NOT NULL DEFAULT 0);\n        \n      CREATE TABLE IF NOT EXISTS [GD_MAINTAININFO](\n        [ID] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n        [S_TASKID] TEXT(50) NOT NULL,\n        [S_TYPE] TEXT(50),\n        [S_ADDRESS] TEXT(100),\n        [S_AREA] TEXT(50),\n        [S_CONTENT] TEXT(1000),\n        [S_REMARK] TEXT(1000));\n       \n      CREATE TABLE IF NOT EXISTS [META_INFO] (\n        [S_VERSION] TEXT(50) NOT NULL, \n        [S_PRODUCTER] TEXT (100) NOT NULL, \n        [D_PRODUCTEDTIME] INTEGER NOT NULL);\n\n      CREATE TABLE IF NOT EXISTS [GD_PERSONNELS] (\n        [I_FIELDPERSONNELID] INTEGER NOT NULL, \n        [S_FIELDPERSONNELNAME] TEXT (100) NOT NULL, \n        [S_ROLES] TEXT);";
        return this.openDb()
            .then(function (db) {
            return _this.sqlitePorter.importSqlToDb(db, sql);
        });
    };
    /**
     * 更新tables, to be used in future!!!
     * @returns {Promise<boolean>}
     */
    DbService.prototype.updateTables = function () {
        // return this.openDb()
        //   .then(db => {
        //     let sql = `ALTER TABLE GD_TASKS ALTER COLUMN [D_ARRIVEDDEADLINE] INTEGER DEFAULT 0, [D_REPLYDEADLINE] INTEGER DEFAULT 0, [D_DELAYREPLYDEADLINE] INTEGER DEFAULT 0;`;
        //     return this.sqlitePorter.importSqlToDb(db, sql);
        //   });
        return Promise.resolve(true);
    };
    /**
     *
     * @param word
     * @returns {string}
     */
    DbService.prototype.toWordInsertSql = function (word) {
        return "INSERT INTO GD_WORDS VALUES (null, " + word.wid + ", '" + word.wName + "', '" + word.wValue + "', '" + word.wValueEx + "', '" + word.wGroup + "', " + word.wParentId + ", '" + word.wRemark + "', " + (word.wIsActive ? "'1'" : "'0'") + ");";
    };
    DbService.prototype.toMaterialInsertSql = function (material) {
        return "INSERT INTO GD_MATERIALS VALUES (null," + material.id + ", " + material.parentId + ", '" + material.groupKey + "', '" + material.key + "', '" + material.name + "');";
    };
    DbService.prototype.toMaterialInfoInsertSql = function (materialInfo) {
        return "INSERT INTO GD_MATERIALINFO VALUES (null," + this.globalService.userId + ", '" + materialInfo.taskId + "', \n    '" + JSON.stringify(materialInfo.infos) + "', " + materialInfo.uploadFlag + ");";
    };
    DbService.prototype.toMaintainInfoInsertSql = function (maintainInfo) {
        return "INSERT INTO GD_MAINTAININFO VALUES (null,'" + maintainInfo.serialNumber + "','" + maintainInfo.maintenanceType + "',\n    '" + maintainInfo.maintenanceAddress + "','" + maintainInfo.area + "','" + maintainInfo.repairContent + "','" + maintainInfo.remark + "');";
    };
    /**
     * 更新
     * @param materialInfo
     * @returns {string}
     */
    DbService.prototype.toMaterialInfoUpdateSql = function (materialInfo) {
        return "UPDATE GD_MATERIALINFO SET S_INFOS = '" + JSON.stringify(materialInfo.infos) + "',\n    I_UPLOADEDFLAG=" + materialInfo.uploadFlag + " WHERE S_TASKID = '" + materialInfo.taskId + "'";
    };
    /**
     *
     * @param localWord
     * @returns {{wid: number, wName: string, wValue: string, wValueEx: string, wIsActive: Boolean, wGroup: string, wParentId: number, wRemark: string}}
     */
    DbService.prototype.toWord = function (localWord) {
        return {
            wid: localWord.I_WID,
            wName: localWord.S_WNAME,
            wValue: localWord.S_WVALUE,
            wValueEx: localWord.S_WVALUEEX,
            wIsActive: Boolean(localWord.S_WISACTIVE),
            wGroup: localWord.S_WGROUP,
            wParentId: localWord.I_WPARENTID,
            wRemark: localWord.S_WREMARK
        };
    };
    DbService.prototype.toMaterial = function (localMaterial) {
        return {
            id: localMaterial.I_MID,
            parentId: localMaterial.I_PARENTID,
            groupKey: localMaterial.S_GROUPKEY,
            key: localMaterial.S_KEY,
            name: localMaterial.S_NAME
        };
    };
    DbService.prototype.toMaintainInfo = function (localMaintainInfo) {
        return {
            id: localMaintainInfo.ID,
            serialNumber: localMaintainInfo.S_TASKID,
            maintenanceType: localMaintainInfo.S_TYPE,
            maintenanceAddress: localMaintainInfo.S_ADDRESS,
            area: localMaintainInfo.S_AREA,
            repairContent: localMaintainInfo.S_CONTENT,
            remark: localMaintainInfo.S_REMARK
        };
    };
    /**
     * task转insert sql
     * @param task
     * @returns {string}
     */
    DbService.prototype.toTaskInsertSql = function (task) {
        return "INSERT INTO GD_TASKS VALUES (null, " + this.globalService.userId + ", '" + task.taskId + "', '" + task.taskType + "', '" + task.desc + "', '" + task.source + "', " + task.createTime + ", " + task.assignTime + ", " + task.acceptTime + ", " + task.goTime + ", " + task.arrivedTime + ", " + task.replyTime + ", " + task.compltedTime + ", " + task.state + ", " + task.location.type + ", " + task.location.lng + ", " + task.location.lat + ", null);";
    };
    /**
     * task转update sql
     * @param serverTask
     * @param localTask
     * @returns {string}
     */
    DbService.prototype.toTaskUpdateSql = function (serverTask, localTask) {
        var sql = '';
        if (localTask) {
            if (serverTask.acceptTime > localTask.D_ACCEPTTIME) {
                sql += "D_ACCEPTTIME = " + serverTask.acceptTime + ", ";
            }
            if (serverTask.arrivedTime > localTask.D_ARRIVEDTIME) {
                sql += "D_ARRIVEDTIME = " + serverTask.arrivedTime + ", ";
            }
            if (serverTask.assignTime > localTask.D_ASSGINTIME) {
                sql += "D_ASSGINTIME = " + serverTask.assignTime + ", ";
            }
            if (serverTask.compltedTime > localTask.D_COMPLETEDTIME) {
                sql += "D_COMPLETEDTIME = " + serverTask.compltedTime + ", ";
            }
            if (serverTask.createTime > localTask.D_CREATETIME) {
                sql += "D_CREATETIME = " + serverTask.createTime + ", ";
            }
            if (serverTask.goTime > localTask.D_GOTIME) {
                sql += "D_GOTIME = " + serverTask.goTime + ", ";
            }
            if (serverTask.replyTime > localTask.D_REPLYTIME) {
                sql += "D_REPLYTIME = " + serverTask.replyTime + ", ";
            }
            // modify: 2017.11.21
            if (serverTask.state > localTask.I_STATE) {
                sql += "I_STATE = " + serverTask.state + ", ";
            }
        }
        else {
            if (serverTask.acceptTime > 0) {
                sql += "D_ACCEPTTIME = " + serverTask.acceptTime + ", ";
            }
            if (serverTask.arrivedTime > 0) {
                sql += "D_ARRIVEDTIME = " + serverTask.arrivedTime + ", ";
            }
            if (serverTask.assignTime > 0) {
                sql += "D_ASSGINTIME = " + serverTask.assignTime + ", ";
            }
            if (serverTask.compltedTime > 0) {
                sql += "D_COMPLETEDTIME = " + serverTask.compltedTime + ", ";
            }
            if (serverTask.createTime > 0) {
                sql += "D_CREATETIME = " + serverTask.createTime + ", ";
            }
            if (serverTask.goTime > 0) {
                sql += "D_GOTIME = " + serverTask.goTime + ", ";
            }
            if (serverTask.replyTime > 0) {
                sql += "D_REPLYTIME = " + serverTask.replyTime + ", ";
            }
            if (serverTask.state > 0) {
                sql += "I_STATE = " + serverTask.state + ", ";
            }
        }
        if (sql.length > 0) {
            var seperator = ', ';
            var index = sql.lastIndexOf(seperator);
            if (sql.endsWith(seperator) && index > 0) {
                sql = sql.substring(0, index);
            }
            if (sql && sql.length > 0) {
                sql = "UPDATE GD_TASKS SET " + sql + " WHERE S_TASKID = '" + serverTask.taskId + "';";
            }
            else {
                sql = '';
            }
        }
        return sql;
    };
    /**
     *
     * @param taskDetail
     * @param extendedInfo
     * @returns {string}
     */
    DbService.prototype.toTaskUpdateExtendedInfoSql = function (taskDetail, extendedInfo) {
        var localTaskExtendedInfo = {};
        try {
            if (extendedInfo) {
                localTaskExtendedInfo = JSON.parse(extendedInfo);
            }
        }
        catch (e) {
            console.error(e);
        }
        localTaskExtendedInfo.arrivedDeadLine = taskDetail.arrivedDeadLine;
        localTaskExtendedInfo.replyDeadLine = taskDetail.replyDeadLine;
        localTaskExtendedInfo.delayReplyDeadLine = taskDetail.delayReplyDeadLine;
        var sql = "UPDATE GD_TASKS SET S_EXTENDEDINFO = '" + JSON.stringify(localTaskExtendedInfo) + "' WHERE S_TASKID = '" + taskDetail.taskId + "';";
        return sql;
    };
    /**
     *
     * @param taskDetail
     * @returns {string}
     */
    DbService.prototype.toTaskDetailInsertSql = function (taskDetail) {
        return "INSERT INTO GD_TASKDETAILS VALUES (null, '" + taskDetail.taskId + "', '" + JSON.stringify(taskDetail) + "', '" + (taskDetail.extendedInfo ? taskDetail.extendedInfo : null) + "');";
    };
    /**
     *
     * @param taskDetail
     * @returns {string}
     */
    DbService.prototype.toTaskDetailUpdateSql = function (taskDetail) {
        var sql = "UPDATE GD_TASKDETAILS SET S_DETAILINFO = '" + JSON.stringify(taskDetail) + "'";
        if (taskDetail.extendedInfo) {
            sql += ", S_EXTENDEDINFO = '" + taskDetail.extendedInfo + "'}";
        }
        sql += " WHERE S_TASKID = '" + taskDetail.taskId + "';";
        return sql;
    };
    /**
     *
     * @param history
     * @returns {string}
     */
    DbService.prototype.toHistoryInsertSql = function (history) {
        var extendInfo = {};
        if (history.taskDetail) {
            extendInfo.taskDetail = history.taskDetail;
        }
        if (history.mediaNames && history.mediaNames.length > 0) {
            extendInfo.mediaNames = history.mediaNames.join(',');
        }
        return "INSERT INTO GD_HISTORIES VALUES (null, " + history.userId + ", '" + history.task.taskId + "', " + history.task.state + ", '" + JSON.stringify(history.task) + "', '" + JSON.stringify(history.reply) + "', " + history.uploadedFlag + ", '" + JSON.stringify(extendInfo) + "');";
    };
    /**
     *
     * @param history
     * @returns {string}
     */
    DbService.prototype.toHistoryUpdateSql = function (history) {
        var extendInfo = {};
        if (history.taskDetail) {
            extendInfo.taskDetail = history.taskDetail;
        }
        if (history.mediaNames && history.mediaNames.length > 0) {
            extendInfo.mediaNames = history.mediaNames.join(',');
        }
        return "UPDATE GD_HISTORIES SET S_CONTENT = '" + JSON.stringify(history.task) + "', S_REPLY = '" + JSON.stringify(history.reply) + "', I_UPLOADEDFLAG = " + history.uploadedFlag + ", S_EXTENDEDINFO = '" + JSON.stringify(extendInfo) + "' WHERE I_USERID = " + history.userId + " AND S_TASKID = '" + history.taskId + "' AND I_STATE = " + history.state + ";";
    };
    /**
     * 转换task
     * @param localTask
     * @returns {{acceptTime: number, arrivedTime: number, assignTime: number, compltedTime: number, createTime: number, desc: string, goTime: number, location: {type: string, lng: string, lat: string}, replyTime: number, source: string, state: number, taskId: string, taskType: string}}
     */
    DbService.prototype.toTask = function (localTask) {
        var extendedInfo;
        try {
            extendedInfo = JSON.parse(localTask.S_EXTENDEDINFO);
        }
        catch (e) {
            console.error(e);
        }
        return {
            acceptTime: localTask.D_ACCEPTTIME,
            arrivedTime: localTask.D_ARRIVEDTIME,
            assignTime: localTask.D_ASSGINTIME,
            compltedTime: localTask.D_COMPLETEDTIME,
            createTime: localTask.D_CREATETIME,
            desc: localTask.S_DESC,
            goTime: localTask.D_GOTIME,
            location: {
                type: localTask.S_LNGLATTYPE,
                lng: localTask.S_LONGITUDE,
                lat: localTask.S_LATITUDE
            },
            replyTime: localTask.D_REPLYTIME,
            source: localTask.S_SOURCE,
            state: localTask.I_STATE,
            taskId: localTask.S_TASKID,
            taskType: localTask.S_TASKTYPE,
            extendedInfo: extendedInfo
        };
    };
    /**
     * 转换task detail
     * @param localTaskDetail
     * @returns {TaskDetail}
     */
    DbService.prototype.toTaskDetail = function (localTaskDetail) {
        try {
            var taskDetail = JSON.parse(localTaskDetail.S_DETAILINFO);
            if (localTaskDetail.S_EXTENDEDINFO) {
                taskDetail.extendedInfo = JSON.parse(localTaskDetail.S_EXTENDEDINFO);
            }
            return taskDetail;
        }
        catch (e) {
            console.error(e);
        }
    };
    /**
     *
     * @param localHistory
     * @returns {{userId: number, taskId: string, state: number, task: null, reply: any, uploadedFlag: number, taskDetail: TaskDetail, mediaIds: Array<number>}}
     */
    DbService.prototype.toHistory = function (localHistory) {
        try {
            var taskDetail = void 0;
            var mediaNames = void 0;
            if (localHistory.S_EXTENDEDINFO) {
                var historyExtendedInfo = JSON.parse(localHistory.S_EXTENDEDINFO);
                if (historyExtendedInfo.taskDetail) {
                    taskDetail = historyExtendedInfo.taskDetail;
                }
                if (historyExtendedInfo.mediaNames && historyExtendedInfo.mediaNames.length > 0) {
                    mediaNames = historyExtendedInfo.mediaNames.split(',');
                }
            }
            return {
                userId: localHistory.I_USERID,
                taskId: localHistory.S_TASKID,
                state: localHistory.I_STATE,
                task: localHistory.S_CONTENT ? JSON.parse(localHistory.S_CONTENT) : null,
                reply: JSON.parse(localHistory.S_REPLY),
                uploadedFlag: localHistory.I_UPLOADEDFLAG,
                taskDetail: taskDetail,
                mediaNames: mediaNames
            };
        }
        catch (e) {
            console.error(e);
        }
    };
    /**
     *
     * @param media
     * @returns {string}
     */
    DbService.prototype.toMediaInsertSql = function (media) {
        return "INSERT INTO GD_MULTIMEDIAS VALUES (null, " + media.userId + ", '" + media.taskId + "', " + media.fileType + ", '" + media.fileName + "', " + media.uploadedFlag + ", '" + (media.fileId ? media.fileId : null) + "', null);";
    };
    /**
     *
     * @param media
     * @param localMedia
     * @returns {string}
     */
    DbService.prototype.toMediaUpdateSql = function (media, localMedia) {
        if (localMedia) {
            var sql = "UPDATE GD_MULTIMEDIAS SET I_UPLOADEDFLAG = " + media.uploadedFlag;
            if (media.fileId) {
                sql += ", S_FILEID = '" + media.fileId + "'";
            }
            if (media.extendedInfo) {
                sql += ", S_EXTENDEDINFO ='" + JSON.stringify(media.extendedInfo) + "'";
            }
            sql += " WHERE ID = " + localMedia.ID + ";";
            return sql;
        }
        else {
            return this.toMediaInsertSql(media);
        }
    };
    /**
     *
     * @param localMedia
     * @returns {{userId: number, taskId: string, fileType: number, fileName: string, uploadedFlag: number, fileId: string, extendedInfo: string}}
     */
    DbService.prototype.toMedia = function (localMedia) {
        return {
            userId: localMedia.I_USERID,
            taskId: localMedia.S_TASKID,
            fileType: localMedia.I_FILETYPE,
            fileName: localMedia.S_FILENAME,
            uploadedFlag: localMedia.I_UPLOADEDFLAG,
            fileId: localMedia.S_FILEID,
            extendedInfo: localMedia.S_EXTENDEDINFO
        };
    };
    /**
     * 获取未上传的材料清单记录
     * @param userId
     * @returns {any}
     */
    DbService.prototype.getNotUploadMaterilalInfo = function (userId) {
        var _this = this;
        if (this.globalService.isChrome || !userId) {
            return Promise.reject(this.paramError);
        }
        else {
            return this.openDb()
                .then(function (db) {
                var sql = "SELECT * FROM GD_MATERIALINFO WHERE I_USERID = " + userId + " \n          AND I_UPLOADEDFLAG= " + _this.globalService.uploadedFlagForLocal + ";";
                return db.executeSql(sql, {})
                    .then(function (data) {
                    var rows = data.rows;
                    var results = [];
                    if (rows && rows.length > 0) {
                        for (var i = 0; i < rows.length; i++) {
                            var localMaterialInfo = rows.item(i);
                            if (!localMaterialInfo) {
                                continue;
                            }
                            results.push(_this.toMaterialInfo(localMaterialInfo));
                        }
                    }
                    return results.length ? Promise.resolve(results) : Promise.reject('no materialInfos');
                });
            });
        }
    };
    DbService.prototype.toPersonnelInsertSql = function (personnel) {
        return "INSERT INTO GD_PERSONNELS VALUES (" + personnel.fieldPersonnelId + ", '" + personnel.fieldPersonnelName + "', '" + personnel.roles.join(',') + "');";
    };
    DbService.prototype.toPersonnel = function (localPersonnel) {
        return {
            fieldPersonnelId: localPersonnel.I_FIELDPERSONNELID,
            fieldPersonnelName: localPersonnel.S_FIELDPERSONNELNAME,
            roles: localPersonnel.S_ROLES.split(',')
        };
    };
    return DbService;
}());
DbService = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["B" /* Injectable */])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__ionic_native_sqlite__["a" /* SQLite */],
        __WEBPACK_IMPORTED_MODULE_2__ionic_native_sqlite_porter__["a" /* SQLitePorter */],
        __WEBPACK_IMPORTED_MODULE_3__GlobalService__["a" /* GlobalService */],
        __WEBPACK_IMPORTED_MODULE_4__FileService__["a" /* FileService */]])
], DbService);

//# sourceMappingURL=DbService.js.map

/***/ }),

/***/ 63:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SearchPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__(16);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__searchresult_searchresult__ = __webpack_require__(234);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__model_SearchTaskRequest__ = __webpack_require__(326);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_DataService__ = __webpack_require__(13);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Created by zhangjing on 2017/6/23.
 */






var SearchPage = (function () {
    function SearchPage(navCtrl, alertCtrl, formBuilder, dataService) {
        this.navCtrl = navCtrl;
        this.alertCtrl = alertCtrl;
        this.formBuilder = formBuilder;
        this.dataService = dataService;
        this.tag = "[SearchPage]";
        this.title = '查询任务';
    }
    SearchPage.prototype.ngOnInit = function () {
        this.searchForm = this.formBuilder.group({
            'address': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["f" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["f" /* Validators */].minLength(2)])],
            'telephone': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["f" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["f" /* Validators */].minLength(4)])],
            'customerNum': [''],
            'taskNum': [''],
            'taskState': [''],
            'reflectType': [''],
            'reflectPerson': [''],
            'dispatchTime': [''],
        });
        this.getReflectTypes();
    };
    /**
     * 获得反映类别
     */
    SearchPage.prototype.getReflectTypes = function () {
        var _this = this;
        this.dataService.getReflectTypes()
            .then(function (words) {
            console.log(_this.tag + words);
            if (words.length <= 0) {
                return Promise.resolve(false);
            }
            else {
                _this.reflectTypes = words;
                return Promise.resolve(true);
            }
        });
    };
    /**
     * 显示反映类型
     */
    SearchPage.prototype.showReflectType = function () {
        var _this = this;
        var alert = this.alertCtrl.create();
        alert.setTitle('反映类别');
        var arrInputs = [];
        for (var i = 0; i < this.reflectTypes.length; i++) {
            arrInputs.push({ type: 'radio', label: this.reflectTypes[i].wName, value: this.reflectTypes[i].wName });
            alert.addInput(arrInputs[i]);
        }
        alert.addButton('取消');
        alert.addButton({
            text: '确定',
            handler: function (data) {
                _this.searchForm.patchValue({ reflectType: data });
            }
        });
        alert.present();
    };
    /**
     * 显示任何类型
     */
    SearchPage.prototype.showTaskType = function () {
        var _this = this;
        var alert = this.alertCtrl.create();
        alert.setTitle('任务状态');
        var arrInputs = [{ type: 'radio', label: '已派遣', value: '已派遣' },
            { type: 'radio', label: '接收', value: '接收' }, { type: 'radio', label: '已派工', value: '已派工' },
            { type: 'radio', label: '已出发', value: '已出发' }, { type: 'radio', label: '已到场', value: '已到场' },
            { type: 'radio', label: '已处理', value: '已处理' }, { type: 'radio', label: '已退单', value: '已退单' },
            { type: 'radio', label: '退单重派', value: '退单重派' }, { type: 'radio', label: '退单结束', value: '退单结束' },
            { type: 'radio', label: '已销单', value: '已销单' }, { type: 'radio', label: '督办', value: '督办' }];
        for (var i = 0; i < arrInputs.length; i++) {
            alert.addInput(arrInputs[i]);
        }
        alert.addButton('取消');
        alert.addButton({
            text: '确定',
            handler: function (data) {
                _this.searchForm.patchValue({ taskState: data });
            }
        });
        alert.present();
    };
    /**
     * 重置
     * @param ev
     */
    SearchPage.prototype.onReset = function (ev) {
        this.searchForm.setValue({
            address: '', telephone: '', customerNum: '', taskNum: '',
            taskState: '', reflectType: '', reflectPerson: '', dispatchTime: ''
        });
    };
    /**
     * 查询
     * @param searchInfo
     */
    SearchPage.prototype.onSearchClick = function (searchInfo) {
        if (searchInfo['address'] == '' && searchInfo['telephone'] == '' && searchInfo['customerNum'] == ''
            && searchInfo['taskNum'] == '' && searchInfo['taskState'] == '' && searchInfo['reflectType'] == ''
            && searchInfo['reflectPerson'] == '' && searchInfo['dispatchTime'] == '') {
            var alert_1 = this.alertCtrl.create({
                title: '提示：',
                buttons: ['确定']
            });
            alert_1.setSubTitle('请至少输入一个条件');
            alert_1.present();
            return;
        }
        var utcSendTime = Date.parse(this.myDate) - 28800000;
        var taskState = this.transformTaskState(searchInfo['taskState']);
        var reflectType = this.transformRefelctType(searchInfo['reflectType']);
        var temp = new __WEBPACK_IMPORTED_MODULE_4__model_SearchTaskRequest__["a" /* SearchTaskRequest */]();
        temp.happenedAddress = searchInfo['address'];
        temp.contactPhone = searchInfo['telephone'];
        temp.serialNo = searchInfo['customerNum'];
        temp.taskNo = searchInfo['taskNum'];
        temp.taskState = (searchInfo['taskState'] != '' && taskState != undefined) ? taskState : searchInfo['taskState'];
        temp.reportType = (searchInfo['taskState'] != '' && taskState != undefined) ? reflectType : searchInfo['reflectType'];
        temp.reportPerson = searchInfo['reflectPerson'];
        temp.sendTime = utcSendTime;
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__searchresult_searchresult__["a" /* SearchResultPage */], { 'tasks': temp });
    };
    /**
     * 转换任务状态
     * @param strState
     * @returns {number}
     */
    SearchPage.prototype.transformTaskState = function (strState) {
        var taskState;
        switch (strState) {
            case '已派遣':
                taskState = 0;
                break;
            case '接收':
                taskState = 1;
                break;
            case '已响应':
                taskState = 6;
                break;
            case '已派工':
                taskState = 2;
                break;
            case '已出发':
                taskState = 3;
                break;
            case '已到场':
                taskState = 4;
                break;
            case '已处理':
                taskState = 5;
                break;
            case '已退单':
                taskState = -1;
                break;
            case '退单重派':
                taskState = -2;
                break;
            case '退单结束':
                taskState = -3;
                break;
            case '已销单':
                taskState = 99;
                break;
            case '督办':
                taskState = -99;
                break;
        }
        return taskState;
    };
    SearchPage.prototype.transformRefelctType = function (strReflectType) {
        var refelectType;
        for (var _i = 0, _a = this.reflectTypes; _i < _a.length; _i++) {
            var temp = _a[_i];
            if (strReflectType == temp.wName) {
                refelectType = temp.wid;
                break;
            }
        }
        return refelectType;
    };
    return SearchPage;
}());
SearchPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-search',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\search\search.html"*/'<ion-header>\n\n  <ion-navbar color="primary">\n\n    <ion-title>\n\n      {{title}}\n\n    </ion-title>\n\n\n\n    <ion-buttons end>\n\n      <button ion-button icon-only color="white" (click)="onReset($event)">\n\n        <ion-icon name="close"></ion-icon>\n\n      </button>\n\n    </ion-buttons>\n\n  </ion-navbar>\n\n</ion-header>\n\n\n\n<ion-content class="page-search">\n\n\n\n  <ion-list>\n\n    <form [formGroup]="searchForm">\n\n      <ion-item>\n\n        <ion-label color="label">发生地址</ion-label>\n\n        <ion-input formControlName="address" type="text" clearInput></ion-input>\n\n      </ion-item>\n\n\n\n      <ion-item>\n\n        <ion-label color="label">联系电话</ion-label>\n\n        <ion-input formControlName="telephone" type="number" clearInput></ion-input>\n\n      </ion-item>\n\n\n\n      <ion-item>\n\n        <ion-label color="label">客服编号</ion-label>\n\n        <ion-input formControlName="customerNum" type="text" clearInput></ion-input>\n\n      </ion-item>\n\n\n\n      <ion-item>\n\n        <ion-label color="label">任务编号</ion-label>\n\n        <ion-input formControlName="taskNum" type="text" clearInput></ion-input>\n\n      </ion-item>\n\n\n\n      <ion-item (click)="showTaskType()">\n\n        <ion-label class="label-content" color="label">任务状态</ion-label>\n\n        <ion-label>{{searchForm.value[\'taskState\']}}</ion-label>\n\n      </ion-item>\n\n\n\n      <ion-item (click)="showReflectType()">\n\n        <ion-label color="label">反映类别</ion-label>\n\n        <ion-label>{{searchForm.value[\'reflectType\']}}</ion-label>\n\n      </ion-item>\n\n\n\n      <ion-item>\n\n        <ion-label color="label">反映人员</ion-label>\n\n        <ion-input formControlName="reflectPerson" type="text" clearInput></ion-input>\n\n      </ion-item>\n\n\n\n      <ion-item>\n\n        <ion-label color="label">派遣时间</ion-label>\n\n        <ion-datetime cancelText=\'取消\' doneText=\'确定\' displayFormat="YYYY-MM-DD HH:mm"\n\n                      pickerFormat="YYYY-MM-DD HH:mm" formControlName="dispatchTime"\n\n                      [(ngModel)]="myDate"  clearInput></ion-datetime>\n\n      </ion-item>\n\n    </form>\n\n  </ion-list>\n\n\n\n  <ion-row>\n\n    <ion-col>\n\n      <div class="login-button">\n\n        <button ion-button type="submit" block (click)="onSearchClick(searchForm.value)">查询</button>\n\n      </div>\n\n    </ion-col>\n\n  </ion-row>\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\search\search.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormBuilder */],
        __WEBPACK_IMPORTED_MODULE_5__providers_DataService__["a" /* DataService */]])
], SearchPage);

//# sourceMappingURL=search.js.map

/***/ }),

/***/ 64:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return StationWorkPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__workinfo_workinfo__ = __webpack_require__(236);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_DataService__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_GlobalService__ = __webpack_require__(7);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var StationWorkPage = (function () {
    function StationWorkPage(navCtrl, alertCtrl, loadingCtrl, events, dataService, globalService) {
        this.navCtrl = navCtrl;
        this.alertCtrl = alertCtrl;
        this.loadingCtrl = loadingCtrl;
        this.events = events;
        this.dataService = dataService;
        this.globalService = globalService;
        this.tag = "[StationWorkPage]";
        this.contentNames = {
            happenedAddress: '发生地址',
            contactPhone: '联系电话',
            reportPerson: '反映人',
            reportType: '反映类别',
            reportContent: '反映内容',
            sendTime: '派遣时间',
            resolveLimitedTime: '处理时限',
            taskState: '任务状态'
        };
        //private readonly dispatched: string = '已派遣';
        this.accepted = '已接收';
        //private readonly disableColor: string = 'gray';
        //private readonly enableColor: string = 'primary';
        this.undispatchedName = '未派工';
        this.dispatchedName = '24小时内已派工';
        this.title = '站点任务';
        this.subTitle = this.undispatchedName;
        this.showToolbar = false;
        this.showFab = false;
        this.isUnDispatchedMode = true;
        this.items = [];
        this.since = 0;
        this.count = 10;
    }
    /**
     * 初始化
     */
    StationWorkPage.prototype.ngOnInit = function () {
        var _this = this;
        console.log(this.tag, "ngOnInit");
        this.events.subscribe(this.globalService.stationWorkUpdateEvent, function () {
            _this.since = 0;
            while (_this.items.shift())
                ;
            _this.getUnDispatchedTasks(_this.since, _this.count);
        });
        Promise.all([this.getReflectType(), this.getReflectContent(), this.getUnDispatchedTasks(this.since, this.count)])
            .then(function (result) { return console.log(_this.tag, result); })
            .catch(function (error) { return console.error(error); });
        // this.getReflectType()
        //   .then(result => {
        //     return this.getReflectContent();
        //   })
        //   .then(result => {
        //     return this.getUnDispatchedTasks(this.since, this.count);
        //   })
        //   .catch(error => console.error(error));
    };
    /**
     * 销毁
     */
    StationWorkPage.prototype.ngOnDestroy = function () {
        this.events.unsubscribe(this.globalService.stationWorkUpdateEvent);
    };
    /**
     * 下拉刷新
     * @param refresher
     */
    StationWorkPage.prototype.doRefresh = function (refresher) {
        var _this = this;
        console.log(this.tag, refresher);
        this.since = 0;
        while (this.items.shift())
            ;
        var promise = this.isUnDispatchedMode
            ? this.getUnDispatchedTasks(this.since, this.count)
            : this.getDispatchedTasks(this.since, this.count);
        promise
            .then(function (result) { return console.log(_this.tag, result); })
            .catch(function (error) { return console.error(error); })
            .then(function () { return refresher.complete(); });
    };
    StationWorkPage.prototype.onSearch = function (ev) {
        this.showToolbar = !this.showToolbar;
        this.content.resize();
    };
    /**
     * 过滤
     * @param ev
     */
    StationWorkPage.prototype.onFilter = function (ev) {
        var _this = this;
        var alert = this.alertCtrl.create();
        alert.setTitle('派工类型');
        alert.addInput({
            type: 'radio',
            label: this.undispatchedName,
            value: this.undispatchedName,
            checked: this.subTitle === this.undispatchedName
        });
        alert.addInput({
            type: 'radio',
            label: this.dispatchedName,
            value: this.dispatchedName,
            checked: this.subTitle === this.dispatchedName
        });
        alert.addButton('取消');
        alert.addButton({
            text: '确定',
            handler: function (data) {
                if (data === _this.subTitle) {
                    return;
                }
                var loader = _this.loadingCtrl.create({
                    content: "Please wait...",
                });
                loader.present();
                _this.since = 0;
                while (_this.items.shift())
                    ;
                var promise;
                if (data === _this.undispatchedName) {
                    _this.subTitle = _this.undispatchedName;
                    _this.isUnDispatchedMode = true;
                    promise = _this.getUnDispatchedTasks(_this.since, _this.count);
                }
                else {
                    _this.subTitle = _this.dispatchedName;
                    _this.isUnDispatchedMode = false;
                    promise = _this.getDispatchedTasks(_this.since, _this.count);
                }
                promise
                    .then(function (result) { return console.log(_this.tag, result); })
                    .catch(function (error) { return console.error(error); })
                    .then(function () { return loader.dismiss(); });
            }
        });
        alert.present().then(function () {
            // this.testRadioOpen = true;
        });
    };
    StationWorkPage.prototype.getItems = function (ev) {
    };
    /**
     * 加载更多
     * @param infiniteScroll
     */
    StationWorkPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        console.log(this.tag, "doInfinite");
        setTimeout(function () {
            _this.since += _this.count;
            _this.getUnDispatchedTasks(_this.since, _this.count)
                .then(function (result) {
                if (_this.items.length > _this.count) {
                    _this.showFab = true;
                }
                if (result) {
                    infiniteScroll.complete();
                }
                else {
                    infiniteScroll.enable(false);
                }
            })
                .catch(function (error) {
                console.error(error);
                infiniteScroll.complete();
            });
        }, 100);
    };
    /**
     * 回滚到list顶部
     * @param ev
     */
    StationWorkPage.prototype.doScroll2Top = function (ev) {
        this.content.scrollToTop();
    };
    /**
     * 接单
     * @param stationTask
     */
    StationWorkPage.prototype.onAccept = function (stationTask) {
        var _this = this;
        this.dataService.acceptEx({
            acceptOperator: this.globalService.userId,
            acceptTime: new Date().getTime(),
            taskId: stationTask.taskNo
        }).then(function (result) {
            stationTask.isAccepted = true;
            stationTask.contents[stationTask.contents.length - 1].value = _this.accepted;
        }).catch(function (error) {
            console.error(error);
            _this.globalService.showToast(error);
        });
    };
    /**
     * 派单
     * @param stationTask
     */
    StationWorkPage.prototype.onDispatch = function (stationTask) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__workinfo_workinfo__["a" /* WorkInfoPage */], stationTask.taskNo);
    };
    /**
     * 销单
     * @param stationTask
     */
    StationWorkPage.prototype.onCancel = function (stationTask) {
        this.popupRemarkAlert({
            TaskNo: stationTask.taskNo,
            TaskType: '1',
            WcOperator: this.globalService.userId,
            WcTime: new Date().getTime(),
            XdComment: '',
            XdOperator: this.globalService.userId
        });
    };
    /**
     * 获取反映类别
     * @returns {Promise<TResult|TResult>}
     */
    StationWorkPage.prototype.getReflectType = function () {
        var _this = this;
        return this.dataService.getReflectTypes()
            .then(function (words) {
            _this.reflectTypes = words;
            return Promise.resolve(words.length > 0);
        })
            .catch(function (error) {
            console.error(error);
            return Promise.resolve(false);
        });
    };
    /**
     * 获取反映内容
     * @returns {Promise<TResult|TResult>}
     */
    StationWorkPage.prototype.getReflectContent = function () {
        var _this = this;
        return this.dataService.getReflectContents()
            .then(function (words) {
            _this.reflectContents = words;
            return Promise.resolve(words.length > 0);
        })
            .catch(function (error) {
            console.error(error);
            return Promise.resolve(false);
        });
    };
    /**
     * 获取未派工任务列表
     * @param since
     * @param count
     * @returns {Promise<boolean|boolean>}
     */
    StationWorkPage.prototype.getUnDispatchedTasks = function (since, count) {
        var _this = this;
        console.log(this.tag, "getUnDispatchedTasks");
        return this.dataService.getUnDispatchedTasks(since, count)
            .then(function (tasks) {
            _this.transform2StationTasks(tasks, _this.items);
            if (_this.items.length > 0) {
                _this.events.publish(_this.globalService.mainUpdateEvent, { type: 'stationWorkCount', count: _this.items.length });
            }
            return Promise.resolve(tasks.length > 0);
        })
            .catch(function (error) {
            console.error(error);
            return Promise.resolve(false);
        });
    };
    StationWorkPage.prototype.getDispatchedTasks = function (since, count) {
        var _this = this;
        console.log(this.tag, "getDispatchedTasks");
        return this.dataService.getDispatchedTasks(since, count, 1440)
            .then(function (tasks) {
            _this.transform2StationTasks(tasks, _this.items);
            return Promise.resolve(tasks.length > 0);
        })
            .catch(function (error) {
            console.error(error);
            return Promise.resolve(false);
        });
    };
    /**
     * 显示内容转换
     * @param searchTasks
     * @param stationTasks
     */
    StationWorkPage.prototype.transform2StationTasks = function (searchTasks, stationTasks) {
        for (var _i = 0, searchTasks_1 = searchTasks; _i < searchTasks_1.length; _i++) {
            var searchTask = searchTasks_1[_i];
            var stationTask = {
                serialNo: searchTask.serialNo,
                taskNo: searchTask.taskNo,
                isAccepted: searchTask.taskState === this.accepted,
                contents: []
            };
            for (var key in this.contentNames) {
                if (searchTask.hasOwnProperty(key)) {
                    stationTask.contents.push({
                        name: this.contentNames[key],
                        value: this.transform2String(key, searchTask[key])
                    });
                }
            }
            stationTasks.push(stationTask);
        }
    };
    /**
     * 转换成字符串
     * @param key
     * @param value
     * @returns {string}
     */
    StationWorkPage.prototype.transform2String = function (key, value) {
        if (typeof value === 'number') {
            if (key === "reportType" && this.reflectTypes) {
                for (var _i = 0, _a = this.reflectTypes; _i < _a.length; _i++) {
                    var word = _a[_i];
                    if (word.wid === value) {
                        return word.wName;
                    }
                }
            }
            else if (key === "reportContent" && this.reflectContents) {
                for (var _b = 0, _c = this.reflectContents; _b < _c.length; _b++) {
                    var word = _c[_b];
                    if (word.wid === value) {
                        return word.wName;
                    }
                }
            }
            else if (key.endsWith("Time")) {
                return this.globalService.getFormatTime(new Date(value));
            }
        }
        return value.toString();
    };
    /**
     * 处理备注
     * @param cancelExInfo
     */
    StationWorkPage.prototype.popupRemarkAlert = function (cancelExInfo) {
        var _this = this;
        var prompt = this.alertCtrl.create({
            title: '销单备注',
            message: "请输入销单备注",
            inputs: [
                {
                    name: 'remark',
                    placeholder: ''
                },
            ],
            buttons: [
                {
                    text: '取消',
                    handler: function (data) {
                        console.log('Cancel clicked');
                    }
                },
                {
                    text: '确定',
                    handler: function (data) {
                        console.log('Saved clicked');
                        if (!data.remark) {
                            return _this.globalService.showToast("请填写备注!");
                        }
                        cancelExInfo.XdComment = data.remark;
                        _this.cancel(cancelExInfo);
                    }
                }
            ]
        });
        prompt.present();
    };
    /**
     * 销单
     * @param cancelExInfo
     */
    StationWorkPage.prototype.cancel = function (cancelExInfo) {
        var _this = this;
        this.dataService.cancelEx(cancelExInfo)
            .then(function (result) {
            if (result) {
                _this.events.publish(_this.globalService.stationWorkUpdateEvent);
            }
            Promise.resolve(result);
        })
            .catch(function (error) {
            console.error(error);
            Promise.resolve(false);
        })
            .then(function (result) {
            if (!result) {
                _this.globalService.showToast('销单失败!');
            }
        });
    };
    return StationWorkPage;
}());
__decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_13" /* ViewChild */])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["c" /* Content */]),
    __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["c" /* Content */])
], StationWorkPage.prototype, "content", void 0);
StationWorkPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-stationwork',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\stationwork\stationwork.html"*/'<ion-header>\n\n  <ion-navbar color="primary">\n\n    <ion-title>\n\n      {{title}}-{{subTitle}}\n\n    </ion-title>\n\n\n\n    <ion-buttons end>\n\n      <button ion-button icon-only color="white" (click)="onSearch($event)">\n\n        <ion-icon name="search"></ion-icon>\n\n      </button>\n\n\n\n      <button ion-button icon-only color="white" (click)="onFilter($event)">\n\n        <ion-icon name="funnel"></ion-icon>\n\n      </button>\n\n    </ion-buttons>\n\n  </ion-navbar>\n\n\n\n  <ion-toolbar color="primary" *ngIf="showToolbar">\n\n    <ion-searchbar (input)="getItems($event)"></ion-searchbar>\n\n  </ion-toolbar>\n\n</ion-header>\n\n\n\n<ion-content class="page-stationwork">\n\n\n\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n\n    <ion-refresher-content\n\n      pullingIcon="arrow-dropdown"\n\n      pullingText="Pull to refresh"\n\n      refreshingSpinner="circles"\n\n      refreshingText="Refreshing...">\n\n    </ion-refresher-content>\n\n  </ion-refresher>\n\n\n\n  <ion-list>\n\n    <ion-card *ngFor="let item of items">\n\n      <ion-item>\n\n        <ion-avatar item-start>\n\n          <img src="assets/img/ic_mywork_avatar.png">\n\n        </ion-avatar>\n\n        <div><h2 class="card-header-label-hint">客服编号 </h2><h2 class="card-header-label-content">{{item.serialNo}}</h2></div>\n\n        <div><h2 class="card-header-label-hint">任务编号 </h2><h2 class="card-header-label-content">{{item.taskNo}}</h2></div>\n\n      </ion-item>\n\n\n\n      <ion-list>\n\n        <ion-item *ngFor="let content of item.contents">\n\n          <ion-label fixed class="label-name">\n\n            {{content.name}}\n\n          </ion-label>\n\n          <div item-content>\n\n            {{content.value}}\n\n          </div>\n\n        </ion-item>\n\n      </ion-list>\n\n\n\n      <ion-row *ngIf="isUnDispatchedMode">\n\n        <ion-col class="card-bottom-btn" *ngIf="!item.isAccepted">\n\n          <button ion-button icon-left clear small (click)="onAccept(item)">\n\n            <ion-icon name="done-all"></ion-icon>\n\n            <div>接单</div>\n\n          </button>\n\n        </ion-col>\n\n\n\n        <ion-col class="card-bottom-btn" *ngIf="item.isAccepted">\n\n          <button ion-button icon-left clear small (click)="onDispatch(item)">\n\n            <ion-icon name="person"></ion-icon>\n\n            <div>派工</div>\n\n          </button>\n\n        </ion-col>\n\n\n\n        <ion-col class="card-bottom-btn" *ngIf="item.isAccepted">\n\n          <button ion-button icon-left clear small (click)="onCancel(item)">\n\n            <ion-icon name="close"></ion-icon>\n\n            <div>销单</div>\n\n          </button>\n\n        </ion-col>\n\n      </ion-row>\n\n    </ion-card>\n\n  </ion-list>\n\n\n\n  <!--infinite scroll-->\n\n  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\n\n  </ion-infinite-scroll>\n\n\n\n  <!--fab-->\n\n  <ion-fab right bottom *ngIf="showFab">\n\n    <button ion-fab color="primary" (click)="doScroll2Top($event)">\n\n      <ion-icon name="arrow-dropup"></ion-icon>\n\n    </button>\n\n  </ion-fab>\n\n\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\stationwork\stationwork.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* LoadingController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_3__providers_DataService__["a" /* DataService */],
        __WEBPACK_IMPORTED_MODULE_4__providers_GlobalService__["a" /* GlobalService */]])
], StationWorkPage);

//# sourceMappingURL=stationwork.js.map

/***/ }),

/***/ 65:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return NewsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__newsdetails_newsdetails__ = __webpack_require__(237);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_DataService__ = __webpack_require__(13);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var NewsPage = (function () {
    function NewsPage(navCtrl, alertCtrl, dataService) {
        this.navCtrl = navCtrl;
        this.alertCtrl = alertCtrl;
        this.dataService = dataService;
        this.tag = "[NewsPage]";
        this.title = '系统公告';
        this.items = [];
    }
    NewsPage.prototype.ngOnInit = function () {
        this.getNews();
    };
    NewsPage.prototype.getNews = function () {
        var _this = this;
        this.dataService.getNews()
            .then(function (news) {
            console.log(_this.tag + news);
            if (news.length <= 0) {
                return Promise.resolve(false);
            }
            else {
                _this.transFormNews(news);
                return Promise.resolve(true);
            }
        })
            .then(function (result) { return _this.isShow = result; });
    };
    /**
     * 转换公告
     * @param news
     */
    NewsPage.prototype.transFormNews = function (news) {
        for (var _i = 0, news_1 = news; _i < news_1.length; _i++) {
            var temp = news_1[_i];
            this.items.push({
                newsDate: this.formatDateTime(temp.pubTime),
                newsTitle: temp.title,
                newsContent: temp.content
            });
        }
    };
    /**
     * 侧滑删除某些公告
     * @param item
     */
    NewsPage.prototype.removeItem = function (event, item, slidingItem) {
        var _this = this;
        event.preventDefault();
        event.stopPropagation();
        var _loop_1 = function (i) {
            if (this_1.items[i] == item) {
                var confirm_1 = this_1.alertCtrl.create({
                    title: '提示',
                    message: '是否删除该公告',
                    buttons: [
                        {
                            text: '取消',
                            handler: function () {
                                console.log(_this.tag + 'Disagree clicked');
                                slidingItem.close();
                            }
                        },
                        {
                            text: '确定',
                            handler: function () {
                                _this.items.splice(i, 1);
                                console.log(_this.tag + 'Agree clicked');
                            }
                        }
                    ]
                });
                confirm_1.present();
            }
        };
        var this_1 = this;
        for (var i = 0; i < this.items.length; i++) {
            _loop_1(i);
        }
    };
    /**
     * 删除所有公告
     * @param ev
     */
    NewsPage.prototype.onDeleteAll = function (ev) {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '是否删除所有公告',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log(_this.tag + 'Disagree clicked');
                    }
                },
                {
                    text: '确定',
                    handler: function () {
                        _this.items.splice(0, _this.items.length);
                        console.log(_this.tag + 'Agree clicked');
                    }
                }
            ]
        });
        confirm.present();
    };
    /**
     * 跳转公告详情
     */
    NewsPage.prototype.onJumpDetails = function (item) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__newsdetails_newsdetails__["a" /* NewsDetailsPage */], {
            title: item.newsTitle,
            time: item.newsDate,
            newsContent: item.newsContent
        });
    };
    /**
     * utc时间格式化
     * @param inputTime
     * @returns {string}
     */
    NewsPage.prototype.formatDateTime = function (inputTime) {
        var date = new Date(inputTime);
        var y = date.getFullYear();
        var m = date.getMonth() + 1;
        var month = m < 10 ? ('0' + m) : m;
        var d = date.getDate();
        var day = d < 10 ? ('0' + d) : d;
        var h = date.getHours();
        var hour = h < 10 ? ('0' + h) : h;
        var minute = date.getMinutes();
        var second = date.getSeconds();
        var minutestr = minute < 10 ? ('0' + minute) : minute;
        var secondstr = second < 10 ? ('0' + second) : second;
        return y + '-' + month + '-' + day + ' ' + hour + ':' + minutestr + ':' + secondstr;
    };
    ;
    return NewsPage;
}());
NewsPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-news',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\news\news.html"*/'<ion-header>\n\n  <ion-navbar color="primary">\n\n    <ion-title>\n\n      {{title}}\n\n    </ion-title>\n\n\n\n    <ion-buttons end>\n\n      <button ion-button icon-only color="white" *ngIf="isShow" (click)="onDeleteAll($event)">\n\n        <ion-icon name="trash"></ion-icon>\n\n      </button>\n\n    </ion-buttons>\n\n  </ion-navbar>\n\n</ion-header>\n\n\n\n<ion-content class="page-news">\n\n  <ion-list>\n\n    <ion-card *ngFor="let item of items" (click)="onJumpDetails(item)">\n\n      <ion-list>\n\n        <ion-item-sliding #slidingItem>\n\n          <ion-item>\n\n            <div><h2 class="card-header-label-hint">温馨提示</h2>\n\n              <h2 class="card-header-label-content">{{item.newsDate}}</h2></div>\n\n            <br>\n\n            <div class="card-news-content">{{item.newsContent}}</div>\n\n          </ion-item>\n\n          <ion-item-options>\n\n            <button  ion-button color="danger" (click)="removeItem($event,item,slidingItem)">\n\n              <ion-icon name="trash"></ion-icon>\n\n              删除\n\n            </button>\n\n          </ion-item-options>\n\n        </ion-item-sliding>\n\n      </ion-list>\n\n    </ion-card>\n\n  </ion-list>\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\news\news.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_3__providers_DataService__["a" /* DataService */]])
], NewsPage);

//# sourceMappingURL=news.js.map

/***/ }),

/***/ 66:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MaterialsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__materialsadd_materialsadd__ = __webpack_require__(238);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__model_MaterialsInfo__ = __webpack_require__(128);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_DataService__ = __webpack_require__(13);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var MaterialsPage = (function () {
    function MaterialsPage(navCtrl, navParams, globalService, dataService, toastCtrl, events, alertCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.globalService = globalService;
        this.dataService = dataService;
        this.toastCtrl = toastCtrl;
        this.events = events;
        this.alertCtrl = alertCtrl;
        this.tag = "[MaterialsPage]";
        this.title = '材料登记管理';
        this.segmentName = "basicInfo";
        this.items = [];
        this.isShowButtons = false;
        this.taskId = this.navParams.data.split('#')[0];
    }
    MaterialsPage.prototype.ngOnInit = function () {
        var _this = this;
        this.dataService.getMaintainInfo(this.taskId)
            .then(function (result) {
            if (result.serialNumber == _this.taskId) {
                _this.details = [
                    { name: '维修类别', value: result.maintenanceType },
                    { name: '维修地址', value: result.maintenanceAddress },
                    { name: '所属区域', value: result.area },
                    { name: '报修内容', value: result.repairContent }
                ];
            }
        })
            .catch(function (error) {
            console.log(error);
        });
        /**
         * 获得该条工单的材料列表清单
         */
        this.dataService.getMaterialInfo(this.taskId)
            .then(function (result) {
            console.log(_this.tag, result);
            _this.items = result.infos;
            _this.isShowButtons = result.uploadFlag == _this.globalService.uploadedFlagForLocal;
        })
            .catch(function (error) {
            _this.isShowButtons = true;
            console.log(_this.tag, error);
        });
        //订阅事件，清单加入
        this.events.subscribe(this.globalService.materialsUpdateEvent, function (isSave, materials) {
            _this.segmentName = "materialsList";
            console.log(_this.tag, isSave, materials);
            if (isSave) {
                _this.items.push(materials);
                return;
            }
            if (!_this.needEditItem) {
                return;
            }
            for (var i = 0; i < _this.items.length; i++) {
                if (_this.items[i] == _this.needEditItem) {
                    _this.items[i] = materials;
                }
            }
        });
    };
    MaterialsPage.prototype.ngOnDestroy = function () {
        this.events.unsubscribe(this.globalService.materialsUpdateEvent);
    };
    // private searchTask() {
    //   console.log(this.tag + "searchTask");
    //
    // }
    /**
     * 材料登记
     */
    MaterialsPage.prototype.addMaterials = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__materialsadd_materialsadd__["a" /* MaterialsAddPage */]);
    };
    /**
     * 删除材料
     */
    MaterialsPage.prototype.deleteMaterials = function (item) {
        var _this = this;
        var _loop_1 = function (i) {
            if (this_1.items[i] == item) {
                var confirm_1 = this_1.alertCtrl.create({
                    title: '提示',
                    message: '是否删除该材料?',
                    buttons: [
                        {
                            text: '取消',
                            handler: function () {
                            }
                        },
                        {
                            text: '确定',
                            handler: function () {
                                //删除
                                _this.items.splice(i, 1);
                            }
                        }
                    ]
                });
                confirm_1.present();
            }
        };
        var this_1 = this;
        for (var i = 0; i < this.items.length; i++) {
            _loop_1(i);
        }
    };
    /**
     * 修改材料
     */
    MaterialsPage.prototype.editMaterials = function (item) {
        this.needEditItem = item;
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__materialsadd_materialsadd__["a" /* MaterialsAddPage */], { 'edit': item });
    };
    /**
     * 保存
     */
    MaterialsPage.prototype.saveMaterials = function () {
        var _this = this;
        if (this.items.length == 0) {
            var alert_1 = this.alertCtrl.create({
                title: '提示',
                subTitle: '请先添加材料',
                buttons: ['确认']
            });
            alert_1.present();
            this.segmentName = 'materialsList';
            return;
        }
        var uploadInfoArr = [];
        var uploadMaterial;
        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
            var item = _a[_i];
            uploadMaterial = new __WEBPACK_IMPORTED_MODULE_4__model_MaterialsInfo__["d" /* UploadMaterials */]();
            uploadMaterial.userId = this.globalService.userId;
            uploadMaterial.serialNumber = this.taskId;
            uploadMaterial.materialCategory = item.category.id;
            uploadMaterial.materialType = item.type.id;
            uploadMaterial.materialSize = item.size.id;
            uploadMaterial.manufacturer = item.productor.id;
            uploadMaterial.materialUnit = item.unit.id;
            uploadMaterial.count = item.count;
            uploadMaterial.remark = item.remark;
            uploadInfoArr.push(uploadMaterial);
        }
        if (!uploadInfoArr || uploadInfoArr.length <= 0) {
            return;
        }
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '确认保存上传？',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log('Disagree clicked');
                    }
                },
                {
                    text: '确定',
                    handler: function () {
                        var data = new __WEBPACK_IMPORTED_MODULE_4__model_MaterialsInfo__["a" /* DataMaterialInfo */]();
                        data.taskId = _this.taskId;
                        data.uploadFlag = _this.globalService.uploadedFlagForLocal;
                        data.infos = uploadInfoArr;
                        _this.dataService.saveMaterialInfo(data)
                            .then(function (result) {
                            console.log(_this.tag, result);
                            var toast = _this.toastCtrl.create({
                                duration: 2000,
                                message: result ? '保存成功' : '上传失败',
                                position: 'bottom',
                            });
                            toast.present();
                            _this.navCtrl.pop();
                        })
                            .catch(function (error) {
                            console.log(_this.tag, error);
                            _this.navCtrl.pop();
                        });
                    }
                }
            ]
        });
        confirm.present();
    };
    return MaterialsPage;
}());
MaterialsPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-materials',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\materials\materials.html"*/'<ion-header>\n\n  <ion-navbar color="primary">\n\n    <ion-title>\n\n      {{title}}\n\n    </ion-title>\n\n    <ion-buttons end  *ngIf="isShowButtons">\n\n      <button ion-button icon-only color="white" (click)="addMaterials()">\n\n        <ion-icon name="add-circle"></ion-icon>\n\n      </button>\n\n      <button ion-button icon-only color="white" (click)="saveMaterials()">\n\n        <ion-icon name="checkmark-circle"></ion-icon>\n\n      </button>\n\n    </ion-buttons>\n\n  </ion-navbar>\n\n\n\n  <ion-segment [(ngModel)]="segmentName">\n\n    <ion-segment-button value="basicInfo">\n\n      基本信息\n\n    </ion-segment-button>\n\n    <ion-segment-button value="materialsList">\n\n      材料清单\n\n    </ion-segment-button>\n\n  </ion-segment>\n\n</ion-header>hammer\n\n\n\n<ion-content>\n\n  <div [ngSwitch]="segmentName">\n\n    <!--基本信息-->\n\n\n\n    <ion-list *ngSwitchCase="\'basicInfo\'">\n\n      <ion-item>\n\n        <ion-label fixed class="label-name">工单编号：</ion-label>\n\n        <div item-content>{{taskId}}</div>\n\n      </ion-item>\n\n\n\n      <ion-item *ngFor="let detail of details">\n\n        <ion-label fixed class="label-name">\n\n          {{detail.name}}\n\n        </ion-label>\n\n        <div item-content>\n\n          {{detail.value}}\n\n        </div>\n\n      </ion-item>\n\n    </ion-list>\n\n\n\n    <!--材料清单-->\n\n    <ion-list *ngSwitchCase="\'materialsList\'">\n\n      <ion-card *ngFor="let item of items">\n\n\n\n        <ion-item>\n\n          <ion-label fixed class="label-name">\n\n            材料类别：\n\n          </ion-label>\n\n          <div item-content>\n\n            {{item.category.name}}\n\n          </div>\n\n        </ion-item>\n\n\n\n        <ion-item>\n\n          <ion-label fixed class="label-name">\n\n            材料型号：\n\n          </ion-label>\n\n          <div item-content>\n\n            {{item.type.name}}\n\n          </div>\n\n        </ion-item>\n\n\n\n        <ion-item>\n\n          <ion-label fixed class="label-name">\n\n            材料规格：\n\n          </ion-label>\n\n          <div item-content>\n\n            {{item.size.name}}\n\n          </div>\n\n        </ion-item>\n\n\n\n        <ion-item>\n\n          <ion-label fixed class="label-name">\n\n            生产厂家：\n\n          </ion-label>\n\n          <div item-content>\n\n            {{item.productor.name}}\n\n          </div>\n\n        </ion-item>\n\n\n\n        <ion-item>\n\n          <ion-label fixed class="label-name">\n\n            单位：\n\n          </ion-label>\n\n          <div item-content>\n\n            {{item.unit.text}}\n\n          </div>\n\n        </ion-item>\n\n\n\n        <ion-item>\n\n          <ion-label fixed class="label-name">\n\n            数量：\n\n          </ion-label>\n\n          <div item-content>\n\n            {{item.count}}\n\n          </div>\n\n        </ion-item>\n\n\n\n        <ion-item>\n\n          <ion-label fixed class="label-name">\n\n            备注：\n\n          </ion-label>\n\n          <div item-content>\n\n            {{item.remark}}\n\n          </div>\n\n        </ion-item>\n\n\n\n        <ion-item  *ngIf="isShowButtons">\n\n          <button item-right ion-button icon-left clear small color="danger" (click)="deleteMaterials(item)">\n\n            <ion-icon name="trash"></ion-icon>\n\n            <div>删除</div>\n\n          </button>\n\n          <button item-right ion-button icon-left clear small (click)="editMaterials(item)">\n\n            <ion-icon name="create"></ion-icon>\n\n            <div>修改</div>\n\n          </button>\n\n        </ion-item>\n\n      </ion-card>\n\n    </ion-list>\n\n  </div>\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\materials\materials.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["k" /* NavParams */],
        __WEBPACK_IMPORTED_MODULE_3__providers_GlobalService__["a" /* GlobalService */],
        __WEBPACK_IMPORTED_MODULE_5__providers_DataService__["a" /* DataService */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["o" /* ToastController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */]])
], MaterialsPage);

//# sourceMappingURL=materials.js.map

/***/ }),

/***/ 67:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SettingPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_ConfigService__ = __webpack_require__(18);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_GlobalService__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_StorageService__ = __webpack_require__(239);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_FileService__ = __webpack_require__(23);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_storage__ = __webpack_require__(60);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__networkset__ = __webpack_require__(240);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_DataService__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__overdueTimePage__ = __webpack_require__(241);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Created by zhangjing on 2017/6/29.
 */










var SettingPage = (function () {
    function SettingPage(navCtrl, alertCtrl, actionsheetCtrl, configService, globalService, storageService, storage, popoverCtrl, fileService, events, dataService, toastCtrl) {
        this.navCtrl = navCtrl;
        this.alertCtrl = alertCtrl;
        this.actionsheetCtrl = actionsheetCtrl;
        this.configService = configService;
        this.globalService = globalService;
        this.storageService = storageService;
        this.storage = storage;
        this.popoverCtrl = popoverCtrl;
        this.fileService = fileService;
        this.events = events;
        this.dataService = dataService;
        this.toastCtrl = toastCtrl;
        this.tag = "[SettingPage]";
        this.title = '系统参数';
        this.alermStyle = '仅铃声'; //提醒方式
        this.isShow = false;
    }
    SettingPage.prototype.ngOnInit = function () {
        // if (this.globalService.isChrome) {
        //   this.storage.get(this.configService.systemStorageName)
        //     .then(result => {
        //       if (result) {
        //         let jsonObject = ConfigService.transform2SystemConfig(result);
        //         this.isGrid = jsonObject.isGridStyle;
        //         this.isOuterNet = jsonObject.isOuterNetwork;
        //         this.isOuterNet ? this.netWorkUri = jsonObject.outerBaseUri : this.netWorkUri = jsonObject.innerBaseUri;
        //         this.keepAlive = jsonObject.keepAliveInterval;
        //       } else {
        //         this.readDataFromFile();
        //       }
        //     })
        //   return;
        // }
        // this.readDataFromFile();
    };
    SettingPage.prototype.ngOnDestroy = function () {
        this.events.unsubscribe(this.globalService.materialsUpdateEvent);
    };
    /**
     * 从文件中读取参数
     */
    // private readDataFromFile() {
    //   Promise.all([this.isGridStyleFromFile(), this.isOuterNetFromFile(), this.getKeepAliveFromFile()])
    //     .catch(error => {
    //       console.log(this.tag + 'readDataFromFile:' + error);
    //     })
    // }
    /**
     * 切换九宫格
     */
    SettingPage.prototype.notifyIsGrid = function () {
        var _this = this;
        console.log(this.tag + "Toggled:" + this.isGrid);
        this.configService.setGridStyle(this.isGrid)
            .then(function (result) {
            if (result) {
                var gridStyle = _this.isGrid;
                _this.events.publish(_this.globalService.mainUpdateEvent, { type: 'gridStyle', gridStyle: gridStyle });
            }
            else {
                _this.isGrid = !_this.isGrid;
            }
        })
            .catch(function (error) {
            console.log(error);
        });
    };
    /**
     * 切换内外网
     */
    SettingPage.prototype.notifyIsOutNet = function () {
        // console.log(this.tag + "Toggled:" + this.isOuterNet);
        // this.configService.setIsOuterNet(this.isOuterNet)
        //   .then(result => {
        //     if (!result) {
        //       this.isOuterNet = !this.isOuterNet;
        //     } else {
        //       this.getNetworkUriFromFile();
        //     }
        //   })
        //   .catch(error => {
        //     console.log(error);
        //   })
    };
    /**
     * 从文件中读取是否是九宫格
     */
    // private isGridStyleFromFile() {
    //   this.configService.isGridStyle()
    //     .then(data => {
    //       console.log(this.tag + data);
    //       this.isGrid = data;
    //     }).catch(err => {
    //     console.log(this.tag + err);
    //   })
    // }
    /**
     * 从文件中读取是否是外网
     */
    // private isOuterNetFromFile() {
    //   this.configService.isOuterNetwork()
    //     .then(data => {
    //       this.isOuterNet = data;
    //       this.getNetworkUriFromFile();
    //     })
    //     .catch(err => {
    //       console.log(this.tag + err);
    //     })
    // }
    /**
     * 从文件读取数据地址
     */
    // private getNetworkUriFromFile() {
    //   this.configService.getServerBaseUris()
    //     .then(([]) => {
    //       console.log(this.tag + data);
    //       this.netWorkUri = data;
    //     })
    //     .catch(err => {
    //       console.log(this.tag + err);
    //     })
    // }
    /**
     * 读取文件的心跳频率
     */
    // private getKeepAliveFromFile() {
    //   this.configService.getKeepAliveInterval()
    //     .then(data => {
    //       console.log(this.tag + data);
    //       this.keepAlive = data;
    //     })
    //     .catch(err => {
    //       console.log(this.tag + err);
    //     })
    // }
    SettingPage.prototype.showOverdueTime = function () {
        this.popoverCtrl.create(__WEBPACK_IMPORTED_MODULE_9__overdueTimePage__["a" /* OverdueTimePage */]).present();
    };
    /**
     * 读取文件的超期时限
     */
    SettingPage.prototype.getOverdueFromFile = function () {
        var _this = this;
        this.configService.getOverdueTime()
            .then(function (overdueTime) {
            console.log(_this.tag + overdueTime);
            _this.overdueTime = overdueTime;
            //this.showOverdueSetting();
        })
            .catch(function (err) {
            console.log(_this.tag + err);
        });
    };
    /**
     * 获取提醒方式
     */
    // private getAlermStyle() {
    //   if (this.isChrome) {
    //     (this.storageService.read('alermStyle') == null || undefined) ?
    //       this.alermStyle = '仅铃声' : this.alermStyle = this.storageService.read<string>('alermStyle');
    //     return;
    //   }
    // }
    /**
     * 网络设置
     */
    SettingPage.prototype.showNetwork = function () {
        this.popoverCtrl.create(__WEBPACK_IMPORTED_MODULE_7__networkset__["a" /* NetworkSetPage */]).present();
        // let prompt = this.alertCtrl.create({
        //   title: '网络设置',
        //   message: '数据访问地址',
        //   inputs: [
        //     {
        //       name: 'netWorkUri',
        //       value: this.netWorkUri,
        //       placeholder: '数据访问地址',
        //     }
        //   ],
        //   buttons: [
        //     {
        //       text: '取消',
        //       handler: data => {
        //         console.log(this.tag + 'showNetwork cancel');
        //       }
        //     },
        //     {
        //       text: '保存',
        //       handler: data => {
        //         this.configService.setSystemUrl(data.netWorkUri)
        //           .then(result => {
        //             if (result) {
        //               this.netWorkUri = data.netWorkUri;
        //             }
        //           })
        //           .catch(error => {
        //             console.log(this.tag + 'showNetwork:' + error);
        //           })
        //       }
        //     }
        //   ]
        // });
        // prompt.present();
    };
    SettingPage.prototype.showDownloadWords = function () {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '更新词语',
            message: '是否确定需要更新词语信息？',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log(_this.tag + '取消 clicked');
                    }
                },
                {
                    text: '确定',
                    handler: function () {
                        var toast = _this.toastCtrl.create({
                            duration: 2000,
                            position: 'bottom',
                        });
                        Promise.all([_this.dataService.downloadWords(), _this.dataService.downloadMaterials(), _this.dataService.downloadPersonnels()])
                            .then(function (_a) {
                            var result1 = _a[0], result2 = _a[1], result3 = _a[2];
                            if (result1 && result2 && result3) {
                                toast.setMessage('更新成功');
                            }
                            else {
                                toast.setMessage('更新失败');
                            }
                            toast.present();
                        })
                            .catch(function (error) {
                            console.log(error);
                            toast.setMessage('更新失败');
                            toast.present();
                        });
                    }
                }
            ]
        });
        confirm.present();
    };
    /**
     * 超期设置
     */
    // showOverdueSetting() {
    //   let alert = this.alertCtrl.create({
    //     title: '超期设置',
    //     message: '时限设置(分钟):',
    //     inputs: [
    //       {
    //         name: 'overdueTime',
    //         value: this.overdueTime.toString(),
    //         placeholder: '请输入超期时限',
    //       }
    //     ],
    //     buttons: [
    //       {
    //         text: '取消',
    //         role: 'cancel',
    //         handler: data => {
    //           console.log(this.tag + 'showOverdueSetting Cancel clicked');
    //         }
    //       },
    //       {
    //         text: '保存',
    //         handler: data => {
    //           this.configService.setOverdue(data.overdueTime)
    //             .then(result => {
    //               this.overdueTime = data.overdueTime;
    //             })
    //             .catch(error => {
    //               console.log(this.tag + 'showOverdueSetting:' + error);
    //             })
    //         }
    //       }
    //     ]
    //   });
    //   alert.present();
    // }
    /**
     * 心跳设置
     */
    SettingPage.prototype.showHeartSetting = function () {
        var _this = this;
        var alert = this.alertCtrl.create({
            title: '心跳设置',
            message: '心跳频率(毫秒):',
            inputs: [
                {
                    name: 'heartBeat',
                    placeholder: '请输入心跳频率',
                }
            ],
            buttons: [
                {
                    text: '取消',
                    role: 'cancel',
                    handler: function (data) {
                        console.log(_this.tag + 'showHeartSetting Cancel clicked');
                    }
                },
                {
                    text: '保存',
                    handler: function (data) {
                        _this.configService.setKeepAlive(data.heartBeat)
                            .then(function (result) {
                            _this.keepAlive = data.heartBeat;
                        })
                            .catch(function (error) {
                            console.log(_this.tag + 'showHeartSetting:' + error);
                        });
                    }
                }
            ]
        });
        alert.present();
    };
    /**
     * 提醒方式
     */
    SettingPage.prototype.showAlermType = function () {
        var _this = this;
        var actionSheet = this.actionsheetCtrl.create({
            title: '提醒方式',
            // cssClass: 'action-sheets-basic-page',
            buttons: [
                {
                    text: '仅铃声',
                    role: 'destructive',
                    icon: 'notifications',
                    handler: function () {
                        _this.alermStyle = '仅铃声';
                        _this.storageService.write('alermStyle', 'onlyRing');
                        console.log(_this.tag + 'showAlermType onlyRing clicked');
                    }
                },
                {
                    text: '仅震动',
                    icon: 'pulse',
                    handler: function () {
                        _this.alermStyle = '仅震动';
                        _this.storageService.write('alermStyle', 'onlyShake');
                        console.log(_this.tag + 'showAlermType onlyShake clicked');
                    }
                },
                {
                    text: '铃声+震动',
                    icon: 'arrow-dropright-circle',
                    handler: function () {
                        _this.alermStyle = '铃声+震动';
                        _this.storageService.write('alermStyle', 'ringShake');
                        console.log(_this.tag + 'showAlermType Play clicked');
                    }
                },
                {
                    text: '取消',
                    role: '取消',
                    icon: 'close',
                    handler: function () {
                        console.log(_this.tag + 'showAlermType Cancel clicked');
                    }
                }
            ]
        });
        actionSheet.present();
    };
    /**
     * 恢复出厂设置
     */
    SettingPage.prototype.showRevertSetting = function () {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '警告',
            message: '数据都上传了吗？确定要恢复出厂设置吗？回复后请重新登录！',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log(_this.tag + '取消 clicked');
                    }
                },
                {
                    text: '确定',
                    handler: function () {
                        _this.storage.clear(); //浏览器清除storage
                        console.log(_this.tag + '保存 clicked');
                    }
                }
            ]
        });
        confirm.present();
    };
    SettingPage.prototype.onExit = function () {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '是否完全退出当前应用？',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log(_this.tag + '取消 clicked');
                    }
                },
                {
                    text: '确定',
                    handler: function () {
                        console.log(_this.tag + '保存 clicked');
                        _this.globalService.quit();
                    }
                }
            ]
        });
        confirm.present();
    };
    return SettingPage;
}());
SettingPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
        selector: 'page-setting',template:/*ion-inline-start:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\setting\setting.html"*/'<ion-header>\n\n  <ion-navbar color="primary">\n\n    <ion-title>\n\n      {{title}}\n\n    </ion-title>\n\n  </ion-navbar>\n\n</ion-header>\n\n\n\n<ion-content class="page-setting">\n\n  <ion-list>\n\n    <ion-item *ngIf="isShow">\n\n      <ion-toggle [(ngModel)]="isGrid" (ionChange)="notifyIsGrid()"></ion-toggle>\n\n      <ion-label>是否切换九宫格</ion-label>\n\n      <ion-icon name=\'grid\' item-start color="{{\'primary\'}}"></ion-icon>\n\n    </ion-item>\n\n\n\n    <ion-item *ngIf="isShow">\n\n      <ion-toggle [(ngModel)]="isOuterNet" (ionChange)="notifyIsOutNet()"></ion-toggle>\n\n      <ion-label>是否使用外网</ion-label>\n\n      <ion-icon name=\'md-wifi\' item-start color="{{\'primary\'}}"></ion-icon>\n\n    </ion-item>\n\n\n\n    <ion-item (click)="showNetwork()">\n\n      <ion-icon name=\'git-network\' item-start color="{{\'primary\'}}"></ion-icon>\n\n      <ion-label>网络设置</ion-label>\n\n      <ion-icon name=\'arrow-dropright\' item-end color="{{\'primary\'}}"></ion-icon>\n\n    </ion-item>\n\n\n\n    <ion-item (click)="showOverdueTime()">\n\n      <ion-icon name=\'time\' item-start color="{{\'primary\'}}"></ion-icon>\n\n      <ion-label>超期设置</ion-label>\n\n      <ion-icon name=\'arrow-dropright\' item-end color="{{\'primary\'}}"></ion-icon>\n\n    </ion-item>\n\n\n\n    <ion-item (click)="showDownloadWords()">\n\n      <ion-icon name=\'download\' item-start color="{{\'primary\'}}"></ion-icon>\n\n      <ion-label>更新词语</ion-label>\n\n      <ion-icon name=\'arrow-dropright\' item-end color="{{\'primary\'}}"></ion-icon>\n\n    </ion-item>\n\n\n\n    <ion-item *ngIf="isShow" (click)="showHeartSetting()">\n\n      <ion-icon name=\'heart-outline\' item-start color="{{\'primary\'}}"></ion-icon>\n\n      <ion-label>心跳频率</ion-label>\n\n      <ion-label class="label-right">{{keepAlive+\'毫秒\'}}</ion-label>\n\n      <ion-icon name=\'arrow-dropright\' item-end color="{{\'primary\'}}"></ion-icon>\n\n    </ion-item>\n\n\n\n    <ion-item *ngIf="isShow" (click)="showAlermType()">\n\n      <ion-icon name=\'alarm\' item-start color="{{\'primary\'}}"></ion-icon>\n\n      <ion-label>提醒方式</ion-label>\n\n      <ion-label class="label-right">{{alermStyle}}</ion-label>\n\n      <ion-icon name=\'arrow-dropright\' item-end color="{{\'primary\'}}"></ion-icon>\n\n    </ion-item>\n\n\n\n    <ion-item *ngIf="isShow" (click)="showRevertSetting()">\n\n      <ion-icon name=\'redo\' item-start color="{{\'primary\'}}"></ion-icon>\n\n      <ion-label>恢复出厂设置</ion-label>\n\n      <ion-icon name=\'arrow-dropright\' item-end color="{{\'primary\'}}"></ion-icon>\n\n    </ion-item>\n\n\n\n    <ion-item (click)="onExit()">\n\n      <ion-icon name=\'exit\' item-start color="{{\'primary\'}}"></ion-icon>\n\n      <ion-label>退出</ion-label>\n\n      <ion-icon name=\'arrow-dropright\' item-end color="{{\'primary\'}}"></ion-icon>\n\n    </ion-item>\n\n  </ion-list>\n\n</ion-content>\n\n'/*ion-inline-end:"E:\git_HotlineManagerIonic_new\HotlineManagerIonic\src\pages\setting\setting.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
        __WEBPACK_IMPORTED_MODULE_2__providers_ConfigService__["a" /* ConfigService */],
        __WEBPACK_IMPORTED_MODULE_3__providers_GlobalService__["a" /* GlobalService */],
        __WEBPACK_IMPORTED_MODULE_4__providers_StorageService__["a" /* StorageService */],
        __WEBPACK_IMPORTED_MODULE_6__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* PopoverController */],
        __WEBPACK_IMPORTED_MODULE_5__providers_FileService__["a" /* FileService */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_8__providers_DataService__["a" /* DataService */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["o" /* ToastController */]])
], SettingPage);

//# sourceMappingURL=setting.js.map

/***/ }),

/***/ 7:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return MyPluginMock; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GlobalService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_storage__ = __webpack_require__(60);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_my_plugin__ = __webpack_require__(119);
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var MyPluginMock = (function (_super) {
    __extends(MyPluginMock, _super);
    function MyPluginMock() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MyPluginMock.prototype.getPageIntent = function () {
        return Promise.resolve(MyPluginMock.pageIntent);
    };
    MyPluginMock.prototype.getLocation = function () {
        return Promise.resolve(MyPluginMock.myLocation);
    };
    return MyPluginMock;
}(__WEBPACK_IMPORTED_MODULE_3__ionic_native_my_plugin__["a" /* MyPlugin */]));

MyPluginMock.pageIntent = {
    account: 'wqry',
    password: '0000',
    userId: 10,
    userName: 'ss1',
    departmentAndId: '客服热线部#1',
    roles: 'worker',
    params: 'MyWorkPage',
    accessToken: '',
    extendedInfo: ''
};
MyPluginMock.myLocation = {
    lng: 121.524808,
    lat: 31.280823
};
var GlobalService = (function () {
    function GlobalService(toastCtrl, loadingCtrl, storage, myPlugin) {
        this.toastCtrl = toastCtrl;
        this.loadingCtrl = loadingCtrl;
        this.storage = storage;
        this.myPlugin = myPlugin;
        this.isChrome = false;
        this.httpCode = 0;
        this.httpSuccessStatusCode = 200;
        this.taskSinceDefault = 0;
        this.taskCountDefault10 = 10;
        this.taskCountDefault100 = 100;
        this.uploadedFlagForLocal = 0;
        this.uploadedFlagForUploading = 1;
        this.uploadedFlagForUploaded = 2;
        this.account = "admin";
        this.userName = "admin";
        this.userId = 0;
        this.department = "客服热线部";
        this.departmentId = 1;
        this.isWorker = false; //是否是外勤人员
        this.mainUpdateEvent = "main:update";
        this.myWorkDownloadFinishEvent = "mywork:download:finish"; // task & detail
        this.historyUploadFinishEvent = "history:upload:finish"; // history & media
        //readonly materialInfoFinishEvent: string = "materialInfo:upload:finish";//materialInfo
        this.myWorkUpdateEvent = "mywork:update";
        this.stationWorkUpdateEvent = "stationwork:update";
        this.materialsUpdateEvent = "addMaterials:update";
        this.recordAudioFinishEvent = "record:audio:finish";
        this.userDetailInfoStorageName = 'userDetailInfo';
        this.locationType = 'bd09ll';
        this.worker = 'worker';
        this.manager = 'manager';
        this.photoSuffix = '.jpg';
        this.audioSuffix = '.mp3';
        this.videoSuffix = '.mp4';
    }
    GlobalService.prototype.getMyPluginMock = function () {
        return this.myPluginMock ? this.myPluginMock : this.myPluginMock = new MyPluginMock();
    };
    GlobalService.prototype.saveUserDetailInfo = function (userDetailInfo) {
        var _this = this;
        return userDetailInfo && userDetailInfo.account && userDetailInfo.userName && userDetailInfo.roles && userDetailInfo.department
            ? this.storage.set(this.userDetailInfoStorageName, JSON.stringify(userDetailInfo))
                .then(function (result) {
                _this.account = userDetailInfo.account;
                _this.userId = userDetailInfo.userId;
                _this.userName = userDetailInfo.userName;
                _this.isWorker = userDetailInfo.roles === _this.worker;
                _this.department = userDetailInfo.department;
                _this.departmentId = userDetailInfo.departmentId;
                return Promise.resolve(result);
            })
            : Promise.reject('userDetailInfo is error');
    };
    GlobalService.prototype.getUserDetailInfo = function () {
        var _this = this;
        return this.storage.get(this.userDetailInfoStorageName)
            .then(function (userDetailInfo) {
            if (userDetailInfo) {
                userDetailInfo = JSON.parse(userDetailInfo);
            }
            if (userDetailInfo
                && userDetailInfo.account
                && userDetailInfo.userName
                && userDetailInfo.roles
                && userDetailInfo.department) {
                _this.account = userDetailInfo.account;
                _this.userId = userDetailInfo.userId;
                _this.userName = userDetailInfo.userName;
                _this.isWorker = userDetailInfo.roles === _this.worker;
                _this.department = userDetailInfo.department;
                _this.departmentId = userDetailInfo.departmentId;
                return userDetailInfo;
            }
            else {
                return Promise.reject('userDetailInfo is not valid');
            }
        });
    };
    GlobalService.prototype.getLocationEx = function () {
        var _this = this;
        if (this.isChrome) {
            this.myPlugin = this.getMyPluginMock();
        }
        return this.myPlugin.getLocation()
            .then(function (location) { return ({
            type: _this.locationType,
            lng: location.lng,
            lat: location.lat
        }); })
            .catch(function (error) {
            console.error(error);
            return _this.myPluginMock.getLocation()
                .then(function (location) { return ({
                type: _this.locationType,
                lng: location.lng,
                lat: location.lat
            }); });
        });
    };
    GlobalService.prototype.getLocation = function () {
        var _this = this;
        if (this.isChrome) {
            this.myPlugin = this.getMyPluginMock();
        }
        return this.myPlugin.getLocation()
            .then(function (location) { return ({
            type: _this.locationType,
            lng: location.lng.toString(),
            lat: location.lat.toString()
        }); })
            .catch(function (error) {
            console.error(error);
            return _this.myPluginMock.getLocation()
                .then(function (location) { return ({
                type: _this.locationType,
                lng: location.lng.toString(),
                lat: location.lat.toString()
            }); });
        });
    };
    GlobalService.prototype.quit = function () {
        if (this.isChrome) {
            return;
        }
        this.myPlugin.quit()
            .then(function (result) { return console.log(result); })
            .catch(function (err) { return console.error(err); });
    };
    /**
     * 转换时间格式
     * @param date
     * @returns {string}
     */
    GlobalService.prototype.getFormatTime = function (date) {
        var year = date.getFullYear().toString();
        var month = this.padLeftZero((date.getMonth() + 1).toString());
        var day = this.padLeftZero(date.getDate().toString());
        var hour = this.padLeftZero(date.getHours().toString());
        var minute = this.padLeftZero(date.getMinutes().toString());
        var second = this.padLeftZero(date.getSeconds().toString());
        return year + "-" + month + "-" + day + " " + hour + ":" + minute + ":" + second;
    };
    /**
     * toast
     * @param message
     */
    GlobalService.prototype.showToast = function (message) {
        var toast = this.toastCtrl.create({
            message: message,
            duration: 2000,
            position: 'bottom'
        });
        toast.present(toast);
    };
    /**
     * 显示加载对话框
     * @param content
     * @param duration
     */
    GlobalService.prototype.showLoading = function (content, duration) {
        if (content === void 0) { content = '加载中...'; }
        if (this.loading) {
            this.loading.dismissAll();
        }
        this.loading = duration > 0 ? this.loadingCtrl.create({ content: content, duration: duration }) : this.loadingCtrl.create({ content: content });
        this.loading.present();
    };
    /**
     * 隐藏加载对话框
     */
    GlobalService.prototype.hideLoading = function () {
        if (this.loading) {
            this.loading.dismiss();
        }
        this.loading = undefined;
    };
    GlobalService.string2Int = function (value) {
        try {
            return Number.parseInt(value);
        }
        catch (e) {
            console.error(e);
            return 0;
        }
    };
    GlobalService.prototype.padLeftZero = function (name) {
        return name.length === 1 ? "0" + name : name;
    };
    return GlobalService;
}());
GlobalService = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["B" /* Injectable */])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["o" /* ToastController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* LoadingController */],
        __WEBPACK_IMPORTED_MODULE_2__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_3__ionic_native_my_plugin__["a" /* MyPlugin */]])
], GlobalService);

//# sourceMappingURL=GlobalService.js.map

/***/ })

},[250]);
//# sourceMappingURL=main.js.map
=======
webpackJsonp([0],{175:function(n,l){function e(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}e.keys=function(){return[]},e.resolve=e,n.exports=e,e.id=175},197:function(n,l){function e(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}e.keys=function(){return[]},e.resolve=e,n.exports=e,e.id=197},218:function(n,l,e){"use strict";function t(n,l){if(!n&&!l)return!1;for(var e=0,t=n.processes;e<t.length;e++){var i=t[e];switch(i.event){case"create":l.create=i;break;case"dispatch":l.dispatch=i;break;case"accept":l.accept=i;break;case"go":l.go=i;break;case"arrive":l.arrive=i;break;case"reply":l.reply=i;break;case"reject":l.reject=i;break;case"delay":l.delay=i;break;case"cancel":l.cancel=i;break;default:console.error(this.tag,i.event)}}return!!(l&&l.create&&l.dispatch&&l.accept&&l.go&&l.arrive&&l.reply&&l.reject&&l.delay&&l.cancel)}function i(n){return n?n.getTime():0}function o(n,l,e){if(n.hasOwnProperty("acceptTime")){return{acceptTime:n.acceptTime,arrivedTime:i(e.arrive.time),assignTime:i(e.dispatch.time),compltedTime:0,createTime:i(e.create.time),desc:l.describe,goTime:i(e.go.time),location:{type:l.location.type,lng:l.location.lng,lat:l.location.lat},replyTime:i(e.reply.time),source:l.source,state:B.Accept,taskId:l.id,taskType:l.type}}if(n.hasOwnProperty("goTime")){var t=n;return{acceptTime:i(e.accept.time),arrivedTime:i(e.arrive.time),assignTime:i(e.dispatch.time),compltedTime:0,createTime:i(e.create.time),desc:l.describe,goTime:t.goTime,location:{type:l.location.type,lng:l.location.lng,lat:l.location.lat},replyTime:i(e.reply.time),source:l.source,state:B.Go,taskId:l.id,taskType:l.type}}if(n.hasOwnProperty("arrivedTime")){var o=n;return{acceptTime:i(e.accept.time),arrivedTime:o.arrivedTime,assignTime:i(e.dispatch.time),compltedTime:0,createTime:i(e.create.time),desc:l.describe,goTime:i(e.go.time),location:{type:l.location.type,lng:l.location.lng,lat:l.location.lat},replyTime:i(e.reply.time),source:l.source,state:B.Arrived,taskId:l.id,taskType:l.type}}if(n.hasOwnProperty("rejectTime")){var u=n;return l.extendedInfo?l.extendedInfo.rejectTime=u.rejectTime:l.extendedInfo={rejectTime:u.rejectTime},{acceptTime:i(e.accept.time),arrivedTime:i(e.arrive.time),assignTime:i(e.dispatch.time),compltedTime:0,createTime:i(e.create.time),desc:l.describe,goTime:i(e.go.time),location:{type:l.location.type,lng:l.location.lng,lat:l.location.lat},replyTime:i(e.reply.time),source:l.source,state:B.Reject,taskId:l.id,taskType:l.type,extendedInfo:l.extendedInfo}}if(n.hasOwnProperty("delayTime")){var a=n;return l.extendedInfo?l.extendedInfo.delayTime=a.delayTime:l.extendedInfo={delayTime:a.delayTime},{acceptTime:i(e.accept.time),arrivedTime:i(e.arrive.time),assignTime:i(e.dispatch.time),compltedTime:0,createTime:i(e.create.time),desc:l.describe,goTime:i(e.go.time),location:{type:l.location.type,lng:l.location.lng,lat:l.location.lat},replyTime:i(e.reply.time),source:l.source,state:B.Delay,taskId:l.id,taskType:l.type,extendedInfo:l.extendedInfo}}if(n.hasOwnProperty("opTime")){var r=n;return{acceptTime:i(e.accept.time),arrivedTime:i(e.arrive.time),assignTime:i(e.dispatch.time),compltedTime:0,createTime:i(e.create.time),desc:l.describe,goTime:i(e.go.time),location:{type:l.location.type,lng:l.location.lng,lat:l.location.lat},replyTime:r.opTime,source:l.source,state:B.Reply,taskId:l.id,taskType:l.type,extendedInfo:l.extendedInfo}}if(n.hasOwnProperty("destroyTime")){var s=n;return l.extendedInfo?l.extendedInfo.destroyTime=s.destroyTime:l.extendedInfo={destroyTime:s.destroyTime},{acceptTime:i(e.accept.time),arrivedTime:i(e.arrive.time),assignTime:i(e.dispatch.time),compltedTime:0,createTime:i(e.create.time),desc:l.describe,goTime:i(e.go.time),location:{type:l.location.type,lng:l.location.lng,lat:l.location.lat},replyTime:i(e.reply.time),source:l.source,state:B.Cancel,taskId:l.id,taskType:l.type,extendedInfo:l.extendedInfo}}return null}Object.defineProperty(l,"__esModule",{value:!0});var u=e(49),a=e(0),r=e(1),s=e(16),c=e(117),d=e(118),_=e(80),p=e(95),h=e(33),m=(function(){}(),function(){}(),function(n){function l(){return null!==n&&n.apply(this,arguments)||this}return Object(r.__extends)(l,n),l.prototype.getPageIntent=function(){},l.prototype.getLocation=function(){},l.prototype.quit=function(){},l.prototype.getPushMessage=function(){},l.prototype.getChangedInfo=function(){},l}(h.g));Object(r.__decorate)([Object(h.a)(),Object(r.__metadata)("design:type",Function),Object(r.__metadata)("design:paramtypes",[]),Object(r.__metadata)("design:returntype",Promise)],m.prototype,"getPageIntent",null),Object(r.__decorate)([Object(h.a)(),Object(r.__metadata)("design:type",Function),Object(r.__metadata)("design:paramtypes",[]),Object(r.__metadata)("design:returntype",Promise)],m.prototype,"getLocation",null),Object(r.__decorate)([Object(h.a)(),Object(r.__metadata)("design:type",Function),Object(r.__metadata)("design:paramtypes",[]),Object(r.__metadata)("design:returntype",Promise)],m.prototype,"quit",null),Object(r.__decorate)([Object(h.a)(),Object(r.__metadata)("design:type",Function),Object(r.__metadata)("design:paramtypes",[]),Object(r.__metadata)("design:returntype",Promise)],m.prototype,"getPushMessage",null),Object(r.__decorate)([Object(h.a)(),Object(r.__metadata)("design:type",Function),Object(r.__metadata)("design:paramtypes",[]),Object(r.__metadata)("design:returntype",Promise)],m.prototype,"getChangedInfo",null);var f=function(n){function l(){return null!==n&&n.apply(this,arguments)||this}return Object(r.__extends)(l,n),l.prototype.getPageIntent=function(){return Promise.resolve(l.pageIntent)},l.prototype.getLocation=function(){return Promise.resolve(l.myLocation)},l}(m=Object(r.__decorate)([Object(h.h)({pluginName:"MyPlugin",plugin:"cordova.plugin.MyPlugin",pluginRef:"cordova.plugins.MyPlugin",repo:"",platforms:[],install:""})],m));f.pageIntent={account:"wqry",password:"0000",userId:10,userName:"ss1",departmentAndId:"客服热线部#1",roles:"worker",params:"MyWorkPage",accessToken:"",extendedInfo:""},f.myLocation={lng:121.524808,lat:31.280823};var g=function(){function n(n,l,e,t){this.toastCtrl=n,this.loadingCtrl=l,this.storage=e,this.myPlugin=t,this.isChrome=!1,this.httpCode=0,this.httpSuccessStatusCode=200,this.taskSinceDefault=0,this.taskCountDefault10=10,this.taskCountDefault100=100,this.uploadedFlagForLocal=0,this.uploadedFlagForUploading=1,this.uploadedFlagForUploaded=2,this.account="admin",this.userName="admin",this.userId=0,this.department="客服热线部",this.departmentId=1,this.isWorker=!1,this.mainUpdateEvent="main:update",this.myWorkDownloadFinishEvent="mywork:download:finish",this.historyUploadFinishEvent="history:upload:finish",this.myWorkUpdateEvent="mywork:update",this.stationWorkUpdateEvent="stationwork:update",this.materialsUpdateEvent="addMaterials:update",this.recordAudioFinishEvent="record:audio:finish",this.userDetailInfoStorageName="userDetailInfo",this.locationType="bd09ll",this.worker="worker",this.manager="manager",this.photoSuffix=".jpg",this.audioSuffix=".mp3",this.videoSuffix=".mp4"}return n.prototype.getMyPluginMock=function(){return this.myPluginMock?this.myPluginMock:this.myPluginMock=new f},n.prototype.saveUserDetailInfo=function(n){var l=this;return n&&n.account&&n.userName&&n.roles&&n.department?this.storage.set(this.userDetailInfoStorageName,JSON.stringify(n)).then(function(e){return l.account=n.account,l.userId=n.userId,l.userName=n.userName,l.isWorker=n.roles===l.worker,l.department=n.department,l.departmentId=n.departmentId,Promise.resolve(e)}):Promise.reject("userDetailInfo is error")},n.prototype.getUserDetailInfo=function(){var n=this;return this.storage.get(this.userDetailInfoStorageName).then(function(l){return l&&(l=JSON.parse(l)),l&&l.account&&l.userName&&l.roles&&l.department?(n.account=l.account,n.userId=l.userId,n.userName=l.userName,n.isWorker=l.roles===n.worker,n.department=l.department,n.departmentId=l.departmentId,l):Promise.reject("userDetailInfo is not valid")})},n.prototype.getLocationEx=function(){var n=this;return this.isChrome&&(this.myPlugin=this.getMyPluginMock()),this.myPlugin.getLocation().then(function(l){return{type:n.locationType,lng:l.lng,lat:l.lat}}).catch(function(l){return console.error(l),n.myPluginMock.getLocation().then(function(l){return{type:n.locationType,lng:l.lng,lat:l.lat}})})},n.prototype.getLocation=function(){var n=this;return this.isChrome&&(this.myPlugin=this.getMyPluginMock()),this.myPlugin.getLocation().then(function(l){return{type:n.locationType,lng:l.lng.toString(),lat:l.lat.toString()}}).catch(function(l){return console.error(l),n.myPluginMock.getLocation().then(function(l){return{type:n.locationType,lng:l.lng.toString(),lat:l.lat.toString()}})})},n.prototype.quit=function(){this.isChrome||this.myPlugin.quit().then(function(n){return console.log(n)}).catch(function(n){return console.error(n)})},n.prototype.getFormatTime=function(n){return n.getFullYear().toString()+"-"+this.padLeftZero((n.getMonth()+1).toString())+"-"+this.padLeftZero(n.getDate().toString())+" "+this.padLeftZero(n.getHours().toString())+":"+this.padLeftZero(n.getMinutes().toString())+":"+this.padLeftZero(n.getSeconds().toString())},n.prototype.showToast=function(n){var l=this.toastCtrl.create({message:n,duration:2e3,position:"bottom"});l.present(l)},n.prototype.showLoading=function(n,l){void 0===n&&(n="加载中..."),this.loading&&this.loading.dismissAll(),this.loading=this.loadingCtrl.create(l>0?{content:n,duration:l}:{content:n}),this.loading.present()},n.prototype.hideLoading=function(){this.loading&&this.loading.dismiss(),this.loading=void 0},n.string2Int=function(n){try{return Number.parseInt(n)}catch(n){return console.error(n),0}},n.prototype.padLeftZero=function(n){return 1===n.length?"0"+n:n},n}();g=Object(r.__decorate)([Object(a.o)(),Object(r.__metadata)("design:paramtypes",["function"==typeof(v=void 0!==s.o&&s.o)&&v||Object,"function"==typeof(b=void 0!==s.i&&s.i)&&b||Object,"function"==typeof(y=void 0!==p.b&&p.b)&&y||Object,"function"==typeof(k=void 0!==m&&m)&&k||Object])],g);var v,b,y,k,S=e(119),I=e(153),T=e(154),E=e(155),C=function(){function n(n,l,e,t,i){this.file=n,this.transfer=l,this.alertCtrl=e,this.zip=t,this.fileOpener=i,this.dirPath=null,this.dirRoot="sh3h",this.dir="hotlinemanager",this.arrDirs=["config","data","images","videos","log","sounds","update","user","cache"],this.apkName="/TaskManager.apk"}return n.prototype.getDbDir=function(){return""+this.dirPath+this.dirRoot+"/"+this.dir+"/data"},n.prototype.getConfigDir=function(){return""+this.dirPath+this.dirRoot+"/"+this.dir+"/config"},n.prototype.getImagesDir=function(){return""+this.dirPath+this.dirRoot+"/"+this.dir+"/images"},n.prototype.getVideosDir=function(){return""+this.dirPath+this.dirRoot+"/"+this.dir+"/videos"},n.prototype.getSoundsDir=function(){return""+this.dirPath+this.dirRoot+"/"+this.dir+"/sounds"},n.prototype.getCacheDir=function(){return this.dirPath+"/"+this.dirRoot+"/"+this.dir+"/cache"},n.prototype.checkFile=function(n,l){return this.file.checkFile(n,l).catch(function(n){return console.error(n),!1})},n.prototype.createDirRoot=function(){var n=this;return this.dirPath=this.file.externalRootDirectory,new Promise(function(l,e){n.file.createDir(n.dirPath,n.dirRoot,!0).then(function(e){console.log("createDirRoot success"),l(n.createAppDir())}).catch(function(n){e(n)})})},n.prototype.createAppDir=function(){var n=this;return new Promise(function(l,e){n.file.createDir(n.dirPath+n.dirRoot,n.dir,!0).then(function(e){console.log("createAppDir success"),l(n.createChildDir())}).catch(function(n){e(n)})})},n.prototype.createChildDir=function(){for(var n=this,l=this.dirPath+this.dirRoot+"/"+this.dir,e=[],t=0;t<this.arrDirs.length;t++)e.push(this.file.createDir(l,this.arrDirs[t],!0));return new Promise(function(l,t){Promise.all(e).then(function(e){console.log("createChildDir Promise all success"),l(n.copySystemConfig())}).catch(function(n){return console.log(n),Promise.reject(!1)})})},n.prototype.copySystemConfig=function(){var n=this;return new Promise(function(l,e){var t=n.dirPath+n.dirRoot+"/"+n.dir+"/config/";console.log("copySystemConfig:"+t);n.file.checkFile(t,"system.json").then(function(n){console.log("systemConfig has exist!"+n),l(!0)}).catch(function(i){console.log(i),n.file.copyFile("file:///android_asset/www/assets/config/","system.json",t,"system.json").then(function(n){console.log("copySystemConfig success"+n),l(!0)}).catch(function(n){console.log(n),e(!1)})})})},n.prototype.downloadFile=function(n,l){var e=this,t=this.alertCtrl.create({title:"下载更新包",message:"下载进度:0%",enableBackdropDismiss:!1});t.present();var i,o=this.transfer.create(),u=this.dirPath+this.dirRoot+"/"+this.dir+"/"+this.arrDirs[5];return i=n?u+"/data.zip":u+"/app.zip",o.onProgress(function(n){var l=Math.floor(n.loaded/n.total*100);if(100==l)t.dismiss();else{var e=document.getElementsByClassName("alert-message")[0];e&&(e.innerHTML="下载进度："+l+"%")}}),new Promise(function(t,u){o.download(l,i).then(function(l){var i=e.dirPath+e.dirRoot+"/"+e.dir+"/"+e.arrDirs[5];t(e.unZipFile(l.toURL(),i,n))}).catch(function(n){u(n)})})},n.prototype.movePicture=function(n){var l=this,e="failure to move "+n;if(!n)return Promise.reject(e);var t=n.lastIndexOf("/");if(t<=0)return Promise.reject(e);var i=n.substring(0,t+1);if(!i)return Promise.reject(e);var o=n.substring(t+1);return o?this.file.checkFile(i,o).then(function(n){return l.file.moveFile(i,o,l.getImagesDir(),o)}).then(function(n){return n?Promise.resolve(o):Promise.reject(e)}):Promise.reject(e)},n.prototype.moveVideo=function(n){var l=this,e="failure to move "+n;if(!n)return Promise.reject(e);var t=n.lastIndexOf("/");if(t<=0)return Promise.reject(e);var i=n.substring(0,t+1);if(!i)return Promise.reject(e);var o=n.substring(t+1);return o?this.file.checkFile(i,o).then(function(n){return l.file.moveFile(i,o,l.getVideosDir(),o)}).then(function(n){return n?Promise.resolve(o):Promise.reject(e)}):Promise.reject(e)},n.prototype.unZipFile=function(n,l,e){var t=this;return new Promise(function(i,o){t.zip.unzip(n,l).then(function(n){console.log("unzip file success"),i(e?!0:t.openApkFile(l))}).catch(function(n){o(n)})})},n.prototype.openApkFile=function(n){var l=this,e=n+this.apkName;return new Promise(function(n,t){l.fileOpener.open(e,"application/vnd.android.package-archive").then(function(){console.log("File is opened"),n(!0)}).catch(function(n){console.log("Error openning file",n),t(n)})})},n}();C=Object(r.__decorate)([Object(a.o)(),Object(r.__metadata)("design:paramtypes",["function"==typeof(O=void 0!==S.a&&S.a)&&O||Object,"function"==typeof(w=void 0!==I.a&&I.a)&&w||Object,"function"==typeof(D=void 0!==s.b&&s.b)&&D||Object,"function"==typeof(P=void 0!==T.a&&T.a)&&P||Object,"function"==typeof(j=void 0!==E.a&&E.a)&&j||Object])],C);var O,w,D,P,j,N=e(60),M=(e(247),x=function(){function n(n,l,e,t,i){this.http=n,this.storage=l,this.file=e,this.globalService=t,this.fileService=i,this.basePath="./assets/config/",this.systemFileName="system.json",this.mapFileName="map.json",this.systemFilePath=""+this.basePath+this.systemFileName,this.mapFilePath=""+this.basePath+this.mapFileName,this.systemStorageName="system",this.mapStorageName="map",this.globalService.isChrome&&this.storage.clear()}return n.prototype.initConfigs=function(){var n=this;return this.readSystemConfig().then(function(l){return n.systemConfig=l}).then(function(){return n.readMapConfig()}).then(function(l){return n.mapConfig=l})},n.prototype.getServerBaseUri=function(){var n=this;return x.isValid(this.systemConfig,"serverBaseUri")?Promise.resolve(this.systemConfig.serverBaseUri):new Promise(function(l,e){n.readSystemConfig().then(function(t){n.systemConfig=t,x.isValid(n.systemConfig,"outerBaseUri")&&x.isValid(n.systemConfig,"innerBaseUri")&&x.isValid(n.systemConfig,"isOuterNetwork")?(n.systemConfig.serverBaseUri=n.systemConfig.isOuterNetwork?n.systemConfig.outerBaseUri:n.systemConfig.innerBaseUri,l(n.systemConfig.serverBaseUri)):e("failure to getServerBaseUri")}).catch(function(n){return e(n)})})},n.prototype.getServerBaseUris=function(){var n=this;return x.isValid(this.systemConfig,"serverBaseUri")?Promise.resolve([this.systemConfig.outerBaseUri,this.systemConfig.innerBaseUri]):new Promise(function(l,e){n.readSystemConfig().then(function(t){n.systemConfig=t,x.isValid(n.systemConfig,"outerBaseUri")&&x.isValid(n.systemConfig,"innerBaseUri")&&x.isValid(n.systemConfig,"isOuterNetwork")?l([n.systemConfig.outerBaseUri,n.systemConfig.innerBaseUri]):e("failure to getServerBaseUris")}).catch(function(n){return e(n)})})},n.prototype.getFileBaseUri=function(){var n=this;return x.isValid(this.systemConfig,"fileServerBaseUri")?Promise.resolve(this.systemConfig.fileServerBaseUri):new Promise(function(l,e){n.readSystemConfig().then(function(t){n.systemConfig=t,x.isValid(n.systemConfig,"fileOuterBaseUri")&&x.isValid(n.systemConfig,"fileInnerBaseUri")&&x.isValid(n.systemConfig,"isOuterNetwork")?(n.systemConfig.fileServerBaseUri=n.systemConfig.isOuterNetwork?n.systemConfig.fileOuterBaseUri:n.systemConfig.fileInnerBaseUri,l(n.systemConfig.fileServerBaseUri)):e("failure to getFileBaseUri")}).catch(function(n){return e(n)})})},n.prototype.getFileBaseUris=function(){var n=this;return x.isValid(this.systemConfig,"fileServerBaseUri")?Promise.resolve([this.systemConfig.fileOuterBaseUri,this.systemConfig.fileInnerBaseUri]):new Promise(function(l,e){n.readSystemConfig().then(function(t){n.systemConfig=t,x.isValid(n.systemConfig,"fileOuterBaseUri")&&x.isValid(n.systemConfig,"fileInnerBaseUri")&&x.isValid(n.systemConfig,"isOuterNetwork")?l([n.systemConfig.fileOuterBaseUri,n.systemConfig.fileInnerBaseUri]):e("failure to getFileBaseUris")}).catch(function(n){return e(n)})})},n.prototype.getMaterialsBaseUri=function(){var n=this;return x.isValid(this.systemConfig,"materialsBaseUri")?Promise.resolve(this.systemConfig.materialsBaseUri):new Promise(function(l,e){n.readSystemConfig().then(function(t){n.systemConfig=t,x.isValid(n.systemConfig,"isOuterNetwork")&&x.isValid(n.systemConfig,"materialsOuterBaseUri")&&x.isValid(n.systemConfig,"materialsInnerBaseUri")?(n.systemConfig.materialsBaseUri=n.systemConfig.isOuterNetwork?n.systemConfig.materialsOuterBaseUri:n.systemConfig.materialsInnerBaseUri,l(n.systemConfig.materialsBaseUri)):e("failure to getMaterialsBaseUri")}).catch(function(n){return e(n)})})},n.prototype.getMaterialsBaseUris=function(){var n=this;return x.isValid(this.systemConfig,"materialsBaseUri")?Promise.resolve([this.systemConfig.materialsOuterBaseUri,this.systemConfig.materialsInnerBaseUri]):new Promise(function(l,e){n.readSystemConfig().then(function(t){n.systemConfig=t,x.isValid(n.systemConfig,"isOuterNetwork")&&x.isValid(n.systemConfig,"materialsOuterBaseUri")&&x.isValid(n.systemConfig,"materialsInnerBaseUri")?l([n.systemConfig.materialsOuterBaseUri,n.systemConfig.materialsInnerBaseUri]):e("failure to getMaterialsBaseUri")}).catch(function(n){return e(n)})})},n.prototype.getMaterialUnit=function(){var n=this;return x.isValid(this.systemConfig,"materialUnit")?Promise.resolve(this.systemConfig.materialUnit):new Promise(function(l,e){n.readSystemConfig().then(function(t){n.systemConfig=t,x.isValid(n.systemConfig,"materialUnit")?l(n.systemConfig.materialUnit):e("failure to getmaterialUnit")}).catch(function(n){return e(n)})})},n.prototype.getOneMaterialUnit=function(n){var l=this;return x.isValid(this.systemConfig,"materialUnit")?Promise.resolve(this.filterMaterialUnit(n,this.systemConfig.materialUnit)):new Promise(function(e,t){l.readSystemConfig().then(function(i){l.systemConfig=i,x.isValid(l.systemConfig,"materialUnit")?e(l.filterMaterialUnit(n,l.systemConfig.materialUnit)):t("failure to getmaterialUnit")}).catch(function(n){return t(n)})})},n.prototype.filterMaterialUnit=function(n,l){if(!n||!l||l.length<=0)return null;for(var e=0,t=l;e<t.length;e++){var i=t[e];if(i.id==n)return i}return null},n.prototype.isGridStyle=function(){var n=this;return x.isValid(this.systemConfig,"isGridStyle")?Promise.resolve(this.systemConfig.isGridStyle):new Promise(function(l,e){n.readSystemConfig().then(function(t){n.systemConfig=t,x.isValid(n.systemConfig,"isGridStyle")?l(n.systemConfig.isGridStyle):e("failure to check isGridStyle")}).catch(function(n){return e(n)})})},n.prototype.isOuterNetwork=function(){var n=this;return x.isValid(this.systemConfig,"isOuterNetwork")?Promise.resolve(this.systemConfig.isOuterNetwork):new Promise(function(l,e){n.readSystemConfig().then(function(t){n.systemConfig=t,x.isValid(n.systemConfig,"isOuterNetwork")?l(n.systemConfig.isOuterNetwork):e("failure to check isOuterNetwork")}).catch(function(n){return e(n)})})},n.prototype.isDebugMode=function(){var n=this;return x.isValid(this.systemConfig,"isDebugMode")?Promise.resolve(this.systemConfig.isDebugMode):new Promise(function(l,e){n.readSystemConfig().then(function(t){n.systemConfig=t,x.isValid(n.systemConfig,"isDebugMode")?l(n.systemConfig.isDebugMode):e("failure to check isDebugMode")}).catch(function(n){return e(n)})})},n.prototype.getKeepAliveInterval=function(){var n=this;return x.isValid(this.systemConfig,"keepAliveInterval")?Promise.resolve(this.systemConfig.keepAliveInterval):new Promise(function(l,e){n.readSystemConfig().then(function(t){n.systemConfig=t,x.isValid(n.systemConfig,"keepAliveInterval")?l(n.systemConfig.keepAliveInterval):e("failure to getKeepAliveInterval")}).catch(function(n){return e(n)})})},n.prototype.getOverdueTime=function(){var n=this;return x.isValid(this.systemConfig,"overdueTime")?Promise.resolve(this.systemConfig.overdueTime):new Promise(function(l,e){n.readSystemConfig().then(function(t){n.systemConfig=t,x.isValid(n.systemConfig,"overdueTime")?l(n.systemConfig.overdueTime):e("failure to getOverdueTime")}).catch(function(n){return e(n)})})},n.prototype.getSysRegion=function(){var n=this;return x.isValid(this.systemConfig,"sysRegion")?Promise.resolve(this.systemConfig.sysRegion):new Promise(function(l,e){n.readSystemConfig().then(function(t){n.systemConfig=t,x.isValid(n.systemConfig,"sysRegion")?l(n.systemConfig.sysRegion):e("failure to getSysRegion")}).catch(function(n){return e(n)})})},n.prototype.isNewFilService=function(){var n=this;return x.isValid(this.systemConfig,"newFileService")?Promise.resolve(this.systemConfig.newFileService):new Promise(function(l,e){n.readSystemConfig().then(function(t){n.systemConfig=t,x.isValid(n.systemConfig,"newFileService")?l(n.systemConfig.newFileService):e("failure to check isNewFilService")}).catch(function(n){return e(n)})})},n.prototype.getMapServerUrl=function(){var n=this;return x.isValid(this.mapConfig,"mapServerUrl")?Promise.resolve(this.mapConfig.mapServerUrl):new Promise(function(l,e){n.readMapConfig().then(function(t){n.mapConfig=t,x.isValid(n.mapConfig,"mapServerUrl")?l(n.mapConfig.mapServerUrl):e("the url of map server is error")}).catch(function(n){return e(n)})})},n.prototype.setGridStyle=function(n){var l=this;return x.isValid(this.systemConfig,"isGridStyle")?new Promise(function(e,t){var i=Object.create(l.systemConfig);i.isGridStyle=n,l.writeSystemConfig(i).then(function(t){t&&(l.systemConfig.isGridStyle=n),e(!!t)}).catch(function(n){return t(n)})}):Promise.reject("systemConfig has no data")},n.prototype.setIsOuterNet=function(n){var l=this;return(this.systemConfig?Promise.resolve():this.readSystemConfig().then(function(n){return l.systemConfig=n})).then(function(){return x.isValid(l.systemConfig,"isOuterNetwork")?new Promise(function(e,t){var i=Object.create(l.systemConfig);i.isOuterNetwork=n,l.writeSystemConfig(i).then(function(t){t&&(l.systemConfig.isOuterNetwork=n,l.systemConfig.serverBaseUri=l.systemConfig.isOuterNetwork?l.systemConfig.outerBaseUri:l.systemConfig.innerBaseUri,l.systemConfig.materialsBaseUri=l.systemConfig.isOuterNetwork?l.systemConfig.materialsOuterBaseUri:l.systemConfig.materialsInnerBaseUri),e(!!t)}).catch(function(n){return t(n)})}):Promise.reject("sysytemConfig has no data")})},n.prototype.setServerBaseUris=function(n,l,e){var t=this;return x.isValid(this.systemConfig,"outerBaseUri")&&x.isValid(this.systemConfig,"innerBaseUri")&&x.isValid(this.systemConfig,"serverBaseUri")&&x.isValid(this.systemConfig,"isOuterNetwork")?new Promise(function(i,o){var u=Object.create(t.systemConfig);u.outerBaseUri=n,u.innerBaseUri=l,u.serverBaseUri=e?n:l,u.isOuterNetwork=e,t.writeSystemConfig(u).then(function(o){o&&(t.systemConfig.outerBaseUri=n,t.systemConfig.innerBaseUri=l,t.systemConfig.serverBaseUri=e?n:l,t.systemConfig.isOuterNetwork=e),i(!!o)}).catch(function(n){return o(n)})}):Promise.reject("systemConfig has no data")},n.prototype.setFileBaseUris=function(n,l,e){var t=this;return x.isValid(this.systemConfig,"fileOuterBaseUri")&&x.isValid(this.systemConfig,"fileInnerBaseUri")&&x.isValid(this.systemConfig,"fileServerBaseUri")&&x.isValid(this.systemConfig,"isOuterNetwork")?new Promise(function(i,o){var u=Object.create(t.systemConfig);u.fileOuterBaseUri=n,u.fileInnerBaseUri=l,u.fileServerBaseUri=e?n:l,u.isOuterNetwork=e,t.writeSystemConfig(u).then(function(o){o&&(t.systemConfig.fileOuterBaseUri=n,t.systemConfig.fileInnerBaseUri=l,t.systemConfig.fileServerBaseUri=e?n:l,t.systemConfig.isOuterNetwork=e),i(!!o)}).catch(function(n){return o(n)})}):Promise.reject("systemConfig has no data")},n.prototype.setMaterialBaseUris=function(n,l,e){var t=this;return x.isValid(this.systemConfig,"materialsOuterBaseUri")&&x.isValid(this.systemConfig,"materialsInnerBaseUri")&&x.isValid(this.systemConfig,"materialsBaseUri")&&x.isValid(this.systemConfig,"isOuterNetwork")?new Promise(function(i,o){var u=Object.create(t.systemConfig);u.materialsOuterBaseUri=n,u.materialsInnerBaseUri=l,u.materialsBaseUri=e?n:l,u.isOuterNetwork=e,t.writeSystemConfig(u).then(function(o){o&&(t.systemConfig.materialsOuterBaseUri=n,t.systemConfig.materialsInnerBaseUri=l,t.systemConfig.materialsBaseUri=e?n:l,t.systemConfig.isOuterNetwork=e),i(!!o)}).catch(function(n){return o(n)})}):Promise.reject("systemConfig has no data")},n.prototype.setKeepAlive=function(n){var l=this;return x.isValid(this.systemConfig,"keepAliveInterval")?new Promise(function(e,t){var i=Object.create(l.systemConfig);i.keepAliveInterval=n,l.writeSystemConfig(i).then(function(t){t&&(l.systemConfig.keepAliveInterval=n),e(!!t)}).catch(function(n){return t(n)})}):Promise.reject("systemConfig has no data")},n.prototype.setOverdueTime=function(n){var l=this;return x.isValid(this.systemConfig,"overdueTime")?new Promise(function(e,t){var i=Object.create(l.systemConfig);i.overdueTime=n,l.writeSystemConfig(i).then(function(t){t&&(l.systemConfig.overdueTime=n),e(!!t)}).catch(function(n){return t(n)})}):Promise.reject("systemConfig has no data")},n.prototype.readSystemConfig=function(){var n=this;return this.globalService.isChrome?this.storage.get(this.systemStorageName).then(function(l){return l?x.transform2SystemConfig(l):n.http.get(n.systemFilePath).toPromise().then(function(l){return n.storage.set(n.systemStorageName,JSON.stringify(l.json()))}).then(function(n){return x.transform2SystemConfig(n)})}):(console.log("start readAsText:"+this.fileService.getConfigDir()+":"+this.systemFileName),this.file.readAsText(this.fileService.getConfigDir(),this.systemFileName).then(function(n){return console.log("readAsText"+n),x.transform2SystemConfig(n)}).catch(function(n){console.log(n)}))},n.prototype.writeSystemConfig=function(n){return this.globalService.isChrome?this.storage.set(this.systemStorageName,x.transform2SystemString(n)):this.file.writeExistingFile(this.fileService.getConfigDir(),this.systemFileName,x.transform2SystemString(n))},n.prototype.readMapConfig=function(){var n=this;return this.storage.get(this.mapStorageName).then(function(l){return l?x.transform2MapConfig(l):n.http.get(n.mapFilePath).toPromise().then(function(l){return n.storage.set(n.mapStorageName,JSON.stringify(l.json()))}).then(function(n){return x.transform2MapConfig(n)})})},n.isValid=function(n,l){return n&&void 0!=n[l]&&null!=n[l]},n.transform2SystemConfig=function(n){var l=JSON.parse(n);return{outerBaseUri:l["server.outer.baseuri"],innerBaseUri:l["server.inner.baseuri"],serverBaseUri:l["sys.connect.outer.network"]?l["server.outer.baseuri"]:l["server.inner.baseuri"],fileOuterBaseUri:l["server.file.outer.baseuri"],fileInnerBaseUri:l["server.file.inner.baseuri"],fileServerBaseUri:l["sys.connect.outer.network"]?l["server.file.outer.baseuri"]:l["server.file.inner.baseuri"],materialsOuterBaseUri:l["server.materials.outer.baseuri"],materialsInnerBaseUri:l["server.materials.inner.baseuri"],materialsBaseUri:l["sys.connect.outer.network"]?l["server.materials.outer.baseuri"]:l["server.materials.inner.baseuri"],isOuterNetwork:l["sys.connect.outer.network"],isGridStyle:l["sys.grid.style"],isDebugMode:l["sys.debug.mode"],keepAliveInterval:l["sys.keep.alive.interval"],overdueTime:l["sys.overdue.time"],sysRegion:l["sys.region"],newFileService:l["sys.new.file.service"],materialUnit:l["sys.material.unit"]}},n.transform2MapConfig=function(n){return{mapServerUrl:JSON.parse(n)["map.server.url"]}},n.transform2SystemString=function(n){return JSON.stringify({"server.outer.baseuri":n.outerBaseUri,"server.inner.baseuri":n.innerBaseUri,"server.file.outer.baseuri":n.fileOuterBaseUri,"server.file.inner.baseuri":n.fileInnerBaseUri,"server.materials.outer.baseuri":n.materialsOuterBaseUri,"server.materials.inner.baseuri":n.materialsInnerBaseUri,"sys.connect.outer.network":n.isOuterNetwork,"sys.grid.style":n.isGridStyle,"sys.debug.mode":n.isDebugMode,"sys.keep.alive.interval":n.keepAliveInterval,"sys.overdue.time":n.overdueTime,"sys.region":n.sysRegion,"sys.new.file.service":n.newFileService,"sys.material.unit":n.materialUnit})},n}());M.fushunRegion="fushun",M=x=Object(r.__decorate)([Object(a.o)(),Object(r.__metadata)("design:paramtypes",["function"==typeof(L=void 0!==N.e&&N.e)&&L||Object,"function"==typeof(A=void 0!==p.b&&p.b)&&A||Object,"function"==typeof(U=void 0!==S.a&&S.a)&&U||Object,"function"==typeof(R=void 0!==g&&g)&&R||Object,"function"==typeof(F=void 0!==C&&C)&&F||Object])],M);var x,L,A,U,R,F,B,K="gray",H="primary",G=function(){return function(){}}();!function(n){n[n.Dispatch=0]="Dispatch",n[n.Accept=1]="Accept",n[n.Go=2]="Go",n[n.Arrived=3]="Arrived",n[n.Reply=4]="Reply",n[n.Reject=5]="Reject",n[n.Delay=6]="Delay",n[n.Cancel=7]="Cancel",n[n.Continue=8]="Continue"}(B||(B={}));var V=function(){function n(l){this.id=l.taskId,this.type="热线工单",this.state=l.state,this.describe=l.desc,this.location={type:l.location.type,lng:l.location.lng,lat:l.location.lat},this.source=l.source,this.lastProcess="",this.photoCount=0,this.audioCount=0,this.videoCount=0,this.isPreview=!1,this.isLocationValid=n.checkLocation(this.location),this.extendedInfo=l.extendedInfo,this.isUploaded=!0,this.isOverdueArrivedLine=!1,this.isOverdueReplyLine=!1,this.processes=[],this.processes.push({event:"create",name:"创建时间",time:n.utc2Date(l.createTime),show:!0,color:K,done:!1,extend:null,isUploaded:!0}),this.processes.push({event:"dispatch",name:"派发时间",time:n.utc2Date(l.assignTime),show:!0,color:K,done:!1,extend:null,isUploaded:!0}),this.processes.push({event:"accept",name:"接单时间",time:n.utc2Date(l.acceptTime),show:!0,color:H,done:!1,extend:null,isUploaded:!0}),this.processes.push({event:"go",name:"出发时间",time:n.utc2Date(l.goTime),show:!1,color:H,done:!1,extend:null,isUploaded:!0}),this.processes.push({event:"arrive",name:"到场时间",time:n.utc2Date(l.arrivedTime),show:!1,color:H,done:!1,extend:null,isUploaded:!0}),this.processes.push({event:"reply",name:"回复时间",time:n.utc2Date(l.replyTime),show:!1,color:H,done:!1,extend:null,isUploaded:!0}),this.processes.push({event:"reject",name:"退单时间",time:void 0,show:!1,color:H,done:!1,extend:null,isUploaded:!0}),this.processes.push({event:"delay",name:"延迟时间",time:void 0,show:!1,color:H,done:!1,extend:null,isUploaded:!0}),this.processes.push({event:"cancel",name:"销单时间",time:void 0,show:!1,color:H,done:!1,extend:null,isUploaded:!0})}return n.transform=function(l,e){for(var t=e.length,i=0,o=l;i<o.length;i++){var u=new n(o[i]);e.push(u)}return e.slice(t)},n.utc2Date=function(n){return n>0?new Date(n):void 0},n.checkLocation=function(n){var l,e;return n&&n.lng&&n.lat&&(l=Number.parseFloat(n.lng),e=Number.parseFloat(n.lat)),!!l&&!!e},n.convertState=function(n){var l;switch(n){case 0:case 1:case 2:l=B.Dispatch;break;case 3:l=B.Go;break;case 4:l=B.Arrived;break;case 5:l=B.Reply;break;case 99:l=B.Cancel;break;case-1:case-2:case-3:l=B.Reject;break;default:l=B.Continue}return l},n}(),$=function(){function n(n){this.http=n}return n.prototype.getOptions=function(){var n=new N.d({"Content-Type":"application/json;charset=UTF-8","X-Access-Token":"123","X-Device-ID":"aa5eaa1d715240d8"});return new N.g({headers:n})},n.prototype.handleError=function(n){var l=n.json().Message?n.json().Message:n.status?n.status+" - "+n.statusText:"Server error";return console.error(l),Promise.reject(l)},n.prototype.request=function(n,l){return this.http.request(n,l)},n.prototype.get=function(n,l){return console.log(n),l&&console.log(l),this.http.get(n,l)},n.prototype.post=function(n,l,e){return console.log(n),l&&console.log(l),e&&console.log(e),this.http.post(n,l,e)},n.prototype.put=function(n,l,e){return console.log(n),l&&console.log(l),e&&console.log(e),this.http.put(n,l,e)},n.prototype.delete=function(n,l){return this.http.delete(n,l)},n.prototype.patch=function(n,l,e){return this.http.patch(n,l,e)},n.prototype.head=function(n,l){return this.http.head(n,l)},n}();$=Object(r.__decorate)([Object(a.o)(),Object(r.__metadata)("design:paramtypes",["function"==typeof(W=void 0!==N.e&&N.e)&&W||Object])],$);var W,q=e(120),X=function(n){function l(l,e,t,i){var o=n.call(this,l)||this;return o.configService=e,o.globalService=t,o.transfer=i,o}return Object(r.__extends)(l,n),l.prototype.getTasks=function(n,l,e){var t=this;return new Promise(function(i,o){t.configService.getServerBaseUri().then(function(u){return t.get(u+"wap/v1/mobile/task/user/"+n+"/task?taskType=all&completed=0&count="+e+"&since="+l,t.getOptions()).toPromise().then(function(n){var l=n.json();if(l.Code===t.globalService.httpCode&&l.StatusCode===t.globalService.httpSuccessStatusCode&&l.Data instanceof Array){var e=l.Data;e.map(function(n){return n.state=V.convertState(n.state),n}),i(e)}else o(l.Message?l.Message:"failure to get tasks")}).catch(t.handleError)}).catch(function(n){return o(n)})})},l.prototype.getTaskDetail=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){return l.get(i+"wap/v1/mobile/hotline/task/"+n+"/detail",l.getOptions()).toPromise().then(function(n){var i=n.json();i.Code===l.globalService.httpCode&&i.StatusCode===l.globalService.httpSuccessStatusCode&&i.Data?e(i.Data):t(i.Message?i.Message:"failure to get task detail")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.getAllWords=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){return l.get(i+"wap/v1/mobile/resource/wordNew?group="+n,l.getOptions()).toPromise().then(function(n){var i=n.json();i.Code===l.globalService.httpCode&&i.StatusCode===l.globalService.httpSuccessStatusCode&&i.Data instanceof Array?e(i.Data):t(i.Message?i.Message:"failure to get words")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.getUnDispatchedTasks=function(n,l,e){var t=this;return new Promise(function(i,o){t.configService.getServerBaseUri().then(function(u){return t.get(u+"wap/v1/mobile/tasksearch/"+n+"/unDispatchedTasks?count="+e+"&since="+l,t.getOptions()).toPromise().then(function(n){var l=n.json();l.Code===t.globalService.httpCode&&l.StatusCode===t.globalService.httpSuccessStatusCode&&l.Data instanceof Array?i(l.Data):o(l.Message?l.Message:"failure to get undispatched tasks")}).catch(t.handleError)}).catch(function(n){return o(n)})})},l.prototype.getDispatchedTasks=function(n,l,e,t){var i=this;return new Promise(function(o,u){i.configService.getServerBaseUri().then(function(a){return i.get(a+"wap/v1/mobile/tasksearch/"+n+"/dispatchedTasks/"+t+"?count="+e+"&since="+l,i.getOptions()).toPromise().then(function(n){var l=n.json();l.Code===i.globalService.httpCode&&l.StatusCode===i.globalService.httpSuccessStatusCode&&l.Data instanceof Array?o(l.Data):u(l.Message?l.Message:"failure to get dispatched tasks")}).catch(i.handleError)}).catch(function(n){return u(n)})})},l.prototype.getSearchTasks=function(n,l){var e=this;return new Promise(function(t,i){e.configService.getServerBaseUri().then(function(o){return e.get(o+"wap/v1/mobile/tasksearch/"+n+"/tasks?happenedAddress="+l.happenedAddress+"&contactPhone="+l.contactPhone+"&serialNo="+l.serialNo+"&taskNo="+l.taskNo+"&taskState="+l.taskState+"&reportType="+l.reportType+"&reportPerson="+l.reportPerson+"&sendTime="+l.sendTime+"&count=10&since=0",e.getOptions()).toPromise().then(function(n){console.log("getSearchTasks:"+n);var l=n.json();l.Code==e.globalService.httpCode&&l.StatusCode===e.globalService.httpSuccessStatusCode&&l.Data?t(l.Data):i(l.Message?l.Message:"fail to search task!")}).catch(e.handleError)}).catch(function(n){return i(n)})})},l.prototype.getSearchTaskCount=function(n,l){var e=this;return new Promise(function(t,i){e.configService.getServerBaseUri().then(function(o){return e.get(o+"wap/v1/mobile/tasksearch/"+n+"/tasksCount?happenedAddress="+l.happenedAddress+"&contactPhone="+l.contactPhone+"&serialNo="+l.serialNo+"&taskNo="+l.taskNo+"&taskState="+l.taskState+"&reportType="+l.reportType+"&reportPerson="+l.reportPerson+"&sendTime="+l.sendTime,e.getOptions()).toPromise().then(function(n){console.log("getSearchTaskCounts:"+n);var l=n.json();l.Code==e.globalService.httpCode&&l.StatusCode===e.globalService.httpSuccessStatusCode&&l.Data?t(l.Data):i(l.Message?l.Message:"fail to search task count!")}).catch(e.handleError)}).catch(function(n){return i(n)})})},l.prototype.getSearchTaskDetails=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){return l.get(i+"wap/v1/mobile/hotline/task/"+n+"/detail",l.getOptions()).toPromise().then(function(n){console.log("getSearchTaskDetails"+n);var i=n.json();i.Code==l.globalService.httpCode&&i.StatusCode===l.globalService.httpSuccessStatusCode&&i.Data?e(i.Data):t(i.Message?i.Message:"fail to search task details!")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.getNews=function(){var n=this;return new Promise(function(l,e){n.configService.getServerBaseUri().then(function(t){return n.get(t+"wap/v1/mobile/resource/news/latestd",n.getOptions()).toPromise().then(function(t){console.log("getNews:"+t);var i=t.json();i.Code==n.globalService.httpCode&&i.StatusCode===n.globalService.httpSuccessStatusCode&&i.Data?l(i.Data):e(i.Message?i.Message:"fail to get news!")}).catch(n.handleError)}).catch(function(n){return e(n)})})},l.prototype.doLogin=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){var o;return o=n.role===l.globalService.worker?i+"wap/v1/auth/"+n.userName+"/"+n.password+"?appIdentity=cc":i+"wap/v1/auth/wap/"+n.userName+"/"+n.password+"?appIdentity=cc",l.get(o,l.getOptions()).toPromise().then(function(n){console.log("getUserInfo:"+n);var i=n.json();i.Code==l.globalService.httpCode&&i.StatusCode===l.globalService.httpSuccessStatusCode&&i.Data?e(i.Data):t(i.Message?i.Message:"fail to get userInfo!")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.getPersonnels=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){return l.get(i+"wap/v1/mobile/resource/user/"+n+"/getFieldPersonnel",l.getOptions()).toPromise().then(function(n){var i=n.json();i.Code===l.globalService.httpCode&&i.StatusCode===l.globalService.httpSuccessStatusCode&&i.Data instanceof Array?e(i.Data):t(i.Message?i.Message:"failure to get personnels")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.getManagerUserInfo=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){return l.get(i+"wap/v1/mobile/resource/user/hotline/"+n,l.getOptions()).toPromise().then(function(n){console.log("getManagerUserInfo:"+n);var i=n.json();i.Code==l.globalService.httpCode&&i.StatusCode==l.globalService.httpSuccessStatusCode&&i.Data?e(i.Data):t(i.Message?i.Message:"fail to get ManagerUserInfo!")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.getWorkerUserInfo=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){return l.get(i+"wap/v1/mobile/resource/user/"+n,l.getOptions()).toPromise().then(function(n){console.log("getWorkerUserInfo:"+n);var i=n.json();i.Code==l.globalService.httpCode&&i.StatusCode==l.globalService.httpSuccessStatusCode&&i.Data?e(i.Data):t(i.Message?i.Message:"fail to get WorkerUserInfo!")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.checkAppVersion=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){return l.get(i+"wap/v1/system/update/app/check?version="+n,l.getOptions()).toPromise().then(function(n){console.log("checkAppVersion:"+n);var i=n.json();i.Code==l.globalService.httpCode&&i.StatusCode==l.globalService.httpSuccessStatusCode&&i.Data?e(i.Data):t(i.Message?i.Message:"fail to get check app version info!")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.checkDataVersion=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){return l.get(i+"wap/v1/system/update/data/check?version="+n,l.getOptions()).toPromise().then(function(n){console.log("checkDataVersion:"+n);var i=n.json();i.Code==l.globalService.httpCode&&i.StatusCode==l.globalService.httpSuccessStatusCode&&i.Data?e(i.Data):t(i.Message?i.Message:"fail to get check data version info!")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.getAllMaterials=function(n){var l=this;return new Promise(function(e,t){l.configService.getMaterialsBaseUri().then(function(i){return l.get(i+"/wap/v1/material/get/"+n,l.getOptions()).toPromise().then(function(n){var i=n.json();i.status===l.globalService.httpSuccessStatusCode&&i.data instanceof Array?e(i.data):t(i.Message?i.Message:"failure to get materials")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.getMaintainInfo=function(n){var l=this;return new Promise(function(e,t){l.configService.getMaterialsBaseUri().then(function(i){return l.get(i+"/wap/v1/materialusage/get/"+n,l.getOptions()).toPromise().then(function(n){var i=n.json();i.status===l.globalService.httpSuccessStatusCode?e(i.data):t(i.Message?i.Message:"failure to get materials")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.downloadFile=function(n,l){var e=this;return new Promise(function(t,i){e.transfer.create().download(n,l).then(function(n){console.log("download complete: "+n.toURL()),t(n.toURL())},function(n){console.error(n),i(n)})})},l.prototype.getAttachments=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){return l.get(i+"wap/v1/mobile/task/"+n+"/files",l.getOptions()).toPromise().then(function(n){var i=n.json();i.Code===l.globalService.httpCode&&i.StatusCode===l.globalService.httpSuccessStatusCode&&i.Data instanceof Array?e(i.Data):t(i.Message?i.Message:"failure to get attachments")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l}($);X=Object(r.__decorate)([Object(a.o)(),Object(r.__metadata)("design:paramtypes",["function"==typeof(Y=void 0!==N.e&&N.e)&&Y||Object,"function"==typeof(J=void 0!==M&&M)&&J||Object,"function"==typeof(z=void 0!==g&&g)&&z||Object,"function"==typeof(Z=void 0!==q.a&&q.a)&&Z||Object])],X);var Y,J,z,Z,Q=function(){var n={};return n[n.Picture=0]="Picture",n[n.Audio=1]="Audio",n[n.Vedio=2]="Vedio",n}(),nn=function(n){function l(l,e,t,i,o){var u=n.call(this,l)||this;return u.configService=e,u.globalService=t,u.transfer=i,u.fileService=o,u}return Object(r.__extends)(l,n),l.prototype.accept=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){var o=n.taskId.split("#")[0],u=n.taskId.split("#")[1],a=JSON.stringify(n);u&&(a=a.replace("#"+u,""));return l.put(i+"wap/v1/mobile/task/"+o+"/accept",a,l.getOptions()).toPromise().then(function(n){var i=n.json();i.Code===l.globalService.httpCode&&i.StatusCode===l.globalService.httpSuccessStatusCode&&i.Data?e(i.Data):t(i.Message?i.Message:"failure to accept")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.go=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){var o=n.taskId.split("#")[0],u=n.taskId.split("#")[1],a=JSON.stringify(n);u&&(a=a.replace("#"+u,""));return l.put(i+"wap/v1/mobile/task/"+o+"/go",a,l.getOptions()).toPromise().then(function(n){var i=n.json();i.Code===l.globalService.httpCode&&i.StatusCode===l.globalService.httpSuccessStatusCode&&i.Data?e(i.Data):t(i.Message?i.Message:"failure to go")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.arrive=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){var o=n.taskId.split("#")[0],u=n.taskId.split("#")[1],a=JSON.stringify(n);u&&(a=a.replace("#"+u,""));return l.put(i+"wap/v1/mobile/task/"+o+"/arrived",a,l.getOptions()).toPromise().then(function(n){var i=n.json();i.Code===l.globalService.httpCode&&i.StatusCode===l.globalService.httpSuccessStatusCode&&i.Data?e(i.Data):t(i.Message?i.Message:"failure to arrive")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.reply=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){var o=n.taskId.split("#")[0],u=n.taskId.split("#")[1],a=JSON.stringify(n);u&&(a=a.replace("#"+u,""));return l.post(i+"wap/v1/mobile/hotline/task/"+o+"/reply",a,l.getOptions()).toPromise().then(function(n){var i=n.json();i.Code===l.globalService.httpCode&&i.StatusCode===l.globalService.httpSuccessStatusCode&&i.Data?e(i.Data):t(i.Message?i.Message:"failure to reply")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.reject=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){var o=n.taskId.split("#")[0],u=n.taskId.split("#")[1],a=JSON.stringify(n);u&&(a=a.replace("#"+u,""));return l.put(i+"wap/v1/mobile/task/"+o+"/reject",a,l.getOptions()).toPromise().then(function(n){var i=n.json();i.Code===l.globalService.httpCode&&i.StatusCode===l.globalService.httpSuccessStatusCode&&i.Data?e(i.Data):t(i.Message?i.Message:"failure to reject")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.delay=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){var o=n.taskId.split("#")[0],u=n.taskId.split("#")[1],a=JSON.stringify(n);u&&(a=a.replace("#"+u,""));return l.put(i+"wap/v1/mobile/task/"+o+"/delay",a,l.getOptions()).toPromise().then(function(n){var i=n.json();i.Code===l.globalService.httpCode&&i.StatusCode===l.globalService.httpSuccessStatusCode&&i.Data?e(i.Data):t(i.Message?i.Message:"failure to delay")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.cancel=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){var o=n.taskId.split("#")[0],u=n.taskId.split("#")[1],a=JSON.stringify(n);u&&(a=a.replace("#"+u,""));return l.put(i+"wap/v1/mobile/task/"+o+"/taskXD",a,l.getOptions()).toPromise().then(function(n){var i=n.json();i.Code===l.globalService.httpCode&&i.StatusCode===l.globalService.httpSuccessStatusCode&&i.Data?e(i.Data):t(i.Message?i.Message:"failure to cancel")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.acceptEx=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){return l.put(i+"wap/v1/mobile/stationTask/"+n.taskId+"/accept",JSON.stringify(n),l.getOptions()).toPromise().then(function(n){var i=n.json();i.Code===l.globalService.httpCode&&i.StatusCode===l.globalService.httpSuccessStatusCode&&i.Data?e(i.Data):t(i.Message?i.Message:"failure to accept for station task")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.dispatch=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){return l.put(i+"wap/v1/mobile/stationTask/"+n.taskId+"/dispatch",JSON.stringify(n),l.getOptions()).toPromise().then(function(n){var i=n.json();i.Code===l.globalService.httpCode&&i.StatusCode===l.globalService.httpSuccessStatusCode&&i.Data?e(i.Data):t(i.Message?i.Message:"failure to dispatch for station task")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.cancelEx=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){return l.post(i+"wap/v1/mobile/stationTask/"+n.TaskNo+"/saveTaskXD",JSON.stringify(n),l.getOptions()).toPromise().then(function(n){var i=n.json();i.Code===l.globalService.httpCode&&i.StatusCode===l.globalService.httpSuccessStatusCode&&i.Data?e(i.Data):t(i.Message?i.Message:"failure to cancel for station task")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l.prototype.uploadMediaV2=function(n){var l=this;return new Promise(function(e,t){l.configService.getFileBaseUri().then(function(i){var o,u,a=i+"wap/v2/fs/upload";switch(n.fileType){case Q.Picture:o=l.fileService.getImagesDir(),u="IMAGE";break;case Q.Audio:o=l.fileService.getSoundsDir(),u="SOUND";break;case Q.Vedio:o=l.fileService.getVideosDir(),u="video/mp4";break;default:return t("type is error")}o=o+"/"+n.fileName;l.transfer.create().upload(o,a,{fileKey:"file",fileName:""+n.fileName,params:{userId:n.userId,fileType:u,fileName:n.fileName}}).then(function(l){console.log(l);var i=JSON.parse(l.response);i.fileId&&i.url&&i.downloadUrl&&i.fileType&&i.fileHash&&i.originFileName?(n.extendedInfo=i,e(i.fileId)):t(i.Message?i.Message:"failure to uploadMedia")},function(n){console.error(n),t(n)})}).catch(function(n){return t(n)})})},l.prototype.uploadMedia=function(n){var l=this;return new Promise(function(e,t){l.configService.getServerBaseUri().then(function(i){var o,u,a=i+"wap/v1/mobile/resource/upload";switch(n.fileType){case Q.Picture:o=l.fileService.getImagesDir(),u="IMAGE";break;case Q.Audio:o=l.fileService.getSoundsDir(),u="SOUND";break;case Q.Vedio:default:return t("type is error")}o=o+"/"+n.fileName,a=a+"?userId="+n.userId+"&fileType="+u+"&fileName="+n.fileName;l.transfer.create().upload(o,a,{fileKey:"file",fileName:""+n.fileName,params:{userId:n.userId,fileType:u,fileName:n.fileName}}).then(function(n){console.log(n);var i=JSON.parse(n.response);i.Code===l.globalService.httpCode&&i.StatusCode===l.globalService.httpSuccessStatusCode&&i.Data&&i.Data.data&&i.Data.data.fileId?e(i.Data.data.fileId):t(i.Message?i.Message:"failure to uploadMedia")},function(n){console.error(n),t(n)})}).catch(function(n){return t(n)})})},l.prototype.uploadMediaIdsV2=function(n,l,e){var t=this;return new Promise(function(i,o){t.configService.getServerBaseUri().then(function(u){var a={taskId:n,userId:l,files:e};return t.put(u+"wap/v1/mobile/task/"+n+"/files/wap/upload",JSON.stringify(a),t.getOptions()).toPromise().then(function(n){var l=n.json();l.Code===t.globalService.httpCode&&l.StatusCode===t.globalService.httpSuccessStatusCode&&l.Data?i(l.Data):o(l.Message?l.Message:"failure to uploadMediaIds")}).catch(t.handleError)}).catch(function(n){return o(n)})})},l.prototype.uploadMediaIds=function(n,l){var e=this;return new Promise(function(t,i){e.configService.getServerBaseUri().then(function(o){var u={taskId:n,files:l};return e.put(o+"wap/v1/mobile/task/"+n+"/files/upload",JSON.stringify(u),e.getOptions()).toPromise().then(function(n){var l=n.json();l.Code===e.globalService.httpCode&&l.StatusCode===e.globalService.httpSuccessStatusCode&&l.Data?t(l.Data):i(l.Message?l.Message:"failure to uploadMediaIds")}).catch(e.handleError)}).catch(function(n){return i(n)})})},l.prototype.uploadMaterialsAdd=function(n){var l=this;return new Promise(function(e,t){l.configService.getMaterialsBaseUri().then(function(t){return l.post(t+"api/wap/v1/materialusage/batch",JSON.stringify(n),l.getOptions()).toPromise().then(function(n){var t=n.json();e(t.status==l.globalService.httpSuccessStatusCode&&"OK"==t.message?!0:t.message?t.message:"failure to uploadMaterials")}).catch(l.handleError)}).catch(function(n){return t(n)})})},l}($);nn=Object(r.__decorate)([Object(a.o)(),Object(r.__metadata)("design:paramtypes",["function"==typeof(ln=void 0!==N.e&&N.e)&&ln||Object,"function"==typeof(en=void 0!==M&&M)&&en||Object,"function"==typeof(tn=void 0!==g&&g)&&tn||Object,"function"==typeof(on=void 0!==q.a&&q.a)&&on||Object,"function"==typeof(un=void 0!==C&&C)&&un||Object])],nn);var ln,en,tn,on,un,an=e(156),rn=e(157),sn=function(){function n(n,l,e,t){this.sqlite=n,this.sqlitePorter=l,this.globalService=e,this.fileService=t,this.dbName="main.db",this.paramError="param is error"}return n.prototype.init=function(){var n=this;return this.globalService.isChrome?(this.dbPath=this.dbName,Promise.resolve(!0)):(this.dbPath=this.fileService.getDbDir()+"/"+this.dbName,this.createTables().then(function(l){return n.updateTables()}))},n.prototype.destroy=function(){},n.prototype.saveWords=function(n){var l=this;return this.globalService.isChrome||!n||n.length<=0?Promise.resolve(!1):this.openDb().then(function(e){for(var t="DELETE FROM GD_WORDS;",i=0,o=n;i<o.length;i++){t+=l.toWordInsertSql(o[i])}return l.sqlitePorter.importSqlToDb(e,t)})},n.prototype.saveMaterials=function(n){var l=this;return this.globalService.isChrome||!n||n.length<=0?Promise.resolve(!1):this.openDb().then(function(e){for(var t="DELETE FROM GD_MATERIALS;",i=0,o=n;i<o.length;i++){t+=l.toMaterialInsertSql(o[i])}return l.sqlitePorter.importSqlToDb(e,t)})},n.prototype.saveMaintainInfo=function(n){var l=this;return this.globalService.isChrome||!n?Promise.resolve(!1):this.openDb().then(function(e){var t;return t=l.toMaintainInfoInsertSql(n),l.sqlitePorter.importSqlToDb(e,t)})},n.prototype.queryMaintainInfo=function(n){var l=this;return this.globalService.isChrome||!n?Promise.reject(this.paramError):this.openDb().then(function(e){return e.executeSql("SELECT * FROM GD_MAINTAININFO WHERE S_TASKID = '"+n+"';",{}).then(function(n){var e,t=n.rows;if(t&&1==t.length){var i=t.item(0);e=l.toMaintainInfo(i)}return e?Promise.resolve(e):Promise.reject("no maintainInfo")})})},n.prototype.saveMaterialInfo=function(n){var l=this;return!n||!n.taskId||n.infos.length<=0?Promise.resolve(!1):this.openDb().then(function(e){var t;return e.executeSql("SELECT * FROM GD_MATERIALINFO WHERE S_TASKID = '"+n.taskId+"';",{}).then(function(i){var o=i.rows;return t=o&&o.length>0?l.toMaterialInfoUpdateSql(n):l.toMaterialInfoInsertSql(n),l.sqlitePorter.importSqlToDb(e,t)}).catch(function(n){console.log(n)})})},n.prototype.updateFlagMaterials=function(n){var l=this;return!n||!n.taskId||n.infos.length<=0?Promise.resolve(!1):this.openDb().then(function(e){n.uploadFlag=l.globalService.uploadedFlagForUploaded;var t=l.toMaterialInfoUpdateSql(n);return l.sqlitePorter.importSqlToDb(e,t)})},n.prototype.getMaterials=function(n){var l=this;return this.globalService.isChrome||!n?Promise.reject(this.paramError):this.openDb().then(function(e){return e.executeSql("SELECT * FROM GD_MATERIALS WHERE S_GROUPKEY = '"+n+"';",{}).then(function(n){var e=n.rows,t=[];if(e&&e.length>0)for(var i=0;i<e.length;i++){var o=e.item(i);o&&t.push(l.toMaterial(o))}return t.length?Promise.resolve(t):Promise.reject("no materials")})})},n.prototype.getMaterialsCount=function(){return this.globalService.isChrome?Promise.resolve(0):this.openDb().then(function(n){return n.executeSql("SELECT COUNT(*) FROM GD_MATERIALS;",{}).then(function(n){return n.rows&&n.rows.length>0?n.rows.item(0)["COUNT(*)"]:0})})},n.prototype.getMaterial=function(n){var l=this;return this.globalService.isChrome||!n?Promise.reject(this.paramError):this.openDb().then(function(e){return e.executeSql("SELECT * FROM GD_MATERIALS WHERE I_MID ="+n+";",{}).then(function(n){var e,t=n.rows;return t&&1==t.length&&(e=l.toMaterial(t.item(0))),e?Promise.resolve(e):Promise.reject("no material")})})},n.prototype.getMaterialInfo=function(n){var l=this;return this.globalService.isChrome||!n?Promise.reject(this.paramError):this.openDb().then(function(e){return e.executeSql("SELECT * FROM GD_MATERIALINFO WHERE S_TASKID = '"+n+"';",{}).then(function(n){var e,t=n.rows;if(t&&1==t.length){var i=t.item(0);i&&(e=l.toMaterialInfo(i))}return e?Promise.resolve(e):Promise.reject("no materialInfo")})})},n.prototype.toMaterialInfo=function(n){return{taskId:n.S_TASKID,infos:JSON.parse(n.S_INFOS),uploadFlag:n.I_UPLOADEDFLAG}},n.prototype.getWords=function(n){var l=this;return this.globalService.isChrome||!n?Promise.reject(this.paramError):this.openDb().then(function(e){return e.executeSql("SELECT * FROM GD_WORDS WHERE S_WGROUP = '"+n+"';",{}).then(function(n){var e=n.rows,t=[];if(e&&e.length>0)for(var i=0;i<e.length;i++){var o=e.item(i);o&&t.push(l.toWord(o))}return t.length?Promise.resolve(t):Promise.reject("no words")})})},n.prototype.getWordsCount=function(){return this.globalService.isChrome?Promise.resolve(0):this.openDb().then(function(n){return n.executeSql("SELECT COUNT(*) FROM GD_WORDS;",{}).then(function(n){return n.rows&&n.rows.length>0?n.rows.item(0)["COUNT(*)"]:0})})},n.prototype.saveTasks=function(n,l){var e=this;return this.globalService.isChrome||!l||l.length<=0?Promise.reject(this.paramError):this.openDb().then(function(t){return t.executeSql("SELECT * FROM GD_TASKS WHERE I_USERID = "+n+";",{}).then(function(n){var i=n.rows,o="";if(i&&i.length>0)for(var u=0,a=l;u<a.length;u++){for(var r=a[u],s=void 0,c=0;c<i.length;c++){var d=i.item(c);if(d&&d.S_TASKID&&d.S_TASKID===r.taskId){s=d;break}}o+=s?e.toTaskUpdateSql(r,s):e.toTaskInsertSql(r)}else for(var _=0,p=l;_<p.length;_++){o+=e.toTaskInsertSql(p[_])}return o&&o.length>0?e.sqlitePorter.importSqlToDb(t,o):Promise.reject("failure to saveTasks")})})},n.prototype.saveTask=function(n){var l=this;return this.globalService.isChrome||!n?Promise.reject(this.paramError):this.openDb().then(function(e){var t=l.toTaskUpdateSql(n);return t&&t.length>0?e.executeSql(t,{}):Promise.reject("failure to saveTask")})},n.prototype.getTasks=function(n,l,e,t,i){var o=this;return this.globalService.isChrome?Promise.reject(this.paramError):this.openDb().then(function(u){var a="SELECT * FROM GD_TASKS WHERE I_USERID = "+n;return t&&t.length>0&&(a+=" AND I_STATE IN ("+t.join(",")+")"),i&&(a+=" AND S_TASKID LIKE '%"+i+"%'"),a+=" ORDER BY D_ASSGINTIME DESC LIMIT "+e+" OFFSET "+l+";",u.executeSql(a,{}).then(function(n){var l=n.rows,e=[];if(l&&l.length>0)for(var t=0;t<l.length;t++){var i=l.item(t);i&&i.S_TASKID&&e.push(o.toTask(i))}return Promise.resolve(e)})})},n.prototype.getTaskCount=function(n){return this.globalService.isChrome?Promise.reject(this.paramError):this.openDb().then(function(l){return l.executeSql("SELECT COUNT(*) FROM GD_TASKS WHERE I_USERID = "+n+";",{}).then(function(n){return n.rows&&n.rows.length>0?n.rows.item(0)["COUNT(*)"]:0})})},n.prototype.getTaskIds=function(n){return this.globalService.isChrome?Promise.reject(this.paramError):this.openDb().then(function(l){return l.executeSql("SELECT S_TASKID FROM GD_TASKS WHERE I_USERID = "+n+";",{}).then(function(n){var l=n.rows,e=[];if(l&&l.length>0)for(var t=0;t<l.length;t++){var i=l.item(t);i.hasOwnProperty("S_TASKID")&&i.S_TASKID&&e.push(i.S_TASKID)}return Promise.resolve(e)})})},n.prototype.saveTaskDetail=function(n){var l=this;return this.globalService.isChrome||!n?Promise.reject(this.paramError):this.openDb().then(function(e){return e.executeSql("SELECT * FROM GD_TASKDETAILS WHERE S_TASKID = '"+n.taskId+"';",{}).then(function(t){var i,o=t.rows;return i=o&&o.length>0?l.toTaskDetailUpdateSql(n):l.toTaskDetailInsertSql(n),e.executeSql(i,{})})})},n.prototype.updateTaskExtendInfo=function(n){var l=this;return this.globalService.isChrome||!n?Promise.reject(this.paramError):this.openDb().then(function(e){return e.executeSql("SELECT * FROM GD_TASKS WHERE S_TASKID = '"+n.taskId+"';",{}).then(function(t){var i,o,u=t.rows;if(!(u&&u.length>0))return Promise.resolve(!1);var a=u.item(0);return a.hasOwnProperty("S_EXTENDEDINFO")&&(o=a.S_EXTENDEDINFO),i=l.toTaskUpdateExtendedInfoSql(n,o),e.executeSql(i,{})})})},n.prototype.checkOverdueTimeTasks=function(n,l,e){var t=this;return this.globalService.isChrome||!l?Promise.reject(this.paramError):this.openDb().then(function(i){var o=l.arrived+e,u=l.reply+e;return i.executeSql("SELECT * FROM GD_TASKS WHERE I_USERID = "+n+" ORDER BY ID;",{}).then(function(n){var l=n.rows,e=[];if(l&&l.length>0)for(var i=0;i<l.length;i++){var a=l.item(i);if(a&&a.S_TASKID){var r=t.toTask(a);if(r.extendedInfo){if(r.extendedInfo.arrivedDeadLine&&r.extendedInfo.arrivedDeadLine<o)r.extendedInfo.replyDeadLine=void 0,r.extendedInfo.delayReplyDeadLine=void 0;else{if(!(r.extendedInfo.replyDeadLine&&r.extendedInfo.replyDeadLine<u))continue;r.extendedInfo.arrivedDeadLine=void 0,r.extendedInfo.delayReplyDeadLine=void 0}e.push(r)}}}return Promise.resolve(e)})})},n.prototype.getTaskDetail=function(n){var l=this;return this.globalService.isChrome||!n?Promise.reject(this.paramError):this.openDb().then(function(e){return e.executeSql("SELECT * FROM GD_TASKDETAILS WHERE S_TASKID = '"+n+"';",{}).then(function(n){var e,t=n.rows;if(t&&t.length>0)for(var i=0;i<t.length;i++){var o=t.item(i);o&&o.S_TASKID&&(e=l.toTaskDetail(o))}return Promise.resolve(e)})})},n.prototype.getTaskDetails=function(n){var l=this;return this.globalService.isChrome||!n||n.length<=0?Promise.reject(this.paramError):this.openDb().then(function(e){var t="SELECT * FROM GD_TASKDETAILS WHERE";return t+=" S_TASKID IN ("+n.map(function(n){return"'"+n+"'"}).join(",")+")",e.executeSql(t,{}).then(function(n){var e=n.rows,t=[];if(e&&e.length>0)for(var i=0;i<e.length;i++){var o=e.item(i);o&&t.push(l.toTaskDetail(o))}return Promise.resolve(t)})})},n.prototype.getNoDetailTaskIds=function(n){return this.globalService.isChrome?Promise.reject(this.paramError):this.openDb().then(function(l){return l.executeSql("SELECT S_TASKID FROM GD_TASKS WHERE I_USERID = "+n+" AND S_TASKID NOT IN (SELECT S_TASKID FROM GD_TASKDETAILS);",{}).then(function(n){var l=n.rows,e=[];if(l&&l.length>0)for(var t=0;t<l.length;t++){var i=l.item(t);i.hasOwnProperty("S_TASKID")&&i.S_TASKID&&e.push(i.S_TASKID)}return Promise.resolve(e)})})},n.prototype.saveHistory=function(n){var l=this;return this.globalService.isChrome||!n?Promise.reject(this.paramError):this.openDb().then(function(e){return e.executeSql("SELECT * FROM GD_HISTORIES WHERE I_USERID = "+n.userId+" AND S_TASKID = '"+n.taskId+"' AND I_STATE = "+n.state+" ORDER BY ID;",{}).then(function(t){var i,o=t.rows;return i=o&&o.length>0?l.toHistoryUpdateSql(n):l.toHistoryInsertSql(n),e.executeSql(i,{})})})},n.prototype.getHistories=function(n,l,e,t,i,o,u){var a=this;return this.globalService.isChrome?Promise.reject(this.paramError):this.openDb().then(function(a){var r="SELECT * FROM GD_HISTORIES WHERE I_USERID = "+n;return void 0!=l&&null!=l&&(r+=" AND S_TASKID = '"+l+"'"),e&&e.length>0&&(r+=" AND I_STATE IN ("+e.join(",")+")"),t&&t.length>0&&(r+=" AND I_UPLOADEDFLAG IN ("+t.join(",")+")"),i&&(r+=" AND S_TASKID LIKE '%"+i+"%'"),r+=void 0!==o&&null!==o&&void 0!==u&&null!==u?" ORDER BY ID LIMIT "+u+" OFFSET "+o+";":" ORDER BY ID;",a.executeSql(r,{})}).then(function(n){var l=n.rows,e=[];if(l&&l.length>0)for(var t=0;t<l.length;t++){var i=l.item(t);i&&e.push(a.toHistory(i))}return Promise.resolve(e)})},n.prototype.getSpecialHistories=function(n,l,e,t){var i=this;return this.globalService.isChrome||!l||l.length<=0?Promise.resolve([]):this.openDb().then(function(i){var o=l.map(function(n){return"'"+n+"'"}),u="SELECT * FROM GD_HISTORIES WHERE I_USERID = "+n+" AND S_TASKID IN ("+o.join(",")+")";return void 0!==e&&null!==e&&(u+=" AND I_STATE = "+e),t&&t.length>0&&(u+=" AND I_UPLOADEDFLAG IN ("+t.join(",")+")"),u+=" ORDER BY ID;",i.executeSql(u,{})}).then(function(n){var l=n.rows,e=[];if(l&&l.length>0)for(var t=0;t<l.length;t++){var o=l.item(t);o&&e.push(i.toHistory(o))}return Promise.resolve(e)})},n.prototype.saveMedia=function(n){var l=this;return this.globalService.isChrome||!n?Promise.reject(this.paramError):this.openDb().then(function(e){var t="SELECT * FROM GD_MULTIMEDIAS WHERE I_USERID = "+n.userId+" AND S_TASKID = '"+n.taskId+"' AND I_FILETYPE = "+n.fileType+" AND S_FILENAME = '"+n.fileName+"';";return e.executeSql(t,{}).then(function(i){var o=i.rows;if(o&&o.length>0){var u=o.item(0);t=l.toMediaUpdateSql(n,u)}else t=l.toMediaInsertSql(n);return e.executeSql(t,{})})})},n.prototype.getMediaList=function(n,l,e,t){var i=this;return this.globalService.isChrome||!l?Promise.reject(this.paramError):e.length<=0?Promise.reject([]):this.openDb().then(function(i){var o=e.map(function(n){return"'"+n+"'"}),u="SELECT * FROM GD_MULTIMEDIAS WHERE I_USERID = "+n+" AND S_TASKID = '"+l+"'\n           AND S_FILENAME IN ("+o.join(",")+")";return t&&t.length>0&&(u+=" AND I_UPLOADEDFLAG IN ("+t.join(",")+")"),u+=" ORDER BY ID;",i.executeSql(u,{})}).then(function(n){var l=n.rows,e=[];if(l&&l.length>0)for(var t=0;t<l.length;t++){var o=l.item(t);o&&e.push(i.toMedia(o))}return Promise.resolve(e)})},n.prototype.deleteOneTaskWithAllInfos=function(n,l){var e=this;return this.globalService.isChrome?Promise.reject("chrome"):this.openDb().then(function(t){return e.sqlitePorter.importSqlToDb(t,"DELETE FROM GD_TASKS WHERE I_USERID = "+n+" AND S_TASKID = '"+l+"';DELETE FROM GD_TASKDETAILS WHERE S_TASKID = '"+l+"';DELETE FROM GD_HISTORIES WHERE I_USERID = "+n+" AND S_TASKID = '"+l+"';DELETE FROM GD_MULTIMEDIAS WHERE I_USERID = "+n+" AND S_TASKID = '"+l+"';")})},n.prototype.deleteOneMedia=function(n,l){var e=this;return this.globalService.isChrome?Promise.reject("chrome"):this.openDb().then(function(t){return e.sqlitePorter.importSqlToDb(t,"DELETE FROM GD_MULTIMEDIAS WHERE S_FILENAME = '"+l+"' AND I_USERID = "+n+";")})},n.prototype.savePersonnels=function(n){var l=this;return this.globalService.isChrome||!n||n.length<=0?Promise.resolve(!1):this.openDb().then(function(e){for(var t="DELETE FROM GD_PERSONNELS;",i=0,o=n;i<o.length;i++){t+=l.toPersonnelInsertSql(o[i])}return l.sqlitePorter.importSqlToDb(e,t)})},n.prototype.getPersonnels=function(){var n=this;return this.globalService.isChrome?Promise.reject(this.paramError):this.openDb().then(function(l){return l.executeSql("SELECT * FROM GD_PERSONNELS;",{}).then(function(l){var e=l.rows,t=[];if(e&&e.length>0)for(var i=0;i<e.length;i++){var o=e.item(i);o&&t.push(n.toPersonnel(o))}return t.length?Promise.resolve(t):Promise.reject("no personnels")})})},n.prototype.getPersonnelsCount=function(){return this.globalService.isChrome?Promise.resolve(0):this.openDb().then(function(n){return n.executeSql("SELECT COUNT(*) FROM GD_PERSONNELS;",{}).then(function(n){return n.rows&&n.rows.length>0?n.rows.item(0)["COUNT(*)"]:0})})},n.prototype.openDb=function(){return this.sqlite.create({name:this.dbPath,location:"default"})},n.prototype.createTables=function(){var n=this;return this.openDb().then(function(l){return n.sqlitePorter.importSqlToDb(l,"CREATE TABLE IF NOT EXISTS [GD_HISTORIES] (\n        [ID] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n        [I_USERID] INTEGER NOT NULL, \n        [S_TASKID] TEXT(50) NOT NULL,\n        [I_STATE] INTEGER NOT NULL,\n        [S_CONTENT] TEXT NOT NULL,\n        [S_REPLY] TEXT,\n        [I_UPLOADEDFLAG] INTEGER NOT NULL DEFAULT 0,\n        [S_EXTENDEDINFO] TEXT);\n           \n      CREATE TABLE IF NOT EXISTS [GD_MULTIMEDIAS] (\n        [ID] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n        [I_USERID] INTEGER NOT NULL,\n        [S_TASKID] TEXT(50) NOT NULL,\n        [I_FILETYPE] INTEGER NOT NULL,\n        [S_FILENAME] TEXT(100) NOT NULL,\n        [I_UPLOADEDFLAG] INTEGER NOT NULL DEFAULT 0,\n        [S_FILEID] TEXT,\n        [S_EXTENDEDINFO] TEXT);\n      \n      CREATE TABLE IF NOT EXISTS [GD_NEWS] (\n        [ID] INTEGER NOT NULL, \n        [S_TITLE] TEXT(100) NOT NULL,\n        [D_PUBTIME] INTEGER NOT NULL,\n        [S_CONTENT] TEXT NOT NULL,\n        [I_READFLAG] INTEGER NOT NULL DEFAULT 0,\n        [S_EXTENDEDINFO] TEXT);\n      \n      CREATE TABLE IF NOT EXISTS [GD_TASKDETAILS] (\n        [ID] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n        [S_TASKID] TEXT(50) NOT NULL,\n        [S_DETAILINFO] TEXT NOT NULL,\n        [S_EXTENDEDINFO] TEXT);\n      \n      CREATE TABLE IF NOT EXISTS [GD_TASKS] (\n        [ID] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n        [I_USERID] INTEGER NOT NULL, \n        [S_TASKID] TEXT(50) NOT NULL,\n        [S_TASKTYPE] TEXT(50) NOT NULL,\n        [S_DESC] TEXT(50),\n        [S_SOURCE] TEXT(50),\n        [D_CREATETIME] INTEGER,\n        [D_ASSGINTIME] INTEGER,\n        [D_ACCEPTTIME] INTEGER,\n        [D_GOTIME] INTEGER,\n        [D_ARRIVEDTIME] INTEGER,\n        [D_REPLYTIME] INTEGER,\n        [D_COMPLETEDTIME] INTEGER,\n        [I_STATE] INTEGER NOT NULL,\n        [S_LNGLATTYPE] TEXT(50),\n        [S_LONGITUDE] TEXT(50),\n        [S_LATITUDE] TEXT(50),\n        [S_EXTENDEDINFO] TEXT);\n      \n      CREATE TABLE IF NOT EXISTS [GD_WORDS] (\n        [ID] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n        [I_WID] INTEGER NOT NULL,\n        [S_WNAME] TEXT(100) NOT NULL,\n        [S_WVALUE] TEXT(100) NOT NULL,\n        [S_WVALUEEX] TEXT(100),\n        [S_WGROUP] TEXT(100),\n        [I_WPARENTID] INTEGER,\n        [S_WREMARK] TEXT(100),\n        [S_WISACTIVE] TEXT(100));\n        \n      CREATE TABLE IF NOT EXISTS [GD_MATERIALS] (\n        [ID] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n        [I_MID] INTEGER NOT NULL,\n        [I_PARENTID] INTEGER NOT NULL,\n        [S_GROUPKEY] TEXT(100) NOT NULL,\n        [S_KEY] TEXT(100) NOT NULL,\n        [S_NAME] TEXT(100));\n        \n      CREATE TABLE IF NOT EXISTS [GD_MATERIALINFO](\n        [ID] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n        [I_USERID] INTEGER NOT NULL,\n        [S_TASKID] TEXT(50) NOT NULL,\n        [S_INFOS] TEXT(1000) NOT NULL,\n        [I_UPLOADEDFLAG] INTEGER NOT NULL DEFAULT 0);\n        \n      CREATE TABLE IF NOT EXISTS [GD_MAINTAININFO](\n        [ID] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n        [S_TASKID] TEXT(50) NOT NULL,\n        [S_TYPE] TEXT(50),\n        [S_ADDRESS] TEXT(100),\n        [S_AREA] TEXT(50),\n        [S_CONTENT] TEXT(1000),\n        [S_REMARK] TEXT(1000));\n       \n      CREATE TABLE IF NOT EXISTS [META_INFO] (\n        [S_VERSION] TEXT(50) NOT NULL, \n        [S_PRODUCTER] TEXT (100) NOT NULL, \n        [D_PRODUCTEDTIME] INTEGER NOT NULL);\n\n      CREATE TABLE IF NOT EXISTS [GD_PERSONNELS] (\n        [I_FIELDPERSONNELID] INTEGER NOT NULL, \n        [S_FIELDPERSONNELNAME] TEXT (100) NOT NULL, \n        [S_ROLES] TEXT);")})},n.prototype.updateTables=function(){return Promise.resolve(!0)},n.prototype.toWordInsertSql=function(n){return"INSERT INTO GD_WORDS VALUES (null, "+n.wid+", '"+n.wName+"', '"+n.wValue+"', '"+n.wValueEx+"', '"+n.wGroup+"', "+n.wParentId+", '"+n.wRemark+"', "+(n.wIsActive?"'1'":"'0'")+");"},n.prototype.toMaterialInsertSql=function(n){return"INSERT INTO GD_MATERIALS VALUES (null,"+n.id+", "+n.parentId+", '"+n.groupKey+"', '"+n.key+"', '"+n.name+"');"},n.prototype.toMaterialInfoInsertSql=function(n){return"INSERT INTO GD_MATERIALINFO VALUES (null,"+this.globalService.userId+", '"+n.taskId+"', \n    '"+JSON.stringify(n.infos)+"', "+n.uploadFlag+");"},n.prototype.toMaintainInfoInsertSql=function(n){return"INSERT INTO GD_MAINTAININFO VALUES (null,'"+n.serialNumber+"','"+n.maintenanceType+"',\n    '"+n.maintenanceAddress+"','"+n.area+"','"+n.repairContent+"','"+n.remark+"');"},n.prototype.toMaterialInfoUpdateSql=function(n){return"UPDATE GD_MATERIALINFO SET S_INFOS = '"+JSON.stringify(n.infos)+"',\n    I_UPLOADEDFLAG="+n.uploadFlag+" WHERE S_TASKID = '"+n.taskId+"'"},n.prototype.toWord=function(n){return{wid:n.I_WID,wName:n.S_WNAME,wValue:n.S_WVALUE,wValueEx:n.S_WVALUEEX,wIsActive:Boolean(n.S_WISACTIVE),wGroup:n.S_WGROUP,wParentId:n.I_WPARENTID,wRemark:n.S_WREMARK}},n.prototype.toMaterial=function(n){return{id:n.I_MID,parentId:n.I_PARENTID,groupKey:n.S_GROUPKEY,key:n.S_KEY,name:n.S_NAME}},n.prototype.toMaintainInfo=function(n){return{id:n.ID,serialNumber:n.S_TASKID,maintenanceType:n.S_TYPE,maintenanceAddress:n.S_ADDRESS,area:n.S_AREA,repairContent:n.S_CONTENT,remark:n.S_REMARK}},n.prototype.toTaskInsertSql=function(n){return"INSERT INTO GD_TASKS VALUES (null, "+this.globalService.userId+", '"+n.taskId+"', '"+n.taskType+"', '"+n.desc+"', '"+n.source+"', "+n.createTime+", "+n.assignTime+", "+n.acceptTime+", "+n.goTime+", "+n.arrivedTime+", "+n.replyTime+", "+n.compltedTime+", "+n.state+", "+n.location.type+", "+n.location.lng+", "+n.location.lat+", null);"},n.prototype.toTaskUpdateSql=function(n,l){var e="";if(l?(n.acceptTime>l.D_ACCEPTTIME&&(e+="D_ACCEPTTIME = "+n.acceptTime+", "),n.arrivedTime>l.D_ARRIVEDTIME&&(e+="D_ARRIVEDTIME = "+n.arrivedTime+", "),n.assignTime>l.D_ASSGINTIME&&(e+="D_ASSGINTIME = "+n.assignTime+", "),n.compltedTime>l.D_COMPLETEDTIME&&(e+="D_COMPLETEDTIME = "+n.compltedTime+", "),n.createTime>l.D_CREATETIME&&(e+="D_CREATETIME = "+n.createTime+", "),n.goTime>l.D_GOTIME&&(e+="D_GOTIME = "+n.goTime+", "),n.replyTime>l.D_REPLYTIME&&(e+="D_REPLYTIME = "+n.replyTime+", "),n.state>l.I_STATE&&(e+="I_STATE = "+n.state+", ")):(n.acceptTime>0&&(e+="D_ACCEPTTIME = "+n.acceptTime+", "),n.arrivedTime>0&&(e+="D_ARRIVEDTIME = "+n.arrivedTime+", "),n.assignTime>0&&(e+="D_ASSGINTIME = "+n.assignTime+", "),n.compltedTime>0&&(e+="D_COMPLETEDTIME = "+n.compltedTime+", "),n.createTime>0&&(e+="D_CREATETIME = "+n.createTime+", "),n.goTime>0&&(e+="D_GOTIME = "+n.goTime+", "),n.replyTime>0&&(e+="D_REPLYTIME = "+n.replyTime+", "),n.state>0&&(e+="I_STATE = "+n.state+", ")),e.length>0){var t=e.lastIndexOf(", ");e.endsWith(", ")&&t>0&&(e=e.substring(0,t)),e=e&&e.length>0?"UPDATE GD_TASKS SET "+e+" WHERE S_TASKID = '"+n.taskId+"';":""}return e},n.prototype.toTaskUpdateExtendedInfoSql=function(n,l){var e={};try{l&&(e=JSON.parse(l))}catch(n){console.error(n)}e.arrivedDeadLine=n.arrivedDeadLine,e.replyDeadLine=n.replyDeadLine,e.delayReplyDeadLine=n.delayReplyDeadLine;return"UPDATE GD_TASKS SET S_EXTENDEDINFO = '"+JSON.stringify(e)+"' WHERE S_TASKID = '"+n.taskId+"';"},n.prototype.toTaskDetailInsertSql=function(n){return"INSERT INTO GD_TASKDETAILS VALUES (null, '"+n.taskId+"', '"+JSON.stringify(n)+"', '"+(n.extendedInfo?n.extendedInfo:null)+"');"},n.prototype.toTaskDetailUpdateSql=function(n){var l="UPDATE GD_TASKDETAILS SET S_DETAILINFO = '"+JSON.stringify(n)+"'";return n.extendedInfo&&(l+=", S_EXTENDEDINFO = '"+n.extendedInfo+"'}"),l+=" WHERE S_TASKID = '"+n.taskId+"';"},n.prototype.toHistoryInsertSql=function(n){var l={};return n.taskDetail&&(l.taskDetail=n.taskDetail),n.mediaNames&&n.mediaNames.length>0&&(l.mediaNames=n.mediaNames.join(",")),"INSERT INTO GD_HISTORIES VALUES (null, "+n.userId+", '"+n.task.taskId+"', "+n.task.state+", '"+JSON.stringify(n.task)+"', '"+JSON.stringify(n.reply)+"', "+n.uploadedFlag+", '"+JSON.stringify(l)+"');"},n.prototype.toHistoryUpdateSql=function(n){var l={};return n.taskDetail&&(l.taskDetail=n.taskDetail),n.mediaNames&&n.mediaNames.length>0&&(l.mediaNames=n.mediaNames.join(",")),"UPDATE GD_HISTORIES SET S_CONTENT = '"+JSON.stringify(n.task)+"', S_REPLY = '"+JSON.stringify(n.reply)+"', I_UPLOADEDFLAG = "+n.uploadedFlag+", S_EXTENDEDINFO = '"+JSON.stringify(l)+"' WHERE I_USERID = "+n.userId+" AND S_TASKID = '"+n.taskId+"' AND I_STATE = "+n.state+";"},n.prototype.toTask=function(n){var l;try{l=JSON.parse(n.S_EXTENDEDINFO)}catch(n){console.error(n)}return{acceptTime:n.D_ACCEPTTIME,arrivedTime:n.D_ARRIVEDTIME,assignTime:n.D_ASSGINTIME,compltedTime:n.D_COMPLETEDTIME,createTime:n.D_CREATETIME,desc:n.S_DESC,goTime:n.D_GOTIME,location:{type:n.S_LNGLATTYPE,lng:n.S_LONGITUDE,lat:n.S_LATITUDE},replyTime:n.D_REPLYTIME,source:n.S_SOURCE,state:n.I_STATE,taskId:n.S_TASKID,taskType:n.S_TASKTYPE,extendedInfo:l}},n.prototype.toTaskDetail=function(n){try{var l=JSON.parse(n.S_DETAILINFO);return n.S_EXTENDEDINFO&&(l.extendedInfo=JSON.parse(n.S_EXTENDEDINFO)),l}catch(n){console.error(n)}},n.prototype.toHistory=function(n){try{var l=void 0,e=void 0;if(n.S_EXTENDEDINFO){var t=JSON.parse(n.S_EXTENDEDINFO);t.taskDetail&&(l=t.taskDetail),t.mediaNames&&t.mediaNames.length>0&&(e=t.mediaNames.split(","))}return{userId:n.I_USERID,taskId:n.S_TASKID,state:n.I_STATE,task:n.S_CONTENT?JSON.parse(n.S_CONTENT):null,reply:JSON.parse(n.S_REPLY),uploadedFlag:n.I_UPLOADEDFLAG,taskDetail:l,mediaNames:e}}catch(n){console.error(n)}},n.prototype.toMediaInsertSql=function(n){return"INSERT INTO GD_MULTIMEDIAS VALUES (null, "+n.userId+", '"+n.taskId+"', "+n.fileType+", '"+n.fileName+"', "+n.uploadedFlag+", '"+(n.fileId?n.fileId:null)+"', null);"},n.prototype.toMediaUpdateSql=function(n,l){if(l){var e="UPDATE GD_MULTIMEDIAS SET I_UPLOADEDFLAG = "+n.uploadedFlag;return n.fileId&&(e+=", S_FILEID = '"+n.fileId+"'"),n.extendedInfo&&(e+=", S_EXTENDEDINFO ='"+JSON.stringify(n.extendedInfo)+"'"),e+=" WHERE ID = "+l.ID+";"}return this.toMediaInsertSql(n)},n.prototype.toMedia=function(n){return{userId:n.I_USERID,taskId:n.S_TASKID,fileType:n.I_FILETYPE,fileName:n.S_FILENAME,uploadedFlag:n.I_UPLOADEDFLAG,fileId:n.S_FILEID,extendedInfo:n.S_EXTENDEDINFO}},n.prototype.getNotUploadMaterilalInfo=function(n){var l=this;return this.globalService.isChrome||!n?Promise.reject(this.paramError):this.openDb().then(function(e){return e.executeSql("SELECT * FROM GD_MATERIALINFO WHERE I_USERID = "+n+" \n          AND I_UPLOADEDFLAG= "+l.globalService.uploadedFlagForLocal+";",{}).then(function(n){var e=n.rows,t=[];if(e&&e.length>0)for(var i=0;i<e.length;i++){var o=e.item(i);o&&t.push(l.toMaterialInfo(o))}return t.length?Promise.resolve(t):Promise.reject("no materialInfos")})})},n.prototype.toPersonnelInsertSql=function(n){return"INSERT INTO GD_PERSONNELS VALUES ("+n.fieldPersonnelId+", '"+n.fieldPersonnelName+"', '"+n.roles.join(",")+"');"},n.prototype.toPersonnel=function(n){return{fieldPersonnelId:n.I_FIELDPERSONNELID,fieldPersonnelName:n.S_FIELDPERSONNELNAME,roles:n.S_ROLES.split(",")}},n}();sn=Object(r.__decorate)([Object(a.o)(),Object(r.__metadata)("design:paramtypes",["function"==typeof(cn=void 0!==an.a&&an.a)&&cn||Object,"function"==typeof(dn=void 0!==rn.a&&rn.a)&&dn||Object,"function"==typeof(_n=void 0!==g&&g)&&_n||Object,"function"==typeof(pn=void 0!==C&&C)&&pn||Object])],sn);var cn,dn,_n,pn,hn=e(158),mn=e(159),fn=e(160),gn=e(161),vn=function(n){function l(l,e,t,i,o,u,a,r){var s=n.call(this,l)||this;return s.globalService=e,s.dbService=t,s.camera=i,s.media=o,s.mediaCapture=u,s.fileService=a,s.videoPlayer=r,s.isPlayingAlarm=!1,s}return Object(r.__extends)(l,n),l.prototype.takePicture=function(n){var l=this;return this.camera.getPicture({quality:50,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(function(n){console.log(n);var l=n.toString();return Promise.resolve(l)},function(n){return console.error(n),Promise.reject(n)}).then(function(n){return l.fileService.movePicture(n)}).then(function(e){return l.dbService.saveMedia({userId:l.globalService.userId,taskId:n,fileType:Q.Picture,fileName:e,uploadedFlag:l.globalService.uploadedFlagForLocal}).then(function(n){return n?Promise.resolve({filePath:l.fileService.getImagesDir()+"/"+e,fileName:e}):Promise.reject("failure to save the db")})})},l.prototype.takeVideo=function(n){var l=this;return this.mediaCapture.captureVideo({limit:1}).then(function(n){console.log(n);var l=n[0].fullPath.toString();return Promise.resolve(l)},function(n){return console.error(n),Promise.reject(n)}).then(function(n){return l.fileService.moveVideo(n)}).then(function(e){return l.dbService.saveMedia({userId:l.globalService.userId,taskId:n,fileType:Q.Vedio,fileName:e,uploadedFlag:l.globalService.uploadedFlagForLocal}).then(function(n){return n?Promise.resolve({filePath:l.fileService.getVideosDir()+"/"+e,fileName:e}):Promise.reject("failure to save the db")})})},l.prototype.playVideo=function(n){var l=this;return new Promise(function(e,t){l.videoPlayer.play(n).then(function(){return console.log("video completed"),t("video completed")}).catch(function(n){return console.log(n),t(n)})})},l.prototype.startRecordAudio=function(){var n=this;return new Promise(function(l,e){var t;try{var i=(new Date).getTime()+".mp3";return(t=n.media.create(n.fileService.getSoundsDir()+"/"+i))?(t.startRecord(),l({file:t,name:i})):e("failure to record audio")}catch(n){return console.error(n),t&&t.release(),e(n)}})},l.prototype.endRecordAudio=function(n){if(!(n instanceof mn.b))return Promise.reject("file is error");try{return n.stopRecord(),n.release(),Promise.resolve(!0)}catch(n){return console.error(n),Promise.reject(n)}},l.prototype.playAudio=function(n,l){var e=this;return new Promise(function(t,i){var o;try{return(o=e.media.create(l?""+n:e.fileService.getSoundsDir()+"/"+n))?(o.play(),t(o)):i("failure to play audio")}catch(n){return console.error(n),o&&o.release(),i(n)}})},l.prototype.playAlarm=function(n){var l=this;if(!this.isPlayingAlarm){this.isPlayingAlarm=!0;var e;try{if(!(e=this.media.create("file:///android_asset/www/assets/sound/"+n)))return void(this.isPlayingAlarm=!1);e.play(),setTimeout(function(){try{e.stop(),e.release()}catch(n){console.error(n)}finally{l.isPlayingAlarm=!1}},5e3)}catch(n){this.isPlayingAlarm=!1,console.error(n),e&&e.release()}}},l.prototype.stopAudio=function(n){if(!(n instanceof mn.b))return Promise.reject("file is error");try{return n.stop(),n.release(),Promise.resolve(!0)}catch(n){return console.error(n),Promise.reject(n)}},l}($);vn=Object(r.__decorate)([Object(a.o)(),Object(r.__metadata)("design:paramtypes",["function"==typeof(bn=void 0!==N.e&&N.e)&&bn||Object,"function"==typeof(yn=void 0!==g&&g)&&yn||Object,"function"==typeof(kn=void 0!==sn&&sn)&&kn||Object,"function"==typeof(Sn=void 0!==hn.a&&hn.a)&&Sn||Object,"function"==typeof(In=void 0!==mn.a&&mn.a)&&In||Object,"function"==typeof(Tn=void 0!==fn.a&&fn.a)&&Tn||Object,"function"==typeof(En=void 0!==C&&C)&&En||Object,"function"==typeof(Cn=void 0!==gn.a&&gn.a)&&Cn||Object])],vn);var bn,yn,kn,Sn,In,Tn,En,Cn,On;!function(n){n[n.DownloadTasksAndDetails=0]="DownloadTasksAndDetails",n[n.UploadMediasOfHistory=1]="UploadMediasOfHistory",n[n.UploadHistoriesAndMedias=2]="UploadHistoriesAndMedias",n[n.UploadMaterialInfos=3]="UploadMaterialInfos",n[n.UploadAllInfos=4]="UploadAllInfos"}(On||(On={}));var wn=function(){function n(n,l,e,t,i,o,u){this.downloadService=n,this.uploadService=l,this.globalService=e,this.dbService=t,this.mediaService=i,this.events=o,this.configService=u,this.syncEvent="sync:service",this.downloadTaskEvent="task:download",this.downloadTaskDetailEvent="task:detail:download",this.uploadHistoryEvent="history:upload",this.uploadMediaEvent="media:upload",this.uploadMaterialInfoEvent="materialInfo:upload",this.queue=[]}return n.prototype.init=function(){this.isServiceBusy=!1,this.subscribeSyncEvent(),this.subscribeDownloadEvent(),this.subscribeUploadEvent(),this.subscribeUploadMaterialInfoEvent()},n.prototype.destroy=function(){this.events.unsubscribe(this.syncEvent),this.events.unsubscribe(this.downloadTaskEvent),this.events.unsubscribe(this.downloadTaskDetailEvent),this.events.unsubscribe(this.uploadHistoryEvent),this.events.unsubscribe(this.uploadMediaEvent),this.events.unsubscribe(this.uploadMaterialInfoEvent)},n.prototype.sendMsg=function(n){this.queue.push(n),this.events.publish(this.syncEvent)},n.prototype.accept=function(n,l,e){var t=this;return void 0===e&&(e={uploadedFlag:this.globalService.uploadedFlagForLocal}),this.configService.isDebugMode(),n&&l?this.globalService.isChrome?this.uploadService.accept(n).then(function(n){return e.uploadedFlag=n?t.globalService.uploadedFlagForUploaded:t.globalService.uploadedFlagForLocal,n}):this.dbService.getHistories(n.userId,n.taskId).then(function(i){return t.isExistingNotUploadedHistory(i,B.Accept)?t.dbService.saveHistory({userId:n.userId,taskId:n.taskId,state:B.Accept,task:l,reply:n,uploadedFlag:e.uploadedFlag=t.globalService.uploadedFlagForLocal}).then(function(n){return t.dbService.saveTask(l)}):t.uploadService.accept(n).then(function(i){return t.dbService.saveHistory({userId:n.userId,taskId:n.taskId,state:B.Accept,task:l,reply:n,uploadedFlag:e.uploadedFlag=i?t.globalService.uploadedFlagForUploaded:t.globalService.uploadedFlagForLocal})}).then(function(n){return t.dbService.saveTask(l)})}):Promise.reject("param is error")},n.prototype.go=function(n,l,e){var t=this;return void 0===e&&(e={uploadedFlag:this.globalService.uploadedFlagForLocal}),this.configService.isDebugMode(),n&&l?this.globalService.isChrome?this.uploadService.go(n).then(function(n){return e.uploadedFlag=n?t.globalService.uploadedFlagForUploaded:t.globalService.uploadedFlagForLocal,n}):this.dbService.getHistories(n.userId,n.taskId).then(function(i){return t.isExistingNotUploadedHistory(i,B.Go)?t.dbService.saveHistory({userId:n.userId,taskId:n.taskId,state:B.Go,task:l,reply:n,uploadedFlag:e.uploadedFlag=t.globalService.uploadedFlagForLocal}).then(function(n){return t.dbService.saveTask(l)}):t.uploadService.go(n).then(function(i){return t.dbService.saveHistory({userId:n.userId,taskId:n.taskId,state:B.Go,task:l,reply:n,uploadedFlag:e.uploadedFlag=i?t.globalService.uploadedFlagForUploaded:t.globalService.uploadedFlagForLocal})}).then(function(n){return t.dbService.saveTask(l)})}):Promise.reject("param is error")},n.prototype.arrive=function(n,l,e){var t=this;return void 0===e&&(e={uploadedFlag:this.globalService.uploadedFlagForLocal}),this.configService.isDebugMode(),n&&l?this.globalService.isChrome?this.uploadService.arrive(n).then(function(n){return e.uploadedFlag=n?t.globalService.uploadedFlagForUploaded:t.globalService.uploadedFlagForLocal,n}):this.dbService.getHistories(n.userId,n.taskId).then(function(i){return t.isExistingNotUploadedHistory(i,B.Arrived)?t.dbService.saveHistory({userId:n.userId,taskId:n.taskId,state:B.Arrived,task:l,reply:n,uploadedFlag:e.uploadedFlag=t.globalService.uploadedFlagForLocal}).then(function(n){return t.dbService.saveTask(l)}):t.uploadService.arrive(n).then(function(i){return t.dbService.saveHistory({userId:n.userId,taskId:n.taskId,state:B.Arrived,task:l,reply:n,uploadedFlag:e.uploadedFlag=i?t.globalService.uploadedFlagForUploaded:t.globalService.uploadedFlagForLocal})}).then(function(n){return t.dbService.saveTask(l)})}):Promise.reject("param is error")},n.prototype.reply=function(n,l,e,t,i){var o=this;return void 0===i&&(i={uploadedFlag:this.globalService.uploadedFlagForLocal}),this.configService.isDebugMode(),n&&l&&e&&t?this.globalService.isChrome?this.uploadService.reply(n).then(function(n){return i.uploadedFlag=n?o.globalService.uploadedFlagForUploaded:o.globalService.uploadedFlagForLocal,n}):this.dbService.getHistories(n.userId,n.taskId).then(function(u){return o.isExistingNotUploadedHistory(u,B.Reply)?o.dbService.saveHistory({userId:n.userId,taskId:n.taskId,state:B.Reply,task:l,reply:n,uploadedFlag:i.uploadedFlag=o.globalService.uploadedFlagForLocal,taskDetail:e,mediaNames:t}).then(function(n){return o.dbService.saveTask(l)}):o.uploadService.reply(n).catch(function(n){return console.error(n)}).then(function(u){return o.dbService.saveHistory({userId:n.userId,taskId:n.taskId,state:B.Reply,task:l,reply:n,uploadedFlag:i.uploadedFlag=u?o.globalService.uploadedFlagForUploaded:o.globalService.uploadedFlagForLocal,taskDetail:e,mediaNames:t})}).then(function(n){return o.dbService.saveTask(l)})}):Promise.reject("param is error")},n.prototype.reject=function(n,l,e){var t=this;return void 0===e&&(e={uploadedFlag:this.globalService.uploadedFlagForLocal}),this.configService.isDebugMode(),n&&l?this.globalService.isChrome?this.uploadService.reject(n).then(function(n){return e.uploadedFlag=n?t.globalService.uploadedFlagForUploaded:t.globalService.uploadedFlagForLocal,n}):this.dbService.getHistories(n.userId,n.taskId).then(function(i){return t.isExistingNotUploadedHistory(i,B.Reject)?t.dbService.saveHistory({userId:n.userId,taskId:n.taskId,state:B.Reject,task:l,reply:n,uploadedFlag:e.uploadedFlag=t.globalService.uploadedFlagForLocal}).then(function(n){return t.dbService.saveTask(l)}):t.uploadService.reject(n).then(function(i){return t.dbService.saveHistory({userId:n.userId,taskId:n.taskId,state:B.Reject,task:l,reply:n,uploadedFlag:e.uploadedFlag=i?t.globalService.uploadedFlagForUploaded:t.globalService.uploadedFlagForLocal})}).then(function(n){return t.dbService.saveTask(l)})}):Promise.reject("param is error")},n.prototype.delay=function(n,l,e){var t=this;return void 0===e&&(e={uploadedFlag:this.globalService.uploadedFlagForLocal}),this.configService.isDebugMode(),n&&l?this.globalService.isChrome?this.uploadService.delay(n).then(function(n){return e.uploadedFlag=n?t.globalService.uploadedFlagForUploaded:t.globalService.uploadedFlagForLocal,n}):this.dbService.getHistories(n.userId,n.taskId).then(function(i){return t.isExistingNotUploadedHistory(i,B.Delay)?t.dbService.saveHistory({userId:n.userId,taskId:n.taskId,state:B.Delay,task:l,reply:n,uploadedFlag:e.uploadedFlag=t.globalService.uploadedFlagForLocal}).then(function(n){return t.dbService.saveTask(l)}):t.uploadService.delay(n).then(function(i){return t.dbService.saveHistory({userId:n.userId,taskId:n.taskId,state:B.Delay,task:l,reply:n,uploadedFlag:e.uploadedFlag=i?t.globalService.uploadedFlagForUploaded:t.globalService.uploadedFlagForLocal})}).then(function(n){return t.dbService.saveTask(l)})}):Promise.reject("param is error")},n.prototype.cancel=function(n,l,e){var t=this;return void 0===e&&(e={uploadedFlag:this.globalService.uploadedFlagForLocal}),this.configService.isDebugMode(),n&&l?this.globalService.isChrome?this.uploadService.cancel(n).then(function(n){return e.uploadedFlag=n?t.globalService.uploadedFlagForUploaded:t.globalService.uploadedFlagForLocal,n}):this.dbService.getHistories(n.userId,n.taskId).then(function(i){return t.isExistingNotUploadedHistory(i,B.Cancel)?t.dbService.saveHistory({userId:n.userId,taskId:n.taskId,state:B.Cancel,task:l,reply:n,uploadedFlag:e.uploadedFlag=t.globalService.uploadedFlagForLocal}).then(function(n){return t.dbService.saveTask(l)}):t.uploadService.cancel(n).then(function(i){return t.dbService.saveHistory({userId:n.userId,taskId:n.taskId,state:B.Cancel,task:l,reply:n,uploadedFlag:e.uploadedFlag=i?t.globalService.uploadedFlagForUploaded:t.globalService.uploadedFlagForLocal})}).then(function(n){return t.dbService.saveTask(l)})}):Promise.reject("param is error")},n.prototype.subscribeSyncEvent=function(){var n=this;this.events.subscribe(this.syncEvent,function(){if(n.isServiceBusy)console.log("service is busy");else if(n.queue.length<=0)console.log("the length of this queue is 0");else{n.isServiceBusy=!0;var l=n.queue.shift();switch(l.msgType){case On.DownloadTasksAndDetails:n.downloadTasks(l.msgType);break;case On.UploadMediasOfHistory:n.uploadMedias(l.msgType,l.taskId);break;case On.UploadHistoriesAndMedias:n.uploadHistories(l.msgType);break;case On.UploadMaterialInfos:n.uploadUnUploadMaterialInfo(l.msgType);break;case On.UploadAllInfos:n.uploadHistories(l.msgType);break;default:n.next()}}})},n.prototype.subscribeDownloadEvent=function(){var n=this;this.events.subscribe(this.downloadTaskEvent,function(l,e,t){n.downloadService.getTasks(n.globalService.userId,e,t).then(function(n){for(var l=[],e=0,t=n;e<t.length;e++){!function(n){n.taskId+="#"+n.assignTime;l.find(function(l){return l.taskId===n.taskId&&l.acceptTime===n.acceptTime&&l.arrivedTime===n.arrivedTime&&l.assignTime===n.assignTime&&l.compltedTime===n.compltedTime&&l.createTime===n.createTime&&l.desc===n.desc&&l.goTime===n.goTime&&l.replyTime===n.replyTime&&l.source===n.source&&l.state===n.state&&l.taskType===n.taskType})||l.push(n)}(t[e])}return l}).then(function(l){return n.dbService.saveTasks(n.globalService.userId,l)}).then(function(i){n.events.publish(n.downloadTaskEvent,l,e+t,t)}).catch(function(e){console.error(e),l==On.DownloadTasksAndDetails?n.downloadDetails(l):(n.next(),n.events.publish(n.globalService.myWorkDownloadFinishEvent))})}),this.events.subscribe(this.downloadTaskDetailEvent,function(l,e){if(e&&e.length>0){var t=e.shift();if(t)return n.downloadService.getTaskDetail(t.split("#")[0]).then(function(l){return l.taskId=t,n.dbService.saveTaskDetail(l).then(function(e){return!!e&&n.dbService.updateTaskExtendInfo(l)})}).catch(function(n){return console.error(n)}).then(function(t){return n.events.publish(n.downloadTaskDetailEvent,l,e)})}n.next(),n.events.publish(n.globalService.myWorkDownloadFinishEvent)})},n.prototype.subscribeUploadEvent=function(){var n=this;this.events.subscribe(this.uploadHistoryEvent,function(l,e){if(e&&e.length>0){var t=e.shift(),i=t.task,o=void 0;if(i&&t.reply){var u=t.taskDetail,a=t.mediaNames;switch(t.state){case B.Accept:o=n.accept(t.reply,i);break;case B.Go:o=n.go(t.reply,i);break;case B.Arrived:o=n.arrive(t.reply,i);break;case B.Reply:o=n.reply(t.reply,i,u,a);break;case B.Reject:o=n.reject(t.reply,i);break;case B.Delay:o=n.delay(t.reply,i);break;case B.Cancel:o=n.cancel(t.reply,i);break;default:o=Promise.reject("state is error")}}else o=Promise.reject("state is error");o.then(function(n){return console.log(n)}).catch(function(n){return console.error(n)}).then(function(){return n.events.publish(n.uploadHistoryEvent,l,e)})}else l===On.UploadHistoriesAndMedias||l===On.UploadAllInfos?n.uploadMedias(l):(n.next(),n.events.publish(n.globalService.historyUploadFinishEvent))}),this.events.subscribe(this.uploadMediaEvent,function(l,e){if(e&&e.length>0){var t=e.shift(),i=t.mediaNames;if(i&&i.length>0){for(var o=0;o<i.length;o++)i[o]=i[o].replace(/#\d*/,"");n.dbService.getMediaList(n.globalService.userId,t.taskId,i,[n.globalService.uploadedFlagForLocal,n.globalService.uploadedFlagForUploading]).then(function(l){return n.configService.isNewFilService()?n.uploadMediaListV2(l):n.uploadMediaList(l)}).catch(function(n){return console.error(n)}).then(function(){return n.events.publish(n.uploadMediaEvent,l,e)})}else n.events.publish(n.uploadMediaEvent,l,e)}else l===On.UploadAllInfos?n.uploadUnUploadMaterialInfo(l):(n.next(),n.events.publish(n.globalService.historyUploadFinishEvent))})},n.prototype.downloadTasks=function(n){this.globalService.isChrome?(this.next(),this.events.publish(this.globalService.myWorkDownloadFinishEvent)):this.events.publish(this.downloadTaskEvent,n,this.globalService.taskSinceDefault,this.globalService.taskCountDefault100)},n.prototype.downloadDetails=function(n){var l=this;this.globalService.isChrome?(this.next(),this.events.publish(this.globalService.myWorkDownloadFinishEvent)):this.dbService.getNoDetailTaskIds(this.globalService.userId).catch(function(n){return console.error(n)}).then(function(e){return l.events.publish(l.downloadTaskDetailEvent,n,e)})},n.prototype.uploadHistories=function(n){var l=this;this.globalService.isChrome?(this.next(),this.events.publish(this.globalService.historyUploadFinishEvent)):this.dbService.getHistories(this.globalService.userId,void 0,void 0,[this.globalService.uploadedFlagForLocal,this.globalService.uploadedFlagForUploading]).catch(function(n){return console.error(n)}).then(function(e){return l.events.publish(l.uploadHistoryEvent,n,e)})},n.prototype.uploadMedias=function(n,l){var e=this;this.globalService.isChrome?(this.next(),this.events.publish(this.globalService.historyUploadFinishEvent)):this.dbService.getHistories(this.globalService.userId,l,[B.Reply],[]).catch(function(n){return console.error(n)}).then(function(l){return e.events.publish(e.uploadMediaEvent,n,l)})},n.prototype.uploadMediaListV2=function(n){var l=this;if(n&&n.length>0){var e=n.map(function(n){return l.uploadOneMediaV2(n)});return Promise.all(e).then(function(e){var t=n.map(function(n){return n.extendedInfo});return l.uploadService.uploadMediaIdsV2(n[0].taskId.split("#")[0],l.globalService.userId,t)}).then(function(e){for(var t=0,i=n;t<i.length;t++){i[t].uploadedFlag=e?l.globalService.uploadedFlagForUploaded:l.globalService.uploadedFlagForLocal}var o=n.map(function(n){return l.dbService.saveMedia(n)});return Promise.all(o).then(function(n){return!0})})}return Promise.resolve(!0)},n.prototype.uploadMediaList=function(n){var l=this;if(n&&n.length>0){var e=n.map(function(n){return l.uploadOneMedia(n)});return Promise.all(e).then(function(e){var t=n.map(function(n){return n.fileId});return l.uploadService.uploadMediaIds(n[0].taskId.split("#")[0],t.join(","))}).then(function(e){for(var t=0,i=n;t<i.length;t++){i[t].uploadedFlag=e?l.globalService.uploadedFlagForUploaded:l.globalService.uploadedFlagForLocal}var o=n.map(function(n){return l.dbService.saveMedia(n)});return Promise.all(o).then(function(n){return!0})})}return Promise.resolve(!0)},n.prototype.uploadOneMediaV2=function(n){var l=this;return n.fileId&&"null"!==n.fileId&&"undefined"!==n.fileId?Promise.resolve(!0):this.uploadService.uploadMediaV2(n).then(function(e){return e?(n.fileId=e,l.dbService.saveMedia(n)):Promise.reject("fileId is error")})},n.prototype.uploadOneMedia=function(n){var l=this;return n.fileId&&"null"!==n.fileId&&"undefined"!==n.fileId?Promise.resolve(!0):this.uploadService.uploadMedia(n).then(function(e){return e?(n.fileId=e,l.dbService.saveMedia(n)):Promise.reject("fileId is error")})},n.prototype.isExistingNotUploadedHistory=function(n,l){var e=!1;if(n&&n.length>0)for(var t=0,i=n;t<i.length;t++){var o=i[t];if(o.state===l)break;o.uploadedFlag!==this.globalService.uploadedFlagForUploaded&&(e=!0)}return e},n.prototype.uploadUnUploadMaterialInfo=function(n){var l=this;return this.globalService.isChrome?(this.next(),void this.events.publish(this.globalService.historyUploadFinishEvent)):this.dbService.getNotUploadMaterilalInfo(this.globalService.userId).catch(function(n){return console.log(n)}).then(function(n){return l.events.publish(l.uploadMaterialInfoEvent,n)})},n.prototype.subscribeUploadMaterialInfoEvent=function(){var n=this;this.events.subscribe(this.uploadMaterialInfoEvent,function(l){if(l&&l.length>0){var e=l.shift();e&&n.uploadMaterialInfo(e).then(function(n){return console.log(n)}).catch(function(n){return console.log(n)}).then(function(){return n.events.publish(n.uploadMaterialInfoEvent,l)})}else n.next(),n.events.publish(n.globalService.historyUploadFinishEvent)})},n.prototype.uploadMaterialInfo=function(n){var l=this;return new Promise(function(e,t){return l.uploadService.uploadMaterialsAdd(n.infos).then(function(i){i?(n.uploadFlag=l.globalService.uploadedFlagForUploaded,e(l.dbService.updateFlagMaterials(n))):t("upload failed")}).catch(function(n){t(!1)})})},n.prototype.next=function(){this.isServiceBusy=!1,this.events.publish(this.syncEvent)},n}();wn=Object(r.__decorate)([Object(a.o)(),Object(r.__metadata)("design:paramtypes",["function"==typeof(Dn=void 0!==X&&X)&&Dn||Object,"function"==typeof(Pn=void 0!==nn&&nn)&&Pn||Object,"function"==typeof(jn=void 0!==g&&g)&&jn||Object,"function"==typeof(Nn=void 0!==sn&&sn)&&Nn||Object,"function"==typeof(Mn=void 0!==vn&&vn)&&Mn||Object,"function"==typeof(xn=void 0!==s.d&&s.d)&&xn||Object,"function"==typeof(Ln=void 0!==M&&M)&&Ln||Object])],wn);var Dn,Pn,jn,Nn,Mn,xn,Ln,An=function(){return function(){}}(),Un=function(){return function(){}}(),Rn=function(){return function(){}}(),Fn=function(){return function(){}}(),Bn=function(n){function l(l,e,t,i,o,u,a,r){var s=n.call(this,l,e,t,i,u,a,o)||this;return s.fileService=r,s.isInitialized=!1,s}return Object(r.__extends)(l,n),l.prototype.init=function(){var l=this;return this.isInitialized?Promise.resolve(!0):(n.prototype.init.call(this),this.dbService.init().then(function(n){return l.configService.initConfigs()}).then(function(n){return l.isInitialized=!0}).catch(function(n){console.error(n),l.isInitialized=!1}))},l.prototype.destroy=function(){this.isInitialized&&(n.prototype.destroy.call(this),this.dbService.destroy())},l.prototype.downloadTasksAndDetails=function(){n.prototype.sendMsg.call(this,{msgType:On.DownloadTasksAndDetails})},l.prototype.uploadHistoriesAndMedias=function(){n.prototype.sendMsg.call(this,{msgType:On.UploadHistoriesAndMedias})},l.prototype.uploadAllInfos=function(){n.prototype.sendMsg.call(this,{msgType:On.UploadAllInfos})},l.prototype.uploadMediasOfOneTask=function(l){n.prototype.sendMsg.call(this,{msgType:On.UploadMediasOfHistory,taskId:l})},l.prototype.getTasks=function(n,l,e){return this.globalService.isChrome?this.downloadService.getTasks(this.globalService.userId,n,l).then(function(n){return n.filter(function(n){return n.state!==B.Reply&&n.state!==B.Reject})}):this.dbService.getTasks(this.globalService.userId,n,l,[B.Dispatch,B.Accept,B.Go,B.Arrived,B.Delay,B.Continue],e)},l.prototype.getTaskCount=function(){return this.globalService.isChrome?Promise.resolve(0):this.dbService.getTaskCount(this.globalService.userId)},l.prototype.getTaskDetail=function(n){var l=this;return this.globalService.isChrome?this.downloadService.getTaskDetail(n):this.dbService.getTaskDetail(n).then(function(e){return e&&e.taskId?Promise.resolve(e):l.downloadService.getTaskDetail(n.split("#")[0]).then(function(e){return e.taskId=n,l.dbService.saveTaskDetail(e).then(function(n){return!!n&&l.dbService.updateTaskExtendInfo(e)})}).then(function(e){return l.dbService.getTaskDetail(n)})})},l.prototype.checkOverdueTimeTasks=function(n){var l=this;return this.globalService.isChrome?n?this.downloadService.getTasks(this.globalService.userId,1,100).then(function(e){if(!e||e.length<=0)return Promise.resolve([]);var t=e.map(function(n){return l.downloadService.getTaskDetail(n.taskId)});return Promise.all(t).then(function(l){if(!l||l.length<=0)return Promise.resolve([]);for(var t=(new Date).getTime(),i=n.arrived+t,o=n.reply+t,u=[],a=0,r=l;a<r.length;a++){!function(n){if(n.arrivedDeadLine&&n.arrivedDeadLine<i||n.replyDeadLine&&n.replyDeadLine<o){var l=e.find(function(l){return l.taskId===n.taskId});l&&(n.arrivedDeadLine<i?l.extendedInfo={arrivedDeadLine:n.arrivedDeadLine}:n.replyDeadLine<o&&(l.extendedInfo={replyDeadLine:n.replyDeadLine}),u.push(l))}}(r[a])}return Promise.resolve(u)})}):Promise.resolve([]):this.dbService.checkOverdueTimeTasks(this.globalService.userId,n,(new Date).getTime())},l.prototype.getHistories=function(n,l,e){return this.globalService.isChrome?Promise.reject("chrome"):this.dbService.getHistories(this.globalService.userId,void 0,[B.Reject,B.Reply],[],e,n,l)},l.prototype.getReplyHistories=function(n){return this.globalService.isChrome?Promise.resolve([]):this.dbService.getSpecialHistories(this.globalService.userId,n,B.Reply)},l.prototype.getHistory=function(n,l){return this.globalService.isChrome?Promise.reject("chrome"):this.dbService.getSpecialHistories(this.globalService.userId,[n],l).then(function(n){return n.length>0?Promise.resolve(n[0]):Promise.reject("none history")})},l.prototype.checkIfExistNotUploadedHistories=function(n){return this.globalService.isChrome?Promise.resolve([]):this.dbService.getSpecialHistories(this.globalService.userId,n,void 0,[this.globalService.uploadedFlagForLocal,this.globalService.uploadedFlagForUploading])},l.prototype.deleteOneTaskWithAllInfos=function(n){return this.globalService.isChrome?Promise.resolve(!1):this.dbService.deleteOneTaskWithAllInfos(this.globalService.userId,n)},l.prototype.getUnDispatchedTasks=function(n,l){return this.downloadService.getUnDispatchedTasks(this.globalService.userId,n,l)},l.prototype.getDispatchedTasks=function(n,l,e){return this.downloadService.getDispatchedTasks(this.globalService.userId,n,l,e)},l.prototype.acceptEx=function(n){return this.uploadService.acceptEx(n)},l.prototype.dispatch=function(n){return this.uploadService.dispatch(n)},l.prototype.cancelEx=function(n){return this.uploadService.cancelEx(n)},l.prototype.downloadWords=function(){var n=this;return this.downloadService.getAllWords("all").then(function(l){return n.dbService.saveWords(l)}).catch(function(l){return console.error(l),n.globalService.showToast(l),Promise.resolve(!1)})},l.prototype.checkIfDownloadWords=function(){var n=this;return this.dbService.getWordsCount().then(function(l){return l>0?Promise.resolve(!0):n.downloadService.getAllWords("all").then(function(l){return n.dbService.saveWords(l)})}).catch(function(l){return console.error(l),n.globalService.showToast(l),Promise.resolve(!1)})},l.prototype.checkIfDownloadMaterials=function(){var n=this;return this.configService.getSysRegion().then(function(l){return l&&l===M.fushunRegion?n.dbService.getMaterialsCount().then(function(l){return l>0?Promise.resolve(!0):n.downloadService.getAllMaterials("all").then(function(l){return n.dbService.saveMaterials(l)})}).catch(function(l){return console.error(l),n.globalService.showToast(l),Promise.resolve(!1)}):Promise.resolve(!0)})},l.prototype.downloadMaterials=function(){var n=this;return this.configService.getSysRegion().then(function(l){return l&&l===M.fushunRegion?n.downloadService.getAllMaterials("all").then(function(l){return n.dbService.saveMaterials(l)}).catch(function(l){return console.error(l),n.globalService.showToast(l),Promise.resolve(!1)}):Promise.resolve(!0)})},l.prototype.getOptMaterialLB=function(){var n=this;return this.optMaterialLB&&this.optMaterialLB.length>0?Promise.resolve(this.optMaterialLB):this.dbService.getMaterials("LB").then(function(l){return n.optMaterialLB=l}).catch(function(n){console.log(n)})},l.prototype.getOptMaterialXH=function(n){var l=this;return this.optMaterialXH&&this.optMaterialXH.length>0&&this.optMaterialXH[0].parentId==n?Promise.resolve(this.optMaterialXH):this.dbService.getMaterials("XH").then(function(e){for(var t=[],i=0,o=e;i<o.length;i++){var u=o[i];u.parentId==n&&t.push(u)}return l.optMaterialXH=t}).catch(function(n){console.log(n)})},l.prototype.getOptMaterialGG=function(n){var l=this;return this.optMaterialGG&&this.optMaterialGG.length>0&&this.optMaterialGG[0].parentId==n?Promise.resolve(this.optMaterialGG):this.dbService.getMaterials("GG").then(function(e){for(var t=[],i=0,o=e;i<o.length;i++){var u=o[i];u.parentId==n&&t.push(u)}return l.optMaterialGG=t}).catch(function(n){console.log(n)})},l.prototype.getOptMaterialCJ=function(n){var l=this;return this.optMaterialCJ&&this.optMaterialCJ.length>0&&this.optMaterialCJ[0].parentId==n?Promise.resolve(this.optMaterialCJ):this.dbService.getMaterials("CJ").then(function(e){for(var t=[],i=0,o=e;i<o.length;i++){var u=o[i];u.parentId==n&&t.push(u)}return l.optMaterialCJ=t}).catch(function(n){console.log(n)})},l.prototype.getOptTypes=function(){var n=this;return this.optTypes&&this.optTypes.length>0?Promise.resolve(this.optTypes):this.dbService.getWords("CL_LEIBIE").catch(function(l){return console.error(l),n.downloadService.getAllWords("CL_LEIBIE")}).then(function(l){return n.optTypes=n.tree2list(l,"处理类别")})},l.prototype.getOptContents=function(n){var l=this;return this.optContents&&this.optContents.length>0&&this.optContents[0].wParentId===n?Promise.resolve(this.optContents):this.dbService.getWords("CL_NEIRONG").catch(function(n){return console.error(n),l.downloadService.getAllWords("CL_NEIRONG")}).then(function(e){for(var t=[],i=0,o=e;i<o.length;i++){var u=o[i];u.wParentId===n&&t.push(u)}return l.optContents=t})},l.prototype.getOptReasons=function(){var n=this;return this.optReasons&&this.optReasons.length>0?Promise.resolve(this.optReasons):this.dbService.getWords("FS_YUANYIN").catch(function(l){return console.error(l),n.downloadService.getAllWords("FS_YUANYIN")}).then(function(l){return n.optReasons=n.tree2list(l,"发生原因")})},l.prototype.getOptSolutions=function(){var n=this;return this.optSolutions&&this.optSolutions.length>0?Promise.resolve(this.optSolutions):this.dbService.getWords("JJ_CUOSHI").catch(function(l){return console.error(l),n.downloadService.getAllWords("JJ_CUOSHI")}).then(function(l){return n.optSolutions=n.tree2list(l,"解决措施")})},l.prototype.getOptResults=function(){var n=this;return this.optResults&&this.optResults.length>0?Promise.resolve(this.optResults):this.dbService.getWords("CL_JIEGUO").catch(function(l){return console.error(l),n.downloadService.getAllWords("CL_JIEGUO")}).then(function(l){return n.optResults=n.tree2list(l,"处理结果")})},l.prototype.getReflectTypes=function(){var n=this;return this.reflectTypes&&this.reflectTypes.length>0?Promise.resolve(this.reflectTypes):this.dbService.getWords("FY_LEIBIE").catch(function(l){return console.error(l),n.downloadService.getAllWords("FY_LEIBIE")}).then(function(l){return n.reflectTypes=n.tree2list(l,"反映类别")})},l.prototype.getReflectContents=function(){var n=this;return this.reflectContents&&this.reflectContents.length>0?Promise.resolve(this.reflectContents):this.dbService.getWords("FY_NEIRONG").catch(function(l){return console.error(l),n.downloadService.getAllWords("FY_NEIRONG")}).then(function(l){return n.reflectContents=n.tree2list(l,"反映内容")})},l.prototype.searchTask=function(n){return this.downloadService.getSearchTasks(this.globalService.userId,n)},l.prototype.searchTaskCount=function(n){return this.downloadService.getSearchTaskCount(this.globalService.userId,n)},l.prototype.searchTaskDetails=function(n){return this.downloadService.getSearchTaskDetails(n)},l.prototype.getNews=function(){return this.downloadService.getNews()},l.prototype.doLogin=function(n){return this.downloadService.doLogin(n)},l.prototype.getManageInfo=function(){return this.downloadService.getManagerUserInfo(this.globalService.userId)},l.prototype.getWorkInfo=function(){return this.downloadService.getWorkerUserInfo(this.globalService.userId)},l.prototype.checkAppVersion=function(n){return this.downloadService.checkAppVersion(n)},l.prototype.checkDataVersion=function(n){return this.downloadService.checkDataVersion(n)},l.prototype.getPersonnels=function(n){var l=this;return this.personnels&&this.personnels.length>0?Promise.resolve(this.personnels):this.dbService.getPersonnels().catch(function(n){return console.error(n),l.downloadService.getPersonnels(l.globalService.userId)}).then(function(n){return l.personnels=n})},l.prototype.downloadPersonnels=function(){var n=this;return this.globalService.isWorker?Promise.resolve(!0):this.downloadService.getPersonnels(this.globalService.userId).then(function(l){return n.dbService.savePersonnels(l)}).catch(function(l){return console.error(l),n.globalService.showToast(l),Promise.resolve(!1)})},l.prototype.checkIfDownloadPersonnels=function(){var n=this;return this.dbService.getPersonnelsCount().then(function(l){return l>0?Promise.resolve(!0):n.downloadService.getPersonnels(n.globalService.userId).then(function(l){return n.dbService.savePersonnels(l)})}).catch(function(l){return console.error(l),n.globalService.showToast(l),Promise.resolve(!1)})},l.prototype.takePicture=function(n){return this.mediaService.takePicture(n)},l.prototype.takeVideo=function(n){return this.mediaService.takeVideo(n)},l.prototype.playVideo=function(n){return this.mediaService.playVideo(n)},l.prototype.startRecordAudio=function(){return this.mediaService.startRecordAudio()},l.prototype.endRecordAudio=function(n){return this.mediaService.endRecordAudio(n)},l.prototype.playAudio=function(n){return this.mediaService.playAudio(n)},l.prototype.stopAudio=function(n){return this.mediaService.stopAudio(n)},l.prototype.playAlarm=function(){this.mediaService.playAlarm("alertDeadline.mp3")},l.prototype.saveAudio=function(n,l){return n&&l?this.dbService.saveMedia({userId:this.globalService.userId,taskId:n,fileType:Q.Audio,fileName:l,uploadedFlag:this.globalService.uploadedFlagForLocal}):Promise.reject("taskId or fileName is error")},l.prototype.deleteOneMedia=function(n){return n?this.dbService.deleteOneMedia(this.globalService.userId,n):Promise.reject("taskId or fileName is error")},l.prototype.tree2list=function(n,l){function e(n,l,t){for(var i=!1,o=0,u=n;o<u.length;o++){var a=u[o];a.wParentId===t.wid&&(e(n,l,a),i=!0)}i||l.push(t)}for(var t,i=0,o=n;i<o.length;i++){var u=o[i];if(u.wName===l&&0===u.wParentId){t=u;break}}if(!t)return[];var a=[];return e(n,a,t),a},l.prototype.saveMaterialInfo=function(n){var l=this;return new Promise(function(e,t){l.dbService.saveMaterialInfo(n).then(function(i){if(i)return l.uploadService.uploadMaterialsAdd(n.infos).then(function(i){i?(n.uploadFlag=l.globalService.uploadedFlagForUploaded,e(l.dbService.updateFlagMaterials(n))):t("upload failed")}).catch(function(n){t(!1)});t("save to db failed")}).catch(function(n){t(n)})})},l.prototype.getMaterialInfo=function(n){var l=this;return new Promise(function(e,t){l.dbService.getMaterialInfo(n).then(function(i){for(var o=[],u=0,a=i.infos;u<a.length;u++){o.push(l.getMaterialAndUnit(a[u]))}Promise.all(o).then(function(l){var t=new Fn;t.taskId=n,t.infos=l,t.uploadFlag=i.uploadFlag,e(t)}).catch(function(n){t(n)})}).catch(function(n){t(n)})})},l.prototype.getMaterialAndUnit=function(n){var l=this;return new Promise(function(e,t){Promise.all([l.dbService.getMaterial(n.materialCategory),l.dbService.getMaterial(n.materialType),l.dbService.getMaterial(n.materialSize),l.dbService.getMaterial(n.manufacturer),l.configService.getOneMaterialUnit(n.materialUnit)]).then(function(l){console.log(l);var t=new An;t.category=l[0],t.type=l[1],t.size=l[2],t.productor=l[3],t.unit=l[4],t.count=n.count,t.remark=n.remark,e(t)}).catch(function(n){console.log(n)})})},l.prototype.getMaintainInfo=function(n){var l=this;return new Promise(function(e,t){l.dbService.queryMaintainInfo(n).then(function(n){e(n)}).catch(function(i){return console.log("getMaintainInfo:"+i),l.downloadService.getMaintainInfo(n).then(function(n){l.dbService.saveMaintainInfo(n).then(function(l){l?e(n):t(l)}).catch(function(n){t(n)})}).catch(function(n){t(n)})})})},l.prototype.uploadNotUploadMaterialInfos=function(){n.prototype.sendMsg.call(this,{msgType:On.UploadMaterialInfos})},l.prototype.playCachedAudio=function(n,l){var e=this;return this.fileService.checkFile(this.fileService.getCacheDir()+"/",l).then(function(t){var i=e.fileService.getCacheDir()+"/"+l;return t?Promise.resolve(i):e.downloadService.downloadFile(n,i)}).then(function(n){return n&&e.mediaService.playAudio(n,!0)})},l.prototype.playCachedVideo=function(n,l){var e=this;return this.fileService.checkFile(this.fileService.getCacheDir()+"/",l).then(function(t){var i=e.fileService.getCacheDir()+"/"+l;return t?Promise.resolve(i):e.downloadService.downloadFile(n,i)}).then(function(n){return n&&e.playVideo(n)})},l.prototype.getAttachments=function(n){return this.downloadService.getAttachments(n)},l}(wn);Bn=Object(r.__decorate)([Object(a.o)(),Object(r.__metadata)("design:paramtypes",["function"==typeof(Kn=void 0!==X&&X)&&Kn||Object,"function"==typeof(Hn=void 0!==nn&&nn)&&Hn||Object,"function"==typeof(Gn=void 0!==g&&g)&&Gn||Object,"function"==typeof(Vn=void 0!==sn&&sn)&&Vn||Object,"function"==typeof($n=void 0!==M&&M)&&$n||Object,"function"==typeof(Wn=void 0!==vn&&vn)&&Wn||Object,"function"==typeof(qn=void 0!==s.d&&s.d)&&qn||Object,"function"==typeof(Xn=void 0!==C&&C)&&Xn||Object])],Bn);var Kn,Hn,Gn,Vn,$n,Wn,qn,Xn,Yn=function(){function n(n){this.userId=n.userId,this.taskId=n.taskId,this.state=n.state,this.task=n.task,this.reply=n.reply,this.uploadedFlag=n.uploadedFlag,this.taskDetail=n.taskDetail,this.mediaNames=n.mediaNames,this.isRejected=n.state===B.Reject,this.isCanceled=n.state===B.Cancel,this.photoCount=0,this.audioCount=0,this.videoCount=0,this.isLocationValid=V.checkLocation(this.task.location),this.task.extendedInfo&&this.task.extendedInfo.delayTime>0&&(this.delayTime=this.task.extendedInfo.delayTime,this.delayBeyond=this.delayTime>this.task.arrivedTime?"arrived":this.delayTime>this.task.goTime?"go":"accept")}return n.transformToHistoryEx=function(l,e){for(var t=0,i=e;t<i.length;t++){l.push(new n(i[t]))}},n}(),Jn=function(){function n(n,l,e,t,i){this.viewCtrl=n,this.navParams=l,this.events=e,this.dataService=t,this.globalService=i,this.isRecording=!1}return n.prototype.ngOnInit=function(){this.navParams.data&&(this.taskId=this.navParams.data.taskId)},n.prototype.onStart=function(n){var l=this;this.dataService.startRecordAudio().then(function(n){l.file=n.file,l.name=n.name,l.file&&l.name?(l.isRecording=!0,l.time=(new Date).getTime()):console.error("failure to record audio")}).catch(function(n){return console.error(n)})},n.prototype.onEnd=function(n){this.close(!0)},n.prototype.onCancel=function(n){this.close(!1)},n.prototype.close=function(n){var l=this;this.file?(this.time=(new Date).getTime()-this.time,this.dataService.endRecordAudio(this.file).then(function(e){return e&&n&&l.time>0?l.dataService.saveAudio(l.taskId,l.name):Promise.resolve(!1)}).then(function(n){return n?l.events.publish(l.globalService.recordAudioFinishEvent,l.name,l.time):Promise.resolve([])}).catch(function(n){return console.error(n)}).then(function(){return l.viewCtrl.dismiss()})):this.viewCtrl.dismiss()},n}();Jn=Object(r.__decorate)([Object(a.i)({template:'\n    <ion-list>\n      \x3c!--<ion-list-header color="primary">录音</ion-list-header>--\x3e\n      <ion-row>\n        <ion-col style="display: flex; justify-content: center; align-items: center; margin-top: 10px;">\n          <img src="assets/img/ic_record.png" width="64" height="64">\n        </ion-col>\n      </ion-row>\n      \n      <ion-row *ngIf="isRecording">\n        <ion-col style="display: flex; justify-content: center; align-items: center;">\n          <ion-spinner name="dots"></ion-spinner>\n        </ion-col>\n      </ion-row>\n      \n      <button ion-item style="text-align:center; color:#f53d3d;" (click)="onStart($event)" [class.selected]="isRecording" *ngIf="!isRecording">开始</button>\n      <button ion-item style="text-align:center; color:#f53d3d;" (click)="onEnd($event)" *ngIf="isRecording">结束</button>\n      \x3c!--<button ion-item style="text-align:center; color:#488aff;" (click)="onOk($event)">确定</button>--\x3e\n      <button ion-item style="text-align:center; color:#488aff;" (click)="onCancel($event)">取消</button>\n    </ion-list>\n  ',styles:[".selected {\n      font-weight: bold;\n    }"]}),Object(r.__metadata)("design:paramtypes",["function"==typeof(zn=void 0!==s.p&&s.p)&&zn||Object,"function"==typeof(Zn=void 0!==s.k&&s.k)&&Zn||Object,"function"==typeof(Qn=void 0!==s.d&&s.d)&&Qn||Object,"function"==typeof(nl=void 0!==Bn&&Bn)&&nl||Object,"function"==typeof(ll=void 0!==g&&g)&&ll||Object])],Jn);var zn,Zn,Qn,nl,ll,el=function(){var n={};return n[n.View=0]="View",n[n.Locate=1]="Locate",n[n.Mark=2]="Mark",n}(),tl=function(){return function(n,l,e){this.mapType=n,l&&l.lng&&l.lat?(this.lng=Number.parseFloat(l.lng),this.lat=Number.parseFloat(l.lat)):(this.lng=121.524577,this.lat=31.281003),this.content=e}}(),il=function(){var n={};return n[n.LOADING=0]="LOADING",n[n.LOADED=1]="LOADED",n}(),ol=function(){function n(n,l,e){this.navCtrl=n,this.globalService=e,this.ZoomMaxLevel=16,this.mapParam=l.data instanceof tl?l.data:new tl(el.View,void 0,void 0),this.isMark=!1}return n.prototype.ngOnInit=function(){this.isInitSuccess=!1,this.loadJScript(this._init.bind(this))},n.prototype.loadJScript=function(n){var l=window,e=l.baiduMap;if(!e||e.status!==il.LOADING){if(e&&e.status===il.LOADED)return n();l.baiduMap={status:il.LOADING,callbacks:[]},l.baidumapinit=function(){l.baiduMap.status=il.LOADED,n(),l.baiduMap.callbacks.forEach(function(n){return n()}),l.baiduMap.callbacks=[]};var t=document.createElement("script");t.type="text/javascript",t.src="http://api.map.baidu.com/api?v=2.0&ak=Gsi66vGBjiuX3dlunDogoQYtHjbolbMi&callback=baidumapinit",t.onerror=function(n){console.error(n)},document.body.appendChild(t)}},n.prototype._init=function(){switch(this.map=new BMap.Map(this.mapElement.nativeElement,{enableMapClick:!0}),this.map.enableScrollWheelZoom(),this.map.enableContinuousZoom(),this.mapParam.mapType){case el.Locate:this.showInfo();break;case el.Mark:this.markMap();break;case el.View:default:this.viewMap()}this.map.addControl(new BMap.NavigationControl),this.map.addControl(new BMap.OverviewMapControl),this.globalService.isChrome&&this.map.addControl(new BMap.GeolocationControl),this.isInitSuccess=!0},n.prototype.ngOnDestroy=function(){this.destroy()},n.prototype.getCurrentLocation=function(){var n=this;this.globalService.isChrome||(console.log("getCurrentLocation"),this.globalService.getLocationEx().then(function(l){if(l&&Math.abs(l.lng)>0&&Math.abs(l.lat)>0){var e=new BMap.Point(l.lng,l.lat);setTimeout(function(){var l=new BMap.Convertor,t=[];t.push(e),l.translate(t,1,5,function(l){if(0===l.status){n.map.clearOverlays(),n.map.centerAndZoom(l.points[0],n.ZoomMaxLevel);var e=new BMap.Marker(l.points[0]);n.map.addOverlay(e)}})},1e3)}}).catch(function(n){return console.error(n)}))},n.prototype.markLocation=function(){var n=this.map.getCenter();alert("选定坐标:"+n.lat+","+n.lng)},n.prototype.showInfo=function(){var n=new BMap.Point(this.mapParam.lng,this.mapParam.lat);if(!this.mapParam.content){var l=new BMap.Marker(n);this.map.addOverlay(l)}if(this.map.centerAndZoom(n,this.ZoomMaxLevel),this.mapParam.content){var e={width:100,height:50,title:"任务编号",enableCloseOnClick:!1},t=new BMap.InfoWindow(this.mapParam.content,e);this.map.openInfoWindow(t,n)}},n.prototype.markMap=function(){var n=new BMap.Icon("assets/img/ic_map_center_location.png",new BMap.Size(23,25));this.map.addEventListener("dragend",function(l){this.map.clearOverlays();var e=this.map.getCenter(),t=new BMap.Marker(e,{icon:n});this.map.addOverlay(t),t.enableDragging(),t.addEventListener("dragend",function(n){this.map.centerAndZoom(n.point,this.ZoomMaxLevel)})}),this.isMark=!0},n.prototype.viewMap=function(){var n=new BMap.Point(this.mapParam.lng,this.mapParam.lat);this.map.centerAndZoom(n,this.ZoomMaxLevel)},n.prototype.destroy=function(){this.isInitSuccess&&this.mapParam.mapType===el.Locate&&(this.map.closeInfoWindow(),this.map.clearOverlays())},n}();Object(r.__decorate)([Object(a.N)("map"),Object(r.__metadata)("design:type","function"==typeof(ul=void 0!==a.k&&a.k)&&ul||Object)],ol.prototype,"mapElement",void 0),ol=Object(r.__decorate)([Object(a.i)({selector:"page-map",templateUrl:"map.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(al=void 0!==s.j&&s.j)&&al||Object,"function"==typeof(rl=void 0!==s.k&&s.k)&&rl||Object,"function"==typeof(sl=void 0!==g&&g)&&sl||Object])],ol);var ul,al,rl,sl,cl=e(81),dl=function(){function n(n,l,e,t,i,o){this.navCtrl=n,this.dataService=l,this.globalService=e,this.navParams=t,this.alertCtrl=i,this.photoViewer=o,this.title="附件",this.pictureMaxCount=6,this.audioMaxCount=3,this.videoMaxCount=3,this.pictures=[],this.audios=[],this.videos=[],this.pictureCount=0,this.audioCount=0,this.videoCount=0,this.taskId=this.navParams.data}return n.prototype.ngOnInit=function(){var n=this;this.dataService.getAttachments(this.taskId).then(function(l){return n.parseAttachments(l)}).catch(function(n){return console.error(n)})},n.prototype.parseAttachments=function(n){var l=this;!n||n.length<=0||n.forEach(function(n){var e=n.fileType;e&&("image/jpeg"===e?l.pictureCount<l.pictureMaxCount&&n.url&&(l.pictures[l.pictureCount++]=n.url):"audio/mp3"===e?l.audioCount<l.audioMaxCount&&n.downloadUrl&&n.originFileName&&(l.audios[l.audioCount++]={url:n.downloadUrl,name:n.originFileName,alias:"语音"+l.audioCount}):"video/mp4"===e&&l.videoCount<l.videoMaxCount&&n.downloadUrl&&n.originFileName&&(l.videos[l.videoCount++]={url:n.downloadUrl,name:n.originFileName}))})},n.prototype.onPreviewPicture=function(n){!this.globalService.isChrome&&n&&this.photoViewer.show(n)},n.prototype.onPlay=function(n){var l=this;!this.globalService.isChrome&&n.url&&n.name&&n.alias&&this.dataService.playCachedAudio(n.url,n.name).then(function(n){if(n){l.alertCtrl.create({title:"提示",message:"结束播放语音",enableBackdropDismiss:!1,buttons:[{text:"确定",handler:function(e){console.log("Saved clicked"),l.dataService.stopAudio(n).catch(function(n){return console.error(n)})}}]}).present()}}).catch(function(n){return console.error(n)})},n.prototype.onPlayVideo=function(n){!this.globalService.isChrome&&n.url&&n.name&&this.dataService.playCachedVideo(n.url,n.name).then(function(n){return console.log(n)}).catch(function(n){return console.error(n)})},n}();dl=Object(r.__decorate)([Object(a.i)({selector:"page-attachment",templateUrl:"attachment.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(_l=void 0!==s.j&&s.j)&&_l||Object,"function"==typeof(pl=void 0!==Bn&&Bn)&&pl||Object,"function"==typeof(hl=void 0!==g&&g)&&hl||Object,"function"==typeof(ml=void 0!==s.k&&s.k)&&ml||Object,"function"==typeof(fl=void 0!==s.b&&s.b)&&fl||Object,"function"==typeof(gl=void 0!==cl.a&&cl.a)&&gl||Object])],dl);var _l,pl,hl,ml,fl,gl,vl=function(){function n(n,l,e,t,i,o,u,a,r){this.navCtrl=n,this.navParams=l,this.alertCtrl=e,this.events=t,this.dataService=i,this.globalService=o,this.popoverCtrl=u,this.fileService=a,this.photoViewer=r,this.tag="[WorkDetailPage]",this.disableColor="#808080",this.enableColor="#5d81c1",this.optPerson="处理人",this.optTypeName="处理类别",this.optContentName="处理内容",this.optReasonName="发生原因",this.optSolutionName="解决措施",this.optResultName="处理结果",this.optRemarkName="处理备注",this.optTypeDefaultValue="请选择处理类别",this.optContentDefaultValue="请选择处理内容",this.optReasonDefaultValue="请选择发生原因",this.optSolutionDefaultValue="请选择解决措施",this.optResultDefaultValue="请选择处理结果",this.optRemarkDefaultValue="备注可为空",this.pictureMaxCount=3,this.audioPlaceHolder="assets/img/ic_audio_default.png",this.audioMaxCount=3,this.videoMaxCount=3,this.title="工单处理",this.segmentName="detailInfo",this.segmentColor="primary",this.detail=[{name:"联系人名",value:"",key:"contactName",isTime:!1,isActive:!1},{name:"联系电话",value:"",key:"contactPhone",isTime:!1,isActive:!1},{name:"反映类别",value:"",key:"issueType",isTime:!1,isActive:!1},{name:"反映内容",value:"",key:"issueContent",isTime:!1,isActive:!1},{name:"发生地址",value:"",key:"issueAddress",isTime:!1,isActive:!1},{name:"发生时间",value:"",key:"issueTime",isTime:!0,isActive:!1},{name:"受理备注",value:"",key:"receiveComment",isTime:!1,isActive:!1},{name:"开始时间",value:"",key:"bookingStartTime",isTime:!0,isActive:!1},{name:"结束时间",value:"",key:"bookingEndTime",isTime:!0,isActive:!1},{name:"到场时限",value:"",key:"arrivedDeadLine",isTime:!0,isActive:!1},{name:"处理时限",value:"",key:"replyDeadLine",isTime:!0,isActive:!1},{name:"延时时限",value:"",key:"delayReplyDeadLine",isTime:!0,isActive:!1},{name:"派遣站点",value:"",key:"assignStation",isTime:!1,isActive:!1},{name:"派遣人",value:"",key:"assignPerson",isTime:!1,isActive:!1},{name:"派遣备注",value:"",key:"assignComment",isTime:!1,isActive:!1},{name:"附件",value:"",key:"attachments",isTime:!1,isActive:!0}],this.reply=[{name:"处理时间",value:"",isActive:!1,color:this.disableColor},{name:"处理部门",value:"",isActive:!1,color:this.disableColor},{name:this.optPerson,value:"",isActive:!1,color:this.disableColor},{name:this.optTypeName,value:this.optTypeDefaultValue,isActive:!0,color:this.enableColor},{name:this.optContentName,value:this.optContentDefaultValue,isActive:!0,color:this.enableColor},{name:this.optReasonName,value:this.optReasonDefaultValue,isActive:!0,color:this.enableColor},{name:this.optSolutionName,value:this.optSolutionDefaultValue,isActive:!0,color:this.enableColor},{name:this.optResultName,value:this.optResultDefaultValue,isActive:!0,color:this.enableColor},{name:this.optRemarkName,value:this.optRemarkDefaultValue,isActive:!0,color:this.enableColor}],this.pictures=["","",""],this.videos=["","",""],this.audios=[{name:"",time:0},{name:"",time:0},{name:"",time:0}],this.mediaNames=[],this.picCount=0,this.audioCount=0,this.videoCount=0,this.taskEx=(s=this.navParams.data)[0],this.history=s[1],this.overdueTime=s[2],this.isLocked=s[3],this.isPreview=this.taskEx.isPreview,this.isLocationValid=this.taskEx.isLocationValid;var s}return n.prototype.ngOnInit=function(){var n=this;console.log(this.tag+"ngOnInit"),this.dataService.getTaskDetail(this.taskEx.id).then(function(l){console.log(n.tag+"getTaskDetail: "+l),n.taskDetail=l,n.convertTaskDetail(n.taskDetail)}).catch(function(n){return console.error(n)}),this.history&&this.history.reply&&(this.replyInfo=this.history.reply),this.replyInfo||(this.replyInfo={opTime:0,opDepartment:this.globalService.department,opPerson:"",opLeiBie:0,opContent:0,reason:0,solution:0,result:0,replayComment:"",files:"",location:{type:"bd09ll",lng:"121.525766",lat:"31.280693"},taskId:this.taskEx.id,userId:this.globalService.userId}),this.subscribeEvent(this.events)},n.prototype.ngOnDestroy=function(){this.events.unsubscribe(this.globalService.recordAudioFinishEvent)},n.prototype.onLocate=function(n){this.navCtrl.push(ol,new tl(el.Locate,this.taskEx.location,this.taskEx.id))},n.prototype.onReply=function(n){var l=this;if(!(this.replyInfo.opLeiBie&&this.replyInfo.opContent&&this.replyInfo.reason&&this.replyInfo.solution&&this.replyInfo.result))return this.globalService.showToast("数据填写不完整!");var e=new G;if(!t(this.taskEx,e)||e.reply.done)return this.globalService.showToast("数据转换失败!");var i=o(this.replyInfo,this.taskEx,e),u={uploadedFlag:this.globalService.uploadedFlagForLocal};this.globalService.getLocation().then(function(n){return l.replyInfo.location=n,l.dataService.reply(l.replyInfo,i,l.taskDetail,l.mediaNames,u)}).then(function(n){console.log("success"),l.taskEx.photoCount=l.picCount,l.taskEx.audioCount=l.audioCount,l.taskEx.videoCount=l.videoCount;var e={userId:l.globalService.userId,taskId:i.taskId,state:B.Reply,task:i,reply:l.replyInfo,uploadedFlag:u.uploadedFlag,taskDetail:l.taskDetail,mediaNames:l.mediaNames};l.dataService.uploadMediasOfOneTask(i.taskId),l.events.publish(l.globalService.myWorkUpdateEvent,{type:"reply",taskEx:l.taskEx,history:e}),l.navCtrl.pop()}).catch(function(n){console.error(n),l.globalService.showToast(n)})},n.prototype.segmentChanged=function(n){switch(console.log(n),n.value){case"detailInfo":break;case"replyInfo":this.setReplyInfo();break;case"mediaInfo":this.setMediaInfo();break;default:return}},n.prototype.itemSelected=function(n){if(!this.isPreview&&!this.isLocked)switch(n.name){case this.optPerson:break;case this.optTypeName:this.popupOptTypeAlert();break;case this.optContentName:this.popupOptContentAlert();break;case this.optReasonName:this.popupOptReasonAlert();break;case this.optSolutionName:this.popupOptSolutionAlert();break;case this.optResultName:this.popupOptResultAlert();break;case this.optRemarkName:this.popupRemarkAlert()}},n.prototype.detailItemSelected=function(n){n.key&&"attachments"===n.key&&(console.log("attachments"),this.navCtrl.push(dl,this.taskEx.id.split("#")[0]))},n.prototype.onTakePicture=function(n){var l=this;if(!(this.globalService.isChrome||this.isPreview||this.isLocked))return this.picCount>=this.pictureMaxCount?this.globalService.showToast("照片已满"):void this.dataService.takePicture(this.taskEx.id).then(function(n){var e=n.filePath,t=n.fileName;console.log(e),console.log(t),e&&t&&(l.pictures[l.picCount++]=e,l.mediaNames.push(t))}).catch(function(n){return console.error(n)})},n.prototype.onTakeVideo=function(n){var l=this;if(!(this.globalService.isChrome||this.isPreview||this.isLocked))return this.videoCount>=this.videoMaxCount?this.globalService.showToast("视频已满"):void this.dataService.takeVideo(this.taskEx.id).then(function(n){var e=n.filePath,t=n.fileName;console.log(e),console.log(t),e&&t&&(l.videos[l.videoCount++]=e,l.mediaNames.push(t))}).catch(function(n){return console.error(n)})},n.prototype.onPlayVideo=function(n){n&&this.dataService.playVideo(n).then(function(n){console.log(n)})},n.prototype.onPreviewPicture=function(n){console.log(n),!this.globalService.isChrome&&n&&this.photoViewer.show(n)},n.prototype.onDeletePicture=function(n){var l=this;if(!this.globalService.isChrome&&!this.isPreview&&n&&!this.isLocked){var e=this.pictures.findIndex(function(l){return l===n});if(-1!==e){var t=n.lastIndexOf("/");if(!(t<=0)&&(n=n.substring(t+1))){var i=this.mediaNames.findIndex(function(l){return l===n});-1!==i&&this.dataService.deleteOneMedia(n).then(function(n){for(t=e;t<l.pictures.length-1;t++)l.pictures[t]=l.pictures[t+1];l.picCount--,l.pictures[l.picCount]="";for(var t=i;t<l.mediaNames.length-1;t++)l.mediaNames[t]=l.mediaNames[t+1];l.mediaNames.pop()}).catch(function(n){return console.error(n)})}}}},n.prototype.onDeleteVideo=function(n){var l=this;if(!this.globalService.isChrome&&!this.isPreview&&n&&!this.isLocked){var e=this.videos.findIndex(function(l){return l===n});if(-1!==e){var t=n.lastIndexOf("/");if(!(t<=0)&&(n=n.substring(t+1))){var i=this.mediaNames.findIndex(function(l){return l===n});-1!==i&&this.dataService.deleteOneMedia(n).then(function(n){for(t=e;t<l.videos.length-1;t++)l.videos[t]=l.videos[t+1];l.videoCount--,l.videos[l.videoCount]="";for(var t=i;t<l.mediaNames.length-1;t++)l.mediaNames[t]=l.mediaNames[t+1];l.mediaNames.pop()}).catch(function(n){return console.error(n)})}}}},n.prototype.onRecordAudio=function(n){if(console.log(this.tag,"onRecordAudio"),!(this.globalService.isChrome||this.isPreview||this.isLocked))return this.audioCount>=this.audioMaxCount?this.globalService.showToast("录音已满"):void this.popoverCtrl.create(Jn,{taskId:this.taskEx.id},{showBackdrop:!0,enableBackdropDismiss:!1}).present()},n.prototype.onPlay=function(n){var l=this;if(n.name){var e=n.name.split("#");e&&2===e.length&&this.dataService.playAudio(e[0]).then(function(n){if(n){l.alertCtrl.create({title:"提示",message:"结束播放语音",enableBackdropDismiss:!1,buttons:[{text:"确定",handler:function(e){console.log("Saved clicked"),l.dataService.stopAudio(n).catch(function(n){return console.error(n)})}}]}).present()}}).catch(function(n){return console.error(n)})}},n.prototype.onDeleteAudio=function(n){var l=this;if(!this.globalService.isChrome&&!this.isPreview&&n.name&&!this.isLocked){var e=n.name.split("#");if(e&&2===e.length){var t=e[0],i=this.audios.findIndex(function(l){return l.name===n.name});if(-1!==i){var o=this.mediaNames.findIndex(function(l){return l===n.name});-1!==o&&this.dataService.deleteOneMedia(t).then(function(n){for(e=i;e<l.audios.length-1;e++)l.audios[e].name=l.audios[e+1].name,l.audios[e].time=l.audios[e+1].time;l.audioCount--,l.audios[l.audioCount].name="",l.audios[l.audioCount].time=0;for(var e=o;e<l.mediaNames.length-1;e++)l.mediaNames[e]=l.mediaNames[e+1];l.mediaNames.pop()}).catch(function(n){return console.error(n)})}}}},n.prototype.convertTaskDetail=function(n){for(var l=0,e=this.detail;l<e.length;l++){var t=e[l];t.value=n[t.key],"issueTime"!==t.key&&"bookingStartTime"!==t.key&&"bookingEndTime"!==t.key&&"arrivedDeadLine"!==t.key&&"replyDeadLine"!==t.key&&"delayReplyDeadLine"!==t.key&&"number"!=typeof t.value||(t.value=t.value>0?new Date(t.value):"")}if(this.overdueTime&&this.overdueTime.arrived&&this.overdueTime.reply){var i=(new Date).getTime();(n.arrivedDeadLine<i+this.overdueTime.arrived||n.replyDeadLine<i+this.overdueTime.reply)&&(this.segmentColor="danger",this.globalService.isChrome||this.dataService.playAlarm())}},n.prototype.setReplyInfo=function(){0===this.replyInfo.opTime&&(this.replyInfo.opTime=(new Date).getTime()),this.reply[0].value=this.globalService.getFormatTime(new Date(this.replyInfo.opTime)),this.reply[1].value=this.replyInfo.opDepartment,this.getOptPersons(this.replyInfo.opPerson),this.getOptTypes(this.replyInfo.opLeiBie,this.replyInfo.opContent),this.getOptReasons(this.replyInfo.reason),this.getOptSolutions(this.replyInfo.solution),this.getOptResults(this.replyInfo.result),this.reply[8].isActive=!this.isPreview&&!this.isLocked,this.reply[8].value=this.replyInfo.replayComment},n.prototype.getOptTypes=function(n,l){var e=this;this.dataService.getOptTypes().then(function(t){if(console.log(e.tag,"getOptTypes"),e.optTypes=t,e.optTypes.length>0){var i=void 0;n&&(i=e.optTypes.find(function(l){return l.wid===n})),i||(i=e.optTypes[0],l=void 0),e.reply[3].value=i.wName,e.reply[3].isActive=!e.isPreview&&!e.isLocked,e.reply[3].remark=i.wRemark,e.replyInfo.opLeiBie=i.wid,e.getOptContents(Number.parseInt(i.wRemark),l)}}).catch(function(n){return console.error(n)})},n.prototype.getOptContents=function(n,l){var e=this;this.dataService.getOptContents(n).then(function(n){if(console.log(e.tag,"getOptContents"),e.optContents=n,e.optContents.length>0){var t=void 0;l&&(t=e.optContents.find(function(n){return n.wid===l})),t||(t=e.optContents[0]),e.reply[4].value=t.wName,e.reply[4].remark=t.wRemark,e.reply[4].color=e.enableColor,e.replyInfo.opContent=t.wid}else e.reply[4].value="请选择处理内容",e.reply[4].remark="",e.reply[4].color=e.disableColor,e.replyInfo.opContent=0;e.reply[4].isActive=!e.isPreview&&!e.isLocked}).catch(function(n){return console.error(n)})},n.prototype.getOptReasons=function(n){var l=this;this.dataService.getOptReasons().then(function(e){if(console.log(l.tag,"getOptReasons"),l.optReasons=e,l.optReasons.length>0){var t=void 0;n&&(t=l.optReasons.find(function(l){return l.wid===n})),t||(t=l.optReasons[0]),l.reply[5].value=t.wName,l.reply[5].isActive=!l.isPreview&&!l.isLocked,l.reply[5].remark=t.wRemark,l.replyInfo.reason=t.wid}}).catch(function(n){return console.error(n)})},n.prototype.getOptSolutions=function(n){var l=this;this.dataService.getOptSolutions().then(function(e){if(console.log(l.tag,"getOptSolutions"),l.optSolutions=e,l.optSolutions.length>0){var t=void 0;n&&(t=l.optSolutions.find(function(l){return l.wid===n})),t||(t=l.optSolutions[0]),l.reply[6].value=t.wName,l.reply[6].isActive=!l.isPreview&&!l.isLocked,l.reply[6].remark=t.wRemark,l.replyInfo.solution=t.wid}}).catch(function(n){return console.error(n)})},n.prototype.getOptResults=function(n){var l=this;this.dataService.getOptResults().then(function(e){if(console.log(l.tag,"getOptResult"),l.optResults=e,l.optResults.length>0){var t=void 0;n&&(t=l.optResults.find(function(l){return l.wid===n})),t||(t=l.optResults[0]),l.reply[7].value=t.wName,l.reply[7].isActive=!l.isPreview&&!l.isLocked,l.reply[7].remark=t.wRemark,l.replyInfo.result=t.wid}}).catch(function(n){return console.error(n)})},n.prototype.popupOptTypeAlert=function(){if(!this.optTypes||this.optTypes.length<=0)return this.globalService.showToast("处理类别为空!");this.popupAlert(this.optTypes,this.optTypeName,this.reply[3],this.replyInfo,"opLeiBie")},n.prototype.popupOptContentAlert=function(){if(!this.optContents||this.optContents.length<=0)return this.globalService.showToast("处理内容为空!");this.popupAlert(this.optContents,this.optContentName,this.reply[4],this.replyInfo,"opContent")},n.prototype.popupOptReasonAlert=function(){if(!this.optReasons||this.optReasons.length<=0)return this.globalService.showToast("发生原因为空!");this.popupAlert(this.optReasons,this.optReasonName,this.reply[5],this.replyInfo,"reason")},n.prototype.popupOptSolutionAlert=function(){if(!this.optSolutions||this.optSolutions.length<=0)return this.globalService.showToast("解决措施为空!");this.popupAlert(this.optSolutions,this.optSolutionName,this.reply[6],this.replyInfo,"solution")},n.prototype.popupOptResultAlert=function(){if(!this.optResults||this.optResults.length<=0)return this.globalService.showToast("处理结果为空!");this.popupAlert(this.optResults,this.optResultName,this.reply[7],this.replyInfo,"result")},n.prototype.popupRemarkAlert=function(){var n=this;this.alertCtrl.create({title:"处理备注",message:"请输入处理备注",inputs:[{name:"remark",placeholder:""}],buttons:[{text:"取消",handler:function(n){console.log("Cancel clicked")}},{text:"确定",handler:function(l){console.log("Saved clicked"),n.reply[8].value=l.remark,n.replyInfo.replayComment=l.remark}}]}).present()},n.prototype.popupAlert=function(n,l,e,t,i){var o=this,u=this.alertCtrl.create();u.setTitle(l);for(var a=0,r=n;a<r.length;a++){var s=r[a];u.addInput({type:"radio",label:s.wName,value:s.wName+"#"+s.wid+"#"+s.wRemark,checked:e.value===s.wName})}u.addButton("取消"),u.addButton({text:"确定",handler:function(n){console.log("Radio data:",n);var u=n.split("#");e.value=u[0],t[i]=Number.parseInt(u[1]),e.remark=u[2],l===o.optTypeName&&o.getOptContents(Number.parseInt(e.remark))}}),u.present().then(function(){})},n.prototype.subscribeEvent=function(n){var l=this;n.subscribe(this.globalService.recordAudioFinishEvent,function(n,e){console.log(n),n&&e>0&&(e=Number.parseInt((e/1e3).toString()),l.audios[l.audioCount].name=n+"#"+e,l.audios[l.audioCount++].time=e,l.mediaNames.push(n+"#"+e))})},n.prototype.setMediaInfo=function(){if(this.history&&this.history.mediaNames&&this.history.mediaNames.length>0){this.picCount=0,this.audioCount=0,this.videoCount=0,this.mediaNames=[];for(var n=0,l=this.history.mediaNames;n<l.length;n++){var e=l[n];if(-1!==e.lastIndexOf(this.globalService.photoSuffix))this.pictures[this.picCount++]=this.fileService.getImagesDir()+"/"+e,this.mediaNames.push(e);else if(-1!==e.lastIndexOf(this.globalService.videoSuffix))this.videos[this.videoCount++]=this.fileService.getVideosDir()+"/"+e,this.mediaNames.push(e);else if(-1!==e.lastIndexOf(this.globalService.audioSuffix)){this.audios[this.audioCount].name=e;var t=e.split("#");this.audios[this.audioCount++].time=t&&2===t.length?Number.parseInt(t[1]):10,this.mediaNames.push(e)}}}},n.prototype.getOptPersons=function(n){this.reply[2].value=this.globalService.userName,this.reply[2].isActive=!1,this.replyInfo.opPerson=this.globalService.userName},n}();vl=Object(r.__decorate)([Object(a.i)({selector:"page-workdetail",templateUrl:"workdetail.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(bl=void 0!==s.j&&s.j)&&bl||Object,"function"==typeof(yl=void 0!==s.k&&s.k)&&yl||Object,"function"==typeof(kl=void 0!==s.b&&s.b)&&kl||Object,"function"==typeof(Sl=void 0!==s.d&&s.d)&&Sl||Object,"function"==typeof(Il=void 0!==Bn&&Bn)&&Il||Object,"function"==typeof(Tl=void 0!==g&&g)&&Tl||Object,"function"==typeof(El=void 0!==s.m&&s.m)&&El||Object,"function"==typeof(Cl=void 0!==C&&C)&&Cl||Object,"function"==typeof(Ol=void 0!==cl.a&&cl.a)&&Ol||Object])],vl);var bl,yl,kl,Sl,Il,Tl,El,Cl,Ol,wl=function(){function n(n,l,e,t,i){this.navCtrl=n,this.dataService=l,this.alertCtrl=e,this.globalService=t,this.events=i,this.tag="[Myhistory]",this.title="历史记录",this.showToolbar=!1,this.showFab=!1,this.items=[],this.isDownloadFinished=!0,this.since=this.globalService.taskSinceDefault,this.count=this.globalService.taskCountDefault10,this.searchKey="",this.isOperationBusy=!1,this.replyHistories=[],this.onServerFlag=this.globalService.uploadedFlagForUploaded}return n.prototype.ngOnInit=function(){var n=this;console.log(this.tag,"ngOnInit"),this.subscribeEvent(this.events),this.getHistories(this.since,this.count,this.searchKey).then(function(l){return n.infiniteScroll.enable(l)}).catch(function(n){return console.error(n)})},n.prototype.ngOnDestroy=function(){console.log(this.tag,"ngOnDestroy"),this.events.unsubscribe(this.globalService.historyUploadFinishEvent)},n.prototype.onInput=function(n){var l=this;if(this.isOperationBusy)return this.globalService.showToast("后台繁忙...");var e=n.target.value;for(this.searchKey=e&&""!=e.trim()?e:"",this.isOperationBusy=!0,this.since=this.globalService.taskSinceDefault;this.items.shift(););this.showFab=!1,this.replyHistories=[],this.getHistories(this.since,this.count,this.searchKey).then(function(n){return l.infiniteScroll.enable(n)}).catch(function(n){console.error(n)}).then(function(){return l.isOperationBusy=!1})},n.prototype.onCancel=function(n){console.log(this.tag,"onCancel")},n.prototype.doRefresh=function(n){console.log(this.tag,"doRefresh"),this.dataService.uploadAllInfos()},n.prototype.doInfinite=function(n){var l=this;console.log(this.tag,"doInfinite begin"),setTimeout(function(){l.isDownloadFinished=!1,l.showFab=!1,l.getHistories(l.since,l.count,l.searchKey).then(function(e){e?n.complete():n.enable(!1),console.log(l.tag,"doInfinite end")}).catch(function(l){console.error(l),n.complete()}).then(function(){l.isDownloadFinished=!0,l.showFab=l.items.length>l.count})},100)},n.prototype.doScroll2Top=function(n){this.showFab=!1,this.content.scrollToTop()},n.prototype.toggleToolbar=function(n){this.showToolbar=!this.showToolbar,this.content.resize()},n.prototype.getHistories=function(n,l,e){var t=this;return this.dataService.getHistories(n,l,e).then(function(n){return console.log(t.tag+"getHistory"+n.length),n.length<=0?Promise.resolve(!1):(Yn.transformToHistoryEx(t.items,n),t.since=t.items.length,Promise.resolve(n.map(function(n){return n.taskId})).then(function(n){return t.dataService.getReplyHistories(n)}).then(function(n){var l=!1;try{(e=t.replyHistories).push.apply(e,n),t.replyHistories.forEach(function(n){if(n.mediaNames&&n.mediaNames.length>0){var l=t.items.find(function(l){return l.taskId===n.taskId});if(l){var e=n.mediaNames;l.photoCount=e.filter(function(n){return-1!==n.lastIndexOf(t.globalService.photoSuffix)}).length,l.audioCount=e.filter(function(n){return-1!==n.lastIndexOf(t.globalService.audioSuffix)}).length,l.videoCount=e.filter(function(n){return-1!==n.lastIndexOf(t.globalService.videoSuffix)}).length}}}),l=!0}catch(n){console.error(n)}return Promise.resolve(l);var e}))})},n.prototype.toRejectedInfo=function(n){return n},n.prototype.toReplyInfo=function(n){return n},n.prototype.onDelay=function(n){var l=this;this.dataService.getHistory(n.taskId,B.Delay).then(function(n){if(n.reply){var e=n.reply;e.comment&&l.globalService.showToast("延迟原因: "+e.comment)}}).catch(function(n){return console.error(n)})},n.prototype.onReply=function(n){var l=new V(n.task);l.isPreview=!1;var e=this.findReplyHistory(l.id);this.navCtrl.push(vl,[l,e,void 0,!0])},n.prototype.onReject=function(n){var l=this.toRejectedInfo(n.reply);l&&l.rejectReason&&this.globalService.showToast("退单原因: "+l.rejectReason)},n.prototype.onLocate=function(n){this.navCtrl.push(ol,new tl(el.Locate,n.task.location,n.task.taskId))},n.prototype.onDelete=function(n){var l=this;this.alertCtrl.create({title:"删除任务",message:"是否删除该任务及其所有操作?",buttons:[{text:"取消",role:"cancel",handler:function(){console.log("Cancel clicked")}},{text:"确定",handler:function(){console.log("Ok clicked"),l.dataService.deleteOneTaskWithAllInfos(n.taskId).then(function(n){return l.resetList()}).catch(function(n){return console.error(n)})}}]}).present()},n.prototype.subscribeEvent=function(n){var l=this;n.subscribe(this.globalService.historyUploadFinishEvent,function(){l.refresher.complete(),l.resetList()})},n.prototype.findReplyHistory=function(n){return this.replyHistories.find(function(l){return l.taskId===n})},n.prototype.resetList=function(){var n=this;for(this.isOperationBusy=!1,this.searchKey="",this.since=this.globalService.taskSinceDefault;this.items.shift(););this.showFab=!1,this.replyHistories=[],this.getHistories(this.since,this.count,this.searchKey).then(function(l){return n.infiniteScroll.enable(l)}).catch(function(n){return console.error(n)})},n}();Object(r.__decorate)([Object(a.N)(s.n),Object(r.__metadata)("design:type","function"==typeof(Dl=void 0!==s.n&&s.n)&&Dl||Object)],wl.prototype,"refresher",void 0),Object(r.__decorate)([Object(a.N)(s.c),Object(r.__metadata)("design:type","function"==typeof(Pl=void 0!==s.c&&s.c)&&Pl||Object)],wl.prototype,"content",void 0),Object(r.__decorate)([Object(a.N)(s.e),Object(r.__metadata)("design:type","function"==typeof(jl=void 0!==s.e&&s.e)&&jl||Object)],wl.prototype,"infiniteScroll",void 0),wl=Object(r.__decorate)([Object(a.i)({selector:"page-myhistory",templateUrl:"myhistory.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(Nl=void 0!==s.j&&s.j)&&Nl||Object,"function"==typeof(Ml=void 0!==Bn&&Bn)&&Ml||Object,"function"==typeof(xl=void 0!==s.b&&s.b)&&xl||Object,"function"==typeof(Ll=void 0!==g&&g)&&Ll||Object,"function"==typeof(Al=void 0!==s.d&&s.d)&&Al||Object])],wl);var Dl,Pl,jl,Nl,Ml,xl,Ll,Al,Ul=e(14),Rl=function(){return function(){}}(),Fl=function(){function n(n,l,e){this.navCtrl=n,this.navParams=l,this.dataService=e,this.tag="[SearchDetailsPage]",this.title="详情",this.segmentName="basicInfo",this.states=[],this.taskId=this.navParams.get("taskId"),this.searchTaskDetails(this.taskId)}return n.prototype.searchTaskDetails=function(n){var l=this;this.dataService.searchTaskDetails(n).then(function(n){console.log(l.tag+"getTasks: "+n),null!=n&&(l.details=[{name:"联系人名",value:n.contactName},{name:"联系电话",value:n.contactPhone},{name:"反映类别",value:n.issueType},{name:"反映内容",value:n.issueContent},{name:"发生地址",value:n.issueAddress},{name:"发生时间",value:l.formatDateTime(n.issueTime)},{name:"受理备注",value:n.receiveComment},{name:"开始时间",value:l.formatDateTime(n.bookingStartTime)},{name:"结束时间",value:l.formatDateTime(n.bookingEndTime)},{name:"到场时限",value:l.formatDateTime(n.arrivedDeadLine)},{name:"处理时限",value:l.formatDateTime(n.replyDeadLine)},{name:"延时时限",value:l.formatDateTime(n.delayReplyDeadLine)},{name:"派遣站点",value:n.assignStation},{name:"派遣人",value:n.assignPerson},{name:"派遣备注",value:n.assignComment}],l.setTaskState(n))})},n.prototype.setTaskState=function(n){if(0!=n.createTime){(l=new Rl).state="已派遣",l.time=this.formatDateTime(n.createTime),this.states.push(l)}if(0!=n.stationAcceptTime){(l=new Rl).state="接收",l.time=this.formatDateTime(n.stationAcceptTime),this.states.push(l)}if(0!=n.assignTime){(l=new Rl).state="已派工",l.time=this.formatDateTime(n.assignTime),this.states.push(l)}if(0!=n.goTime){(l=new Rl).state="已出发",l.time=this.formatDateTime(n.goTime),this.states.push(l)}if(0!=n.arrivedTime){(l=new Rl).state="已到场",l.time=this.formatDateTime(n.arrivedTime),this.states.push(l)}if(0!=n.replyTime){(l=new Rl).state="已处理",l.time=this.formatDateTime(n.replyTime),this.states.push(l)}if(0!=n.completedTime){(l=new Rl).state="已完成",l.time=this.formatDateTime(n.completedTime),this.states.push(l)}if(0!=n.rejectTime){(l=new Rl).state="已拒绝",l.time=this.formatDateTime(n.rejectTime),this.states.push(l)}if(0!=n.superviseTime){var l=new Rl;l.state="已销单",l.time=this.formatDateTime(n.superviseTime),this.states.push(l)}this.states.sort(function(n,l){return n.time<l.time?1:n.time>l.time?-1:n.time==l.time?n.state>l.state?1:-1:0}),console.log(this.tag+this.states)},n.prototype.formatDateTime=function(n){var l=new Date(n),e=l.getFullYear(),t=l.getMonth()+1,i=t<10?"0"+t:t,o=l.getDate(),u=o<10?"0"+o:o,a=l.getHours(),r=a<10?"0"+a:a,s=l.getMinutes(),c=l.getSeconds();return e+"-"+i+"-"+u+" "+r+":"+(s<10?"0"+s:s)+":"+(c<10?"0"+c:c)},n}();Fl=Object(r.__decorate)([Object(a.i)({selector:"page-searchdetails",templateUrl:"searchdetails.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(Bl=void 0!==s.j&&s.j)&&Bl||Object,"function"==typeof(Kl=void 0!==s.k&&s.k)&&Kl||Object,"function"==typeof(Hl=void 0!==Bn&&Bn)&&Hl||Object])],Fl);var Bl,Kl,Hl,Gl=function(){function n(n,l,e,t,i){this.navCtrl=n,this.navParams=l,this.loadingCtrl=e,this.dataService=t,this.alertCtrl=i,this.tag="[SearchResultPage]",this.title="查询结果",this.segmentName="allTasks",this.items=[]}return n.prototype.dismiss=function(){console.log("----- dismiss loading ------ "),this.loading.dismiss()},n.prototype.ngOnInit=function(){this.loading=this.loadingCtrl.create({content:"查询中...",dismissOnPageChange:!0}),this.loading.present(),this.searchTask(this.navParams.get("tasks"))},n.prototype.searchTask=function(n){var l=this;this.dataService.searchTask(n).then(function(n){if(l.searchTaskCount(l.navParams.get("tasks")),console.log(l.tag+"getTasks: "+n),n.length<=0){var e=l.alertCtrl.create({title:"提示：",buttons:["确定"]});e.setSubTitle("无结果"),e.present(),l.loading.dismiss()}else{l.loading.dismiss();for(var t=0,i=n;t<i.length;t++){var o=i[t];l.items.push({customerId:o.serialNo,taskId:o.taskNo,contents:[{name:"发生地址",value:o.happenedAddress},{name:"联系电话",value:o.contactPhone},{name:"反映人",value:o.reportPerson},{name:"反映类别",value:o.reportType},{name:"反映内容",value:o.reportTypeText},{name:"派遣时间",value:l.formatDateTime(o.sendTime)},{name:"处理时限",value:l.formatDateTime(o.resolveLimitedTime)},{name:"任务状态",value:o.taskState}]})}}}).catch(function(n){console.log(n);l.alertCtrl.create({title:"提示：",subTitle:n||"出现错误",buttons:["确定"]}).present()})},n.prototype.searchTaskCount=function(n){var l=this;this.dataService.searchTaskCount(n).then(function(n){console.log(l.tag+"getTasksCount: "+n),null!=n&&(l.totalTaskCount=n.totalTaskCount,l.completedTaskCount=n.completedTaskCount,l.unCompletedTaskCount=n.uncompletedTaskCount)}).catch(function(n){console.log(n)})},n.prototype.onDetails=function(n){console.log(this.tag+n),this.navCtrl.push(Fl,{taskId:n})},n.prototype.formatDateTime=function(n){var l=new Date(n),e=l.getFullYear(),t=l.getMonth()+1,i=t<10?"0"+t:t,o=l.getDate(),u=o<10?"0"+o:o,a=l.getHours(),r=a<10?"0"+a:a,s=l.getMinutes(),c=l.getSeconds();return e+"-"+i+"-"+u+" "+r+":"+(s<10?"0"+s:s)+":"+(c<10?"0"+c:c)},n}();Gl=Object(r.__decorate)([Object(a.i)({selector:"page-searchresult",templateUrl:"searchresult.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(Vl=void 0!==s.j&&s.j)&&Vl||Object,"function"==typeof($l=void 0!==s.k&&s.k)&&$l||Object,"function"==typeof(Wl=void 0!==s.i&&s.i)&&Wl||Object,"function"==typeof(ql=void 0!==Bn&&Bn)&&ql||Object,"function"==typeof(Xl=void 0!==s.b&&s.b)&&Xl||Object])],Gl);var Vl,$l,Wl,ql,Xl,Yl=function(){return function(){}}(),Jl=function(){function n(n,l,e,t){this.navCtrl=n,this.alertCtrl=l,this.formBuilder=e,this.dataService=t,this.tag="[SearchPage]",this.title="查询任务"}return n.prototype.ngOnInit=function(){this.searchForm=this.formBuilder.group({address:["",Ul.n.compose([Ul.n.minLength(2)])],telephone:["",Ul.n.compose([Ul.n.minLength(4)])],customerNum:[""],taskNum:[""],taskState:[""],reflectType:[""],reflectPerson:[""],dispatchTime:[""]}),this.getReflectTypes()},n.prototype.getReflectTypes=function(){var n=this;this.dataService.getReflectTypes().then(function(l){return console.log(n.tag+l),l.length<=0?Promise.resolve(!1):(n.reflectTypes=l,Promise.resolve(!0))})},n.prototype.showReflectType=function(){var n=this,l=this.alertCtrl.create();l.setTitle("反映类别");for(var e=[],t=0;t<this.reflectTypes.length;t++)e.push({type:"radio",label:this.reflectTypes[t].wName,value:this.reflectTypes[t].wName}),l.addInput(e[t]);l.addButton("取消"),l.addButton({text:"确定",handler:function(l){n.searchForm.patchValue({reflectType:l})}}),l.present()},n.prototype.showTaskType=function(){var n=this,l=this.alertCtrl.create();l.setTitle("任务状态");for(var e=[{type:"radio",label:"已派遣",value:"已派遣"},{type:"radio",label:"接收",value:"接收"},{type:"radio",label:"已派工",value:"已派工"},{type:"radio",label:"已出发",value:"已出发"},{type:"radio",label:"已到场",value:"已到场"},{type:"radio",label:"已处理",value:"已处理"},{type:"radio",label:"已退单",value:"已退单"},{type:"radio",label:"退单重派",value:"退单重派"},{type:"radio",label:"退单结束",value:"退单结束"},{type:"radio",label:"已销单",value:"已销单"},{type:"radio",label:"督办",value:"督办"}],t=0;t<e.length;t++)l.addInput(e[t]);l.addButton("取消"),l.addButton({text:"确定",handler:function(l){n.searchForm.patchValue({taskState:l})}}),l.present()},n.prototype.onReset=function(n){this.searchForm.setValue({address:"",telephone:"",customerNum:"",taskNum:"",taskState:"",reflectType:"",reflectPerson:"",dispatchTime:""})},n.prototype.onSearchClick=function(n){if(""==n.address&&""==n.telephone&&""==n.customerNum&&""==n.taskNum&&""==n.taskState&&""==n.reflectType&&""==n.reflectPerson&&""==n.dispatchTime){var l=this.alertCtrl.create({title:"提示：",buttons:["确定"]});return l.setSubTitle("请至少输入一个条件"),void l.present()}var e=Date.parse(this.myDate)-288e5,t=this.transformTaskState(n.taskState),i=this.transformRefelctType(n.reflectType),o=new Yl;o.happenedAddress=n.address,o.contactPhone=n.telephone,o.serialNo=n.customerNum,o.taskNo=n.taskNum,o.taskState=""!=n.taskState&&void 0!=t?t:n.taskState,o.reportType=""!=n.taskState&&void 0!=t?i:n.reflectType,o.reportPerson=n.reflectPerson,o.sendTime=e,this.navCtrl.push(Gl,{tasks:o})},n.prototype.transformTaskState=function(n){var l;switch(n){case"已派遣":l=0;break;case"接收":l=1;break;case"已响应":l=6;break;case"已派工":l=2;break;case"已出发":l=3;break;case"已到场":l=4;break;case"已处理":l=5;break;case"已退单":l=-1;break;case"退单重派":l=-2;break;case"退单结束":l=-3;break;case"已销单":l=99;break;case"督办":l=-99}return l},n.prototype.transformRefelctType=function(n){for(var l,e=0,t=this.reflectTypes;e<t.length;e++){var i=t[e];if(n==i.wName){l=i.wid;break}}return l},n}();Jl=Object(r.__decorate)([Object(a.i)({selector:"page-search",templateUrl:"search.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(zl=void 0!==s.j&&s.j)&&zl||Object,"function"==typeof(Zl=void 0!==s.b&&s.b)&&Zl||Object,"function"==typeof(Ql=void 0!==Ul.d&&Ul.d)&&Ql||Object,"function"==typeof(ne=void 0!==Bn&&Bn)&&ne||Object])],Jl);var zl,Zl,Ql,ne,le=function(){function n(n,l,e,t,i,o){this.navCtrl=n,this.navParams=l,this.alertCtrl=e,this.events=t,this.dataService=i,this.globalService=o,this.tag="[WorkInfoPage]",this.detailNames={contactName:"联系人名",contactPhone:"联系电话",issueType:"反映类别",issueContent:"反映内容",issueAddress:"发生地址",issueTime:"发生时间",receiveComment:"受理备注",bookingStartTime:"开始时间",bookingEndTime:"结束时间",arrivedDeadLine:"到场时限",replyDeadLine:"处理时限",delayReplyDeadLine:"延时时限",assignStation:"派遣站点",assignPerson:"派遣人",assignComment:"派遣备注"},this.title="任务详情",this.segmentName="detailInfo",this.details=[],this.dispatches=[{name:"派工编号",value:"",isActive:!1},{name:"施工人员",value:"请选择施工人员",isActive:!0},{name:"施工日期",value:"",isActive:!0,isDate:!0},{name:"施工时间",value:"",isActive:!0,isTime:!0},{name:"处理备注",value:"备注可为空",isActive:!0}],this.myDate1="2017-07-19",this.myDate2="15:30:55"}return n.prototype.ngOnInit=function(){console.log(this.tag,"ngOnInit");var n=this.navParams.data;this.getDetail(n),this.dispatchInfo={taskId:n,dispatchOperator:this.globalService.userId,beDispatchedPerson:Number.NaN,dispatchTime:(new Date).getTime(),dispatchType:1,dispatchComment:""},this.dispatches[0].value=n;var l=this.globalService.getFormatTime(new Date(this.dispatchInfo.dispatchTime)).split(" ");this.dispatches[2].value=l[0],this.dispatches[3].value=l[1]},n.prototype.onDispatch=function(n){var l=this,e=this.dispatches[2].value+" "+this.dispatches[3].value,t=new Date(e).getTime()+1e3;if(this.dispatchInfo.dispatchTime>t)return this.globalService.showToast("施工日期或施工时间不准确!");this.dispatchInfo.dispatchTime=t,this.dataService.dispatch(this.dispatchInfo).then(function(n){l.events.publish(l.globalService.stationWorkUpdateEvent),l.navCtrl.pop()}).catch(function(n){return console.error(n)})},n.prototype.segmentChanged=function(n){console.log(this.tag,n),"dispatchInfo"===n.value&&this.setDispatchInfo()},n.prototype.itemSelected=function(n){switch(n.name){case"施工人员":this.popupPersonnelAlert();break;case"处理备注":this.popupRemarkAlert()}},n.prototype.getDetail=function(n){var l=this;this.dataService.searchTaskDetails(n).then(function(n){console.log(n),l.detailObject2Array(n,l.details)}).catch(function(n){return console.error(n)})},n.prototype.detailObject2Array=function(n,l){for(var e in this.detailNames)n.hasOwnProperty(e)&&l.push({name:this.detailNames[e],value:this.transform2String(n[e])})},n.prototype.transform2String=function(n){return"number"==typeof n&&n>1e6?this.globalService.getFormatTime(new Date(n)):n.toString()},n.prototype.setDispatchInfo=function(){var n=this;this.dispatchInfo.beDispatchedPerson||this.dataService.getPersonnels(this.globalService.userId).then(function(l){n.personnels=l,l.length>0&&(n.dispatches[1].value=l[0].fieldPersonnelName,n.dispatchInfo.beDispatchedPerson=l[0].fieldPersonnelId)}).catch(function(n){return console.error(n)})},n.prototype.popupPersonnelAlert=function(){var n=this;if(!this.personnels||this.personnels.length<=0)return this.globalService.showToast("施工人员为空!");var l=this.alertCtrl.create();l.setTitle("请选择施工人员");for(var e=0,t=this.personnels;e<t.length;e++){var i=t[e];l.addInput({type:"radio",label:i.fieldPersonnelName,value:i.fieldPersonnelName+"#"+i.fieldPersonnelId,checked:this.dispatchInfo.beDispatchedPerson===i.fieldPersonnelId})}l.addButton("取消"),l.addButton({text:"确定",handler:function(l){var e=l.split("#");n.dispatches[1].value=e[0],n.dispatchInfo.beDispatchedPerson=Number.parseInt(e[1])}}),l.present().then(function(){})},n.prototype.popupRemarkAlert=function(){var n=this;this.alertCtrl.create({title:"处理备注",message:"请输入处理备注",inputs:[{name:"remark",placeholder:""}],buttons:[{text:"取消",handler:function(n){console.log("Cancel clicked")}},{text:"确定",handler:function(l){console.log("Saved clicked"),n.dispatches[4].value=l.remark,n.dispatchInfo.dispatchComment=l.remark}}]}).present()},n}();le=Object(r.__decorate)([Object(a.i)({selector:"page-workinfo",templateUrl:"workinfo.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(ee=void 0!==s.j&&s.j)&&ee||Object,"function"==typeof(te=void 0!==s.k&&s.k)&&te||Object,"function"==typeof(ie=void 0!==s.b&&s.b)&&ie||Object,"function"==typeof(oe=void 0!==s.d&&s.d)&&oe||Object,"function"==typeof(ue=void 0!==Bn&&Bn)&&ue||Object,"function"==typeof(ae=void 0!==g&&g)&&ae||Object])],le);var ee,te,ie,oe,ue,ae,re=function(){function n(n,l,e,t,i,o){this.navCtrl=n,this.alertCtrl=l,this.loadingCtrl=e,this.events=t,this.dataService=i,this.globalService=o,this.tag="[StationWorkPage]",this.contentNames={happenedAddress:"发生地址",contactPhone:"联系电话",reportPerson:"反映人",reportType:"反映类别",reportContent:"反映内容",sendTime:"派遣时间",resolveLimitedTime:"处理时限",taskState:"任务状态"},this.accepted="已接收",this.undispatchedName="未派工",this.dispatchedName="24小时内已派工",this.title="站点任务",this.subTitle=this.undispatchedName,this.showToolbar=!1,this.showFab=!1,this.isUnDispatchedMode=!0,this.items=[],this.since=0,this.count=10}return n.prototype.ngOnInit=function(){var n=this;console.log(this.tag,"ngOnInit"),this.events.subscribe(this.globalService.stationWorkUpdateEvent,function(){for(n.since=0;n.items.shift(););n.getUnDispatchedTasks(n.since,n.count)}),Promise.all([this.getReflectType(),this.getReflectContent(),this.getUnDispatchedTasks(this.since,this.count)]).then(function(l){return console.log(n.tag,l)}).catch(function(n){return console.error(n)})},n.prototype.ngOnDestroy=function(){this.events.unsubscribe(this.globalService.stationWorkUpdateEvent)},n.prototype.doRefresh=function(n){var l=this;for(console.log(this.tag,n),this.since=0;this.items.shift(););(this.isUnDispatchedMode?this.getUnDispatchedTasks(this.since,this.count):this.getDispatchedTasks(this.since,this.count)).then(function(n){return console.log(l.tag,n)}).catch(function(n){return console.error(n)}).then(function(){return n.complete()})},n.prototype.onSearch=function(n){this.showToolbar=!this.showToolbar,this.content.resize()},n.prototype.onFilter=function(n){var l=this,e=this.alertCtrl.create();e.setTitle("派工类型"),e.addInput({type:"radio",label:this.undispatchedName,value:this.undispatchedName,checked:this.subTitle===this.undispatchedName}),e.addInput({type:"radio",label:this.dispatchedName,value:this.dispatchedName,checked:this.subTitle===this.dispatchedName}),e.addButton("取消"),e.addButton({text:"确定",handler:function(n){if(n!==l.subTitle){var e=l.loadingCtrl.create({content:"Please wait..."});for(e.present(),l.since=0;l.items.shift(););var t;n===l.undispatchedName?(l.subTitle=l.undispatchedName,l.isUnDispatchedMode=!0,t=l.getUnDispatchedTasks(l.since,l.count)):(l.subTitle=l.dispatchedName,l.isUnDispatchedMode=!1,t=l.getDispatchedTasks(l.since,l.count)),t.then(function(n){return console.log(l.tag,n)}).catch(function(n){return console.error(n)}).then(function(){return e.dismiss()})}}}),e.present().then(function(){})},n.prototype.getItems=function(n){},n.prototype.doInfinite=function(n){var l=this;console.log(this.tag,"doInfinite"),setTimeout(function(){l.since+=l.count,l.getUnDispatchedTasks(l.since,l.count).then(function(e){l.items.length>l.count&&(l.showFab=!0),e?n.complete():n.enable(!1)}).catch(function(l){console.error(l),n.complete()})},100)},n.prototype.doScroll2Top=function(n){this.content.scrollToTop()},n.prototype.onAccept=function(n){var l=this;this.dataService.acceptEx({acceptOperator:this.globalService.userId,acceptTime:(new Date).getTime(),taskId:n.taskNo}).then(function(e){n.isAccepted=!0,n.contents[n.contents.length-1].value=l.accepted}).catch(function(n){console.error(n),l.globalService.showToast(n)})},n.prototype.onDispatch=function(n){this.navCtrl.push(le,n.taskNo)},n.prototype.onCancel=function(n){this.popupRemarkAlert({TaskNo:n.taskNo,TaskType:"1",WcOperator:this.globalService.userId,WcTime:(new Date).getTime(),XdComment:"",XdOperator:this.globalService.userId})},n.prototype.getReflectType=function(){var n=this;return this.dataService.getReflectTypes().then(function(l){return n.reflectTypes=l,Promise.resolve(l.length>0)}).catch(function(n){return console.error(n),Promise.resolve(!1)})},n.prototype.getReflectContent=function(){var n=this;return this.dataService.getReflectContents().then(function(l){return n.reflectContents=l,Promise.resolve(l.length>0)}).catch(function(n){return console.error(n),Promise.resolve(!1)})},n.prototype.getUnDispatchedTasks=function(n,l){var e=this;return console.log(this.tag,"getUnDispatchedTasks"),this.dataService.getUnDispatchedTasks(n,l).then(function(n){return e.transform2StationTasks(n,e.items),e.items.length>0&&e.events.publish(e.globalService.mainUpdateEvent,{type:"stationWorkCount",count:e.items.length}),Promise.resolve(n.length>0)}).catch(function(n){return console.error(n),Promise.resolve(!1)})},n.prototype.getDispatchedTasks=function(n,l){var e=this;return console.log(this.tag,"getDispatchedTasks"),this.dataService.getDispatchedTasks(n,l,1440).then(function(n){return e.transform2StationTasks(n,e.items),Promise.resolve(n.length>0)}).catch(function(n){return console.error(n),Promise.resolve(!1)})},n.prototype.transform2StationTasks=function(n,l){for(var e=0,t=n;e<t.length;e++){var i=t[e],o={serialNo:i.serialNo,taskNo:i.taskNo,isAccepted:i.taskState===this.accepted,contents:[]};for(var u in this.contentNames)i.hasOwnProperty(u)&&o.contents.push({name:this.contentNames[u],value:this.transform2String(u,i[u])});l.push(o)}},n.prototype.transform2String=function(n,l){if("number"==typeof l)if("reportType"===n&&this.reflectTypes)for(var e=0,t=this.reflectTypes;e<t.length;e++){if((u=t[e]).wid===l)return u.wName}else if("reportContent"===n&&this.reflectContents)for(var i=0,o=this.reflectContents;i<o.length;i++){var u=o[i];if(u.wid===l)return u.wName}else if(n.endsWith("Time"))return this.globalService.getFormatTime(new Date(l));return l.toString()},n.prototype.popupRemarkAlert=function(n){var l=this;this.alertCtrl.create({title:"销单备注",message:"请输入销单备注",inputs:[{name:"remark",placeholder:""}],buttons:[{text:"取消",handler:function(n){console.log("Cancel clicked")}},{text:"确定",handler:function(e){if(console.log("Saved clicked"),!e.remark)return l.globalService.showToast("请填写备注!");n.XdComment=e.remark,l.cancel(n)}}]}).present()},n.prototype.cancel=function(n){var l=this;this.dataService.cancelEx(n).then(function(n){n&&l.events.publish(l.globalService.stationWorkUpdateEvent),Promise.resolve(n)}).catch(function(n){console.error(n),Promise.resolve(!1)}).then(function(n){n||l.globalService.showToast("销单失败!")})},n}();Object(r.__decorate)([Object(a.N)(s.c),Object(r.__metadata)("design:type","function"==typeof(se=void 0!==s.c&&s.c)&&se||Object)],re.prototype,"content",void 0),re=Object(r.__decorate)([Object(a.i)({selector:"page-stationwork",templateUrl:"stationwork.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(ce=void 0!==s.j&&s.j)&&ce||Object,"function"==typeof(de=void 0!==s.b&&s.b)&&de||Object,"function"==typeof(_e=void 0!==s.i&&s.i)&&_e||Object,"function"==typeof(pe=void 0!==s.d&&s.d)&&pe||Object,"function"==typeof(he=void 0!==Bn&&Bn)&&he||Object,"function"==typeof(me=void 0!==g&&g)&&me||Object])],re);var se,ce,de,_e,pe,he,me,fe=function(){return function(n,l){this.navCtrl=n,this.navParams=l,this.title="公告详情",this.newsTitle=this.navParams.get("title"),this.newsTime=this.navParams.get("time"),this.newsContent=this.navParams.get("newsContent")}}();fe=Object(r.__decorate)([Object(a.i)({selector:"page-newsdetails",templateUrl:"newsdetails.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(ge=void 0!==s.j&&s.j)&&ge||Object,"function"==typeof(ve=void 0!==s.k&&s.k)&&ve||Object])],fe);var ge,ve,be=function(){function n(n,l,e){this.navCtrl=n,this.alertCtrl=l,this.dataService=e,this.tag="[NewsPage]",this.title="系统公告",this.items=[]}return n.prototype.ngOnInit=function(){this.getNews()},n.prototype.getNews=function(){var n=this;this.dataService.getNews().then(function(l){return console.log(n.tag+l),l.length<=0?Promise.resolve(!1):(n.transFormNews(l),Promise.resolve(!0))}).then(function(l){return n.isShow=l})},n.prototype.transFormNews=function(n){for(var l=0,e=n;l<e.length;l++){var t=e[l];this.items.push({newsDate:this.formatDateTime(t.pubTime),newsTitle:t.title,newsContent:t.content})}},n.prototype.removeItem=function(n,l,e){var t=this;n.preventDefault(),n.stopPropagation();for(var i=this,o=0;o<this.items.length;o++)!function(n){i.items[n]==l&&i.alertCtrl.create({title:"提示",message:"是否删除该公告",buttons:[{text:"取消",handler:function(){console.log(t.tag+"Disagree clicked"),e.close()}},{text:"确定",handler:function(){t.items.splice(n,1),console.log(t.tag+"Agree clicked")}}]}).present()}(o)},n.prototype.onDeleteAll=function(n){var l=this;this.alertCtrl.create({title:"提示",message:"是否删除所有公告",buttons:[{text:"取消",handler:function(){console.log(l.tag+"Disagree clicked")}},{text:"确定",handler:function(){l.items.splice(0,l.items.length),console.log(l.tag+"Agree clicked")}}]}).present()},n.prototype.onJumpDetails=function(n){this.navCtrl.push(fe,{title:n.newsTitle,time:n.newsDate,newsContent:n.newsContent})},n.prototype.formatDateTime=function(n){var l=new Date(n),e=l.getFullYear(),t=l.getMonth()+1,i=t<10?"0"+t:t,o=l.getDate(),u=o<10?"0"+o:o,a=l.getHours(),r=a<10?"0"+a:a,s=l.getMinutes(),c=l.getSeconds();return e+"-"+i+"-"+u+" "+r+":"+(s<10?"0"+s:s)+":"+(c<10?"0"+c:c)},n}();be=Object(r.__decorate)([Object(a.i)({selector:"page-news",templateUrl:"news.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(ye=void 0!==s.j&&s.j)&&ye||Object,"function"==typeof(ke=void 0!==s.b&&s.b)&&ke||Object,"function"==typeof(Se=void 0!==Bn&&Bn)&&Se||Object])],be);var ye,ke,Se,Ie=function(){function n(n,l,e,t,i,o,u){this.navCtrl=n,this.globalService=l,this.dataService=e,this.configService=t,this.alertCtrl=i,this.events=o,this.navParams=u,this.tag="[MaterialsAddPage]",this.title="材料登记",this.buttonStr="添加",this.count=0}return n.prototype.ngOnInit=function(){var n=this;Promise.all([this.getOptMaterialLB(),this.getMaterialUnit()]).then(function(l){n.editMaterialInfo()}).catch(function(n){console.log(n)})},n.prototype.getOptMaterialLB=function(){var n=this;return new Promise(function(l,e){n.dataService.getOptMaterialLB().then(function(t){t&&t.length>0?(n.optMaterialsLB=t,l(!0)):e(!1)}).catch(function(n){e(n)})})},n.prototype.getOptMaterialXH=function(n){var l=this;return new Promise(function(e,t){l.dataService.getOptMaterialXH(n).then(function(n){n&&n.length>0?(l.optMaterialsXH=n,e(!0)):t(!1)}).catch(function(n){t(n)})})},n.prototype.getOptMaterialGG=function(n){var l=this;return new Promise(function(e,t){l.dataService.getOptMaterialGG(n).then(function(n){n&&n.length>0?(l.optMaterialsGG=n,e(!0)):t(!1)}).catch(function(n){t(n)})})},n.prototype.getOptMaterialCJ=function(n){var l=this;return new Promise(function(e,t){l.dataService.getOptMaterialCJ(n).then(function(n){n&&n.length>0?(l.optMaterialsCJ=n,e(!0)):t(!1)}).catch(function(n){t(n)})})},n.prototype.getMaterialUnit=function(){var n=this;return new Promise(function(l,e){n.configService.getMaterialUnit().then(function(t){t&&t.length>0?(n.materialsUnits=t,l(!0)):e(!1)}).catch(function(n){e(n)})})},n.prototype.editMaterialInfo=function(){if(this.navParams.get("edit")){var n=this.navParams.get("edit");this.materialLBID=n.category.id,this.materialXHID=n.type.id,this.materialGGID=n.size.id,this.materialCJID=n.productor.id,this.unitID=n.unit.id,this.count=n.count,this.remark=n.remark,this.buttonStr="保存修改",Promise.all([this.getOptMaterialXH(this.materialLBID),this.getOptMaterialGG(this.materialXHID),this.getOptMaterialCJ(this.materialGGID)])}},n.prototype.selectMaterialLB=function(){var n=this;console.log(this.tag,this.materialLBID),this.dataService.getOptMaterialXH(this.materialLBID).then(function(l){n.optMaterialsXH=l,n.materialXHID=null,n.optMaterialsGG.splice(0,n.optMaterialsGG.length),n.optMaterialsCJ.splice(0,n.optMaterialsCJ.length)}).catch(function(n){console.log(n)})},n.prototype.selectMaterialXH=function(){var n=this;this.dataService.getOptMaterialGG(this.materialXHID).then(function(l){n.optMaterialsGG=l,n.materialGGID=null,n.optMaterialsCJ.splice(0,n.optMaterialsCJ.length)}).catch(function(n){console.log(n)})},n.prototype.selectMaterialGG=function(){var n=this;this.dataService.getOptMaterialCJ(this.materialGGID).then(function(l){n.optMaterialsCJ=l,n.materialCJID=null}).catch(function(n){console.log(n)})},n.prototype.addAccount=function(){this.count++},n.prototype.reduceAccount=function(){this.count=--this.count<=0?0:this.count},n.prototype.addClick=function(){var n=this;this.alertCtrl.create({title:"提示",message:"确认信息无误？",buttons:[{text:"取消",handler:function(){console.log("Disagree clicked")}},{text:"确定",handler:function(){var l=new An;n.foreachMaterial(l),l.count=n.count,l.remark=n.remark;n.events.publish(n.globalService.materialsUpdateEvent,"添加"==n.buttonStr,l),n.navCtrl.pop()}}]}).present()},n.prototype.foreachMaterial=function(n){for(var l=0,e=this.optMaterialsLB;l<e.length;l++){if((s=e[l]).id==this.materialLBID){n.category=s;break}}for(var t=0,i=this.optMaterialsXH;t<i.length;t++){if((s=i[t]).id==this.materialXHID){n.type=s;break}}for(var o=0,u=this.optMaterialsGG;o<u.length;o++){if((s=u[o]).id==this.materialGGID){n.size=s;break}}for(var a=0,r=this.optMaterialsCJ;a<r.length;a++){var s=r[a];if(s.id==this.materialCJID){n.productor=s;break}}for(var c=0,d=this.materialsUnits;c<d.length;c++){var _=d[c];if(_.id==this.unitID){n.unit=_;break}}},n}();Ie=Object(r.__decorate)([Object(a.i)({selector:"page-materialsadd",templateUrl:"materialsadd.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(Te=void 0!==s.j&&s.j)&&Te||Object,"function"==typeof(Ee=void 0!==g&&g)&&Ee||Object,"function"==typeof(Ce=void 0!==Bn&&Bn)&&Ce||Object,"function"==typeof(Oe=void 0!==M&&M)&&Oe||Object,"function"==typeof(we=void 0!==s.b&&s.b)&&we||Object,"function"==typeof(De=void 0!==s.d&&s.d)&&De||Object,"function"==typeof(Pe=void 0!==s.k&&s.k)&&Pe||Object])],Ie);var Te,Ee,Ce,Oe,we,De,Pe,je=function(){function n(n,l,e,t,i,o,u){this.navCtrl=n,this.navParams=l,this.globalService=e,this.dataService=t,this.toastCtrl=i,this.events=o,this.alertCtrl=u,this.tag="[MaterialsPage]",this.title="材料登记管理",this.segmentName="basicInfo",this.items=[],this.isShowButtons=!1,this.taskId=this.navParams.data.split("#")[0]}return n.prototype.ngOnInit=function(){var n=this;this.dataService.getMaintainInfo(this.taskId).then(function(l){l.serialNumber==n.taskId&&(n.details=[{name:"维修类别",value:l.maintenanceType},{name:"维修地址",value:l.maintenanceAddress},{name:"所属区域",value:l.area},{name:"报修内容",value:l.repairContent}])}).catch(function(n){console.log(n)}),this.dataService.getMaterialInfo(this.taskId).then(function(l){console.log(n.tag,l),n.items=l.infos,n.isShowButtons=l.uploadFlag==n.globalService.uploadedFlagForLocal}).catch(function(l){n.isShowButtons=!0,console.log(n.tag,l)}),this.events.subscribe(this.globalService.materialsUpdateEvent,function(l,e){if(n.segmentName="materialsList",console.log(n.tag,l,e),l)n.items.push(e);else if(n.needEditItem)for(var t=0;t<n.items.length;t++)n.items[t]==n.needEditItem&&(n.items[t]=e)})},n.prototype.ngOnDestroy=function(){this.events.unsubscribe(this.globalService.materialsUpdateEvent)},n.prototype.addMaterials=function(){this.navCtrl.push(Ie)},n.prototype.deleteMaterials=function(n){for(var l=this,e=this,t=0;t<this.items.length;t++)!function(t){e.items[t]==n&&e.alertCtrl.create({title:"提示",message:"是否删除该材料?",buttons:[{text:"取消",handler:function(){}},{text:"确定",handler:function(){l.items.splice(t,1)}}]}).present()}(t)},n.prototype.editMaterials=function(n){this.needEditItem=n,this.navCtrl.push(Ie,{edit:n})},n.prototype.saveMaterials=function(){var n=this;if(0==this.items.length){return this.alertCtrl.create({title:"提示",subTitle:"请先添加材料",buttons:["确认"]}).present(),void(this.segmentName="materialsList")}for(var l,e=[],t=0,i=this.items;t<i.length;t++){var o=i[t];(l=new Un).userId=this.globalService.userId,l.serialNumber=this.taskId,l.materialCategory=o.category.id,l.materialType=o.type.id,l.materialSize=o.size.id,l.manufacturer=o.productor.id,l.materialUnit=o.unit.id,l.count=o.count,l.remark=o.remark,e.push(l)}if(e&&!(e.length<=0)){this.alertCtrl.create({title:"提示",message:"确认保存上传？",buttons:[{text:"取消",handler:function(){console.log("Disagree clicked")}},{text:"确定",handler:function(){var l=new Rn;l.taskId=n.taskId,l.uploadFlag=n.globalService.uploadedFlagForLocal,l.infos=e,n.dataService.saveMaterialInfo(l).then(function(l){console.log(n.tag,l);n.toastCtrl.create({duration:2e3,message:l?"保存成功":"上传失败",position:"bottom"}).present(),n.navCtrl.pop()}).catch(function(l){console.log(n.tag,l),n.navCtrl.pop()})}}]}).present()}},n}();je=Object(r.__decorate)([Object(a.i)({selector:"page-materials",templateUrl:"materials.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(Ne=void 0!==s.j&&s.j)&&Ne||Object,"function"==typeof(Me=void 0!==s.k&&s.k)&&Me||Object,"function"==typeof(xe=void 0!==g&&g)&&xe||Object,"function"==typeof(Le=void 0!==Bn&&Bn)&&Le||Object,"function"==typeof(Ae=void 0!==s.o&&s.o)&&Ae||Object,"function"==typeof(Ue=void 0!==s.d&&s.d)&&Ue||Object,"function"==typeof(Re=void 0!==s.b&&s.b)&&Re||Object])],je);var Ne,Me,xe,Le,Ae,Ue,Re,Fe=function(){function n(){}return n.prototype.write=function(n,l){l&&(l=JSON.stringify(l)),localStorage.setItem(n,l)},n.prototype.read=function(n){var l=localStorage.getItem(n);return l&&"undefined"!=l&&"null"!=l?JSON.parse(l):null},n.prototype.remove=function(n){localStorage.removeItem(n)},n.prototype.clear=function(){sessionStorage.clear()},n}();Fe=Object(r.__decorate)([Object(a.o)(),Object(r.__metadata)("design:paramtypes",[])],Fe);var Be=function(){function n(n,l,e){this.configService=n,this.toastCtrl=l,this.viewCtrl=e}return n.prototype.ngOnInit=function(){var n=this;Promise.all([this.configService.getServerBaseUris(),this.configService.getFileBaseUris(),this.configService.getMaterialsBaseUris()]).then(function(l){var e=l[0],t=e[1],i=l[1],o=i[0],u=i[1],a=l[2],r=a[0],s=a[1];n.hotLineOuterBaseUri=e[0],n.hotLineInnerBaseUri=t,n.fileOuterBaseUri=o,n.fileInnerBaseUri=u,n.materialsOuterBaseUri=r,n.materialsInnerBaseUri=s}).then(function(){return n.configService.isOuterNetwork()}).then(function(l){return n.isOuterNet=l}).then(function(){return n.showOrHideMaterial()}).catch(function(n){return console.log(n)})},n.prototype.showOrHideMaterial=function(){var n=this;return this.configService.getSysRegion().then(function(l){l&&l===M.fushunRegion&&(n.showMaterial=!0)}).catch(function(n){return console.error(n)}).then(function(){return n.showMaterial=!1})},n.prototype.onOk=function(n){var l=this,e=this.toastCtrl.create({duration:2e3,position:"bottom"});this.hotLineOuterBaseUri&&this.hotLineInnerBaseUri&&this.fileOuterBaseUri&&this.fileInnerBaseUri&&this.materialsOuterBaseUri&&this.materialsInnerBaseUri?Promise.all([this.configService.setServerBaseUris(this.hotLineOuterBaseUri,this.hotLineInnerBaseUri,this.isOuterNet),this.configService.setFileBaseUris(this.fileOuterBaseUri,this.fileInnerBaseUri,this.isOuterNet),this.configService.setMaterialBaseUris(this.materialsOuterBaseUri,this.materialsInnerBaseUri,this.isOuterNet)]).then(function(n){e.setMessage("保存成功").present()}).catch(function(n){console.error(n),e.setMessage("保存失败").present()}).then(function(){return l.viewCtrl.dismiss()}):e.setMessage("请输入有效地址").present()},n.prototype.onCancel=function(n){this.viewCtrl.dismiss()},n}();Be=Object(r.__decorate)([Object(a.i)({template:'\n    <ion-list>\n      <ion-list-header color="primary">网络设置</ion-list-header>\n      \n      <ion-item>\n        <ion-label color="label">数据服务外网地址:</ion-label>\n      </ion-item>\n      <ion-item>\n        <ion-input type="text" [(ngModel)]="hotLineOuterBaseUri" clearInput></ion-input>\n      </ion-item>\n      \n      <ion-item>\n        <ion-label color="label">数据服务内网地址:</ion-label>\n      </ion-item>\n      <ion-item>\n        <ion-input type="text" [(ngModel)]="hotLineInnerBaseUri" clearInput></ion-input>\n      </ion-item>\n      \n      <ion-item>\n        <ion-label color="label">文件服务外网地址:</ion-label>\n      </ion-item>\n      <ion-item>\n        <ion-input type="text" [(ngModel)]="fileOuterBaseUri" clearInput></ion-input>\n      </ion-item>\n      \n      <ion-item>\n        <ion-label color="label">文件服务内网地址:</ion-label>\n      </ion-item>\n      <ion-item>\n        <ion-input type="text" [(ngModel)]="fileInnerBaseUri" clearInput></ion-input>\n      </ion-item>\n      \n      <ion-item *ngIf="showMaterial">\n        <ion-label color="label">材料服务外网地址:</ion-label>\n      </ion-item>\n      <ion-item *ngIf="showMaterial">\n        <ion-input type="text" [(ngModel)]="materialsOuterBaseUri" clearInput></ion-input>\n      </ion-item>\n      \n      <ion-item *ngIf="showMaterial">\n        <ion-label color="label">材料服务内网地址:</ion-label>\n      </ion-item>\n      <ion-item *ngIf="showMaterial">\n        <ion-input type="text" [(ngModel)]="materialsInnerBaseUri" clearInput></ion-input>\n      </ion-item>\n      \n      <ion-item>\n        <ion-checkbox [(ngModel)]="isOuterNet"></ion-checkbox>\n        <ion-label>使用外网</ion-label>\n      </ion-item>\n\n      <button ion-item style="text-align:center; color:#488aff;" (click)="onOk($event)">确定</button>\n      <button ion-item style="text-align:center; color:#488aff;" (click)="onCancel($event)">取消</button>\n    </ion-list>\n  ',styles:[".selected {\n      font-weight: bold;\n    }"]}),Object(r.__metadata)("design:paramtypes",["function"==typeof(Ke=void 0!==M&&M)&&Ke||Object,"function"==typeof(He=void 0!==s.o&&s.o)&&He||Object,"function"==typeof(Ge=void 0!==s.p&&s.p)&&Ge||Object])],Be);var Ke,He,Ge,Ve=function(){function n(n,l,e){this.configService=n,this.toastCtrl=l,this.viewCtrl=e,this.tag="[OverdueTimePage]"}return n.prototype.ngOnInit=function(){this.getOverdueTime()},n.prototype.getOverdueTime=function(){var n=this;return this.configService.getOverdueTime().then(function(l){return n.overdueTime=l}).catch(function(l){return console.error(n.tag+l)}).then(function(){n.overdueTime?(n.overdueTime.arrived||(n.overdueTime.arrived=18e5),n.overdueTime.reply||(n.overdueTime.reply=18e5),n.overdueTime.delayReply||(n.overdueTime.delayReply=18e5),n.overdueTime.checkInterval||(n.overdueTime.checkInterval=6e4)):n.overdueTime={arrived:18e5,reply:18e5,delayReply:18e5,checkInterval:6e4}}).then(function(){n.arrivedDeadLine=n.overdueTime.arrived,n.replyDeadLine=n.overdueTime.reply,n.checkInterval=n.overdueTime.checkInterval})},n.prototype.onOk=function(n){var l=this,e=this.toastCtrl.create({duration:2e3,position:"bottom"});!this.arrivedDeadLine||this.arrivedDeadLine<=0||!this.replyDeadLine||this.replyDeadLine<=0||!this.checkInterval||this.checkInterval<=0?e.setMessage("请输入有效数值").present():(this.overdueTime.arrived=this.arrivedDeadLine,this.overdueTime.reply=this.replyDeadLine,this.overdueTime.checkInterval=this.checkInterval,this.configService.setOverdueTime(this.overdueTime).then(function(n){e.setMessage("保存成功").present()}).catch(function(n){console.error(n),e.setMessage("保存失败").present()}).then(function(){return l.viewCtrl.dismiss()}))},n.prototype.onCancel=function(n){this.viewCtrl.dismiss()},n}();Ve=Object(r.__decorate)([Object(a.i)({template:'\n    <ion-list>\n      <ion-list-header color="primary">超期设置(单位:毫秒)</ion-list-header>\n      \n      <ion-item>\n        <ion-label color="label">到场超期</ion-label>\n      </ion-item>\n      <ion-item>\n        <ion-input type="text" [(ngModel)]="arrivedDeadLine" clearInput></ion-input>\n      </ion-item>\n      \n      <ion-item>\n        <ion-label color="label">处理超期</ion-label>\n      </ion-item>\n      <ion-item>\n        <ion-input type="text" [(ngModel)]="replyDeadLine" clearInput></ion-input>\n      </ion-item>\n      \n      <ion-item>\n        <ion-label color="label">检查频率</ion-label>\n      </ion-item>\n      <ion-item>\n        <ion-input type="text" [(ngModel)]="checkInterval" clearInput></ion-input>\n      </ion-item>\n\n      <button ion-item style="text-align:center; color:#488aff;" (click)="onOk($event)">确定</button>\n      <button ion-item style="text-align:center; color:#488aff;" (click)="onCancel($event)">取消</button>\n    </ion-list>\n  ',styles:[".selected {\n      font-weight: bold;\n    }"]}),Object(r.__metadata)("design:paramtypes",["function"==typeof($e=void 0!==M&&M)&&$e||Object,"function"==typeof(We=void 0!==s.o&&s.o)&&We||Object,"function"==typeof(qe=void 0!==s.p&&s.p)&&qe||Object])],Ve);var $e,We,qe,Xe=function(){function n(n,l,e,t,i,o,u,a,r,s,c,d){this.navCtrl=n,this.alertCtrl=l,this.actionsheetCtrl=e,this.configService=t,this.globalService=i,this.storageService=o,this.storage=u,this.popoverCtrl=a,this.fileService=r,this.events=s,this.dataService=c,this.toastCtrl=d,this.tag="[SettingPage]",this.title="系统参数",this.alermStyle="仅铃声",this.isShow=!1}return n.prototype.ngOnInit=function(){},n.prototype.ngOnDestroy=function(){this.events.unsubscribe(this.globalService.materialsUpdateEvent)},n.prototype.notifyIsGrid=function(){var n=this;console.log(this.tag+"Toggled:"+this.isGrid),this.configService.setGridStyle(this.isGrid).then(function(l){if(l){n.events.publish(n.globalService.mainUpdateEvent,{type:"gridStyle",gridStyle:n.isGrid})}else n.isGrid=!n.isGrid}).catch(function(n){console.log(n)})},n.prototype.notifyIsOutNet=function(){},n.prototype.showOverdueTime=function(){this.popoverCtrl.create(Ve).present()},n.prototype.getOverdueFromFile=function(){var n=this;this.configService.getOverdueTime().then(function(l){console.log(n.tag+l),n.overdueTime=l}).catch(function(l){console.log(n.tag+l)})},n.prototype.showNetwork=function(){this.popoverCtrl.create(Be).present()},n.prototype.showDownloadWords=function(){var n=this;this.alertCtrl.create({title:"更新词语",message:"是否确定需要更新词语信息？",buttons:[{text:"取消",handler:function(){console.log(n.tag+"取消 clicked")}},{text:"确定",handler:function(){var l=n.toastCtrl.create({duration:2e3,position:"bottom"});Promise.all([n.dataService.downloadWords(),n.dataService.downloadMaterials(),n.dataService.downloadPersonnels()]).then(function(n){l.setMessage(n[0]&&n[1]&&n[2]?"更新成功":"更新失败"),l.present()}).catch(function(n){console.log(n),l.setMessage("更新失败"),l.present()})}}]}).present()},n.prototype.showHeartSetting=function(){var n=this;this.alertCtrl.create({title:"心跳设置",message:"心跳频率(毫秒):",inputs:[{name:"heartBeat",placeholder:"请输入心跳频率"}],buttons:[{text:"取消",role:"cancel",handler:function(l){console.log(n.tag+"showHeartSetting Cancel clicked")}},{text:"保存",handler:function(l){n.configService.setKeepAlive(l.heartBeat).then(function(e){n.keepAlive=l.heartBeat}).catch(function(l){console.log(n.tag+"showHeartSetting:"+l)})}}]}).present()},n.prototype.showAlermType=function(){var n=this;this.actionsheetCtrl.create({title:"提醒方式",buttons:[{text:"仅铃声",role:"destructive",icon:"notifications",handler:function(){n.alermStyle="仅铃声",n.storageService.write("alermStyle","onlyRing"),console.log(n.tag+"showAlermType onlyRing clicked")}},{text:"仅震动",icon:"pulse",handler:function(){n.alermStyle="仅震动",n.storageService.write("alermStyle","onlyShake"),console.log(n.tag+"showAlermType onlyShake clicked")}},{text:"铃声+震动",icon:"arrow-dropright-circle",handler:function(){n.alermStyle="铃声+震动",n.storageService.write("alermStyle","ringShake"),console.log(n.tag+"showAlermType Play clicked")}},{text:"取消",role:"取消",icon:"close",handler:function(){console.log(n.tag+"showAlermType Cancel clicked")}}]}).present()},n.prototype.showRevertSetting=function(){var n=this;this.alertCtrl.create({title:"警告",message:"数据都上传了吗？确定要恢复出厂设置吗？回复后请重新登录！",buttons:[{text:"取消",handler:function(){console.log(n.tag+"取消 clicked")}},{text:"确定",handler:function(){n.storage.clear(),console.log(n.tag+"保存 clicked")}}]}).present()},n.prototype.onExit=function(){var n=this;this.alertCtrl.create({title:"提示",message:"是否完全退出当前应用？",buttons:[{text:"取消",handler:function(){console.log(n.tag+"取消 clicked")}},{text:"确定",handler:function(){console.log(n.tag+"保存 clicked"),n.globalService.quit()}}]}).present()},n}();Xe=Object(r.__decorate)([Object(a.i)({selector:"page-setting",templateUrl:"setting.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(Ye=void 0!==s.j&&s.j)&&Ye||Object,"function"==typeof(Je=void 0!==s.b&&s.b)&&Je||Object,"function"==typeof(ze=void 0!==s.a&&s.a)&&ze||Object,"function"==typeof(Ze=void 0!==M&&M)&&Ze||Object,"function"==typeof(Qe=void 0!==g&&g)&&Qe||Object,"function"==typeof(nt=void 0!==Fe&&Fe)&&nt||Object,"function"==typeof(lt=void 0!==p.b&&p.b)&&lt||Object,"function"==typeof(et=void 0!==s.m&&s.m)&&et||Object,"function"==typeof(tt=void 0!==C&&C)&&tt||Object,"function"==typeof(it=void 0!==s.d&&s.d)&&it||Object,"function"==typeof(ot=void 0!==Bn&&Bn)&&ot||Object,"function"==typeof(ut=void 0!==s.o&&s.o)&&ut||Object])],Xe);var Ye,Je,ze,Ze,Qe,nt,lt,et,tt,it,ot,ut,at;!function(n){n[n.Download=0]="Download",n[n.ReplyOrReject=1]="ReplyOrReject",n[n.Search=2]="Search",n[n.Delete=3]="Delete"}(at||(at={}));var rt=function(){function n(n,l,e,t,i,o){this.navCtrl=n,this.dataService=l,this.alertCtrl=e,this.events=t,this.globalService=i,this.configService=o,this.tag="[MyWorkPage]",this.title="任务列表",this.showToolbar=!1,this.showFab=!1,this.showMaterial=!1,this.items=[],this.overdueTime=null,this.since=this.globalService.taskSinceDefault,this.count=this.globalService.taskCountDefault10,this.isOperationBusy=!1,this.key="",this.replyHistories=[],this.isCheckingOverdueTime=!1}return n.prototype.ngOnInit=function(){var n=this;console.log(this.tag,"ngOnInit"),this.subscribeEvent(this.events),this.showFab=!1,this.getOverdueTime().then(function(){return n.showOrHideMaterial()}).then(function(){return n.getTasks(n.since,n.count,n.key)}).then(function(l){n.infiniteScroll.enable(l),n.getTaskCount(),n.intervalId=setInterval(function(){n.isActivePage&&n.checkOverdueTimeTasks()},n.overdueTime.checkInterval)}).catch(function(n){return console.error(n)})},n.prototype.ngOnDestroy=function(){console.log(this.tag,"ngOnDestroy"),this.events.unsubscribe(this.globalService.myWorkDownloadFinishEvent),this.events.unsubscribe(this.globalService.myWorkUpdateEvent),this.intervalId&&clearInterval(this.intervalId)},n.prototype.ionViewDidEnter=function(){console.log("ionViewDidEnter"),this.isActivePage=!0},n.prototype.ionViewWillLeave=function(){console.log("ionViewWillLeave"),this.isActivePage=!1},n.prototype.doRefresh=function(n){console.log(this.tag,"doRefresh"),this.key="",this.dataService.downloadTasksAndDetails()},n.prototype.doInfinite=function(n){var l=this;console.log(this.tag,"doInfinite begin"),setTimeout(function(){l.since+=l.count,l.getTasks(l.since,l.count,l.key).then(function(e){e?n.complete():(n.enable(!1),l.checkOverdueTimeTasks()),console.log(l.tag,"doInfinite end")}).catch(function(l){console.error(l),n.complete()}).then(function(){l.showFab=l.items.length>l.count})},100)},n.prototype.itemSelected=function(n,l){var e=this;console.log(this.tag,"Selected Item "+l),this.globalService.getLocation().then(function(t){switch(n.processes[l].event){case"accept":e.accept(n,t);break;case"go":e.go(n,t);break;case"arrive":e.arrive(n,t);break;case"reply":e.reply(n,t);break;case"reject":e.rejectPrompt(n,t);break;case"delay":e.delayPrompt(n,t)}}).catch(function(n){console.error(n),e.globalService.showToast(n)})},n.prototype.toggleToolbar=function(n){this.showToolbar=!this.showToolbar,this.content.resize()},n.prototype.onInput=function(n){if(this.isOperationBusy)return this.globalService.showToast("后台繁忙...");var l=n.target.value;this.key=l&&""!=l.trim()?l:"",this.resetTasks(at.Search)},n.prototype.onCancel=function(n){console.log(this.tag,"onCancel")},n.prototype.doScroll2Top=function(n){this.content.scrollToTop()},n.prototype.onLocate=function(n){this.navCtrl.push(ol,new tl(el.Locate,n.location,n.id))},n.prototype.onPreview=function(n){n.isPreview=!0;var l=this.findReplyHistory(n.id);this.navCtrl.push(vl,[n,l,this.overdueTime,!0])},n.prototype.onMaterials=function(n){this.navCtrl.push(je,n.id)},n.prototype.onDelete=function(n){var l=this;this.alertCtrl.create({title:"删除任务",message:"是否删除该任务及其所有操作?",buttons:[{text:"取消",role:"cancel",handler:function(){console.log("Cancel clicked")}},{text:"确定",handler:function(){console.log("Ok clicked"),l.dataService.deleteOneTaskWithAllInfos(n.id).then(function(n){return l.resetTasks(at.Delete)}).catch(function(n){return console.error(n)})}}]}).present()},n.prototype.getTasks=function(n,l,e){var t=this;return this.dataService.getTasks(n,l,e).then(function(n){if(console.log(t.tag+"getTasks: "+n.length),n.length<=0)return Promise.resolve(!1);var l=V.transform(n,t.items);return t.setProcesses(t.items).then(function(){return l.map(function(n){return n.id})}).then(function(n){return t.dataService.checkIfExistNotUploadedHistories(n)}).then(function(n){for(var e=0,i=l;e<i.length;e++){!function(l){var e=n.find(function(n){return n.taskId===l.id});e&&(l.isUploaded=e.uploadedFlag===t.globalService.uploadedFlagForUploaded)}(i[e])}return Promise.resolve(!0)})})},n.prototype.getOverdueTime=function(){var n=this;return this.configService.getOverdueTime().then(function(l){return n.overdueTime=l}).catch(function(l){return console.error(n.tag+l)}).then(function(){n.overdueTime?(n.overdueTime.arrived||(n.overdueTime.arrived=18e5),n.overdueTime.reply||(n.overdueTime.reply=18e5),n.overdueTime.delayReply||(n.overdueTime.delayReply=18e5),n.overdueTime.checkInterval||(n.overdueTime.checkInterval=6e4)):n.overdueTime={arrived:18e5,reply:18e5,delayReply:18e5,checkInterval:6e4}})},n.prototype.showOrHideMaterial=function(){var n=this;return this.configService.getSysRegion().then(function(l){l&&l===M.fushunRegion&&(n.showMaterial=!0)}).catch(function(n){return console.error(n)}).then(function(){return n.showMaterial=!1})},n.prototype.checkOverdueTimeTasks=function(){var n=this;this.isCheckingOverdueTime||(this.isCheckingOverdueTime=!0,this.dataService.checkOverdueTimeTasks(this.overdueTime).then(function(l){if(l&&!(l.length<=0)){for(var e=0,t=0,i=l;t<i.length;t++){!function(l){if(!l.extendedInfo)return"continue";var t=n.items.find(function(n){return n.id===l.taskId});t&&(l.extendedInfo.arrivedDeadLine?(t.isOverdueArrivedLine=!0,e++):l.extendedInfo.replyDeadLine&&(t.isOverdueReplyLine=!0,e++))}(i[t])}e>0&&(n.globalService.isChrome||n.dataService.playAlarm(),n.showOverdueCountAlert(e))}}).catch(function(l){return console.error(n.tag+l)}).then(function(){return n.isCheckingOverdueTime=!1}))},n.prototype.showOverdueCountAlert=function(n){this.alertCtrl.create({title:"提示!",subTitle:"当前有"+n+"个热线工单任务超期",buttons:["OK"]}).present()},n.prototype.setProcesses=function(n){return new Promise(function(l,e){for(var i=!1,o=0,u=n;o<u.length;o++){var a=u[o],r=new G;if(t(a,r)){switch(r.accept.time&&(r.accept.show=!0,r.accept.color=K,r.accept.done=!0,a.lastProcess="accept"),r.go.time&&(r.go.show=!0,r.go.color=K,r.go.done=!0,"accept"!=a.lastProcess&&(r.accept.show=!0,r.accept.color=K,r.accept.done=!0),a.lastProcess="go"),r.arrive.time&&(r.arrive.show=!0,r.arrive.color=K,r.arrive.done=!0,"go"!=a.lastProcess&&(r.go.show=!0,r.go.color=K,r.go.done=!0),a.lastProcess="arrive"),r.reply.time&&(r.reply.show=!0,r.reply.color=K,r.reply.done=!0,"arrive"!=a.lastProcess&&(r.arrive.show=!0,r.arrive.color=K,r.arrive.done=!0),a.lastProcess="reply"),r.reject.time&&(r.reject.show=!0,r.reject.color=K,r.reject.done=!0,a.lastProcess="reject"),r.delay.time&&(r.delay.show=!0,r.delay.color=K,r.delay.done=!0,a.lastProcess="delay"),r.cancel.time&&(r.cancel.show=!0,r.cancel.color=K,r.cancel.done=!0,a.lastProcess="cancel"),a.lastProcess){case"accept":r.go.show=!0,r.reject.show=!0,r.delay.show=!0;break;case"go":r.arrive.show=!0,r.reject.show=!0,r.delay.show=!0;break;case"arrive":r.reply.show=!0,r.reject.show=!0,r.delay.show=!0;break;case"reply":r.reject.show=!1,r.delay.show=r.delay.done,r.cancel.show=!0;break;case"reject":r.go.show=r.go.done,r.arrive.show=r.arrive.done,r.reply.show=r.reply.done,r.delay.show=r.delay.done}i=!0}}l(i)})},n.prototype.getTaskCount=function(){var n=this;this.dataService.getTaskCount().then(function(l){n.events.publish(n.globalService.mainUpdateEvent,{type:"myWorkCount",count:l}),n.globalService.isChrome&&(l=n.items.length),l>0&&n.checkOverdueTimeTasks()}).catch(function(n){return console.error(n)})},n.prototype.accept=function(n,l){var e=this,i=new G;if(t(n,i)&&!i.accept.done){var u=new Date,a={acceptTime:u.getTime(),location:l,taskId:n.id,userId:this.globalService.userId},r=o(a,n,i),s={uploadedFlag:this.globalService.uploadedFlagForLocal};this.dataService.accept(a,r,s).then(function(l){var t=s.uploadedFlag===e.globalService.uploadedFlagForUploaded;i.accept.time=u,i.accept.color=K,i.accept.done=!0,i.accept.isUploaded=t,i.go.show=!0,i.reject.show=!0,i.delay.show=!0,n.lastProcess="accept",n.state=B.Accept,n.isUploaded=n.isUploaded&&t}).catch(function(n){console.error(e.tag,n),e.globalService.showToast(n)})}},n.prototype.go=function(n,l){var e=this,i=new G;if(t(n,i)&&!i.go.done){var u={goTime:(new Date).getTime(),location:l,taskId:n.id,userId:this.globalService.userId},a=o(u,n,i),r={uploadedFlag:this.globalService.uploadedFlagForLocal};this.dataService.go(u,a,r).then(function(l){var t=r.uploadedFlag===e.globalService.uploadedFlagForUploaded;i.go.time=new Date,i.go.color=K,i.go.done=!0,i.go.isUploaded=t,i.arrive.show=!0,i.reject.show=!0,i.delay.show=!0,n.lastProcess="go",n.state=B.Go,n.isUploaded=n.isUploaded&&t}).catch(function(n){console.error(e.tag+n),e.globalService.showToast(n)})}},n.prototype.arrive=function(n,l){var e=this,i=new G;if(t(n,i)&&!i.arrive.done){var u=new Date,a={arrivedTime:u.getTime(),location:l,taskId:n.id,userId:this.globalService.userId},r=o(a,n,i),s={uploadedFlag:this.globalService.uploadedFlagForLocal};this.dataService.arrive(a,r,s).then(function(l){var t=s.uploadedFlag===e.globalService.uploadedFlagForUploaded;i.arrive.time=u,i.arrive.color=K,i.arrive.done=!0,i.arrive.isUploaded=t,i.reply.show=!0,i.reject.show=!0,i.delay.show=!0,n.lastProcess="arrive",n.state=B.Arrived,n.isUploaded=n.isUploaded&&t}).catch(function(n){console.error(e.tag+n),e.globalService.showToast(n)})}},n.prototype.reply=function(n,l){var e=new G;if(t(n,e)&&(!e.reply.done||!e.reply.isUploaded)){n.isPreview=!1;var i=this.findReplyHistory(n.id);this.navCtrl.push(vl,[n,i,this.overdueTime,!1])}},n.prototype.reject=function(n,l){var e=this,i=new G;if(t(n,i)&&!i.reject.done){var u=new Date,a=i.reject.extend,r={rejectTime:u.getTime(),rejectReason:a.reason,location:l,taskId:n.id,userId:this.globalService.userId},s=o(r,n,i),c={uploadedFlag:this.globalService.uploadedFlagForLocal};this.dataService.reject(r,s,c).then(function(l){var t=c.uploadedFlag===e.globalService.uploadedFlagForUploaded;i.reject.time=u,i.reject.color=K,i.reject.done=!0,i.reject.isUploaded=t,i.go.show=i.go.done,i.arrive.show=i.arrive.done,i.reply.show=i.reply.done,i.delay.show=i.delay.done,n.lastProcess="reject",n.state=B.Reject,n.isUploaded=n.isUploaded&&t,e.events.publish(e.globalService.myWorkUpdateEvent,{type:"reject"})}).catch(function(n){console.error(e.tag+n),e.globalService.showToast(n)})}},n.prototype.delay=function(n,l){var e=this,i=new G;if(t(n,i)&&!i.delay.done){var u=!1,a="accept",r=i.delay.extend;if(n.lastProcess===a&&this.sortDelayProcess(n,a,"delay","延迟时间",r)&&t(n,i=new G)&&(u=!0),a="go",n.lastProcess===a&&this.sortDelayProcess(n,a,"delay","延迟时间",r)&&t(n,i=new G)&&(u=!0),a="arrive",n.lastProcess===a&&this.sortDelayProcess(n,a,"delay","延迟时间",r)&&t(n,i=new G)&&(u=!0),u){var s=new Date,c=i.delay.extend,d={delayTime:s.getTime(),deadline:c.deadline.getTime(),comment:c.comment,location:l,taskId:n.id,userId:this.globalService.userId},_=o(d,n,i),p={uploadedFlag:this.globalService.uploadedFlagForLocal};this.dataService.delay(d,_,p).then(function(l){var t=p.uploadedFlag===e.globalService.uploadedFlagForUploaded;i.delay.time=s,i.delay.color=K,i.delay.done=!0,i.delay.isUploaded=t,n.lastProcess="delay",n.state=B.Delay,n.isUploaded=n.isUploaded&&t}).catch(function(n){console.error(e.tag+n),e.globalService.showToast(n)})}}},n.prototype.sortDelayProcess=function(n,l,e,t,i){if(n.processes.length>0&&l&&e&&t&&i){for(var o=void 0,u=void 0,a=n.processes,r=0;r<a.length;r++)a[r].event===l?o=r:a[r].event===e&&(u=r);if(o>=u)return!1;for(r=u;r>o;r--)a[r].event=a[r-1].event,a[r].name=a[r-1].name,a[r].time=a[r-1].time,a[r].show=a[r-1].show,a[r].color=a[r-1].color,a[r].done=a[r-1].done,a[r].extend=a[r-1].extend;return a[o+1].event=e,a[o+1].name=t,a[o+1].extend=i,!0}return!1},n.prototype.rejectPrompt=function(n,l){var e=this,i=new G;if(t(n,i)&&!i.reject.done){this.alertCtrl.create({title:"退单申请",message:"请填写退单信息!",inputs:[{name:"reason",placeholder:"原因"}],buttons:[{text:"取消",handler:function(n){}},{text:"确定",handler:function(t){if(console.log(e.tag,t),!t.reason)return e.globalService.showToast("请填写原因!");i.reject.extend={reason:t.reason},e.reject(n,l)}}]}).present()}},n.prototype.delayPrompt=function(n,l){var e=this,i=new G;if(t(n,i)&&!i.delay.done){this.alertCtrl.create({title:"延迟申请",message:"请填写延迟信息!",inputs:[{name:"day",placeholder:"天数",type:"number"},{name:"hour",placeholder:"小时",type:"number"},{name:"minute",placeholder:"分钟",type:"number"},{name:"reason",placeholder:"原因"}],buttons:[{text:"取消",handler:function(n){}},{text:"确定",handler:function(t){if(console.log(e.tag,t),Number.isNaN(t.day)&&Number.isNaN(t.hour)&&Number.isNaN(t.minute))return e.globalService.showToast("请填写有效的时间!");if(!t.reason)return e.globalService.showToast("请填写原因!");var o=Number.parseInt(t.day),u=Number.parseInt(t.hour),a=Number.parseInt(t.minute);if(Number.isFinite(o)&&o<0||Number.isFinite(u)&&u<0||Number.isFinite(a)&&a<0)return e.globalService.showToast("填写的时间必须大于零!");var r=0;Number.isFinite(o)&&(r+=24*o*60),Number.isFinite(u)&&(r+=60*u),Number.isFinite(a)&&(r+=a);var s=new Date((new Date).getTime()+6e4*r);i.delay.extend={comment:t.reason,deadline:s},e.judgeDelayTime(n,i.delay.extend,l)}}]}).present()}},n.prototype.judgeDelayTime=function(n,l,e){var t=this;this.dataService.getTaskDetail(n.id).then(function(i){if(i&&i.delayReplyDeadLine){if(l.deadline.getTime()<=i.delayReplyDeadLine)return t.globalService.showToast("填写的时间必须大于处理时限!");t.delay(n,e)}}).catch(function(n){console.log(n)})},n.prototype.subscribeEvent=function(n){var l=this;n.subscribe(this.globalService.myWorkDownloadFinishEvent,function(){l.resetTasks(at.Download)}),n.subscribe(this.globalService.myWorkUpdateEvent,function(n){if(console.log("my work need to update"),"reply"===n.type&&n.taskEx&&n.history&&n.history.task&&n.history.reply&&n.history.taskDetail){var e=new G;if(!t(n.taskEx,e))return;var i=n.history.reply,o=n.history.uploadedFlag===l.globalService.uploadedFlagForUploaded;e.reply.time=i&&i.opTime?new Date(i.opTime):new Date,e.reply.color=K,e.reply.done=!0,e.reject.show=!1,e.delay.show=e.delay.done,e.cancel.show=!0,e.reply.isUploaded=o,n.taskEx.lastProcess="reply",n.taskEx.state=B.Reply,n.taskEx.isUploaded=n.taskEx.isUploaded&&o;var u=l.findReplyHistory(n.taskEx.id);u?u={userId:l.globalService.userId,taskId:n.taskEx.id,state:n.history.state,task:n.history.task,reply:n.history.reply,uploadedFlag:n.history.uploadedFlag,taskDetail:n.history.taskDetail,mediaNames:n.history.mediaNames}:l.replyHistories.push(n.history),l.resetTasks(at.ReplyOrReject)}else"reject"===n.type&&l.resetTasks(at.ReplyOrReject)})},n.prototype.resetTasks=function(n){var l=this;for(this.isOperationBusy=!0,this.since=this.globalService.taskSinceDefault;this.items.shift(););this.replyHistories=[],this.showFab=!1,this.getTasks(this.since,this.count,this.key).then(function(n){return l.infiniteScroll.enable(n)}).catch(function(n){return console.error(n)}).then(function(){switch(l.isOperationBusy=!1,n){case at.Download:l.refresher.complete(),l.getTaskCount();break;case at.ReplyOrReject:l.getTaskCount();break;case at.Search:break;case at.Delete:l.getTaskCount()}})},n.prototype.findReplyHistory=function(n){return this.replyHistories.find(function(l){return l.taskId===n})},n}();Object(r.__decorate)([Object(a.N)(s.n),Object(r.__metadata)("design:type","function"==typeof(st=void 0!==s.n&&s.n)&&st||Object)],rt.prototype,"refresher",void 0),Object(r.__decorate)([Object(a.N)(s.c),Object(r.__metadata)("design:type","function"==typeof(ct=void 0!==s.c&&s.c)&&ct||Object)],rt.prototype,"content",void 0),Object(r.__decorate)([Object(a.N)(s.e),Object(r.__metadata)("design:type","function"==typeof(dt=void 0!==s.e&&s.e)&&dt||Object)],rt.prototype,"infiniteScroll",void 0),rt=Object(r.__decorate)([Object(a.i)({selector:"page-mywork",templateUrl:"mywork.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(_t=void 0!==s.j&&s.j)&&_t||Object,"function"==typeof(pt=void 0!==Bn&&Bn)&&pt||Object,"function"==typeof(ht=void 0!==s.b&&s.b)&&ht||Object,"function"==typeof(mt=void 0!==s.d&&s.d)&&mt||Object,"function"==typeof(ft=void 0!==g&&g)&&ft||Object,"function"==typeof(gt=void 0!==M&&M)&&gt||Object])],rt);var st,ct,dt,_t,pt,ht,mt,ft,gt,vt=function(){function n(n,l,e,t,i,o){this.androidPermissions=n,this.globalService=l,this.fileService=e,this.dataService=t,this.myPlugin=i,this.configService=o}return n.prototype.init=function(){var n=this;return this.globalService.isChrome?(this.myPlugin=this.globalService.getMyPluginMock(),this.dataService.init().then(function(l){return n.parsePageIntent()})):this.checkPermissions().then(function(l){return n.fileService.createDirRoot()}).then(function(l){return n.dataService.init()}).then(function(l){return n.parsePageIntent()})},n.prototype.downloadConstantData=function(){var n=this;return this.globalService.isChrome?this.dataService.downloadWords().then(function(l){return n.dataService.downloadMaterials()}).then(function(l){return!!n.globalService.isWorker||n.dataService.downloadPersonnels()}):this.dataService.checkIfDownloadWords().then(function(l){return n.dataService.checkIfDownloadMaterials()}).then(function(l){return!!n.globalService.isWorker||n.dataService.checkIfDownloadPersonnels()})},n.prototype.checkPermissions=function(){return this.androidPermissions.requestPermissions([this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION,this.androidPermissions.PERMISSION.ACCESS_FINE_LOCATION,this.androidPermissions.PERMISSION.ACCESS_WIFI_STATE,this.androidPermissions.PERMISSION.CHANGE_WIFI_STATE,this.androidPermissions.PERMISSION.READ_PHONE_STATE,this.androidPermissions.PERMISSION.WRITE_EXTERNAL_STORAGE,this.androidPermissions.PERMISSION.INTERNET,this.androidPermissions.PERMISSION.CAMERA,this.androidPermissions.PERMISSION.RECORD_AUDIO]).then(function(n){return console.log("Permission granted")},function(n){return console.error(n)})},n.prototype.parsePageIntent=function(){var n=this;return this.myPlugin.getPageIntent().then(function(l){return console.log(l),l.roles=l.roles&&l.roles.includes("PDA热线管理人员")?n.globalService.manager:n.globalService.worker,l.account&&l.userName&&l.departmentAndId&&l.params&&!(l.params.length<=0)||(l=f.pageIntent),n.getExtendedInfo(l.extendedInfo).then(function(l){return l&&l.hasOwnProperty("network")&&void 0!==l.network&&null!==l.network?n.configService.setIsOuterNet(l.network):Promise.resolve(!0)}).then(function(){return n.setUserDetailInfo(l)}).then(function(n){var e;switch(l.params.split("#")[0]){case"MyHistory":e=wl;break;case"MapPage":e=ol;break;case"SearchPage":e=Jl;break;case"StationWorkPage":e=re;break;case"NewsPage":e=be;break;case"MaterialsPage":e=je;break;case"SettingPage":e=Xe;break;case"MyWorkPage":default:e=rt}return Promise.resolve(e)})})},n.prototype.setUserDetailInfo=function(n){var l=this;return this.globalService.saveUserDetailInfo({account:n.account,userId:n.userId,userName:n.userName,roles:n.roles,department:n.departmentAndId.split("#")[0],departmentId:0}).catch(function(e){console.error(e),l.globalService.account=n.account,l.globalService.userId=n.userId,l.globalService.userName=n.userName,l.globalService.isWorker=n.roles===l.globalService.worker})},n.prototype.getExtendedInfo=function(n){var l;try{n&&(l=JSON.parse(n))}catch(n){console.error(n)}return Promise.resolve(l)},n}();vt=Object(r.__decorate)([Object(a.o)(),Object(r.__metadata)("design:paramtypes",["function"==typeof(bt=void 0!==_.a&&_.a)&&bt||Object,"function"==typeof(yt=void 0!==g&&g)&&yt||Object,"function"==typeof(kt=void 0!==C&&C)&&kt||Object,"function"==typeof(St=void 0!==Bn&&Bn)&&St||Object,"function"==typeof(It=void 0!==m&&m)&&It||Object,"function"==typeof(Tt=void 0!==M&&M)&&Tt||Object])],vt);var bt,yt,kt,St,It,Tt,Et=function(){return function(n,l,e,t,i){var o=this;this.appComponentService=t,this.globalService=i,this.rootPage=void 0,this.globalService.showLoading(),n.ready().then(function(){return l.styleDefault(),e.hide(),o.appComponentService.init()}).then(function(n){return o.rootPage=n}).catch(function(n){console.error(n),o.globalService.showToast(n),o.rootPage=rt}).then(function(){return o.appComponentService.downloadConstantData()}).catch(function(n){return console.error(n)}).then(function(){return o.globalService.hideLoading()})}}();Et=Object(r.__decorate)([Object(a.i)({templateUrl:"app.html",providers:[vt]}),Object(r.__metadata)("design:paramtypes",["function"==typeof(Ct=void 0!==s.l&&s.l)&&Ct||Object,"function"==typeof(Ot=void 0!==d.a&&d.a)&&Ot||Object,"function"==typeof(wt=void 0!==c.a&&c.a)&&wt||Object,"function"==typeof(Dt=void 0!==vt&&vt)&&Dt||Object,"function"==typeof(Pt=void 0!==g&&g)&&Pt||Object])],Et);var Ct,Ot,wt,Dt,Pt,jt=function(){return function(n){this.navCtrl=n}}();jt=Object(r.__decorate)([Object(a.i)({selector:"page-home",templateUrl:"home.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(Nt=void 0!==s.j&&s.j)&&Nt||Object])],jt);var Nt,Mt=function(){var n={};return n[n.MyWork=0]="MyWork",n[n.History=1]="History",n[n.Map=2]="Map",n[n.StationWork=3]="StationWork",n[n.Search=4]="Search",n[n.News=5]="News",n[n.Materials=6]="Materials",n}(),xt=function(){function n(n,l){this.navCtrl=n,this.globalService=l,this.tag="[MainPage]",this.title="主界面",this.imgWidth=64,this.imgHeight=64,this.gridStyle=!0,this.gridItems=[],this.listItems=[]}return n.prototype.ngOnInit=function(){console.log(this.tag,"ngOnInit"),this.initListItem(),this.initGirdItems()},n.prototype.ngOnDestroy=function(){console.log(this.tag,"ngOnDestroy")},n.prototype.itemSelected=function(n){switch(console.log(n),n){case Mt.MyWork:this.navCtrl.push(rt);break;case Mt.History:this.navCtrl.push(wl);break;case Mt.Map:this.navCtrl.push(ol,new tl(el.View,void 0,void 0));break;case Mt.Search:this.navCtrl.push(Jl);break;case Mt.StationWork:this.navCtrl.push(re);break;case Mt.News:this.navCtrl.push(be);break;case Mt.Materials:this.navCtrl.push(je)}},n.prototype.selectSettings=function(n){this.navCtrl.push(Xe)},n.prototype.initListItem=function(){this.listItems.push({id:Mt.MyWork,src:"assets/img/ic_mywork.png",name:"我的任务",active:!0,count:0}),this.listItems.push({id:Mt.History,src:"assets/img/ic_history.png",name:"历史记录",active:!0,count:0}),this.listItems.push({id:Mt.Map,src:"assets/img/ic_map.png",name:"地图",active:!0,count:0}),this.globalService.isWorker||(this.listItems.push({id:Mt.StationWork,src:"assets/img/ic_stationwork.png",name:"站点任务",active:!0,count:0}),this.listItems.push({id:Mt.Search,src:"assets/img/ic_searching.png",name:"查询",active:!0,count:0})),this.listItems.push({id:Mt.News,src:"assets/img/ic_news.png",name:"公告",active:!0,count:0}),this.listItems.push({id:Mt.Materials,src:"assets/img/ic_add_materials.png",name:"材料登记",active:!0,count:0})},n.prototype.initGirdItems=function(){for(var n=[],l=0,e=this.listItems;l<e.length;l++){var t=e[l];3==n.length&&(this.gridItems.push(n),n=[]),n.push(t)}this.gridItems.push(n)},n}();xt=Object(r.__decorate)([Object(a.i)({selector:"page-main",templateUrl:"main.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(Lt=void 0!==s.j&&s.j)&&Lt||Object,"function"==typeof(At=void 0!==g&&g)&&At||Object])],xt);var Lt,At,Ut=e(121),Rt=e(122),Ft=function(){return function(){}}(),Bt=e(123),Kt=function(){function n(n,l,e,t,i,o,u,a,r){this.navCtrl=n,this.alertCtrl=l,this.formBuilder=e,this.appPreferences=t,this.network=i,this.toastCtrl=o,this.globalService=u,this.dataService=a,this.device=r,this.tag="[LoginPage]",this.user=new Ft}return n.prototype.ngOnInit=function(){this.loginForm=this.formBuilder.group({LoginID:[this.globalService.userName,Ul.n.compose([Ul.n.minLength(2),Ul.n.maxLength(11),Ul.n.required,Ul.n.pattern("[0-9a-zA-Z ]*")])],LoginPwd:["0000",Ul.n.compose([Ul.n.required,Ul.n.minLength(4)])],LoginSelect:["worker",Ul.n.compose([Ul.n.required])]}),this.globalService.isChrome||this.getPreferences()},n.prototype.getPreferences=function(){var n=this;this.appPreferences.fetch("userinfo","username").then(function(l){n.user.userName=l.toString(),n.loginForm.patchValue({LoginID:n.user.userName})}).catch(function(n){console.log(n)}),this.appPreferences.fetch("userinfo","pwd").then(function(l){n.user.password=l.toString(),n.loginForm.patchValue({LoginPwd:l.toString()})}).catch(function(n){console.log(n)}),this.appPreferences.fetch("userinfo","role").then(function(l){n.user.role=l.toString(),n.loginForm.patchValue({LoginSelect:l.toString()})}).catch(function(n){console.log(n)})},n.prototype.loginClick=function(n){if(("none"==this.network.type||"unknow"==this.network.type)&&!this.globalService.isChrome){var l=void 0,e=this.toastCtrl.create({duration:2e3,position:"bottom"});return n.LoginID==this.user.userName&&n.LoginPwd==this.user.password?(l="离线登录",console.log(l),e.setMessage(l),this.navCtrl.push(xt,{})):(l="账号和密码未保存，请连网认证",console.log(l),e.setMessage(l)),void e.present()}this.user.userName=n.LoginID,this.user.password=n.LoginPwd,this.user.role=n.LoginSelect,this.doLogin()},n.prototype.doLogin=function(){var n=this;this.user.userName&&this.user.password&&this.dataService.doLogin(this.user).then(function(l){n.onSuccessCallBack(n.user.userName,l)}).catch(function(l){n.onErrorCallBack(l)})},n.prototype.onSuccessCallBack=function(n,l){var e=this;this.globalService.userName=n,this.globalService.userId=l.userId,this.globalService.department=l.Department,this.globalService.isWorker="worker"==this.user.role,this.globalService.isWorker?this.dataService.getWorkInfo().then(function(n){console.log(n),e.onSuccessLogin()}).catch(function(n){e.onErrorCallBack(n)}):this.dataService.getManageInfo().then(function(n){console.log(n),e.onSuccessLogin()}).catch(function(n){e.onErrorCallBack(n)})},n.prototype.onSuccessLogin=function(){this.toastCtrl.create({duration:2e3,message:"在线登录成功",position:"bottom"}).present(),this.saveAppPreferences(),this.navCtrl.push(xt,{})},n.prototype.saveAppPreferences=function(){var n=this;Promise.all([this.saveUserInfo("username",this.user.userName),this.saveUserInfo("pwd",this.user.password),this.saveUserInfo("role",this.user.role)]).then(function(l){console.log(n.tag+"saveAppPreferences:"+l)}).catch(function(l){console.log(n.tag+"saveAppPreferences:"+l)})},n.prototype.saveUserInfo=function(n,l){var e=this;return this.appPreferences.store("userinfo",n,l).then(function(n){console.log(e.tag+":saveUserName:"+n)}).catch(function(n){console.log(e.tag+":saveUserName:"+n)})},n.prototype.onErrorCallBack=function(n){console.log(n);this.alertCtrl.create({title:"提示：",subTitle:n||"登录失败",buttons:["确定"]}).present()},n}();Kt=Object(r.__decorate)([Object(a.i)({selector:"page-login",templateUrl:"login.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(Ht=void 0!==s.j&&s.j)&&Ht||Object,"function"==typeof(Gt=void 0!==s.b&&s.b)&&Gt||Object,"function"==typeof(Vt=void 0!==Ul.d&&Ul.d)&&Vt||Object,"function"==typeof($t=void 0!==Ut.a&&Ut.a)&&$t||Object,"function"==typeof(Wt=void 0!==Rt.a&&Rt.a)&&Wt||Object,"function"==typeof(qt=void 0!==s.o&&s.o)&&qt||Object,"function"==typeof(Xt=void 0!==g&&g)&&Xt||Object,"function"==typeof(Yt=void 0!==Bn&&Bn)&&Yt||Object,"function"==typeof(Jt=void 0!==Bt.a&&Bt.a)&&Jt||Object])],Kt);var Ht,Gt,Vt,$t,Wt,qt,Xt,Yt,Jt,zt=e(124),Zt=function(){function n(n,l,e,t,i,o,u,a){var r=this;this.navCtrl=n,this.loadingCtrl=l,this.platform=e,this.fileService=t,this.appVersion=i,this.androidPermissions=o,this.globalService=u,this.dataService=a,this.tag="[WelcomePage]",this.platform.ready().then(function(n){return r.checkPermissions()})}return n.prototype.checkPermissions=function(){var n=this;this.globalService.isChrome?this.onDidEnter():this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.CAMERA).then(function(n){return console.log("Permission granted")},function(l){return n.androidPermissions.requestPermissions(n.androidPermissions.PERMISSION.CAMERA)}).then(function(){return n.onDidEnter()}).catch(function(l){console.error(l),n.globalService.showToast(l)})},n.prototype.onDidEnter=function(){var n=this;this.loading=this.loadingCtrl.create({content:"加载中...",dismissOnPageChange:!0}),this.loading.present(),this.globalService.isChrome?(console.log("platform is on chrome"),this.loading.dismiss(),this.navCtrl.push(Kt,{})):(console.log("platform is on android"),this.fileService.createDirRoot().then(function(l){console.log(n.tag+"onDidEnter:"+l),n.getVersionCode(),n.jump2Login()}).catch(function(n){console.log("initial files failed"+n)}))},n.prototype.getVersionCode=function(){var n=this;this.appVersion.getVersionCode().then(function(l){console.log(l),n.checkUpdate(l)}).catch(function(n){console.log("getVersionCode:"+n)})},n.prototype.checkUpdate=function(n){var l=this;Promise.all([this.checkAppVersion(n),this.checkDataVersion(n)]).then(function(n){console.log(l.tag+"checkUpdate:"+n),l.jump2Login()}).catch(function(n){l.loading.dismiss(),console.log(l.tag+"checkUpdate:"+n)})},n.prototype.checkAppVersion=function(n){var l=this;return new Promise(function(e,t){l.dataService.checkAppVersion(n).then(function(n){e(n&&n.url?l.fileService.downloadFile(!1,n.url):"no update app")}).catch(function(n){l.globalService.showToast(n),e(n)})})},n.prototype.checkDataVersion=function(n){var l=this;return new Promise(function(e,t){l.dataService.checkDataVersion(n).then(function(n){e(n&&n.url?l.fileService.downloadFile(!0,n.url):"no update data")}).catch(function(n){l.globalService.showToast(n),e(n)})})},n.prototype.jump2Login=function(){this.loading.dismiss(),this.navCtrl.push(Kt,{})},n}();Zt=Object(r.__decorate)([Object(a.i)({selector:"page-welcome",templateUrl:"welcome.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(Qt=void 0!==s.j&&s.j)&&Qt||Object,"function"==typeof(ni=void 0!==s.i&&s.i)&&ni||Object,"function"==typeof(li=void 0!==s.l&&s.l)&&li||Object,"function"==typeof(ei=void 0!==C&&C)&&ei||Object,"function"==typeof(ti=void 0!==zt.a&&zt.a)&&ti||Object,"function"==typeof(ii=void 0!==_.a&&_.a)&&ii||Object,"function"==typeof(oi=void 0!==g&&g)&&oi||Object,"function"==typeof(ui=void 0!==Bn&&Bn)&&ui||Object])],Zt);var Qt,ni,li,ei,ti,ii,oi,ui,ai=function(){function n(){}return n.prototype.beforeRequest=function(n){return console.log(n),n},n.prototype.afterResponse=function(n){return n.subscribe(function(n){console.log(n)}),n},n}();ai=Object(r.__decorate)([Object(a.o)()],ai);var ri=function(){function n(n,l){this.httpInterceptor=n,this.xhrBackend=l}return n.prototype.createConnection=function(n){var l=this.httpInterceptor,e=l.beforeRequest?l.beforeRequest(n):n,t=this.xhrBackend.createConnection(e);return t.response=l.afterResponse?l.afterResponse(t.response):t.response,t},n}();ri=Object(r.__decorate)([Object(a.o)(),Object(r.__metadata)("design:paramtypes",["function"==typeof(si=void 0!==ai&&ai)&&si||Object,"function"==typeof(ci=void 0!==N.i&&N.i)&&ci||Object])],ri);var si,ci,di=function(){function n(){}return n.prototype.transform=function(n){return"string"==typeof n?"undefined"===n||"null"===n?"":n:"number"==typeof n?n.toString():""},n}();di=Object(r.__decorate)([Object(a.C)({name:"valueValid"})],di);var _i=function(){var n={};return n[n.News=0]="News",n[n.Setting=1]="Setting",n}(),pi=function(){function n(n,l){this.navCtrl=n,this.globalService=l,this.title="更多",this.imgWidth=64,this.imgHeight=64,this.listItems=[]}return n.prototype.initListItem=function(){this.listItems.push({id:_i.News,src:"assets/img/ic_news.png",name:"公告",active:!0,count:0}),this.listItems.push({id:_i.Setting,src:"assets/img/ic_setting.png",name:"设置",active:!0,count:0})},n.prototype.ngOnInit=function(){this.initListItem()},n.prototype.itemSelected=function(n){switch(console.log(n),n){case _i.News:this.navCtrl.push(be);break;case _i.Setting:this.navCtrl.push(Xe)}},n}();pi=Object(r.__decorate)([Object(a.i)({selector:"page-main",templateUrl:"more.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(hi=void 0!==s.j&&s.j)&&hi||Object,"function"==typeof(mi=void 0!==g&&g)&&mi||Object])],pi);var hi,mi,fi=function(){function n(n,l){this.globalService=n,this.configService=l,this.workerTabsInfo=[{title:"我的任务",icon:"home",page:rt},{title:"历史记录",icon:"document",page:wl},{title:"地图",icon:"map",page:ol},{title:"更多",icon:"more",page:pi}],this.adminTabsInfo=[{title:"站点任务",icon:"home",page:re},{title:"查询",icon:"search",page:Jl},{title:"地图",icon:"map",page:ol},{title:"更多",icon:"more",page:pi}],this.tabsInfo=this.workerTabsInfo}return n.prototype.ngOnInit=function(){if(!this.globalService.isChrome){var n=this;cordova.plugins.MyPlugin.getPushMessage(function(n){console.log(n)},function(n){console.error(n)}),cordova.plugins.MyPlugin.getChangedInfo(function(l){if(console.log(l),l){var e=l.split("#");"outerNetwork"===e[0]&&e[1]&&n.configService.setIsOuterNet("true"===e[1])}},function(n){console.error(n)})}},n.prototype.ngOnDestroy=function(){},n}();fi=Object(r.__decorate)([Object(a.i)({templateUrl:"tabs.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(gi=void 0!==g&&g)&&gi||Object,"function"==typeof(vi=void 0!==M&&M)&&vi||Object])],fi);var gi,vi,bi=function(){return function(n){this.navCtrl=n}}();bi=Object(r.__decorate)([Object(a.i)({selector:"page-about",templateUrl:"about.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(yi=void 0!==s.j&&s.j)&&yi||Object])],bi);var yi,ki=function(){return function(n){this.navCtrl=n}}();ki=Object(r.__decorate)([Object(a.i)({selector:"page-contact",templateUrl:"contact.html"}),Object(r.__metadata)("design:paramtypes",["function"==typeof(Si=void 0!==s.j&&s.j)&&Si||Object])],ki);var Si,Ii=function(){return function(){}}();Ii=Object(r.__decorate)([Object(a.u)({declarations:[Et,jt,Zt,Kt,xt,rt,vl,re,le,be,fe,Jl,Gl,Fl,di,wl,ol,Xe,di,je,Ie,di,Jn,fi,pi,Be,bi,ki,Ve,dl],imports:[u.a,N.f,s.h.forRoot(Et,{tabsHideOnSubPages:"true"},{links:[]}),p.a.forRoot()],bootstrap:[s.f],entryComponents:[Et,jt,Zt,Kt,xt,rt,vl,re,le,be,fe,Jl,Gl,Fl,Xe,Jn,wl,ol,je,Ie,fi,pi,Be,bi,ki,Ve,dl],providers:[d.a,c.a,S.a,I.a,C,zt.a,T.a,Fe,Ut.a,E.a,M,N.f,ri,ai,Rt.a,Bn,X,nn,an.a,rn.a,g,sn,Bt.a,hn.a,fn.a,gn.a,_.a,mn.a,vn,q.a,m,cl.a,{provide:a.l,useClass:s.g}]})],Ii);var Ti=e(84),Ei=e(250),Ci=e(251),Oi=e(252),wi=e(253),Di=e(254),Pi=e(255),ji=e(256),Ni=e(257),Mi=e(258),xi=e(259),Li=e(48),Ai=e(90),Ui=e(4),Ri=e(12),Fi=e(6),Bi=e(2),Ki=e(3),Hi=e(8),Gi=e(44),Vi=e(31),$i=e(7),Wi=a._3({encapsulation:2,styles:[],data:{}}),qi=a._1("ng-component",Et,function(n){return a._29(0,[(n()(),a._6(0,null,null,2,"ng-component",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,2,"ion-nav",[],null,null,null,xi.b,xi.a)),a._24(6144,null,Li.a,null,[Ai.a]),a._4(4374528,null,0,Ai.a,[[2,Ui.a],[2,Ri.a],Fi.a,Bi.a,Ki.a,a.k,a.x,a.E,a.j,Hi.l,Gi.a,[2,Vi.a],$i.a,a.l],{root:[0,"root"]},null),(n()(),a._27(null,["\n"]))],function(n,l){n(l,2,0,l.component.rootPage)},null)},Wi)),a._24(512,null,vt,vt,[_.a,g,C,Bn,m,M]),a._4(49152,null,0,Et,[Ki.a,d.a,c.a,vt,g],null,null)],null,null)},{},{},[]),Xi=e(25),Yi=e(36),Ji=e(20),zi=e(34),Zi=e(29),Qi=e(22),no=e(30),lo=e(13),eo=e(17),to=a._3({encapsulation:2,styles:[],data:{}}),io=a._1("page-home",jt,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-home",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Yi.b,Yi.a)),a._4(49152,null,0,Ji.a,[Fi.a,[2,Ui.a],[2,Ri.a],Bi.a,a.k,a.E],null,null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      Ionic Blank\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,8,"ion-content",[["padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n  The world is your oyster.\n  "])),(n()(),a._6(0,null,1,4,"p",[],null,null,null,null,null)),(n()(),a._27(null,["\n    If you get lost, the "])),(n()(),a._6(0,null,null,1,"a",[["href","http://ionicframework.com/docs/v2"]],null,null,null,null,null)),(n()(),a._27(null,["docs"])),(n()(),a._27(null,[" will be your guide.\n  "])),(n()(),a._27(1,["\n"])),(n()(),a._27(null,["\n"]))],null,function(n,l){n(l,3,0,a._20(l,4)._hidden,a._20(l,4)._sbPadding),n(l,12,0,a._20(l,13).statusbarPadding,a._20(l,13)._hasRefresher)})},to)),a._4(49152,null,0,jt,[Ri.a],null,null)],null,null)},{},{},[]),oo=e(74),uo=a._3({encapsulation:2,styles:[],data:{}}),ao=a._1("page-welcome",Zt,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-welcome",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,2,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,13,"ion-content",[["class","page-content"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,3,"div",[["class","welcome-logo"]],null,null,null,null,null)),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,0,"img",[["src","assets/img/splash_logo.png"]],null,null,null,null,null)),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n\n  "])),(n()(),a._6(0,null,1,4,"div",[["class","welcome-info"]],null,null,null,null,null)),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,1,"p",[],null,null,null,null,null)),(n()(),a._27(null,["\n      Copyright@2017 ShangHai 3H Ver:","\n    "])),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n"])),(n()(),a._27(null,["\n"]))],null,function(n,l){var e=l.component;n(l,4,0,a._20(l,5).statusbarPadding,a._20(l,5)._hasRefresher),n(l,15,0,e.version)})},uo)),a._4(49152,null,0,Zt,[Ri.a,oo.a,Ki.a,C,zt.a,_.a,g,Bn],null,null)],null,null)},{},{},[]),ro=e(41),so=e(40),co=e(24),_o=e(32),po=e(11),ho=e(10),mo=e(23),fo=e(28),go=e(21),vo=e(96),bo=e(56),yo=e(9),ko=e(35),So=e(216),Io=e(94),To=e(91),Eo=e(26),Co=e(18),Oo=e(38),wo=e(59),Do=a._3({encapsulation:2,styles:[],data:{}}),Po=a._1("page-login",Kt,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-login",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,2,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,113,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,3,"div",[["class","login-logo"]],null,null,null,null,null)),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,0,"img",[["src","assets/img/login_logo.png"]],null,null,null,null,null)),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n  "])),(n()(),a._6(0,null,1,89,"ion-row",[["class","row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,85,"ion-col",[["class","col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,81,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,77,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,l,e){var t=!0;return"submit"===l&&(t=!1!==a._20(n,23).onSubmit(e)&&t),"reset"===l&&(t=!1!==a._20(n,23).onReset()&&t),t},null,null)),a._4(16384,null,0,Ul.p,[],null,null),a._4(540672,null,0,Ul.f,[[8,null],[8,null]],{form:[0,"form"]},null),a._24(2048,null,Ul.b,null,[Ul.f]),a._4(16384,null,0,Ul.k,[Ul.b],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,1,{contentLabel:0}),a._25(603979776,2,{_buttons:1}),a._25(603979776,3,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n            "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","person"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[3,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n            "])),(n()(),a._6(0,null,3,4,"ion-input",[["clearInput",""],["formControlName","LoginID"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vo.b,vo.a)),a._4(671744,null,0,Ul.e,[[3,Ul.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),a._24(2048,null,Ul.i,null,[Ul.e]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(5423104,null,0,bo.a,[Bi.a,Ki.a,ho.a,Fi.a,a.k,a.E,[2,lo.a],[2,po.a],[2,Ul.i],$i.a],{clearInput:[0,"clearInput"],type:[1,"type"]},null),(n()(),a._27(2,["\n          "])),(n()(),a._27(null,["\n          "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"p",[["color","danger"]],null,null,null,null,null)),(n()(),a._27(null,["请输入有效的用户名."]))],null,null)})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n          "])),(n()(),a._6(0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,4,{contentLabel:0}),a._25(603979776,5,{_buttons:1}),a._25(603979776,6,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n            "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","lock"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[6,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n            "])),(n()(),a._6(0,null,3,4,"ion-input",[["clearInput",""],["formControlName","LoginPwd"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vo.b,vo.a)),a._4(671744,null,0,Ul.e,[[3,Ul.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),a._24(2048,null,Ul.i,null,[Ul.e]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(5423104,null,0,bo.a,[Bi.a,Ki.a,ho.a,Fi.a,a.k,a.E,[2,lo.a],[2,po.a],[2,Ul.i],$i.a],{clearInput:[0,"clearInput"],type:[1,"type"]},null),(n()(),a._27(2,["\n          "])),(n()(),a._27(null,["\n          "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"p",[["color","danger"]],null,null,null,null,null)),(n()(),a._27(null,["请输入有效的密码."]))],null,null)})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n          "])),(n()(),a._6(0,null,null,27,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,7,{contentLabel:0}),a._25(603979776,8,{_buttons:1}),a._25(603979776,9,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n            "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[7,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["选择人员"])),(n()(),a._27(2,["\n            "])),(n()(),a._6(0,null,3,15,"ion-select",[["cancelText","取消"],["formControlName","LoginSelect"],["okText","确定"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==a._20(n,79)._click(e)&&t),"keyup.space"===l&&(t=!1!==a._20(n,79)._keyup()&&t),t},So.b,So.a)),a._4(1228800,null,1,Io.a,[Fi.a,ho.a,Bi.a,a.k,a.E,[2,po.a],Vi.a],{cancelText:[0,"cancelText"],okText:[1,"okText"]},null),a._25(603979776,10,{options:1}),a._24(1024,null,Ul.h,function(n){return[n]},[Io.a]),a._4(671744,null,0,Ul.e,[[3,Ul.b],[8,null],[8,null],[2,Ul.h]],{name:[0,"name"]},null),a._24(2048,null,Ul.i,null,[Ul.e]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),(n()(),a._27(null,["\n              "])),(n()(),a._6(0,null,null,2,"ion-option",[["value","worker"]],null,null,null,null,null)),a._4(16384,[[10,4]],0,To.a,[a.k],{value:[0,"value"]},null),(n()(),a._27(null,["外勤人员"])),(n()(),a._27(null,["\n              "])),(n()(),a._6(0,null,null,2,"ion-option",[["value","manager"]],null,null,null,null,null)),a._4(16384,[[10,4]],0,To.a,[a.k],{value:[0,"value"]},null),(n()(),a._27(null,["管理人员"])),(n()(),a._27(null,["\n            "])),(n()(),a._27(2,["\n          "])),(n()(),a._27(null,["\n          "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"p",[["color","danger"]],null,null,null,null,null)),(n()(),a._27(null,["请选择人员."]))],null,null)})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n        "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n  "])),(n()(),a._6(0,null,1,13,"ion-row",[["class","row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,9,"ion-col",[["class","col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,5,"div",[["class","login-button"]],null,null,null,null,null)),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,2,"button",[["block",""],["ion-button",""],["type","submit"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.loginClick(i.loginForm.value)&&t),t},Eo.b,Eo.a)),a._4(1097728,null,0,Co.a,[[8,""],Bi.a,a.k,a.E],{block:[0,"block"]},null),(n()(),a._27(0,["登录"])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n"])),(n()(),a._27(null,["\n"]))],function(n,l){var e=l.component;n(l,23,0,e.loginForm),n(l,35,0,"person"),n(l,38,0,"LoginID"),n(l,41,0,"","text"),n(l,45,0,!e.loginForm.controls.LoginID.valid&&e.loginForm.controls.LoginID.touched),n(l,55,0,"lock"),n(l,58,0,"LoginPwd"),n(l,61,0,"","password"),n(l,65,0,!e.loginForm.controls.LoginPwd.valid&&e.loginForm.controls.LoginPwd.touched),n(l,79,0,"取消","确定"),n(l,82,0,"LoginSelect"),n(l,87,0,"worker"),n(l,91,0,"manager"),n(l,97,0,!e.loginForm.controls.LoginSelect.valid&&e.loginForm.controls.LoginSelect.touched),n(l,112,0,"")},function(n,l){var e=l.component;n(l,4,0,a._20(l,5).statusbarPadding,a._20(l,5)._hasRefresher),n(l,21,0,a._20(l,25).ngClassUntouched,a._20(l,25).ngClassTouched,a._20(l,25).ngClassPristine,a._20(l,25).ngClassDirty,a._20(l,25).ngClassValid,a._20(l,25).ngClassInvalid,a._20(l,25).ngClassPending),n(l,34,0,a._20(l,35)._hidden),n(l,37,0,a._20(l,40).ngClassUntouched,a._20(l,40).ngClassTouched,a._20(l,40).ngClassPristine,a._20(l,40).ngClassDirty,a._20(l,40).ngClassValid,a._20(l,40).ngClassInvalid,a._20(l,40).ngClassPending),n(l,54,0,a._20(l,55)._hidden),n(l,57,0,a._20(l,60).ngClassUntouched,a._20(l,60).ngClassTouched,a._20(l,60).ngClassPristine,a._20(l,60).ngClassDirty,a._20(l,60).ngClassValid,a._20(l,60).ngClassInvalid,a._20(l,60).ngClassPending),n(l,78,0,a._20(l,79)._disabled,a._20(l,84).ngClassUntouched,a._20(l,84).ngClassTouched,a._20(l,84).ngClassPristine,a._20(l,84).ngClassDirty,a._20(l,84).ngClassValid,a._20(l,84).ngClassInvalid,a._20(l,84).ngClassPending),n(l,111,0,!e.loginForm.valid)})},Do)),a._4(114688,null,0,Kt,[Ri.a,Oo.a,Ul.d,Ut.a,Rt.a,wo.a,g,Bn,Bt.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),jo=e(87),No=e(72),Mo=e(67),xo=e(42),Lo=a._3({encapsulation:2,styles:[],data:{}}),Ao=a._1("page-main",xt,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-main",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,22,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,18,"ion-toolbar",[["class","toolbar"],["color","primary"]],[[2,"statusbar-padding",null]],null,null,Mo.b,Mo.a)),a._4(49152,null,0,Qi.a,[Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      ","\n    "])),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,2,10,"ion-buttons",[["end",""]],null,null,null,null,null)),a._4(16384,null,1,xo.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),a._25(603979776,1,{_buttons:1}),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,5,"button",[["color","white"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.selectSettings(e)&&t),t},Eo.b,Eo.a)),a._4(1097728,[[1,4]],0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(0,["\n        "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","settings"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n      "])),(n()(),a._27(null,["\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,10,"ion-content",[["class","page-main"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n  "])),(n()(),a._27(1,["\n  "])),(n()(),a._0(16777216,null,1,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,5,"ion-grid",[["class","grid"]],null,null,null,null,null)),a._4(16384,null,0,No.a,[],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,11,"ion-row",[["class","row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,11,"ion-col",[["class","col"],["col-4",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.itemSelected(n.parent.context.$implicit[0].id)&&t),t},null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,0,"img",[],[[8,"src",4],[8,"width",0],[8,"height",0]],null,null,null,null)),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,2,"ion-badge",[["class","grid-item-badge"],["color","danger"]],null,null,null,null,null)),a._4(16384,null,0,jo.a,[Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(null,["",""]))],function(n,l){n(l,1,0,"danger")},function(n,l){n(l,2,0,l.parent.parent.context.$implicit[0].count)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,2,"ion-label",[],null,null,null,null,null)),a._4(16384,null,0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["",""])),(n()(),a._27(null,["\n      "]))],function(n,l){n(l,6,0,l.parent.context.$implicit[0].count>0)},function(n,l){var e=l.component;n(l,3,0,a._9(1,"",l.parent.context.$implicit[0].src,""),a._9(1,"",e.imgWidth,""),a._9(1,"",e.imgHeight,"")),n(l,10,0,l.parent.context.$implicit[0].name)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,11,"ion-col",[["class","col"],["col-4",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.itemSelected(n.parent.context.$implicit[1].id)&&t),t},null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,0,"img",[],[[8,"src",4],[8,"width",0],[8,"height",0]],null,null,null,null)),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,2,"ion-badge",[["class","grid-item-badge"],["color","danger"]],null,null,null,null,null)),a._4(16384,null,0,jo.a,[Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(null,["",""]))],function(n,l){n(l,1,0,"danger")},function(n,l){n(l,2,0,l.parent.parent.context.$implicit[1].count)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,2,"ion-label",[],null,null,null,null,null)),a._4(16384,null,0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["",""])),(n()(),a._27(null,["\n      "]))],function(n,l){n(l,6,0,l.parent.context.$implicit[1].count>0)},function(n,l){var e=l.component;n(l,3,0,a._9(1,"",l.parent.context.$implicit[1].src,""),a._9(1,"",e.imgWidth,""),a._9(1,"",e.imgHeight,"")),n(l,10,0,l.parent.context.$implicit[1].name)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,11,"ion-col",[["class","col"],["col-4",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.itemSelected(n.parent.context.$implicit[2].id)&&t),t},null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,0,"img",[],[[8,"src",4],[8,"width",0],[8,"height",0]],null,null,null,null)),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,2,"ion-badge",[["class","grid-item-badge"],["color","danger"]],null,null,null,null,null)),a._4(16384,null,0,jo.a,[Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(null,["",""]))],function(n,l){n(l,1,0,"danger")},function(n,l){n(l,2,0,l.parent.parent.context.$implicit[2].count)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,2,"ion-label",[],null,null,null,null,null)),a._4(16384,null,0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["",""])),(n()(),a._27(null,["\n      "]))],function(n,l){n(l,6,0,l.parent.context.$implicit[2].count>0)},function(n,l){var e=l.component;n(l,3,0,a._9(1,"",l.parent.context.$implicit[2].src,""),a._9(1,"",e.imgWidth,""),a._9(1,"",e.imgHeight,"")),n(l,10,0,l.parent.context.$implicit[2].name)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n    "]))],function(n,l){n(l,4,0,l.context.$implicit[0]&&l.context.$implicit[0].active),n(l,7,0,l.context.$implicit[1]&&l.context.$implicit[1].active),n(l,10,0,l.context.$implicit[2]&&l.context.$implicit[2].active)},null)})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n  "]))],function(n,l){n(l,4,0,l.component.gridItems)},null)})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(1,["\n\n  "])),(n()(),a._27(1,["\n  "])),(n()(),a._0(16777216,null,1,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,5,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,9,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,2,{contentLabel:0}),a._25(603979776,3,{_buttons:1}),a._25(603979776,4,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._0(16777216,null,2,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,9,"div",[["class","list-item"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.itemSelected(n.parent.context.$implicit.id)&&t),t},null,null)),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,0,"img",[["class","item-img"],["height","imgHeight"]],[[8,"src",4],[8,"width",0]],null,null,null,null)),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,1,"p",[["class","item-name"]],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,2,"ion-badge",[["class","list-item-badge"],["color","danger"]],null,null,null,null,null)),a._4(16384,null,0,jo.a,[Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(null,["",""]))],function(n,l){n(l,1,0,"danger")},function(n,l){n(l,2,0,l.parent.parent.context.$implicit.count)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n      "]))],function(n,l){n(l,8,0,l.parent.context.$implicit.count>0)},function(n,l){var e=l.component;n(l,2,0,a._9(1,"",l.parent.context.$implicit.src,""),a._9(1,"",e.imgWidth,"")),n(l,5,0,l.parent.context.$implicit.name)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n    "]))],function(n,l){n(l,8,0,l.context.$implicit.active)},null)})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n  "]))],function(n,l){n(l,4,0,l.component.listItems)},null)})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(1,["\n\n"])),(n()(),a._27(null,["\n"]))],function(n,l){var e=l.component;n(l,4,0,"primary"),n(l,15,0,"white"),n(l,18,0,"settings"),n(l,29,0,e.gridStyle),n(l,33,0,!e.gridStyle)},function(n,l){var e=l.component;n(l,3,0,a._20(l,4)._sbPadding),n(l,8,0,e.title),n(l,17,0,a._20(l,18)._hidden),n(l,24,0,a._20(l,25).statusbarPadding,a._20(l,25)._hasRefresher)})},Lo)),a._4(245760,null,0,xt,[Ri.a,g],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),Uo=e(162),Ro=e(77),Fo=e(53),Bo=e(70),Ko=e(57),Ho=e(163),Go=e(71),Vo=e(164),$o=e(55),Wo=e(65),qo=e(165),Xo=e(76),Yo=e(64),Jo=e(166),zo=e(73),Zo=e(43),Qo=a._3({encapsulation:2,styles:[],data:{}}),nu=a._1("page-mywork",rt,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-mywork",[],null,null,null,function(n){return a._29(0,[a._21(0,di,[]),a._21(0,yo.d,[a.t]),a._25(402653184,1,{refresher:0}),a._25(402653184,2,{content:0}),a._25(402653184,3,{infiniteScroll:0}),(n()(),a._6(0,null,null,25,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,18,"ion-navbar",[["class","toolbar"],["color","primary"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Yi.b,Yi.a)),a._4(49152,null,0,Ji.a,[Fi.a,[2,Ui.a],[2,Ri.a],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      ","\n    "])),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,2,10,"ion-buttons",[["end",""]],null,null,null,null,null)),a._4(16384,null,1,xo.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),a._25(603979776,4,{_buttons:1}),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,5,"button",[["color","white"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.toggleToolbar(e)&&t),t},Eo.b,Eo.a)),a._4(1097728,[[4,4]],0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(0,["\n        "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n      "])),(n()(),a._27(null,["\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n\n  "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,8,"ion-toolbar",[["class","toolbar"],["color","primary"]],[[2,"statusbar-padding",null]],null,null,Mo.b,Mo.a)),a._4(49152,null,0,Qi.a,[Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,4,"ion-searchbar",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"searchbar-animated",null],[2,"searchbar-has-value",null],[2,"searchbar-active",null],[2,"searchbar-show-cancel",null],[2,"searchbar-left-aligned",null],[2,"searchbar-has-focus",null]],[[null,"ngModelChange"],[null,"ionInput"],[null,"ionCancel"]],function(n,l,e){var t=!0,i=n.component;return"ngModelChange"===l&&(t=!1!==(i.key=e)&&t),"ionInput"===l&&(t=!1!==i.onInput(e)&&t),"ionCancel"===l&&(t=!1!==i.onCancel(e)&&t),t},Uo.b,Uo.a)),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(1294336,null,0,Ro.a,[Bi.a,Ki.a,a.k,a.E,[2,Ul.i]],null,{ionInput:"ionInput",ionCancel:"ionCancel"}),(n()(),a._27(3,["\n  "]))],function(n,l){var e=l.component;n(l,1,0,"primary"),n(l,4,0,e.key),n(l,7,0)},function(n,l){n(l,0,0,a._20(l,1)._sbPadding),n(l,3,1,[a._20(l,6).ngClassUntouched,a._20(l,6).ngClassTouched,a._20(l,6).ngClassPristine,a._20(l,6).ngClassDirty,a._20(l,6).ngClassValid,a._20(l,6).ngClassInvalid,a._20(l,6).ngClassPending,a._20(l,7)._animated,a._20(l,7)._value,a._20(l,7)._isActive,a._20(l,7)._showCancelButton,a._20(l,7)._shouldAlignLeft,a._20(l,7)._isFocus])})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,31,"ion-content",[["class","page-mywork"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,[[2,4]],0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n\n  "])),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,e){var t=!0;return"ionRefresh"===l&&(t=!1!==n.component.doRefresh(e)&&t),t},null,null)),a._4(212992,[[1,4]],0,Wo.a,[Ki.a,lo.a,a.x,Hi.l],null,{ionRefresh:"ionRefresh"}),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,2,"ion-refresher-content",[["pullingIcon","arrow-dropdown"],["pullingText","Pull to refresh"],["refreshingSpinner","circles"],["refreshingText","Refreshing..."]],[[1,"state",0]],null,null,qo.b,qo.a)),a._4(114688,null,0,Xo.a,[Wo.a,Bi.a],{pullingIcon:[0,"pullingIcon"],pullingText:[1,"pullingText"],refreshingSpinner:[2,"refreshingSpinner"],refreshingText:[3,"refreshingText"]},null),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n  "])),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,5,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,140,"ion-card",[],null,null,null,null,null)),a._4(16384,null,0,Fo.a,[Bi.a,a.k,a.E],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,32,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onDelete(n.context.$implicit)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,5,{contentLabel:0}),a._25(603979776,6,{_buttons:1}),a._25(603979776,7,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,0,4,"ion-avatar",[["item-start",""]],null,null,null,null,null)),a._4(16384,null,0,Bo.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,0,"img",[["src","assets/img/ic_mywork_avatar.png"]],null,null,null,null,null)),(n()(),a._27(null,["\n        "])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,2,5,"div",[],null,null,null,null,null)),(n()(),a._6(0,null,null,1,"h2",[["class","card-header-label-hint"]],null,null,null,null,null)),(n()(),a._27(null,["任务编号 "])),(n()(),a._6(0,null,null,2,"h2",[["class","card-header-label-content"]],null,null,null,null,null)),(n()(),a._27(null,["",""])),a._23(1),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,2,5,"div",[],null,null,null,null,null)),(n()(),a._6(0,null,null,1,"h2",[["class","card-header-label-hint"]],null,null,null,null,null)),(n()(),a._27(null,["任务类型 "])),(n()(),a._6(0,null,null,2,"h2",[["class","card-header-label-content"]],null,null,null,null,null)),(n()(),a._27(null,["",""])),a._23(1),(n()(),a._27(2,["\n        "])),(n()(),a._0(16777216,null,4,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ion-icon",[["item-end",""],["name","cloud-upload"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[7,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"cloud-upload")},function(n,l){n(l,0,0,a._20(l,1)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n        "])),(n()(),a._0(16777216,null,4,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ion-icon",[["item-end",""],["name","timer"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[7,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null)],function(n,l){n(l,1,0,a._9(1,"","danger",""),"timer")},function(n,l){n(l,0,0,a._20(l,1)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,61,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,19,"ion-list-header",[["class","item"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,8,{contentLabel:0}),a._25(603979776,9,{_buttons:1}),a._25(603979776,10,{_icons:1}),a._4(16384,null,0,Ko.a,[Bi.a,a.E,a.k,[8,null]],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,2,11,"ion-row",[["class","row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n            "])),(n()(),a._6(0,null,null,2,"ion-col",[["class","col"],["col-auto",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["任务描述"])),(n()(),a._27(null,["\n            "])),(n()(),a._6(0,null,null,3,"ion-col",[["class","col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["",""])),a._23(1),(n()(),a._27(null,["\n          "])),(n()(),a._27(2,["\n        "])),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,11,"button",[["class","item item-block"],["ion-item",""]],[[4,"color",null]],null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,11,{contentLabel:0}),a._25(603979776,12,{_buttons:1}),a._25(603979776,13,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[13,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n          "," ","\n          "])),a._23(2),(n()(),a._27(2,["\n        "]))],function(n,l){n(l,8,0,"icon-vline")},function(n,l){n(l,0,0,l.parent.context.$implicit.processes[0].color),n(l,7,0,a._20(l,8)._hidden),n(l,9,0,l.parent.context.$implicit.processes[0].name,a._28(l,9,1,n(l,10,0,a._20(l.parent.parent,1),l.parent.context.$implicit.processes[0].time,"y-MM-dd HH:mm:ss")))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,11,"button",[["class","item item-block"],["ion-item",""]],[[4,"color",null]],null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,14,{contentLabel:0}),a._25(603979776,15,{_buttons:1}),a._25(603979776,16,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[16,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n          "," ","\n          "])),a._23(2),(n()(),a._27(2,["\n        "]))],function(n,l){n(l,8,0,"icon-vline")},function(n,l){n(l,0,0,l.parent.context.$implicit.processes[1].color),n(l,7,0,a._20(l,8)._hidden),n(l,9,0,l.parent.context.$implicit.processes[1].name,a._28(l,9,1,n(l,10,0,a._20(l.parent.parent,1),l.parent.context.$implicit.processes[1].time,"y-MM-dd HH:mm:ss")))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,13,"button",[["class","item item-block"],["ion-item",""]],[[4,"color",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.itemSelected(n.parent.context.$implicit,2)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,17,{contentLabel:0}),a._25(603979776,18,{_buttons:1}),a._25(603979776,19,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[19,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n          "," ","\n          "])),a._23(2),(n()(),a._0(16777216,null,4,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ion-icon",[["item-end",""],["name","ios-arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[19,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null)],function(n,l){n(l,1,0,a._9(1,"",l.parent.parent.context.$implicit.processes[2].color,""),"ios-arrow-forward")},function(n,l){n(l,0,0,a._20(l,1)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n        "]))],function(n,l){n(l,8,0,a._9(1,"",l.parent.context.$implicit.processes[2].color,""),"icon-vline"),n(l,12,0,!l.parent.context.$implicit.processes[2].done)},function(n,l){n(l,0,0,l.parent.context.$implicit.processes[2].color),n(l,7,0,a._20(l,8)._hidden),n(l,9,0,l.parent.context.$implicit.processes[2].name,a._28(l,9,1,n(l,10,0,a._20(l.parent.parent,1),l.parent.context.$implicit.processes[2].time,"y-MM-dd HH:mm:ss")))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,13,"button",[["class","item item-block"],["ion-item",""]],[[4,"color",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.itemSelected(n.parent.context.$implicit,3)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,20,{contentLabel:0}),a._25(603979776,21,{_buttons:1}),a._25(603979776,22,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[22,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n          "," ","\n          "])),a._23(2),(n()(),a._0(16777216,null,4,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ion-icon",[["item-end",""],["name","ios-arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[22,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null)],function(n,l){n(l,1,0,a._9(1,"",l.parent.parent.context.$implicit.processes[3].color,""),"ios-arrow-forward")},function(n,l){n(l,0,0,a._20(l,1)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n        "]))],function(n,l){n(l,8,0,a._9(1,"",l.parent.context.$implicit.processes[3].color,""),"icon-vline"),n(l,12,0,!l.parent.context.$implicit.processes[3].done)},function(n,l){n(l,0,0,l.parent.context.$implicit.processes[3].color),n(l,7,0,a._20(l,8)._hidden),n(l,9,0,l.parent.context.$implicit.processes[3].name,a._28(l,9,1,n(l,10,0,a._20(l.parent.parent,1),l.parent.context.$implicit.processes[3].time,"y-MM-dd HH:mm:ss")))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,13,"button",[["class","item item-block"],["ion-item",""]],[[4,"color",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.itemSelected(n.parent.context.$implicit,4)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,23,{contentLabel:0}),a._25(603979776,24,{_buttons:1}),a._25(603979776,25,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[25,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n          "," ","\n          "])),a._23(2),(n()(),a._0(16777216,null,4,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ion-icon",[["item-end",""],["name","ios-arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[25,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null)],function(n,l){n(l,1,0,a._9(1,"",l.parent.parent.context.$implicit.processes[4].color,""),"ios-arrow-forward")},function(n,l){n(l,0,0,a._20(l,1)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n        "]))],function(n,l){n(l,8,0,a._9(1,"",l.parent.context.$implicit.processes[4].color,""),"icon-vline"),n(l,12,0,!l.parent.context.$implicit.processes[4].done)},function(n,l){n(l,0,0,l.parent.context.$implicit.processes[4].color),n(l,7,0,a._20(l,8)._hidden),n(l,9,0,l.parent.context.$implicit.processes[4].name,a._28(l,9,1,n(l,10,0,a._20(l.parent.parent,1),l.parent.context.$implicit.processes[4].time,"y-MM-dd HH:mm:ss")))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,13,"button",[["class","item item-block"],["ion-item",""]],[[4,"color",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.itemSelected(n.parent.context.$implicit,5)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,26,{contentLabel:0}),a._25(603979776,27,{_buttons:1}),a._25(603979776,28,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[28,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n          "," ","\n          "])),a._23(2),(n()(),a._0(16777216,null,4,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ion-icon",[["item-end",""],["name","ios-arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[28,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null)],function(n,l){n(l,1,0,a._9(1,"",l.parent.parent.context.$implicit.processes[5].color,""),"ios-arrow-forward")},function(n,l){n(l,0,0,a._20(l,1)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n        "]))],function(n,l){n(l,8,0,a._9(1,"",l.parent.context.$implicit.processes[5].color,""),"icon-vline"),n(l,12,0,!l.parent.context.$implicit.processes[5].done)},function(n,l){n(l,0,0,l.parent.context.$implicit.processes[5].color),n(l,7,0,a._20(l,8)._hidden),n(l,9,0,l.parent.context.$implicit.processes[5].name,a._28(l,9,1,n(l,10,0,a._20(l.parent.parent,1),l.parent.context.$implicit.processes[5].time,"y-MM-dd HH:mm:ss")))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,13,"button",[["class","item item-block"],["ion-item",""]],[[4,"color",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.itemSelected(n.parent.context.$implicit,6)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,29,{contentLabel:0}),a._25(603979776,30,{_buttons:1}),a._25(603979776,31,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[31,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n          "," ","\n          "])),a._23(2),(n()(),a._0(16777216,null,4,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ion-icon",[["item-end",""],["name","ios-arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[31,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null)],function(n,l){n(l,1,0,a._9(1,"",l.parent.parent.context.$implicit.processes[6].color,""),"ios-arrow-forward")},function(n,l){n(l,0,0,a._20(l,1)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n        "]))],function(n,l){n(l,8,0,a._9(1,"",l.parent.context.$implicit.processes[6].color,""),"icon-vline"),n(l,12,0,!l.parent.context.$implicit.processes[6].done)},function(n,l){n(l,0,0,l.parent.context.$implicit.processes[6].color),n(l,7,0,a._20(l,8)._hidden),n(l,9,0,l.parent.context.$implicit.processes[6].name,a._28(l,9,1,n(l,10,0,a._20(l.parent.parent,1),l.parent.context.$implicit.processes[6].time,"y-MM-dd HH:mm:ss")))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,13,"button",[["class","item item-block"],["ion-item",""]],[[4,"color",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.itemSelected(n.parent.context.$implicit,7)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,32,{contentLabel:0}),a._25(603979776,33,{_buttons:1}),a._25(603979776,34,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[34,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n          "," ","\n          "])),a._23(2),(n()(),a._0(16777216,null,4,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ion-icon",[["item-end",""],["name","ios-arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[34,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null)],function(n,l){n(l,1,0,a._9(1,"",l.parent.parent.context.$implicit.processes[7].color,""),"ios-arrow-forward")},function(n,l){n(l,0,0,a._20(l,1)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n        "]))],function(n,l){n(l,8,0,a._9(1,"",l.parent.context.$implicit.processes[7].color,""),"icon-vline"),n(l,12,0,!l.parent.context.$implicit.processes[7].done)},function(n,l){n(l,0,0,l.parent.context.$implicit.processes[7].color),n(l,7,0,a._20(l,8)._hidden),n(l,9,0,l.parent.context.$implicit.processes[7].name,a._28(l,9,1,n(l,10,0,a._20(l.parent.parent,1),l.parent.context.$implicit.processes[7].time,"y-MM-dd HH:mm:ss")))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._27(null,["\n          "])),(n()(),a._27(null,["\n          "])),(n()(),a._27(null,["\n          "])),(n()(),a._27(null,["\n        "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,31,"ion-row",[["class","row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,12,"ion-col",[["class","card-bottom-btn col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,8,"button",[["clear",""],["color","gray"],["icon-left",""],["ion-button",""],["small",""]],null,null,null,Eo.b,Eo.a)),a._4(1097728,null,0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"],small:[1,"small"],clear:[2,"clear"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","images"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"div",[],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(0,["\n          "])),(n()(),a._27(null,["\n        "]))],function(n,l){n(l,4,0,"gray","",""),n(l,7,0,"images")},function(n,l){n(l,6,0,a._20(l,7)._hidden),n(l,10,0,l.parent.context.$implicit.photoCount)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,12,"ion-col",[["class","card-bottom-btn col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,8,"button",[["clear",""],["color","gray"],["icon-left",""],["ion-button",""],["small",""]],null,null,null,Eo.b,Eo.a)),a._4(1097728,null,0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"],small:[1,"small"],clear:[2,"clear"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","musical-notes"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"div",[],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(0,["\n          "])),(n()(),a._27(null,["\n        "]))],function(n,l){n(l,4,0,"gray","",""),n(l,7,0,"musical-notes")},function(n,l){n(l,6,0,a._20(l,7)._hidden),n(l,10,0,l.parent.context.$implicit.audioCount)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,12,"ion-col",[["class","card-bottom-btn col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,8,"button",[["clear",""],["color","gray"],["icon-left",""],["ion-button",""],["small",""]],null,null,null,Eo.b,Eo.a)),a._4(1097728,null,0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"],small:[1,"small"],clear:[2,"clear"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","videocam"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"div",[],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(0,["\n          "])),(n()(),a._27(null,["\n        "]))],function(n,l){n(l,4,0,"gray","",""),n(l,7,0,"videocam")},function(n,l){n(l,6,0,a._20(l,7)._hidden),n(l,10,0,l.parent.context.$implicit.videoCount)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,12,"ion-col",[["class","card-bottom-btn col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,8,"button",[["clear",""],["icon-left",""],["ion-button",""],["small",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onLocate(n.parent.context.$implicit)&&t),t},Eo.b,Eo.a)),a._4(1097728,null,0,Co.a,[[8,""],Bi.a,a.k,a.E],{small:[0,"small"],clear:[1,"clear"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","map"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"div",[],null,null,null,null,null)),(n()(),a._27(null,["地图"])),(n()(),a._27(0,["\n          "])),(n()(),a._27(null,["\n        "]))],function(n,l){n(l,4,0,"",""),n(l,7,0,"map")},function(n,l){n(l,6,0,a._20(l,7)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._6(0,null,null,12,"ion-col",[["class","card-bottom-btn col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,8,"button",[["clear",""],["icon-left",""],["ion-button",""],["small",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onPreview(n.context.$implicit)&&t),t},Eo.b,Eo.a)),a._4(1097728,null,0,Co.a,[[8,""],Bi.a,a.k,a.E],{small:[0,"small"],clear:[1,"clear"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"div",[],null,null,null,null,null)),(n()(),a._27(null,["详细"])),(n()(),a._27(0,["\n          "])),(n()(),a._27(null,["\n        "])),(n()(),a._27(null,["\n\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,12,"ion-col",[["class","card-bottom-btn col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,8,"button",[["clear",""],["icon-left",""],["ion-button",""],["small",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onMaterials(n.parent.context.$implicit)&&t),t},Eo.b,Eo.a)),a._4(1097728,null,0,Co.a,[[8,""],Bi.a,a.k,a.E],{small:[0,"small"],clear:[1,"clear"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"div",[],null,null,null,null,null)),(n()(),a._27(null,["材料"])),(n()(),a._27(0,["\n          "])),(n()(),a._27(null,["\n        "]))],function(n,l){n(l,4,0,"",""),n(l,7,0,"information-circle")},function(n,l){n(l,6,0,a._20(l,7)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._27(null,["\n        "])),(n()(),a._27(null,["\n          "])),(n()(),a._27(null,["\n            "])),(n()(),a._27(null,["\n            "])),(n()(),a._27(null,["\n          "])),(n()(),a._27(null,["\n        "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n    "]))],function(n,l){var e=l.component;n(l,31,0,!l.context.$implicit.isUploaded),n(l,34,0,l.context.$implicit.isOverdueArrivedLine||l.context.$implicit.isOverdueReplyLine),n(l,63,0,l.context.$implicit.processes[0].show),n(l,67,0,l.context.$implicit.processes[1].show),n(l,71,0,l.context.$implicit.processes[2].show),n(l,75,0,l.context.$implicit.processes[3].show),n(l,79,0,l.context.$implicit.processes[4].show),n(l,83,0,l.context.$implicit.processes[5].show),n(l,87,0,l.context.$implicit.processes[6].show),n(l,91,0,l.context.$implicit.processes[7].show),n(l,104,0,!1),n(l,107,0,!1),n(l,110,0,!1),n(l,113,0,l.context.$implicit.isLocationValid),n(l,119,0,"",""),n(l,122,0,"information-circle"),n(l,130,0,e.showMaterial)},function(n,l){n(l,20,0,a._28(l,20,0,n(l,21,0,a._20(l.parent,0),l.context.$implicit.id.split("#")[0]))),n(l,27,0,a._28(l,27,0,n(l,28,0,a._20(l.parent,0),l.context.$implicit.type))),n(l,56,0,a._28(l,56,0,n(l,57,0,a._20(l.parent,0),l.context.$implicit.describe))),n(l,121,0,a._20(l,122)._hidden)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n  "])),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,5,"ion-infinite-scroll",[],null,[[null,"ionInfinite"]],function(n,l,e){var t=!0;return"ionInfinite"===l&&(t=!1!==n.component.doInfinite(e)&&t),t},null,null)),a._4(1196032,[[3,4]],0,Yo.a,[lo.a,a.x,a.k,$i.a],null,{ionInfinite:"ionInfinite"}),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,1,"ion-infinite-scroll-content",[],[[1,"state",0]],null,null,Jo.b,Jo.a)),a._4(114688,null,0,zo.a,[Yo.a,Bi.a],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n  "])),(n()(),a._27(1,["\n  "])),(n()(),a._0(16777216,null,0,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,11,"ion-fab",[["bottom",""],["right",""]],null,null,null,Ho.b,Ho.a)),a._4(1228800,null,2,Go.a,[Ki.a],null,null),a._25(335544320,35,{_mainButton:0}),a._25(603979776,36,{_fabLists:1}),(n()(),a._27(0,["\n    "])),(n()(),a._6(0,null,0,5,"button",[["color","primary"],["ion-fab",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.doScroll2Top(e)&&t),t},Vo.b,Vo.a)),a._4(49152,[[35,4]],0,$o.a,[Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(0,["\n      "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","arrow-dropup"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n    "])),(n()(),a._27(0,["\n  "]))],function(n,l){n(l,6,0,"primary"),n(l,9,0,"arrow-dropup")},function(n,l){n(l,8,0,a._20(l,9)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(1,["\n\n"])),(n()(),a._27(null,["\n"]))],function(n,l){var e=l.component;n(l,9,0,"primary"),n(l,20,0,"white"),n(l,23,0,"search"),n(l,29,0,e.showToolbar),n(l,37,0),n(l,40,0,"arrow-dropdown","Pull to refresh","circles","Refreshing..."),n(l,49,0,e.items),n(l,57,0),n(l,62,0,e.showFab)},function(n,l){var e=l.component;n(l,8,0,a._20(l,9)._hidden,a._20(l,9)._sbPadding),n(l,13,0,e.title),n(l,22,0,a._20(l,23)._hidden),n(l,32,0,a._20(l,33).statusbarPadding,a._20(l,33)._hasRefresher),n(l,36,0,"inactive"!==a._20(l,37).state,a._20(l,37)._top),n(l,39,0,a._20(l,40).r.state),n(l,56,0,a._20(l,57).inf.state)})},Qo)),a._4(245760,null,0,rt,[Ri.a,Bn,Oo.a,Zo.a,g,M],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),lu=e(126),eu=e(58),tu=e(78),iu=e(19),ou=e(92),uu=a._3({encapsulation:2,styles:[],data:{}}),au=a._1("page-workdetail",vl,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-workdetail",[],null,null,null,function(n){return a._29(0,[a._21(0,yo.d,[a.t]),(n()(),a._6(0,null,null,35,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,9,"ion-navbar",[["class","toolbar"],["color","primary"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Yi.b,Yi.a)),a._4(49152,null,0,Ji.a,[Fi.a,[2,Ui.a],[2,Ri.a],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      ","\n    "])),(n()(),a._27(3,["\n\n    "])),(n()(),a._0(16777216,null,2,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,13,"ion-buttons",[["end",""]],null,null,null,null,null)),a._4(16384,null,1,xo.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),a._25(603979776,1,{_buttons:1}),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,5,"button",[["color","white"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onLocate(e)&&t),t},Eo.b,Eo.a)),a._4(1097728,[[1,4]],0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(0,["\n        "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","map"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n      "]))],function(n,l){n(l,1,0,"white"),n(l,4,0,"map")},function(n,l){n(l,3,0,a._20(l,4)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,5,"button",[["color","white"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onReply(e)&&t),t},Eo.b,Eo.a)),a._4(1097728,[[1,4]],0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(0,["\n        "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","checkmark-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n      "])),(n()(),a._27(null,["\n    "]))],function(n,l){n(l,5,0,l.component.isLocationValid),n(l,8,0,"white"),n(l,11,0,"checkmark-circle")},function(n,l){n(l,10,0,a._20(l,11)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n\n  "])),(n()(),a._6(0,null,null,20,"ion-toolbar",[["class","toolbar"],["no-border-top",""]],[[2,"statusbar-padding",null]],null,null,Mo.b,Mo.a)),a._4(49152,null,0,Qi.a,[Bi.a,a.k,a.E],null,null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,16,"ion-segment",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"segment-disabled",null]],[[null,"ngModelChange"],[null,"ionChange"]],function(n,l,e){var t=!0,i=n.component;return"ngModelChange"===l&&(t=!1!==(i.segmentName=e)&&t),"ionChange"===l&&(t=!1!==i.segmentChanged(e)&&t),t},null,null)),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(1196032,null,1,tu.a,[Bi.a,a.k,a.E,[2,Ul.i]],{color:[0,"color"]},{ionChange:"ionChange"}),a._25(603979776,2,{_buttons:1}),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,2,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","detailInfo"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==a._20(n,26).onClick()&&t),t},lu.b,lu.a)),a._4(114688,[[2,4]],0,eu.a,[],{value:[0,"value"]},null),(n()(),a._27(0,["\n        基本信息\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,2,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","replyInfo"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==a._20(n,1).onClick()&&t),t},lu.b,lu.a)),a._4(114688,[[2,4]],0,eu.a,[],{value:[0,"value"]},null),(n()(),a._27(0,["\n        回填信息\n      "]))],function(n,l){n(l,1,0,"replyInfo")},function(n,l){n(l,0,0,a._20(l,1)._disabled,a._20(l,1).isActive,a._20(l,1).isActive)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,2,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","mediaInfo"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==a._20(n,1).onClick()&&t),t},lu.b,lu.a)),a._4(114688,[[2,4]],0,eu.a,[],{value:[0,"value"]},null),(n()(),a._27(0,["\n        多媒体\n      "]))],function(n,l){n(l,1,0,"mediaInfo")},function(n,l){n(l,0,0,a._20(l,1)._disabled,a._20(l,1).isActive,a._20(l,1).isActive)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,18,"ion-content",[["class","page-workdetail"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n\n  "])),(n()(),a._6(0,null,1,14,"div",[],null,null,null,null,null)),a._4(16384,null,0,yo.n,[],{ngSwitch:[0,"ngSwitch"]},null),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,5,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,19,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.detailItemSelected(n.context.$implicit)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,3,{contentLabel:0}),a._25(603979776,4,{_buttons:1}),a._25(603979776,5,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-name"],["fixed",""]],null,null,null,null,null)),a._4(16384,[[3,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,""],[8,null]],null,null),(n()(),a._27(null,["\n          ","\n        "])),(n()(),a._27(2,["\n        "])),(n()(),a._0(16777216,null,3,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,2,"div",[["item-content",""]],null,null,null,null,null)),(n()(),a._27(null,["\n          ","\n        "])),a._23(2)],null,function(n,l){n(l,1,0,a._28(l,1,0,n(l,2,0,a._20(l.parent.parent.parent,0),l.parent.context.$implicit.value,"y-MM-dd HH:mm:ss")))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n        "])),(n()(),a._0(16777216,null,3,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"div",[["item-content",""]],null,null,null,null,null)),(n()(),a._27(null,["\n          ","\n        "]))],null,function(n,l){n(l,1,0,l.parent.context.$implicit.value)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n        "])),(n()(),a._0(16777216,null,4,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ion-icon",[["item-end",""],["name","ios-arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[5,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"ios-arrow-forward")},function(n,l){n(l,0,0,a._20(l,1)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n      "]))],function(n,l){n(l,12,0,l.context.$implicit.isTime),n(l,15,0,!l.context.$implicit.isTime),n(l,18,0,l.context.$implicit.isActive)},function(n,l){n(l,9,0,l.context.$implicit.name)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n    "]))],function(n,l){n(l,4,0,l.component.detail)},null)})),a._4(278528,null,0,yo.o,[a.O,a.K,yo.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),a._27(null,["\n\n    "])),(n()(),a._27(null,["\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,25,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,16,"ion-item",[["class","reply-item item item-block"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.itemSelected(n.context.$implicit)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,6,{contentLabel:0}),a._25(603979776,7,{_buttons:1}),a._25(603979776,8,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-name"],["fixed",""]],null,null,null,null,null)),a._4(16384,[[6,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,""],[8,null]],null,null),(n()(),a._27(null,["\n          ","\n        "])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,1,"div",[["item-content",""]],null,null,null,null,null)),(n()(),a._27(null,["\n          ","\n        "])),(n()(),a._27(2,["\n        "])),(n()(),a._0(16777216,null,4,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ion-icon",[["item-end",""],["name","ios-arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[8,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"ios-arrow-forward")},function(n,l){n(l,0,0,a._20(l,1)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n      "]))],function(n,l){n(l,15,0,l.context.$implicit.isActive)},function(n,l){n(l,9,0,l.context.$implicit.name),n(l,12,0,l.context.$implicit.value)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n    "]))],function(n,l){n(l,4,0,l.component.reply)},null)})),a._4(278528,null,0,yo.o,[a.O,a.K,yo.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),a._27(null,["\n\n    "])),(n()(),a._27(null,["\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,104,"div",[],null,null,null,null,null)),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,9,"button",[["class","item item-block"],["icon-left",""],["ion-item",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onTakePicture(e)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,9,{contentLabel:0}),a._25(603979776,10,{_buttons:1}),a._25(603979776,11,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,2,1,"ion-icon",[["name","camera"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[11,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n        拍照\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,15,"ion-grid",[["class","grid"],["style","width: 100%; height: 100px;"]],null,null,null,null,null)),a._4(16384,null,0,No.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,11,"ion-row",[["class","row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,7,"ion-col",[["class","col-img col"],["col-4",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n            "])),(n()(),a._6(0,null,null,0,"img",[["class","picture"]],[[8,"src",4]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPreviewPicture(i.pictures[0])&&t),t},null,null)),(n()(),a._27(null,["\n            "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onDeletePicture(i.pictures[0])&&t),t},null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"close")},function(n,l){n(l,0,0,a._20(l,1)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n          "]))],function(n,l){n(l,6,0,!l.component.isLocked)},function(n,l){n(l,3,0,a._9(1,"",l.component.pictures[0],""))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n          "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,7,"ion-col",[["class","col-img col"],["col-4",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n            "])),(n()(),a._6(0,null,null,0,"img",[["class","picture"]],[[8,"src",4]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPreviewPicture(i.pictures[1])&&t),t},null,null)),(n()(),a._27(null,["\n            "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onDeletePicture(i.pictures[1])&&t),t},null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"close")},function(n,l){n(l,0,0,a._20(l,1)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n          "]))],function(n,l){n(l,6,0,!l.component.isLocked)},function(n,l){n(l,3,0,a._9(1,"",l.component.pictures[1],""))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n          "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,7,"ion-col",[["class","col-img col"],["col-4",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n            "])),(n()(),a._6(0,null,null,0,"img",[["class","picture"]],[[8,"src",4]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPreviewPicture(i.pictures[2])&&t),t},null,null)),(n()(),a._27(null,["\n            "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onDeletePicture(i.pictures[2])&&t),t},null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"close")},function(n,l){n(l,0,0,a._20(l,1)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n          "]))],function(n,l){n(l,6,0,!l.component.isLocked)},function(n,l){n(l,3,0,a._9(1,"",l.component.pictures[2],""))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n        "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,0,"br",[],null,null,null,null,null)),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,0,"br",[],null,null,null,null,null)),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,9,"button",[["class","item item-block"],["icon-left",""],["ion-item",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onRecordAudio(e)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,12,{contentLabel:0}),a._25(603979776,13,{_buttons:1}),a._25(603979776,14,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,2,1,"ion-icon",[["name","microphone"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[14,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n        录音\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,11,"ion-grid",[["class","grid"],["style","width: 100%; height: 150px;"]],null,null,null,null,null)),a._4(16384,null,0,No.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,19,"ion-row",[["class","audio row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,2,"ion-col",[["class","audio-info col"],["col-6",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["","s"])),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,5,"ion-col",[["class","col"],["col-2",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n            "])),(n()(),a._6(0,null,null,1,"ion-icon",[["class","audio-btn"],["name","play"],["role","img"]],[[2,"hide",null]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPlay(i.audios[0])&&t),t},null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(null,["\n          "])),(n()(),a._27(null,["\n          "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,5,"ion-col",[["class","col"],["col-1",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n            "])),(n()(),a._6(0,null,null,1,"ion-icon",[["class","audio-btn"],["name","close"],["role","img"]],[[2,"hide",null]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onDeleteAudio(i.audios[0])&&t),t},null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(null,["\n          "]))],function(n,l){n(l,4,0,"close")},function(n,l){n(l,3,0,a._20(l,4)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,1,"ion-col",[["class","col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "]))],function(n,l){var e=l.component;n(l,11,0,"play"),n(l,15,0,!e.isLocked)},function(n,l){n(l,5,0,l.component.audios[0].time),n(l,10,0,a._20(l,11)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,19,"ion-row",[["class","audio row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,2,"ion-col",[["class","audio-info col"],["col-6",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["","s"])),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,5,"ion-col",[["class","col"],["col-2",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n            "])),(n()(),a._6(0,null,null,1,"ion-icon",[["class","audio-btn"],["name","play"],["role","img"]],[[2,"hide",null]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPlay(i.audios[1])&&t),t},null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(null,["\n          "])),(n()(),a._27(null,["\n          "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,5,"ion-col",[["class","col"],["col-1",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n            "])),(n()(),a._6(0,null,null,1,"ion-icon",[["class","audio-btn"],["name","close"],["role","img"]],[[2,"hide",null]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onDeleteAudio(i.audios[1])&&t),t},null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(null,["\n          "]))],function(n,l){n(l,4,0,"close")},function(n,l){n(l,3,0,a._20(l,4)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,1,"ion-col",[["class","col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "]))],function(n,l){var e=l.component;n(l,11,0,"play"),n(l,15,0,!e.isLocked)},function(n,l){n(l,5,0,l.component.audios[1].time),n(l,10,0,a._20(l,11)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,19,"ion-row",[["class","audio row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,2,"ion-col",[["class","audio-info col"],["col-6",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["","s"])),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,5,"ion-col",[["class","col"],["col-2",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n            "])),(n()(),a._6(0,null,null,1,"ion-icon",[["class","audio-btn"],["name","play"],["role","img"]],[[2,"hide",null]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPlay(i.audios[2])&&t),t},null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(null,["\n          "])),(n()(),a._27(null,["\n          "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,5,"ion-col",[["class","col"],["col-1",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n            "])),(n()(),a._6(0,null,null,1,"ion-icon",[["class","audio-btn"],["name","close"],["role","img"]],[[2,"hide",null]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onDeleteAudio(i.audios[2])&&t),t},null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(null,["\n          "]))],function(n,l){n(l,4,0,"close")},function(n,l){n(l,3,0,a._20(l,4)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,1,"ion-col",[["class","col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "]))],function(n,l){var e=l.component;n(l,11,0,"play"),n(l,15,0,!e.isLocked)},function(n,l){n(l,5,0,l.component.audios[2].time),n(l,10,0,a._20(l,11)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,0,"br",[],null,null,null,null,null)),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,0,"br",[],null,null,null,null,null)),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,9,"button",[["class","item item-block"],["icon-left",""],["ion-item",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onTakeVideo(e)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,15,{contentLabel:0}),a._25(603979776,16,{_buttons:1}),a._25(603979776,17,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,2,1,"ion-icon",[["name","videocam"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[17,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n        视频\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,15,"ion-grid",[["class","grid"],["style","width: 100%; height: 100px;"]],null,null,null,null,null)),a._4(16384,null,0,No.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,11,"ion-row",[["class","row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,7,"ion-col",[["class","col-video col"],["col-4",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n            "])),(n()(),a._6(0,null,null,0,"video",[["class","video"]],null,[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPlayVideo(i.videos[0])&&t),t},null,null)),(n()(),a._27(null,["\n            "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onDeleteVideo(i.videos[0])&&t),t},null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"close")},function(n,l){n(l,0,0,a._20(l,1)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n          "]))],function(n,l){n(l,6,0,!l.component.isLocked)},null)})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n          "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,7,"ion-col",[["class","col-video col"],["col-4",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n            "])),(n()(),a._6(0,null,null,0,"video",[["class","video"]],null,[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPlayVideo(i.videos[1])&&t),t},null,null)),(n()(),a._27(null,["\n            "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onDeleteVideo(i.videos[1])&&t),t},null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"close")},function(n,l){n(l,0,0,a._20(l,1)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n          "]))],function(n,l){n(l,6,0,!l.component.isLocked)},null)})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n          "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,7,"ion-col",[["class","col-video col"],["col-4",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n            "])),(n()(),a._6(0,null,null,0,"video",[["class","video"]],null,[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPlayVideo(i.videos[2])&&t),t},null,null)),(n()(),a._27(null,["\n            "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onDeleteVideo(i.videos[2])&&t),t},null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"close")},function(n,l){n(l,0,0,a._20(l,1)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n          "]))],function(n,l){n(l,6,0,!l.component.isLocked)},null)})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n        "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,0,"br",[],null,null,null,null,null)),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,0,"br",[],null,null,null,null,null)),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n    "]))],function(n,l){var e=l.component;n(l,10,0,"camera"),n(l,20,0,e.pictures[0]),n(l,23,0,e.pictures[1]),n(l,26,0,e.pictures[2]),n(l,42,0,"microphone"),n(l,49,0,e.audios[0].time>0),n(l,52,0,e.audios[1].time>0),n(l,55,0,e.audios[2].time>0),n(l,70,0,"videocam"),n(l,80,0,e.videos[0]),n(l,83,0,e.videos[1]),n(l,86,0,e.pictures[2])},function(n,l){n(l,9,0,a._20(l,10)._hidden),n(l,41,0,a._20(l,42)._hidden),n(l,69,0,a._20(l,70)._hidden)})})),a._4(278528,null,0,yo.o,[a.O,a.K,yo.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n"])),(n()(),a._27(null,["\n"]))],function(n,l){var e=l.component;n(l,5,0,"primary"),n(l,12,0,!e.isPreview&&!e.isLocked),n(l,19,0,e.segmentName),n(l,22,0,a._9(1,"",e.segmentColor,"")),n(l,26,0,"detailInfo"),n(l,30,0,!e.isPreview),n(l,33,0,!e.isPreview),n(l,42,0,e.segmentName),n(l,46,0,"detailInfo"),n(l,50,0,"replyInfo"),n(l,54,0,"mediaInfo")},function(n,l){var e=l.component;n(l,4,0,a._20(l,5)._hidden,a._20(l,5)._sbPadding),n(l,9,0,e.title),n(l,15,0,a._20(l,16)._sbPadding),n(l,18,0,a._20(l,21).ngClassUntouched,a._20(l,21).ngClassTouched,a._20(l,21).ngClassPristine,a._20(l,21).ngClassDirty,a._20(l,21).ngClassValid,a._20(l,21).ngClassInvalid,a._20(l,21).ngClassPending,a._20(l,22)._disabled),n(l,25,0,a._20(l,26)._disabled,a._20(l,26).isActive,a._20(l,26).isActive),n(l,38,0,a._20(l,39).statusbarPadding,a._20(l,39)._hasRefresher)})},uu)),a._4(245760,null,0,vl,[Ri.a,iu.a,Oo.a,Zo.a,Bn,g,ou.a,C,cl.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),ru=a._3({encapsulation:2,styles:[],data:{}}),su=a._1("page-stationwork",re,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-stationwork",[],null,null,null,function(n){return a._29(0,[a._25(402653184,1,{content:0}),(n()(),a._6(0,null,null,32,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,25,"ion-navbar",[["class","toolbar"],["color","primary"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Yi.b,Yi.a)),a._4(49152,null,0,Ji.a,[Fi.a,[2,Ui.a],[2,Ri.a],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      ","-","\n    "])),(n()(),a._27(3,["\n\n    "])),(n()(),a._6(0,null,2,17,"ion-buttons",[["end",""]],null,null,null,null,null)),a._4(16384,null,1,xo.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),a._25(603979776,2,{_buttons:1}),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,5,"button",[["color","white"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onSearch(e)&&t),t},Eo.b,Eo.a)),a._4(1097728,[[2,4]],0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(0,["\n        "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,5,"button",[["color","white"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onFilter(e)&&t),t},Eo.b,Eo.a)),a._4(1097728,[[2,4]],0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(0,["\n        "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","funnel"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n      "])),(n()(),a._27(null,["\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n\n  "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,5,"ion-toolbar",[["class","toolbar"],["color","primary"]],[[2,"statusbar-padding",null]],null,null,Mo.b,Mo.a)),a._4(49152,null,0,Qi.a,[Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,1,"ion-searchbar",[],[[2,"searchbar-animated",null],[2,"searchbar-has-value",null],[2,"searchbar-active",null],[2,"searchbar-show-cancel",null],[2,"searchbar-left-aligned",null],[2,"searchbar-has-focus",null]],[[null,"input"]],function(n,l,e){var t=!0;return"input"===l&&(t=!1!==n.component.getItems(e)&&t),t},Uo.b,Uo.a)),a._4(1294336,null,0,Ro.a,[Bi.a,Ki.a,a.k,a.E,[2,Ul.i]],null,null),(n()(),a._27(3,["\n  "]))],function(n,l){n(l,1,0,"primary"),n(l,4,0)},function(n,l){n(l,0,0,a._20(l,1)._sbPadding),n(l,3,0,a._20(l,4)._animated,a._20(l,4)._value,a._20(l,4)._isActive,a._20(l,4)._showCancelButton,a._20(l,4)._shouldAlignLeft,a._20(l,4)._isFocus)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,29,"ion-content",[["class","page-stationwork"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,[[1,4]],0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n\n  "])),(n()(),a._6(0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,e){var t=!0;return"ionRefresh"===l&&(t=!1!==n.component.doRefresh(e)&&t),t},null,null)),a._4(212992,null,0,Wo.a,[Ki.a,lo.a,a.x,Hi.l],null,{ionRefresh:"ionRefresh"}),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,2,"ion-refresher-content",[["pullingIcon","arrow-dropdown"],["pullingText","Pull to refresh"],["refreshingSpinner","circles"],["refreshingText","Refreshing..."]],[[1,"state",0]],null,null,qo.b,qo.a)),a._4(114688,null,0,Xo.a,[Wo.a,Bi.a],{pullingIcon:[0,"pullingIcon"],pullingText:[1,"pullingText"],refreshingSpinner:[2,"refreshingSpinner"],refreshingText:[3,"refreshingText"]},null),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n  "])),(n()(),a._6(0,null,1,5,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,38,"ion-card",[],null,null,null,null,null)),a._4(16384,null,0,Fo.a,[Bi.a,a.k,a.E],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,24,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,3,{contentLabel:0}),a._25(603979776,4,{_buttons:1}),a._25(603979776,5,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,0,4,"ion-avatar",[["item-start",""]],null,null,null,null,null)),a._4(16384,null,0,Bo.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,0,"img",[["src","assets/img/ic_mywork_avatar.png"]],null,null,null,null,null)),(n()(),a._27(null,["\n        "])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,2,4,"div",[],null,null,null,null,null)),(n()(),a._6(0,null,null,1,"h2",[["class","card-header-label-hint"]],null,null,null,null,null)),(n()(),a._27(null,["客服编号 "])),(n()(),a._6(0,null,null,1,"h2",[["class","card-header-label-content"]],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,2,4,"div",[],null,null,null,null,null)),(n()(),a._6(0,null,null,1,"h2",[["class","card-header-label-hint"]],null,null,null,null,null)),(n()(),a._27(null,["任务编号 "])),(n()(),a._6(0,null,null,1,"h2",[["class","card-header-label-content"]],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,5,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,6,{contentLabel:0}),a._25(603979776,7,{_buttons:1}),a._25(603979776,8,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-name"],["fixed",""]],null,null,null,null,null)),a._4(16384,[[6,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,""],[8,null]],null,null),(n()(),a._27(null,["\n            ","\n          "])),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,3,1,"div",[["item-content",""]],null,null,null,null,null)),(n()(),a._27(null,["\n            ","\n          "])),(n()(),a._27(2,["\n        "]))],null,function(n,l){n(l,9,0,l.context.$implicit.name),n(l,12,0,l.context.$implicit.value)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,11,"ion-row",[["class","row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,12,"ion-col",[["class","card-bottom-btn col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,8,"button",[["clear",""],["icon-left",""],["ion-button",""],["small",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onAccept(n.parent.parent.context.$implicit)&&t),t},Eo.b,Eo.a)),a._4(1097728,null,0,Co.a,[[8,""],Bi.a,a.k,a.E],{small:[0,"small"],clear:[1,"clear"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","done-all"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"div",[],null,null,null,null,null)),(n()(),a._27(null,["接单"])),(n()(),a._27(0,["\n          "])),(n()(),a._27(null,["\n        "]))],function(n,l){n(l,4,0,"",""),n(l,7,0,"done-all")},function(n,l){n(l,6,0,a._20(l,7)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,12,"ion-col",[["class","card-bottom-btn col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,8,"button",[["clear",""],["icon-left",""],["ion-button",""],["small",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onDispatch(n.parent.parent.context.$implicit)&&t),t},Eo.b,Eo.a)),a._4(1097728,null,0,Co.a,[[8,""],Bi.a,a.k,a.E],{small:[0,"small"],clear:[1,"clear"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","person"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"div",[],null,null,null,null,null)),(n()(),a._27(null,["派工"])),(n()(),a._27(0,["\n          "])),(n()(),a._27(null,["\n        "]))],function(n,l){n(l,4,0,"",""),n(l,7,0,"person")},function(n,l){n(l,6,0,a._20(l,7)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,12,"ion-col",[["class","card-bottom-btn col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,8,"button",[["clear",""],["icon-left",""],["ion-button",""],["small",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onCancel(n.parent.parent.context.$implicit)&&t),t},Eo.b,Eo.a)),a._4(1097728,null,0,Co.a,[[8,""],Bi.a,a.k,a.E],{small:[0,"small"],clear:[1,"clear"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"div",[],null,null,null,null,null)),(n()(),a._27(null,["销单"])),(n()(),a._27(0,["\n          "])),(n()(),a._27(null,["\n        "]))],function(n,l){n(l,4,0,"",""),n(l,7,0,"close")},function(n,l){n(l,6,0,a._20(l,7)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n      "]))],function(n,l){n(l,4,0,!l.parent.context.$implicit.isAccepted),n(l,7,0,l.parent.context.$implicit.isAccepted),n(l,10,0,l.parent.context.$implicit.isAccepted)},null)})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n    "]))],function(n,l){var e=l.component;n(l,33,0,l.context.$implicit.contents),n(l,37,0,e.isUnDispatchedMode)},function(n,l){n(l,20,0,l.context.$implicit.serialNo),n(l,26,0,l.context.$implicit.taskNo)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n  "])),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,5,"ion-infinite-scroll",[],null,[[null,"ionInfinite"]],function(n,l,e){var t=!0;return"ionInfinite"===l&&(t=!1!==n.component.doInfinite(e)&&t),t},null,null)),a._4(1196032,null,0,Yo.a,[lo.a,a.x,a.k,$i.a],null,{ionInfinite:"ionInfinite"}),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,1,"ion-infinite-scroll-content",[],[[1,"state",0]],null,null,Jo.b,Jo.a)),a._4(114688,null,0,zo.a,[Yo.a,Bi.a],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n  "])),(n()(),a._27(1,["\n  "])),(n()(),a._0(16777216,null,0,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,11,"ion-fab",[["bottom",""],["right",""]],null,null,null,Ho.b,Ho.a)),a._4(1228800,null,2,Go.a,[Ki.a],null,null),a._25(335544320,9,{_mainButton:0}),a._25(603979776,10,{_fabLists:1}),(n()(),a._27(0,["\n    "])),(n()(),a._6(0,null,0,5,"button",[["color","primary"],["ion-fab",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.doScroll2Top(e)&&t),t},Vo.b,Vo.a)),a._4(49152,[[9,4]],0,$o.a,[Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(0,["\n      "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","arrow-dropup"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n    "])),(n()(),a._27(0,["\n  "]))],function(n,l){n(l,6,0,"primary"),n(l,9,0,"arrow-dropup")},function(n,l){n(l,8,0,a._20(l,9)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(1,["\n\n"])),(n()(),a._27(null,["\n"]))],function(n,l){var e=l.component;n(l,5,0,"primary"),n(l,16,0,"white"),n(l,19,0,"search"),n(l,23,0,"white"),n(l,26,0,"funnel"),n(l,32,0,e.showToolbar),n(l,39,0),n(l,42,0,"arrow-dropdown","Pull to refresh","circles","Refreshing..."),n(l,50,0,e.items),n(l,58,0),n(l,63,0,e.showFab)},function(n,l){var e=l.component;n(l,4,0,a._20(l,5)._hidden,a._20(l,5)._sbPadding),n(l,9,0,e.title,e.subTitle),n(l,18,0,a._20(l,19)._hidden),n(l,25,0,a._20(l,26)._hidden),n(l,35,0,a._20(l,36).statusbarPadding,a._20(l,36)._hasRefresher),n(l,38,0,"inactive"!==a._20(l,39).state,a._20(l,39)._top),n(l,41,0,a._20(l,42).r.state),n(l,57,0,a._20(l,58).inf.state)})},ru)),a._4(245760,null,0,re,[Ri.a,Oo.a,oo.a,Zo.a,Bn,g],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),cu=e(217),du=e(88),_u=e(63),pu=a._3({encapsulation:2,styles:[],data:{}}),hu=a._1("page-workinfo",le,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-workinfo",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,42,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,18,"ion-navbar",[["class","toolbar"],["color","primary"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Yi.b,Yi.a)),a._4(49152,null,0,Ji.a,[Fi.a,[2,Ui.a],[2,Ri.a],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      ","\n    "])),(n()(),a._27(3,["\n\n    "])),(n()(),a._6(0,null,2,10,"ion-buttons",[["end",""]],null,null,null,null,null)),a._4(16384,null,1,xo.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),a._25(603979776,1,{_buttons:1}),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,5,"button",[["color","white"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onDispatch(e)&&t),t},Eo.b,Eo.a)),a._4(1097728,[[1,4]],0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(0,["\n        "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","checkmark-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n      "])),(n()(),a._27(null,["\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n\n  "])),(n()(),a._6(0,null,null,18,"ion-toolbar",[["class","toolbar"],["no-border-top",""]],[[2,"statusbar-padding",null]],null,null,Mo.b,Mo.a)),a._4(49152,null,0,Qi.a,[Bi.a,a.k,a.E],null,null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,14,"ion-segment",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"segment-disabled",null]],[[null,"ngModelChange"],[null,"ionChange"]],function(n,l,e){var t=!0,i=n.component;return"ngModelChange"===l&&(t=!1!==(i.segmentName=e)&&t),"ionChange"===l&&(t=!1!==i.segmentChanged(e)&&t),t},null,null)),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(1196032,null,1,tu.a,[Bi.a,a.k,a.E,[2,Ul.i]],null,{ionChange:"ionChange"}),a._25(603979776,2,{_buttons:1}),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,2,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","detailInfo"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==a._20(n,34).onClick()&&t),t},lu.b,lu.a)),a._4(114688,[[2,4]],0,eu.a,[],{value:[0,"value"]},null),(n()(),a._27(0,["\n        基本信息\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,2,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","dispatchInfo"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==a._20(n,38).onClick()&&t),t},lu.b,lu.a)),a._4(114688,[[2,4]],0,eu.a,[],{value:[0,"value"]},null),(n()(),a._27(0,["\n        派工信息\n      "])),(n()(),a._27(null,["\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,12,"ion-content",[["class","page-workinfo"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n\n  "])),(n()(),a._6(0,null,1,8,"div",[],null,null,null,null,null)),a._4(16384,null,0,yo.n,[],{ngSwitch:[0,"ngSwitch"]},null),(n()(),a._27(null,["\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,5,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,3,{contentLabel:0}),a._25(603979776,4,{_buttons:1}),a._25(603979776,5,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-name"],["fixed",""]],null,null,null,null,null)),a._4(16384,[[3,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,""],[8,null]],null,null),(n()(),a._27(null,["\n          ","\n        "])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,1,"div",[["item-content",""]],null,null,null,null,null)),(n()(),a._27(null,["\n          ","\n        "])),(n()(),a._27(2,["\n      "]))],null,function(n,l){n(l,9,0,l.context.$implicit.name),n(l,12,0,l.context.$implicit.value)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n    "]))],function(n,l){n(l,4,0,l.component.details)},null)})),a._4(278528,null,0,yo.o,[a.O,a.K,yo.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),a._27(null,["\n\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,5,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,22,"ion-item",[["class","dispatch-item item item-block"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.itemSelected(n.context.$implicit)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,6,{contentLabel:0}),a._25(603979776,7,{_buttons:1}),a._25(603979776,8,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-name"],["fixed",""]],null,null,null,null,null)),a._4(16384,[[6,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,""],[8,null]],null,null),(n()(),a._27(null,["\n          ","\n        "])),(n()(),a._27(2,["\n        "])),(n()(),a._0(16777216,null,3,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"div",[["item-content",""]],null,null,null,null,null)),(n()(),a._27(null,["\n          ","\n        "]))],null,function(n,l){n(l,1,0,l.parent.context.$implicit.value)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n        "])),(n()(),a._0(16777216,null,3,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,5,"ion-datetime",[["cancelText","取消"],["displayFormat","YYYY-MM-DD"],["doneText","确定"],["pickerFormat","YYYY-MM-DD"],["style","padding-left: 0px;"]],[[2,"datetime-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==a._20(n,1)._click(e)&&t),"keyup.space"===l&&(t=!1!==a._20(n,1)._keyup()&&t),"ngModelChange"===l&&(t=!1!==(n.parent.context.$implicit.value=e)&&t),t},cu.b,cu.a)),a._4(1228800,null,0,du.a,[ho.a,Bi.a,a.k,a.E,[2,po.a],[2,_u.a]],{displayFormat:[0,"displayFormat"],pickerFormat:[1,"pickerFormat"],cancelText:[2,"cancelText"],doneText:[3,"doneText"]},null),a._24(1024,null,Ul.h,function(n){return[n]},[du.a]),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[2,Ul.h]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null)],function(n,l){n(l,1,0,"YYYY-MM-DD","YYYY-MM-DD","取消","确定"),n(l,3,0,l.parent.context.$implicit.value)},function(n,l){n(l,0,0,a._20(l,1)._disabled,a._20(l,5).ngClassUntouched,a._20(l,5).ngClassTouched,a._20(l,5).ngClassPristine,a._20(l,5).ngClassDirty,a._20(l,5).ngClassValid,a._20(l,5).ngClassInvalid,a._20(l,5).ngClassPending)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n        "])),(n()(),a._0(16777216,null,3,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,5,"ion-datetime",[["cancelText","取消"],["displayFormat","HH:mm:ss"],["doneText","确定"],["pickerFormat","HH:mm:ss"],["style","padding-left: 0px;"]],[[2,"datetime-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==a._20(n,1)._click(e)&&t),"keyup.space"===l&&(t=!1!==a._20(n,1)._keyup()&&t),"ngModelChange"===l&&(t=!1!==(n.parent.context.$implicit.value=e)&&t),t},cu.b,cu.a)),a._4(1228800,null,0,du.a,[ho.a,Bi.a,a.k,a.E,[2,po.a],[2,_u.a]],{displayFormat:[0,"displayFormat"],pickerFormat:[1,"pickerFormat"],cancelText:[2,"cancelText"],doneText:[3,"doneText"]},null),a._24(1024,null,Ul.h,function(n){return[n]},[du.a]),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[2,Ul.h]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null)],function(n,l){n(l,1,0,"HH:mm:ss","HH:mm:ss","取消","确定"),n(l,3,0,l.parent.context.$implicit.value)},function(n,l){n(l,0,0,a._20(l,1)._disabled,a._20(l,5).ngClassUntouched,a._20(l,5).ngClassTouched,a._20(l,5).ngClassPristine,a._20(l,5).ngClassDirty,a._20(l,5).ngClassValid,a._20(l,5).ngClassInvalid,a._20(l,5).ngClassPending)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n        "])),(n()(),a._0(16777216,null,4,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ion-icon",[["item-end",""],["name","ios-arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[8,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"ios-arrow-forward")},function(n,l){n(l,0,0,a._20(l,1)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n      "]))],function(n,l){n(l,12,0,!l.context.$implicit.isDate&&!l.context.$implicit.isTime),n(l,15,0,l.context.$implicit.isDate),n(l,18,0,l.context.$implicit.isTime),n(l,21,0,l.context.$implicit.isActive)},function(n,l){n(l,9,0,l.context.$implicit.name)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n    "]))],function(n,l){n(l,4,0,l.component.dispatches)},null)})),a._4(278528,null,0,yo.o,[a.O,a.K,yo.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n"])),(n()(),a._27(null,["\n"]))],function(n,l){var e=l.component;n(l,4,0,"primary"),n(l,15,0,"white"),n(l,18,0,"checkmark-circle"),n(l,27,0,e.segmentName),n(l,34,0,"detailInfo"),n(l,38,0,"dispatchInfo"),n(l,48,0,e.segmentName),n(l,51,0,"detailInfo"),n(l,54,0,"dispatchInfo")},function(n,l){var e=l.component;n(l,3,0,a._20(l,4)._hidden,a._20(l,4)._sbPadding),n(l,8,0,e.title),n(l,17,0,a._20(l,18)._hidden),n(l,23,0,a._20(l,24)._sbPadding),n(l,26,0,a._20(l,29).ngClassUntouched,a._20(l,29).ngClassTouched,a._20(l,29).ngClassPristine,a._20(l,29).ngClassDirty,a._20(l,29).ngClassValid,a._20(l,29).ngClassInvalid,a._20(l,29).ngClassPending,a._20(l,30)._disabled),n(l,33,0,a._20(l,34)._disabled,a._20(l,34).isActive,a._20(l,34).isActive),n(l,37,0,a._20(l,38)._disabled,a._20(l,38).isActive,a._20(l,38).isActive),n(l,44,0,a._20(l,45).statusbarPadding,a._20(l,45)._hasRefresher)})},pu)),a._4(114688,null,0,le,[Ri.a,iu.a,Oo.a,Zo.a,Bn,g],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),mu=e(260),fu=e(105),gu=e(104),vu=a._3({encapsulation:2,styles:[],data:{}}),bu=a._1("page-news",be,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-news",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,18,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,14,"ion-navbar",[["class","toolbar"],["color","primary"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Yi.b,Yi.a)),a._4(49152,null,0,Ji.a,[Fi.a,[2,Ui.a],[2,Ri.a],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      ","\n    "])),(n()(),a._27(3,["\n\n    "])),(n()(),a._6(0,null,2,6,"ion-buttons",[["end",""]],null,null,null,null,null)),a._4(16384,null,1,xo.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),a._25(603979776,1,{_buttons:1}),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,5,"button",[["color","white"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onDeleteAll(e)&&t),t},Eo.b,Eo.a)),a._4(1097728,[[1,4]],0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(0,["\n        "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n      "]))],function(n,l){n(l,1,0,"white"),n(l,4,0,"trash")},function(n,l){n(l,3,0,a._20(l,4)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,9,"ion-content",[["class","page-news"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,5,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,43,"ion-card",[],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onJumpDetails(n.context.$implicit)&&t),t},null,null)),a._4(16384,null,0,Fo.a,[Bi.a,a.k,a.E],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,39,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,35,"ion-item-sliding",[],null,null,null,mu.b,mu.a)),a._4(49152,[["slidingItem",4]],2,fu.a,[[2,co.a],Ki.a,a.E,a.k,a.x],null,null),a._25(335544320,2,{item:0}),a._25(603979776,3,{_itemOptions:1}),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,0,18,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,[[2,4]],3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,4,{contentLabel:0}),a._25(603979776,5,{_buttons:1}),a._25(603979776,6,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n            "])),(n()(),a._6(0,null,2,5,"div",[],null,null,null,null,null)),(n()(),a._6(0,null,null,1,"h2",[["class","card-header-label-hint"]],null,null,null,null,null)),(n()(),a._27(null,["温馨提示"])),(n()(),a._27(null,["\n              "])),(n()(),a._6(0,null,null,1,"h2",[["class","card-header-label-content"]],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(2,["\n            "])),(n()(),a._6(0,null,2,0,"br",[],null,null,null,null,null)),(n()(),a._27(2,["\n            "])),(n()(),a._6(0,null,2,1,"div",[["class","card-news-content"]],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(2,["\n          "])),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,1,9,"ion-item-options",[],null,null,null,null,null)),a._4(16384,[[3,4]],0,gu.a,[a.k,Ki.a],null,null),(n()(),a._27(null,["\n            "])),(n()(),a._6(0,null,null,5,"button",[["color","danger"],["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.removeItem(e,n.context.$implicit,a._20(n,7))&&t),t},Eo.b,Eo.a)),a._4(1097728,null,0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(0,["\n              "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n              删除\n            "])),(n()(),a._27(null,["\n          "])),(n()(),a._27(null,["\n        "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n    "]))],function(n,l){n(l,35,0,"danger"),n(l,38,0,"trash")},function(n,l){n(l,23,0,l.context.$implicit.newsDate),n(l,28,0,l.context.$implicit.newsContent),n(l,37,0,a._20(l,38)._hidden)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n"])),(n()(),a._27(null,["\n"]))],function(n,l){var e=l.component;n(l,4,0,"primary"),n(l,15,0,e.isShow),n(l,27,0,e.items)},function(n,l){var e=l.component;n(l,3,0,a._20(l,4)._hidden,a._20(l,4)._sbPadding),n(l,8,0,e.title),n(l,20,0,a._20(l,21).statusbarPadding,a._20(l,21)._hasRefresher)})},vu)),a._4(114688,null,0,be,[Ri.a,Oo.a,Bn],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),yu=a._3({encapsulation:2,styles:[],data:{}}),ku=a._1("page-newsdetails",fe,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-newsdetails",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,6,"ion-navbar",[["class","toolbar"],["color","primary"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Yi.b,Yi.a)),a._4(49152,null,0,Ji.a,[Fi.a,[2,Ui.a],[2,Ri.a],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      ","\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,11,"ion-content",[["class","page-newsdetails"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n\n  "])),(n()(),a._6(0,null,1,1,"h2",[],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,1,"h3",[],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,1,"p",[],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(1,["\n"])),(n()(),a._27(null,["\n"]))],function(n,l){n(l,4,0,"primary")},function(n,l){var e=l.component;n(l,3,0,a._20(l,4)._hidden,a._20(l,4)._sbPadding),n(l,8,0,e.title),n(l,12,0,a._20(l,13).statusbarPadding,a._20(l,13)._hasRefresher),n(l,16,0,e.newsTitle),n(l,19,0,e.newsTime),n(l,22,0,e.newsContent)})},yu)),a._4(49152,null,0,fe,[Ri.a,iu.a],null,null)],null,null)},{},{},[]),Su=a._3({encapsulation:2,styles:[],data:{}}),Iu=a._1("page-search",Jl,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-search",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,22,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,18,"ion-navbar",[["class","toolbar"],["color","primary"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Yi.b,Yi.a)),a._4(49152,null,0,Ji.a,[Fi.a,[2,Ui.a],[2,Ri.a],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      ","\n    "])),(n()(),a._27(3,["\n\n    "])),(n()(),a._6(0,null,2,10,"ion-buttons",[["end",""]],null,null,null,null,null)),a._4(16384,null,1,xo.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),a._25(603979776,1,{_buttons:1}),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,5,"button",[["color","white"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onReset(e)&&t),t},Eo.b,Eo.a)),a._4(1097728,[[1,4]],0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(0,["\n        "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n      "])),(n()(),a._27(null,["\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,169,"ion-content",[["class","page-search"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n\n  "])),(n()(),a._6(0,null,1,150,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,146,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,l,e){var t=!0;return"submit"===l&&(t=!1!==a._20(n,32).onSubmit(e)&&t),"reset"===l&&(t=!1!==a._20(n,32).onReset()&&t),t},null,null)),a._4(16384,null,0,Ul.p,[],null,null),a._4(540672,null,0,Ul.f,[[8,null],[8,null]],{form:[0,"form"]},null),a._24(2048,null,Ul.b,null,[Ul.f]),a._4(16384,null,0,Ul.k,[Ul.b],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,16,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,2,{contentLabel:0}),a._25(603979776,3,{_buttons:1}),a._25(603979776,4,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["color","label"]],null,null,null,null,null)),a._4(16384,[[2,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(n()(),a._27(null,["发生地址"])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,4,"ion-input",[["clearInput",""],["formControlName","address"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vo.b,vo.a)),a._4(671744,null,0,Ul.e,[[3,Ul.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),a._24(2048,null,Ul.i,null,[Ul.e]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(5423104,null,0,bo.a,[Bi.a,Ki.a,ho.a,Fi.a,a.k,a.E,[2,lo.a],[2,po.a],[2,Ul.i],$i.a],{clearInput:[0,"clearInput"],type:[1,"type"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,16,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,5,{contentLabel:0}),a._25(603979776,6,{_buttons:1}),a._25(603979776,7,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["color","label"]],null,null,null,null,null)),a._4(16384,[[5,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(n()(),a._27(null,["联系电话"])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,4,"ion-input",[["clearInput",""],["formControlName","telephone"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vo.b,vo.a)),a._4(671744,null,0,Ul.e,[[3,Ul.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),a._24(2048,null,Ul.i,null,[Ul.e]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(5423104,null,0,bo.a,[Bi.a,Ki.a,ho.a,Fi.a,a.k,a.E,[2,lo.a],[2,po.a],[2,Ul.i],$i.a],{clearInput:[0,"clearInput"],type:[1,"type"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,16,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,8,{contentLabel:0}),a._25(603979776,9,{_buttons:1}),a._25(603979776,10,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["color","label"]],null,null,null,null,null)),a._4(16384,[[8,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(n()(),a._27(null,["客服编号"])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,4,"ion-input",[["clearInput",""],["formControlName","customerNum"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vo.b,vo.a)),a._4(671744,null,0,Ul.e,[[3,Ul.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),a._24(2048,null,Ul.i,null,[Ul.e]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(5423104,null,0,bo.a,[Bi.a,Ki.a,ho.a,Fi.a,a.k,a.E,[2,lo.a],[2,po.a],[2,Ul.i],$i.a],{clearInput:[0,"clearInput"],type:[1,"type"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,16,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,11,{contentLabel:0}),a._25(603979776,12,{_buttons:1}),a._25(603979776,13,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["color","label"]],null,null,null,null,null)),a._4(16384,[[11,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(n()(),a._27(null,["任务编号"])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,4,"ion-input",[["clearInput",""],["formControlName","taskNum"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vo.b,vo.a)),a._4(671744,null,0,Ul.e,[[3,Ul.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),a._24(2048,null,Ul.i,null,[Ul.e]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(5423104,null,0,bo.a,[Bi.a,Ki.a,ho.a,Fi.a,a.k,a.E,[2,lo.a],[2,po.a],[2,Ul.i],$i.a],{clearInput:[0,"clearInput"],type:[1,"type"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,14,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.showTaskType()&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,14,{contentLabel:0}),a._25(603979776,15,{_buttons:1}),a._25(603979776,16,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-content"],["color","label"]],null,null,null,null,null)),a._4(16384,[[14,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(n()(),a._27(null,["任务状态"])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[14,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["",""])),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,14,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.showReflectType()&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,17,{contentLabel:0}),a._25(603979776,18,{_buttons:1}),a._25(603979776,19,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["color","label"]],null,null,null,null,null)),a._4(16384,[[17,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(n()(),a._27(null,["反映类别"])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[17,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["",""])),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,16,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,20,{contentLabel:0}),a._25(603979776,21,{_buttons:1}),a._25(603979776,22,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["color","label"]],null,null,null,null,null)),a._4(16384,[[20,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(n()(),a._27(null,["反映人员"])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,4,"ion-input",[["clearInput",""],["formControlName","reflectPerson"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vo.b,vo.a)),a._4(671744,null,0,Ul.e,[[3,Ul.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),a._24(2048,null,Ul.i,null,[Ul.e]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(5423104,null,0,bo.a,[Bi.a,Ki.a,ho.a,Fi.a,a.k,a.E,[2,lo.a],[2,po.a],[2,Ul.i],$i.a],{clearInput:[0,"clearInput"],type:[1,"type"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,17,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,23,{contentLabel:0}),a._25(603979776,24,{_buttons:1}),a._25(603979776,25,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["color","label"]],null,null,null,null,null)),a._4(16384,[[23,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(n()(),a._27(null,["派遣时间"])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,5,"ion-datetime",[["cancelText","取消"],["clearInput",""],["displayFormat","YYYY-MM-DD HH:mm"],["doneText","确定"],["formControlName","dispatchTime"],["pickerFormat","YYYY-MM-DD HH:mm"]],[[2,"datetime-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==a._20(n,170)._click(e)&&t),"keyup.space"===l&&(t=!1!==a._20(n,170)._keyup()&&t),"ngModelChange"===l&&(t=!1!==(i.myDate=e)&&t),t},cu.b,cu.a)),a._4(1228800,null,0,du.a,[ho.a,Bi.a,a.k,a.E,[2,po.a],[2,_u.a]],{displayFormat:[0,"displayFormat"],pickerFormat:[1,"pickerFormat"],cancelText:[2,"cancelText"],doneText:[3,"doneText"]},null),a._24(1024,null,Ul.h,function(n){return[n]},[du.a]),a._4(671744,null,0,Ul.e,[[3,Ul.b],[8,null],[8,null],[2,Ul.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.e]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n  "])),(n()(),a._6(0,null,1,13,"ion-row",[["class","row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,9,"ion-col",[["class","col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,5,"div",[["class","login-button"]],null,null,null,null,null)),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,2,"button",[["block",""],["ion-button",""],["type","submit"]],null,[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onSearchClick(i.searchForm.value)&&t),t},Eo.b,Eo.a)),a._4(1097728,null,0,Co.a,[[8,""],Bi.a,a.k,a.E],{block:[0,"block"]},null),(n()(),a._27(0,["查询"])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n"])),(n()(),a._27(null,["\n"]))],function(n,l){var e=l.component;n(l,4,0,"primary"),n(l,15,0,"white"),n(l,18,0,"close"),n(l,32,0,e.searchForm),n(l,44,0,"label"),n(l,48,0,"address"),n(l,51,0,"","text"),n(l,62,0,"label"),n(l,66,0,"telephone"),n(l,69,0,"","number"),n(l,80,0,"label"),n(l,84,0,"customerNum"),n(l,87,0,"","text"),n(l,98,0,"label"),n(l,102,0,"taskNum"),n(l,105,0,"","text"),n(l,116,0,"label"),n(l,132,0,"label"),n(l,148,0,"label"),n(l,152,0,"reflectPerson"),n(l,155,0,"","text"),n(l,166,0,"label"),n(l,170,0,"YYYY-MM-DD HH:mm","YYYY-MM-DD HH:mm","取消","确定"),n(l,172,0,"dispatchTime",e.myDate),n(l,188,0,"")},function(n,l){var e=l.component;n(l,3,0,a._20(l,4)._hidden,a._20(l,4)._sbPadding),n(l,8,0,e.title),n(l,17,0,a._20(l,18)._hidden),n(l,24,0,a._20(l,25).statusbarPadding,a._20(l,25)._hasRefresher),n(l,30,0,a._20(l,34).ngClassUntouched,a._20(l,34).ngClassTouched,a._20(l,34).ngClassPristine,a._20(l,34).ngClassDirty,a._20(l,34).ngClassValid,a._20(l,34).ngClassInvalid,a._20(l,34).ngClassPending),n(l,47,0,a._20(l,50).ngClassUntouched,a._20(l,50).ngClassTouched,a._20(l,50).ngClassPristine,a._20(l,50).ngClassDirty,a._20(l,50).ngClassValid,a._20(l,50).ngClassInvalid,a._20(l,50).ngClassPending),n(l,65,0,a._20(l,68).ngClassUntouched,a._20(l,68).ngClassTouched,a._20(l,68).ngClassPristine,a._20(l,68).ngClassDirty,a._20(l,68).ngClassValid,a._20(l,68).ngClassInvalid,a._20(l,68).ngClassPending),n(l,83,0,a._20(l,86).ngClassUntouched,a._20(l,86).ngClassTouched,a._20(l,86).ngClassPristine,a._20(l,86).ngClassDirty,a._20(l,86).ngClassValid,a._20(l,86).ngClassInvalid,a._20(l,86).ngClassPending),n(l,101,0,a._20(l,104).ngClassUntouched,a._20(l,104).ngClassTouched,a._20(l,104).ngClassPristine,a._20(l,104).ngClassDirty,a._20(l,104).ngClassValid,a._20(l,104).ngClassInvalid,a._20(l,104).ngClassPending),n(l,121,0,e.searchForm.value.taskState),n(l,137,0,e.searchForm.value.reflectType),n(l,151,0,a._20(l,154).ngClassUntouched,a._20(l,154).ngClassTouched,a._20(l,154).ngClassPristine,a._20(l,154).ngClassDirty,a._20(l,154).ngClassValid,a._20(l,154).ngClassInvalid,a._20(l,154).ngClassPending),n(l,169,0,a._20(l,170)._disabled,a._20(l,174).ngClassUntouched,a._20(l,174).ngClassTouched,a._20(l,174).ngClassPristine,a._20(l,174).ngClassDirty,a._20(l,174).ngClassValid,a._20(l,174).ngClassInvalid,a._20(l,174).ngClassPending)})},Su)),a._4(114688,null,0,Jl,[Ri.a,Oo.a,Ul.d,Bn],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),Tu=a._3({encapsulation:2,styles:[],data:{}}),Eu=a._1("page-searchresult",Gl,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-searchresult",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,6,"ion-navbar",[["class","toolbar"],["color","primary"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Yi.b,Yi.a)),a._4(49152,null,0,Ji.a,[Fi.a,[2,Ui.a],[2,Ri.a],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      ","\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,39,"ion-content",[["class","page-searchresult"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,27,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),a._4(16384,null,0,No.a,[],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,23,"ion-row",[["class","row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,5,"ion-col",[["class","col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,1,"div",[["class","allTasks"]],null,null,null,null,null)),(n()(),a._27(null,["总共单:",""])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,5,"ion-col",[["class","col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,1,"div",[["class","finishedTasks"]],null,null,null,null,null)),(n()(),a._27(null,["已完成:",""])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,5,"ion-col",[["class","col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,1,"div",[["class","unFinishedTasks"]],null,null,null,null,null)),(n()(),a._27(null,["未完成:",""])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n  "])),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,5,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,52,"ion-card",[],null,null,null,null,null)),a._4(16384,null,0,Fo.a,[Bi.a,a.k,a.E],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,26,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,1,{contentLabel:0}),a._25(603979776,2,{_buttons:1}),a._25(603979776,3,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,0,4,"ion-avatar",[["item-start",""]],null,null,null,null,null)),a._4(16384,null,0,Bo.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,0,"img",[["src","assets/img/ic_mywork_avatar.png"]],null,null,null,null,null)),(n()(),a._27(null,["\n        "])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,2,5,"div",[],null,null,null,null,null)),(n()(),a._6(0,null,null,1,"h2",[["class","card-header-label-hint"]],null,null,null,null,null)),(n()(),a._27(null,["客服编号"])),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,1,"h2",[["class","card-header-label-content"]],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,2,5,"div",[],null,null,null,null,null)),(n()(),a._6(0,null,null,1,"h2",[["class","card-header-label-hint"]],null,null,null,null,null)),(n()(),a._27(null,["任务编号"])),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,1,"h2",[["class","card-header-label-content"]],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,20,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,4,{contentLabel:0}),a._25(603979776,5,{_buttons:1}),a._25(603979776,6,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-name"],["fixed",""]],null,null,null,null,null)),a._4(16384,[[4,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,""],[8,null]],null,null),(n()(),a._27(null,["",""])),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,3,1,"div",[["item-content",""]],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(2,["\n        "]))],null,function(n,l){n(l,9,0,l.context.$implicit.name),n(l,12,0,l.context.$implicit.value)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,13,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onDetails(n.context.$implicit.taskId)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,7,{contentLabel:0}),a._25(603979776,8,{_buttons:1}),a._25(603979776,9,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-name"],["fixed",""]],null,null,null,null,null)),a._4(16384,[[7,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,""],[8,null]],null,null),(n()(),a._27(null,["详细信息"])),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,4,1,"ion-icon",[["item-end",""],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[9,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n        "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n    "]))],function(n,l){n(l,35,0,l.context.$implicit.contents),n(l,49,0,"arrow-forward")},function(n,l){n(l,21,0,l.context.$implicit.customerId),n(l,28,0,l.context.$implicit.taskId),n(l,48,0,a._20(l,49)._hidden)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n"])),(n()(),a._27(null,["\n"]))],function(n,l){var e=l.component;n(l,4,0,"primary"),n(l,49,0,e.items)},function(n,l){var e=l.component;n(l,3,0,a._20(l,4)._hidden,a._20(l,4)._sbPadding),n(l,8,0,e.title),n(l,12,0,a._20(l,13).statusbarPadding,a._20(l,13)._hasRefresher),n(l,25,0,e.totalTaskCount),n(l,32,0,e.completedTaskCount),n(l,39,0,e.unCompletedTaskCount)})},Tu)),a._4(114688,null,0,Gl,[Ri.a,iu.a,oo.a,Bn,Oo.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),Cu=a._3({encapsulation:2,styles:[],data:{}}),Ou=a._1("page-searchdetails",Fl,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-searchdetails",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,26,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,6,"ion-navbar",[["class","toolbar"],["color","primary"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Yi.b,Yi.a)),a._4(49152,null,0,Ji.a,[Fi.a,[2,Ui.a],[2,Ri.a],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      ","\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n\n  "])),(n()(),a._6(0,null,null,14,"ion-segment",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"segment-disabled",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0;return"ngModelChange"===l&&(t=!1!==(n.component.segmentName=e)&&t),t},null,null)),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(1196032,null,1,tu.a,[Bi.a,a.k,a.E,[2,Ul.i]],null,null),a._25(603979776,1,{_buttons:1}),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,2,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","basicInfo"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==a._20(n,19).onClick()&&t),t},lu.b,lu.a)),a._4(114688,[[1,4]],0,eu.a,[],{value:[0,"value"]},null),(n()(),a._27(0,["\n      基本信息\n    "])),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,2,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","taskState"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==a._20(n,23).onClick()&&t),t},lu.b,lu.a)),a._4(114688,[[1,4]],0,eu.a,[],{value:[0,"value"]},null),(n()(),a._27(0,["\n      任务状态\n    "])),(n()(),a._27(null,["\n  "])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,14,"ion-content",[["class","page-searchdetails"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n\n\n  "])),(n()(),a._6(0,null,1,10,"div",[],null,null,null,null,null)),a._4(16384,null,0,yo.n,[],{ngSwitch:[0,"ngSwitch"]},null),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,5,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,2,{contentLabel:0}),a._25(603979776,3,{_buttons:1}),a._25(603979776,4,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-name"],["fixed",""]],null,null,null,null,null)),a._4(16384,[[2,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,""],[8,null]],null,null),(n()(),a._27(null,["\n          ","\n        "])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,1,"div",[["item-content",""]],null,null,null,null,null)),(n()(),a._27(null,["\n          ","\n        "])),(n()(),a._27(2,["\n      "]))],null,function(n,l){n(l,9,0,l.context.$implicit.name),n(l,12,0,l.context.$implicit.value)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n    "]))],function(n,l){n(l,4,0,l.component.details)},null)})),a._4(278528,null,0,yo.o,[a.O,a.K,yo.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),a._27(null,["\n\n\n    "])),(n()(),a._27(null,["\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,8,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,4,"ul",[["class","list"]],null,null,null,null,null)),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,8,"li",[],null,null,null,null,null)),a._4(278528,null,0,yo.h,[a.r,a.s,a.k,a.E],{ngClass:[0,"ngClass"]},null),a._22({current:0}),(n()(),a._27(null,["",""])),(n()(),a._6(0,null,null,0,"br",[],null,null,null,null,null)),(n()(),a._27(null,["","\n          "])),(n()(),a._6(0,null,null,1,"div",[["class","circle"]],null,null,null,null,null)),(n()(),a._6(0,null,null,0,"b",[["class","circle"]],null,null,null,null,null)),(n()(),a._27(null,["\n        "]))],function(n,l){n(l,1,0,n(l,2,0,l.context.$implicit==l.component.states[0]))},function(n,l){n(l,3,0,l.context.$implicit.state),n(l,5,0,l.context.$implicit.time)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n    "]))],function(n,l){n(l,6,0,l.component.states)},null)})),a._4(278528,null,0,yo.o,[a.O,a.K,yo.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),a._27(null,["\n\n  "])),(n()(),a._27(1,["\n"])),(n()(),a._27(null,["\n"]))],function(n,l){var e=l.component;n(l,4,0,"primary"),n(l,12,0,e.segmentName),n(l,19,0,"basicInfo"),n(l,23,0,"taskState"),n(l,32,0,e.segmentName),n(l,36,0,"basicInfo"),n(l,40,0,"taskState")},function(n,l){var e=l.component;n(l,3,0,a._20(l,4)._hidden,a._20(l,4)._sbPadding),n(l,8,0,e.title),n(l,11,0,a._20(l,14).ngClassUntouched,a._20(l,14).ngClassTouched,a._20(l,14).ngClassPristine,a._20(l,14).ngClassDirty,a._20(l,14).ngClassValid,a._20(l,14).ngClassInvalid,a._20(l,14).ngClassPending,a._20(l,15)._disabled),n(l,18,0,a._20(l,19)._disabled,a._20(l,19).isActive,a._20(l,19).isActive),n(l,22,0,a._20(l,23)._disabled,a._20(l,23).isActive,a._20(l,23).isActive),n(l,28,0,a._20(l,29).statusbarPadding,a._20(l,29)._hasRefresher)})},Cu)),a._4(49152,null,0,Fl,[Ri.a,iu.a,Bn],null,null)],null,null)},{},{},[]),wu=e(261),Du=e(116),Pu=e(45),ju=e(100),Nu=e(152),Mu=a._3({encapsulation:2,styles:[],data:{}}),xu=a._1("page-setting",Xe,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-setting",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,6,"ion-navbar",[["class","toolbar"],["color","primary"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Yi.b,Yi.a)),a._4(49152,null,0,Ji.a,[Fi.a,[2,Ui.a],[2,Ri.a],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      ","\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,78,"ion-content",[["class","page-setting"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,74,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,20,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,1,{contentLabel:0}),a._25(603979776,2,{_buttons:1}),a._25(603979776,3,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,4,5,"ion-toggle",[],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"keyup"]],function(n,l,e){var t=!0,i=n.component;return"keyup"===l&&(t=!1!==a._20(n,8)._keyup(e)&&t),"ngModelChange"===l&&(t=!1!==(i.isGrid=e)&&t),"ionChange"===l&&(t=!1!==i.notifyIsGrid()&&t),t},wu.b,wu.a)),a._4(1228800,null,0,Du.a,[ho.a,Bi.a,Ki.a,a.k,a.E,Pu.a,[2,po.a],Hi.l,$i.a,a.x],null,{ionChange:"ionChange"}),a._24(1024,null,Ul.h,function(n){return[n]},[Du.a]),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[2,Ul.h]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[1,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["是否切换九宫格"])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","grid"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[3,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n    "]))],function(n,l){n(l,10,0,l.component.isGrid),n(l,19,0,a._9(1,"","primary",""),"grid")},function(n,l){n(l,7,0,a._20(l,8)._disabled,a._20(l,8)._value,a._20(l,8)._activated,a._20(l,12).ngClassUntouched,a._20(l,12).ngClassTouched,a._20(l,12).ngClassPristine,a._20(l,12).ngClassDirty,a._20(l,12).ngClassValid,a._20(l,12).ngClassInvalid,a._20(l,12).ngClassPending),n(l,18,0,a._20(l,19)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,20,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,4,{contentLabel:0}),a._25(603979776,5,{_buttons:1}),a._25(603979776,6,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,4,5,"ion-toggle",[],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"keyup"]],function(n,l,e){var t=!0,i=n.component;return"keyup"===l&&(t=!1!==a._20(n,8)._keyup(e)&&t),"ngModelChange"===l&&(t=!1!==(i.isOuterNet=e)&&t),"ionChange"===l&&(t=!1!==i.notifyIsOutNet()&&t),t},wu.b,wu.a)),a._4(1228800,null,0,Du.a,[ho.a,Bi.a,Ki.a,a.k,a.E,Pu.a,[2,po.a],Hi.l,$i.a,a.x],null,{ionChange:"ionChange"}),a._24(1024,null,Ul.h,function(n){return[n]},[Du.a]),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[2,Ul.h]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[4,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["是否使用外网"])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","md-wifi"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[6,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n    "]))],function(n,l){n(l,10,0,l.component.isOuterNet),n(l,19,0,a._9(1,"","primary",""),"md-wifi")},function(n,l){n(l,7,0,a._20(l,8)._disabled,a._20(l,8)._value,a._20(l,8)._activated,a._20(l,12).ngClassUntouched,a._20(l,12).ngClassTouched,a._20(l,12).ngClassPristine,a._20(l,12).ngClassDirty,a._20(l,12).ngClassValid,a._20(l,12).ngClassInvalid,a._20(l,12).ngClassPending),n(l,18,0,a._20(l,19)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n    "])),(n()(),a._6(0,null,null,16,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.showNetwork()&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,7,{contentLabel:0}),a._25(603979776,8,{_buttons:1}),a._25(603979776,9,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","git-network"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[9,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[7,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["网络设置"])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,4,1,"ion-icon",[["item-end",""],["name","arrow-dropright"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[9,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n    "])),(n()(),a._27(null,["\n\n    "])),(n()(),a._6(0,null,null,16,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.showOverdueTime()&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,10,{contentLabel:0}),a._25(603979776,11,{_buttons:1}),a._25(603979776,12,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[12,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[10,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["超期设置"])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,4,1,"ion-icon",[["item-end",""],["name","arrow-dropright"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[12,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n    "])),(n()(),a._27(null,["\n\n    "])),(n()(),a._6(0,null,null,16,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.showDownloadWords()&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,13,{contentLabel:0}),a._25(603979776,14,{_buttons:1}),a._25(603979776,15,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","download"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[15,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[13,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["更新词语"])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,4,1,"ion-icon",[["item-end",""],["name","arrow-dropright"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[15,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n    "])),(n()(),a._27(null,["\n\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,20,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.showHeartSetting()&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,16,{contentLabel:0}),a._25(603979776,17,{_buttons:1}),a._25(603979776,18,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","heart-outline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[18,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[16,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["心跳频率"])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-right"]],null,null,null,null,null)),a._4(16384,[[16,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["",""])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,4,1,"ion-icon",[["item-end",""],["name","arrow-dropright"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[18,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n    "]))],function(n,l){n(l,8,0,a._9(1,"","primary",""),"heart-outline"),n(l,19,0,a._9(1,"","primary",""),"arrow-dropright")},function(n,l){var e=l.component;n(l,7,0,a._20(l,8)._hidden),n(l,16,0,e.keepAlive+"毫秒"),n(l,18,0,a._20(l,19)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,20,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.showAlermType()&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,19,{contentLabel:0}),a._25(603979776,20,{_buttons:1}),a._25(603979776,21,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","alarm"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[21,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[19,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["提醒方式"])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-right"]],null,null,null,null,null)),a._4(16384,[[19,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["",""])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,4,1,"ion-icon",[["item-end",""],["name","arrow-dropright"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[21,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n    "]))],function(n,l){n(l,8,0,a._9(1,"","primary",""),"alarm"),n(l,19,0,a._9(1,"","primary",""),"arrow-dropright")},function(n,l){var e=l.component;n(l,7,0,a._20(l,8)._hidden),n(l,16,0,e.alermStyle),n(l,18,0,a._20(l,19)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,16,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.showRevertSetting()&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,22,{contentLabel:0}),a._25(603979776,23,{_buttons:1}),a._25(603979776,24,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","redo"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[24,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[22,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["恢复出厂设置"])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,4,1,"ion-icon",[["item-end",""],["name","arrow-dropright"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[24,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n    "]))],function(n,l){n(l,8,0,a._9(1,"","primary",""),"redo"),n(l,15,0,a._9(1,"","primary",""),"arrow-dropright")},function(n,l){n(l,7,0,a._20(l,8)._hidden),n(l,14,0,a._20(l,15)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,16,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onExit()&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,25,{contentLabel:0}),a._25(603979776,26,{_buttons:1}),a._25(603979776,27,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","exit"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[27,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[25,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["退出"])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,4,1,"ion-icon",[["item-end",""],["name","arrow-dropright"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[27,4]],0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(2,["\n    "]))],function(n,l){n(l,8,0,a._9(1,"","primary",""),"exit"),n(l,15,0,a._9(1,"","primary",""),"arrow-dropright")},function(n,l){n(l,7,0,a._20(l,8)._hidden),n(l,14,0,a._20(l,15)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n"])),(n()(),a._27(null,["\n"]))],function(n,l){var e=l.component;n(l,4,0,"primary"),n(l,19,0,e.isShow),n(l,22,0,e.isShow),n(l,32,0,a._9(1,"","primary",""),"git-network"),n(l,39,0,a._9(1,"","primary",""),"arrow-dropright"),n(l,50,0,a._9(1,"","primary",""),"time"),n(l,57,0,a._9(1,"","primary",""),"arrow-dropright"),n(l,68,0,a._9(1,"","primary",""),"download"),n(l,75,0,a._9(1,"","primary",""),"arrow-dropright"),n(l,79,0,e.isShow),n(l,82,0,e.isShow),n(l,85,0,e.isShow),n(l,88,0,e.isShow)},function(n,l){var e=l.component;n(l,3,0,a._20(l,4)._hidden,a._20(l,4)._sbPadding),n(l,8,0,e.title),n(l,12,0,a._20(l,13).statusbarPadding,a._20(l,13)._hasRefresher),n(l,31,0,a._20(l,32)._hidden),n(l,38,0,a._20(l,39)._hidden),n(l,49,0,a._20(l,50)._hidden),n(l,56,0,a._20(l,57)._hidden),n(l,67,0,a._20(l,68)._hidden),n(l,74,0,a._20(l,75)._hidden)})},Mu)),a._4(245760,null,0,Xe,[Ri.a,Oo.a,ju.a,M,g,Fe,Nu.a,ou.a,C,Zo.a,Bn,wo.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),Lu=e(125),Au=e(66),Uu=a._3({encapsulation:0,styles:[".selected[_ngcontent-%COMP%] {\n      font-weight: bold;\n    }"],data:{}}),Ru=a._1("ng-component",Jn,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ng-component",[],null,null,null,function(n){return a._29(0,[(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,31,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,8,"ion-row",[["class","row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,4,"ion-col",[["class","col"],["style","display: flex; justify-content: center; align-items: center; margin-top: 10px;"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,0,"img",[["height","64"],["src","assets/img/ic_record.png"],["width","64"]],null,null,null,null,null)),(n()(),a._27(null,["\n        "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      \n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,9,"ion-row",[["class","row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,5,"ion-col",[["class","col"],["style","display: flex; justify-content: center; align-items: center;"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,1,"ion-spinner",[["name","dots"]],[[2,"spinner-paused",null]],null,null,Lu.b,Lu.a)),a._4(114688,null,0,Au.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(null,["\n        "])),(n()(),a._27(null,["\n      "]))],function(n,l){n(l,7,0,"dots")},function(n,l){n(l,6,0,a._20(l,7)._paused)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n      \n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,6,"button",[["class","item item-block"],["ion-item",""],["style","text-align:center; color:#f53d3d;"]],[[2,"selected",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onStart(e)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,1,{contentLabel:0}),a._25(603979776,2,{_buttons:1}),a._25(603979776,3,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["开始"]))],null,function(n,l){n(l,0,0,l.component.isRecording)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,6,"button",[["class","item item-block"],["ion-item",""],["style","text-align:center; color:#f53d3d;"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onEnd(e)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,4,{contentLabel:0}),a._25(603979776,5,{_buttons:1}),a._25(603979776,6,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["结束"]))],null,null)})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,6,"button",[["class","item item-block"],["ion-item",""],["style","text-align:center; color:#488aff;"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onCancel(e)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,7,{contentLabel:0}),a._25(603979776,8,{_buttons:1}),a._25(603979776,9,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["取消"])),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n  "]))],function(n,l){var e=l.component;n(l,16,0,e.isRecording),n(l,19,0,!e.isRecording),n(l,22,0,e.isRecording)},null)},Uu)),a._4(114688,null,0,Jn,[Ui.a,iu.a,Zo.a,Bn,g],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),Fu=a._3({encapsulation:2,styles:[],data:{}}),Bu=a._1("page-myhistory",wl,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-myhistory",[],null,null,null,function(n){return a._29(0,[a._21(0,di,[]),a._21(0,yo.d,[a.t]),a._25(402653184,1,{refresher:0}),a._25(402653184,2,{content:0}),a._25(402653184,3,{infiniteScroll:0}),(n()(),a._6(0,null,null,21,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,14,"ion-navbar",[["class","toolbar"],["color","primary"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Yi.b,Yi.a)),a._4(49152,null,0,Ji.a,[Fi.a,[2,Ui.a],[2,Ri.a],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      ","\n    "])),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,2,6,"ion-buttons",[["end",""]],null,null,null,null,null)),a._4(16384,null,1,xo.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),a._25(603979776,4,{_buttons:1}),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,5,"button",[["color","white"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.toggleToolbar(e)&&t),t},Eo.b,Eo.a)),a._4(1097728,[[4,4]],0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(0,["\n        "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n      "]))],function(n,l){n(l,1,0,"white"),n(l,4,0,"search")},function(n,l){n(l,3,0,a._20(l,4)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n  "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,5,"ion-toolbar",[["class","toolbar"],["color","primary"]],[[2,"statusbar-padding",null]],null,null,Mo.b,Mo.a)),a._4(49152,null,0,Qi.a,[Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,1,"ion-searchbar",[],[[2,"searchbar-animated",null],[2,"searchbar-has-value",null],[2,"searchbar-active",null],[2,"searchbar-show-cancel",null],[2,"searchbar-left-aligned",null],[2,"searchbar-has-focus",null]],[[null,"input"],[null,"ionCancel"]],function(n,l,e){var t=!0,i=n.component;return"input"===l&&(t=!1!==i.onInput(e)&&t),"ionCancel"===l&&(t=!1!==i.onCancel(e)&&t),t},Uo.b,Uo.a)),a._4(1294336,null,0,Ro.a,[Bi.a,Ki.a,a.k,a.E,[2,Ul.i]],null,{ionCancel:"ionCancel"}),(n()(),a._27(3,["\n  "]))],function(n,l){n(l,1,0,"primary"),n(l,4,0)},function(n,l){n(l,0,0,a._20(l,1)._sbPadding),n(l,3,0,a._20(l,4)._animated,a._20(l,4)._value,a._20(l,4)._isActive,a._20(l,4)._showCancelButton,a._20(l,4)._shouldAlignLeft,a._20(l,4)._isFocus)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,29,"ion-content",[["class","page-myhistory"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,[[2,4]],0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n\n  "])),(n()(),a._6(0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,e){var t=!0;return"ionRefresh"===l&&(t=!1!==n.component.doRefresh(e)&&t),t},null,null)),a._4(212992,[[1,4]],0,Wo.a,[Ki.a,lo.a,a.x,Hi.l],null,{ionRefresh:"ionRefresh"}),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,2,"ion-refresher-content",[["pullingIcon","arrow_dropdown"],["pullingText","Pull to refresh"],["refreshingSpinner","circles"],["refreshingText","Refreshing..."]],[[1,"state",0]],null,null,qo.b,qo.a)),a._4(114688,null,0,Xo.a,[Wo.a,Bi.a],{pullingIcon:[0,"pullingIcon"],pullingText:[1,"pullingText"],refreshingSpinner:[2,"refreshingSpinner"],refreshingText:[3,"refreshingText"]},null),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n  "])),(n()(),a._6(0,null,1,5,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,180,"ion-card",[],null,null,null,null,null)),a._4(16384,null,0,Fo.a,[Bi.a,a.k,a.E],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,31,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onDelete(n.context.$implicit)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,5,{contentLabel:0}),a._25(603979776,6,{_buttons:1}),a._25(603979776,7,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,0,4,"ion-avatar",[["item-start",""]],null,null,null,null,null)),a._4(16384,null,0,Bo.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,0,"img",[["src","assets/img/ic_mywork_avatar.png"]],null,null,null,null,null)),(n()(),a._27(null,["\n        "])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,2,6,"div",[],null,null,null,null,null)),(n()(),a._6(0,null,null,1,"h2",[["class","card-header-label-hint"]],null,null,null,null,null)),(n()(),a._27(null,["任务编号 "])),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,2,"h2",[["class","card-header-label-content"]],null,null,null,null,null)),(n()(),a._27(null,["",""])),a._23(1),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,2,6,"div",[],null,null,null,null,null)),(n()(),a._6(0,null,null,1,"h2",[["class","card-header-label-hint"]],null,null,null,null,null)),(n()(),a._27(null,["任务类型 "])),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,2,"h2",[["class","card-header-label-content"]],null,null,null,null,null)),(n()(),a._27(null,["",""])),a._23(1),(n()(),a._27(2,["\n        "])),(n()(),a._0(16777216,null,4,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ion-icon",[["item-end",""],["name","cloud-upload"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[7,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"cloud-upload")},function(n,l){n(l,0,0,a._20(l,1)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,94,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,19,"ion-list-header",[["class","item"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,8,{contentLabel:0}),a._25(603979776,9,{_buttons:1}),a._25(603979776,10,{_icons:1}),a._4(16384,null,0,Ko.a,[Bi.a,a.E,a.k,[8,null]],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,2,11,"ion-row",[["class","row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n            "])),(n()(),a._6(0,null,null,2,"ion-col",[["class","col"],["col-auto",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["任务描述"])),(n()(),a._27(null,["\n            "])),(n()(),a._6(0,null,null,3,"ion-col",[["class","col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["",""])),a._23(1),(n()(),a._27(null,["\n          "])),(n()(),a._27(2,["\n        "])),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,10,"button",[["class","gray-text item item-block"],["ion-item",""]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,11,{contentLabel:0}),a._25(603979776,12,{_buttons:1}),a._25(603979776,13,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[13,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n          创建时间 ","\n        "])),a._23(2),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,10,"button",[["class","gray-text item item-block"],["ion-item",""]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,14,{contentLabel:0}),a._25(603979776,15,{_buttons:1}),a._25(603979776,16,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[16,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n          派发时间 ","\n        "])),a._23(2),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,10,"button",[["class","gray-text item item-block"],["ion-item",""]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,17,{contentLabel:0}),a._25(603979776,18,{_buttons:1}),a._25(603979776,19,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[19,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n          接单时间 ","\n        "])),a._23(2),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"button",[["class","gray-text item item-block"],["ion-item",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onDelay(n.parent.context.$implicit)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,20,{contentLabel:0}),a._25(603979776,21,{_buttons:1}),a._25(603979776,22,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[22,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n          延迟时间 ","\n        "])),a._23(2)],function(n,l){n(l,8,0,"icon-vline")},function(n,l){n(l,7,0,a._20(l,8)._hidden),n(l,9,0,a._28(l,9,0,n(l,10,0,a._20(l.parent.parent,1),l.parent.context.$implicit.delayTime,"y-MM-dd HH:mm:ss")))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"button",[["class","gray-text item item-block"],["ion-item",""]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,23,{contentLabel:0}),a._25(603979776,24,{_buttons:1}),a._25(603979776,25,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[25,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n          出发时间 ","\n        "])),a._23(2)],function(n,l){n(l,8,0,"icon-vline")},function(n,l){n(l,7,0,a._20(l,8)._hidden),n(l,9,0,a._28(l,9,0,n(l,10,0,a._20(l.parent.parent,1),l.parent.context.$implicit.task.goTime,"y-MM-dd HH:mm:ss")))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"button",[["class","gray-text item item-block"],["ion-item",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onDelay(n.parent.context.$implicit)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,26,{contentLabel:0}),a._25(603979776,27,{_buttons:1}),a._25(603979776,28,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[28,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n          延迟时间 ","\n        "])),a._23(2)],function(n,l){n(l,8,0,"icon-vline")},function(n,l){n(l,7,0,a._20(l,8)._hidden),n(l,9,0,a._28(l,9,0,n(l,10,0,a._20(l.parent.parent,1),l.parent.context.$implicit.delayTime,"y-MM-dd HH:mm:ss")))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"button",[["class","gray-text item item-block"],["ion-item",""]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,29,{contentLabel:0}),a._25(603979776,30,{_buttons:1}),a._25(603979776,31,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[31,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n          到场时间 ","\n        "])),a._23(2)],function(n,l){n(l,8,0,"icon-vline")},function(n,l){n(l,7,0,a._20(l,8)._hidden),n(l,9,0,a._28(l,9,0,n(l,10,0,a._20(l.parent.parent,1),l.parent.context.$implicit.task.arrivedTime,"y-MM-dd HH:mm:ss")))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"button",[["class","gray-text item item-block"],["ion-item",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onDelay(n.parent.context.$implicit)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,32,{contentLabel:0}),a._25(603979776,33,{_buttons:1}),a._25(603979776,34,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[34,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n          延迟时间 ","\n        "])),a._23(2)],function(n,l){n(l,8,0,"icon-vline")},function(n,l){n(l,7,0,a._20(l,8)._hidden),n(l,9,0,a._28(l,9,0,n(l,10,0,a._20(l.parent.parent,1),l.parent.context.$implicit.delayTime,"y-MM-dd HH:mm:ss")))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"button",[["class","gray-text item item-block"],["ion-item",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onReply(n.parent.context.$implicit)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,35,{contentLabel:0}),a._25(603979776,36,{_buttons:1}),a._25(603979776,37,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[37,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n          回复时间 ","\n        "])),a._23(2)],function(n,l){n(l,8,0,"icon-vline")},function(n,l){n(l,7,0,a._20(l,8)._hidden),n(l,9,0,a._28(l,9,0,n(l,10,0,a._20(l.parent.parent,1),l.parent.context.$implicit.task.replyTime,"y-MM-dd HH:mm:ss")))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"button",[["class","gray-text item item-block"],["ion-item",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onReject(n.parent.context.$implicit)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,38,{contentLabel:0}),a._25(603979776,39,{_buttons:1}),a._25(603979776,40,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[40,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n          退单时间 ","\n        "])),a._23(2)],function(n,l){n(l,8,0,"icon-vline")},function(n,l){var e=l.component;n(l,7,0,a._20(l,8)._hidden),n(l,9,0,a._28(l,9,0,n(l,10,0,a._20(l.parent.parent,1),e.toRejectedInfo(l.parent.context.$implicit.reply).rejectTime,"y-MM-dd HH:mm:ss")))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n        "])),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"button",[["class","gray-text item item-block"],["ion-item",""]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,41,{contentLabel:0}),a._25(603979776,42,{_buttons:1}),a._25(603979776,43,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","icon-vline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[43,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n          销单时间 ","\n        "])),a._23(2)],function(n,l){n(l,8,0,"icon-vline")},function(n,l){var e=l.component;n(l,7,0,a._20(l,8)._hidden),n(l,9,0,a._28(l,9,0,n(l,10,0,a._20(l.parent.parent,1),e.toReplyInfo(l.parent.context.$implicit.reply).destroyTime,"y-MM-dd HH:mm:ss")))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,47,"ion-row",[["class","row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,12,"ion-col",[["class","card-bottom-btn col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,8,"button",[["clear",""],["color","gray"],["icon-left",""],["ion-button",""],["small",""]],null,null,null,Eo.b,Eo.a)),a._4(1097728,null,0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"],small:[1,"small"],clear:[2,"clear"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","images"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"div",[],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(0,["\n          "])),(n()(),a._27(null,["\n        "])),(n()(),a._27(null,["\n\n        "])),(n()(),a._6(0,null,null,12,"ion-col",[["class","card-bottom-btn col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,8,"button",[["clear",""],["color","gray"],["icon-left",""],["ion-button",""],["small",""]],null,null,null,Eo.b,Eo.a)),a._4(1097728,null,0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"],small:[1,"small"],clear:[2,"clear"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","musical-notes"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"div",[],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(0,["\n          "])),(n()(),a._27(null,["\n        "])),(n()(),a._27(null,["\n\n        "])),(n()(),a._6(0,null,null,12,"ion-col",[["class","card-bottom-btn col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n           "])),(n()(),a._6(0,null,null,8,"button",[["clear",""],["color","gray"],["icon-left",""],["ion-button",""],["small",""]],null,null,null,Eo.b,Eo.a)),a._4(1097728,null,0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"],small:[1,"small"],clear:[2,"clear"]},null),(n()(),a._27(0,["\n             "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","videocam"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n             "])),(n()(),a._6(0,null,0,1,"div",[],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(0,["\n           "])),(n()(),a._27(null,["\n         "])),(n()(),a._27(null,["\n\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,12,"ion-col",[["class","card-bottom-btn col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n          "])),(n()(),a._6(0,null,null,8,"button",[["clear",""],["icon-left",""],["ion-button",""],["small",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onLocate(n.parent.context.$implicit)&&t),t},Eo.b,Eo.a)),a._4(1097728,null,0,Co.a,[[8,""],Bi.a,a.k,a.E],{small:[0,"small"],clear:[1,"clear"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","map"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"div",[],null,null,null,null,null)),(n()(),a._27(null,["地图"])),(n()(),a._27(0,["\n          "])),(n()(),a._27(null,["\n        "]))],function(n,l){n(l,4,0,"",""),n(l,7,0,"map")},function(n,l){n(l,6,0,a._20(l,7)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n    "]))],function(n,l){n(l,33,0,l.context.$implicit.uploadedFlag!==l.component.onServerFlag),n(l,69,0,"icon-vline"),n(l,82,0,"icon-vline"),n(l,95,0,"icon-vline"),n(l,101,0,"accept"===l.context.$implicit.delayBeyond),n(l,105,0,l.context.$implicit.task.goTime),n(l,109,0,"go"===l.context.$implicit.delayBeyond),n(l,113,0,l.context.$implicit.task.arrivedTime),n(l,117,0,"arrived"===l.context.$implicit.delayBeyond),n(l,121,0,l.context.$implicit.task.replyTime),n(l,125,0,l.context.$implicit.isRejected),n(l,129,0,l.context.$implicit.isCanceled),n(l,139,0,"gray","",""),n(l,142,0,"images"),n(l,153,0,"gray","",""),n(l,156,0,"musical-notes"),n(l,167,0,"gray","",""),n(l,170,0,"videocam"),n(l,178,0,l.context.$implicit.isLocationValid)},function(n,l){n(l,21,0,a._28(l,21,0,n(l,22,0,a._20(l.parent,0),l.context.$implicit.taskId.split("#")[0]))),n(l,29,0,a._28(l,29,0,n(l,30,0,a._20(l.parent,0),l.context.$implicit.task.taskType))),n(l,55,0,a._28(l,55,0,n(l,56,0,a._20(l.parent,0),l.context.$implicit.task.desc))),n(l,68,0,a._20(l,69)._hidden),n(l,70,0,a._28(l,70,0,n(l,71,0,a._20(l.parent,1),l.context.$implicit.task.createTime,"y-MM-dd HH:mm:ss"))),n(l,81,0,a._20(l,82)._hidden),n(l,83,0,a._28(l,83,0,n(l,84,0,a._20(l.parent,1),l.context.$implicit.task.assignTime,"y-MM-dd HH:mm:ss"))),n(l,94,0,a._20(l,95)._hidden),n(l,96,0,a._28(l,96,0,n(l,97,0,a._20(l.parent,1),l.context.$implicit.task.acceptTime,"y-MM-dd HH:mm:ss"))),n(l,141,0,a._20(l,142)._hidden),n(l,145,0,l.context.$implicit.photoCount),n(l,155,0,a._20(l,156)._hidden),n(l,159,0,l.context.$implicit.audioCount),n(l,169,0,a._20(l,170)._hidden),n(l,173,0,l.context.$implicit.videoCount)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n  "])),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,5,"ion-infinite-scroll",[["distance","1%"],["immediate-check","false"]],null,[[null,"ionInfinite"]],function(n,l,e){var t=!0;return"ionInfinite"===l&&(t=!1!==n.component.doInfinite(e)&&t),t},null,null)),a._4(1196032,[[3,4]],0,Yo.a,[lo.a,a.x,a.k,$i.a],null,{ionInfinite:"ionInfinite"}),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,1,"ion-infinite-scroll-content",[],[[1,"state",0]],null,null,Jo.b,Jo.a)),a._4(114688,null,0,zo.a,[Yo.a,Bi.a],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n  "])),(n()(),a._27(1,["\n  "])),(n()(),a._0(16777216,null,0,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,11,"ion-fab",[["bottom",""],["right",""]],null,null,null,Ho.b,Ho.a)),a._4(1228800,null,2,Go.a,[Ki.a],null,null),a._25(335544320,44,{_mainButton:0}),a._25(603979776,45,{_fabLists:1}),(n()(),a._27(0,["\n    "])),(n()(),a._6(0,null,0,5,"button",[["color","primary"],["ion-fab",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.doScroll2Top(e)&&t),t},Vo.b,Vo.a)),a._4(49152,[[44,4]],0,$o.a,[Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(0,["\n      "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","arrow-dropup"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n    "])),(n()(),a._27(0,["\n  "]))],function(n,l){n(l,6,0,"primary"),n(l,9,0,"arrow-dropup")},function(n,l){n(l,8,0,a._20(l,9)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(1,["\n"])),(n()(),a._27(null,["\n"]))],function(n,l){var e=l.component;n(l,9,0,"primary"),n(l,20,0,e.showToolbar),n(l,25,0,e.showToolbar),n(l,32,0),n(l,35,0,"arrow_dropdown","Pull to refresh","circles","Refreshing..."),n(l,43,0,e.items),n(l,51,0),n(l,56,0,e.showFab)},function(n,l){var e=l.component;n(l,8,0,a._20(l,9)._hidden,a._20(l,9)._sbPadding),n(l,13,0,e.title),n(l,28,0,a._20(l,29).statusbarPadding,a._20(l,29)._hasRefresher),n(l,31,0,"inactive"!==a._20(l,32).state,a._20(l,32)._top),n(l,34,0,a._20(l,35).r.state),n(l,50,0,a._20(l,51).inf.state)})},Fu)),a._4(245760,null,0,wl,[Ri.a,Bn,Oo.a,g,Zo.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),Ku=a._3({encapsulation:2,styles:[],data:{}}),Hu=a._1("page-map",ol,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-map",[],null,null,null,function(n){return a._29(0,[a._25(402653184,1,{mapElement:0}),(n()(),a._6(0,null,null,25,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,21,"ion-navbar",[["class","toolbar"],["color","primary"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Yi.b,Yi.a)),a._4(49152,null,0,Ji.a,[Fi.a,[2,Ui.a],[2,Ri.a],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["地图"])),(n()(),a._27(3,["\n\n    "])),(n()(),a._6(0,null,2,13,"ion-buttons",[["end",""]],null,null,null,null,null)),a._4(16384,null,1,xo.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),a._25(603979776,2,{_buttons:1}),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,5,"button",[["color","white"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.getCurrentLocation(e)&&t),t},Eo.b,Eo.a)),a._4(1097728,[[2,4]],0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(0,["\n        "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","locate"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,5,"button",[["color","white"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.markLocation(e)&&t),t},Eo.b,Eo.a)),a._4(1097728,[[2,4]],0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(0,["\n        "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","checkmark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n      "]))],function(n,l){n(l,1,0,"white"),n(l,4,0,"checkmark")},function(n,l){n(l,3,0,a._20(l,4)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n    "])),(n()(),a._27(3,["\n\n  "])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,11,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,[[1,0],["map",1]],1,7,"div",[["id","map"]],null,null,null,null,null)),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,4,"div",[["class","markMap"]],null,null,null,null,null)),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,1,"ion-icon",[["color","danger"],["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{color:[0,"color"],name:[1,"name"]},null),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n"])),(n()(),a._27(null,["\n"]))],function(n,l){var e=l.component;n(l,5,0,"primary"),n(l,16,0,"white"),n(l,19,0,"locate"),n(l,23,0,e.isMark),n(l,36,0,"danger","add")},function(n,l){n(l,4,0,a._20(l,5)._hidden,a._20(l,5)._sbPadding),n(l,18,0,a._20(l,19)._hidden),n(l,28,0,a._20(l,29).statusbarPadding,a._20(l,29)._hasRefresher),n(l,35,0,a._20(l,36)._hidden)})},Ku)),a._4(245760,null,0,ol,[Ri.a,iu.a,g],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),Gu=a._3({encapsulation:2,styles:[],data:{}}),Vu=a._1("page-materials",je,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-materials",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,29,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,9,"ion-navbar",[["class","toolbar"],["color","primary"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Yi.b,Yi.a)),a._4(49152,null,0,Ji.a,[Fi.a,[2,Ui.a],[2,Ri.a],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      ","\n    "])),(n()(),a._27(3,["\n    "])),(n()(),a._0(16777216,null,2,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,17,"ion-buttons",[["end",""]],null,null,null,null,null)),a._4(16384,null,1,xo.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),a._25(603979776,1,{_buttons:1}),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,5,"button",[["color","white"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.addMaterials()&&t),t},Eo.b,Eo.a)),a._4(1097728,[[1,4]],0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(0,["\n        "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","add-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,5,"button",[["color","white"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.saveMaterials()&&t),t},Eo.b,Eo.a)),a._4(1097728,[[1,4]],0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(0,["\n        "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","checkmark-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n      "])),(n()(),a._27(null,["\n    "]))],function(n,l){n(l,5,0,"white"),n(l,8,0,"add-circle"),n(l,12,0,"white"),n(l,15,0,"checkmark-circle")},function(n,l){n(l,7,0,a._20(l,8)._hidden),n(l,14,0,a._20(l,15)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n\n  "])),(n()(),a._6(0,null,null,14,"ion-segment",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"segment-disabled",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0;return"ngModelChange"===l&&(t=!1!==(n.component.segmentName=e)&&t),t},null,null)),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(1196032,null,1,tu.a,[Bi.a,a.k,a.E,[2,Ul.i]],null,null),a._25(603979776,2,{_buttons:1}),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,2,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","basicInfo"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==a._20(n,22).onClick()&&t),t},lu.b,lu.a)),a._4(114688,[[2,4]],0,eu.a,[],{value:[0,"value"]},null),(n()(),a._27(0,["\n      基本信息\n    "])),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,2,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","materialsList"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==a._20(n,26).onClick()&&t),t},lu.b,lu.a)),a._4(114688,[[2,4]],0,eu.a,[],{value:[0,"value"]},null),(n()(),a._27(0,["\n      材料清单\n    "])),(n()(),a._27(null,["\n  "])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["hammer\n\n"])),(n()(),a._6(0,null,null,14,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,10,"div",[],null,null,null,null,null)),a._4(16384,null,0,yo.n,[],{ngSwitch:[0,"ngSwitch"]},null),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,20,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,3,{contentLabel:0}),a._25(603979776,4,{_buttons:1}),a._25(603979776,5,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-name"],["fixed",""]],null,null,null,null,null)),a._4(16384,[[3,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,""],[8,null]],null,null),(n()(),a._27(null,["工单编号："])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,1,"div",[["item-content",""]],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,6,{contentLabel:0}),a._25(603979776,7,{_buttons:1}),a._25(603979776,8,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-name"],["fixed",""]],null,null,null,null,null)),a._4(16384,[[6,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,""],[8,null]],null,null),(n()(),a._27(null,["\n          ","\n        "])),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,1,"div",[["item-content",""]],null,null,null,null,null)),(n()(),a._27(null,["\n          ","\n        "])),(n()(),a._27(2,["\n      "]))],null,function(n,l){n(l,9,0,l.context.$implicit.name),n(l,12,0,l.context.$implicit.value)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n    "]))],function(n,l){n(l,19,0,l.component.details)},function(n,l){n(l,15,0,l.component.taskId)})})),a._4(278528,null,0,yo.o,[a.O,a.K,yo.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),a._27(null,["\n\n    "])),(n()(),a._27(null,["\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,5,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,110,"ion-card",[],null,null,null,null,null)),a._4(16384,null,0,Fo.a,[Bi.a,a.k,a.E],null,null),(n()(),a._27(null,["\n\n        "])),(n()(),a._6(0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,9,{contentLabel:0}),a._25(603979776,10,{_buttons:1}),a._25(603979776,11,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-name"],["fixed",""]],null,null,null,null,null)),a._4(16384,[[9,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,""],[8,null]],null,null),(n()(),a._27(null,["\n            材料类别：\n          "])),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,3,1,"div",[["item-content",""]],null,null,null,null,null)),(n()(),a._27(null,["\n            ","\n          "])),(n()(),a._27(2,["\n        "])),(n()(),a._27(null,["\n\n        "])),(n()(),a._6(0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,12,{contentLabel:0}),a._25(603979776,13,{_buttons:1}),a._25(603979776,14,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-name"],["fixed",""]],null,null,null,null,null)),a._4(16384,[[12,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,""],[8,null]],null,null),(n()(),a._27(null,["\n            材料型号：\n          "])),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,3,1,"div",[["item-content",""]],null,null,null,null,null)),(n()(),a._27(null,["\n            ","\n          "])),(n()(),a._27(2,["\n        "])),(n()(),a._27(null,["\n\n        "])),(n()(),a._6(0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,15,{contentLabel:0}),a._25(603979776,16,{_buttons:1}),a._25(603979776,17,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-name"],["fixed",""]],null,null,null,null,null)),a._4(16384,[[15,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,""],[8,null]],null,null),(n()(),a._27(null,["\n            材料规格：\n          "])),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,3,1,"div",[["item-content",""]],null,null,null,null,null)),(n()(),a._27(null,["\n            ","\n          "])),(n()(),a._27(2,["\n        "])),(n()(),a._27(null,["\n\n        "])),(n()(),a._6(0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,18,{contentLabel:0}),a._25(603979776,19,{_buttons:1}),a._25(603979776,20,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-name"],["fixed",""]],null,null,null,null,null)),a._4(16384,[[18,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,""],[8,null]],null,null),(n()(),a._27(null,["\n            生产厂家：\n          "])),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,3,1,"div",[["item-content",""]],null,null,null,null,null)),(n()(),a._27(null,["\n            ","\n          "])),(n()(),a._27(2,["\n        "])),(n()(),a._27(null,["\n\n        "])),(n()(),a._6(0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,21,{contentLabel:0}),a._25(603979776,22,{_buttons:1}),a._25(603979776,23,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-name"],["fixed",""]],null,null,null,null,null)),a._4(16384,[[21,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,""],[8,null]],null,null),(n()(),a._27(null,["\n            单位：\n          "])),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,3,1,"div",[["item-content",""]],null,null,null,null,null)),(n()(),a._27(null,["\n            ","\n          "])),(n()(),a._27(2,["\n        "])),(n()(),a._27(null,["\n\n        "])),(n()(),a._6(0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,24,{contentLabel:0}),a._25(603979776,25,{_buttons:1}),a._25(603979776,26,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-name"],["fixed",""]],null,null,null,null,null)),a._4(16384,[[24,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,""],[8,null]],null,null),(n()(),a._27(null,["\n            数量：\n          "])),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,3,1,"div",[["item-content",""]],null,null,null,null,null)),(n()(),a._27(null,["\n            ","\n          "])),(n()(),a._27(2,["\n        "])),(n()(),a._27(null,["\n\n        "])),(n()(),a._6(0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,27,{contentLabel:0}),a._25(603979776,28,{_buttons:1}),a._25(603979776,29,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","label-name"],["fixed",""]],null,null,null,null,null)),a._4(16384,[[27,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,""],[8,null]],null,null),(n()(),a._27(null,["\n            备注：\n          "])),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,3,1,"div",[["item-content",""]],null,null,null,null,null)),(n()(),a._27(null,["\n            ","\n          "])),(n()(),a._27(2,["\n        "])),(n()(),a._27(null,["\n\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,26,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,30,{contentLabel:0}),a._25(603979776,31,{_buttons:1}),a._25(603979776,32,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,4,8,"button",[["clear",""],["color","danger"],["icon-left",""],["ion-button",""],["item-right",""],["small",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.deleteMaterials(n.parent.context.$implicit)&&t),t},Eo.b,Eo.a)),a._4(1097728,[[31,4]],0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"],small:[1,"small"],clear:[2,"clear"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"div",[],null,null,null,null,null)),(n()(),a._27(null,["删除"])),(n()(),a._27(0,["\n          "])),(n()(),a._27(2,["\n          "])),(n()(),a._6(0,null,4,8,"button",[["clear",""],["icon-left",""],["ion-button",""],["item-right",""],["small",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.editMaterials(n.parent.context.$implicit)&&t),t},Eo.b,Eo.a)),a._4(1097728,[[31,4]],0,Co.a,[[8,""],Bi.a,a.k,a.E],{small:[0,"small"],clear:[1,"clear"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"ion-icon",[["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n            "])),(n()(),a._6(0,null,0,1,"div",[],null,null,null,null,null)),(n()(),a._27(null,["修改"])),(n()(),a._27(0,["\n          "])),(n()(),a._27(2,["\n        "]))],function(n,l){n(l,8,0,"danger","",""),n(l,11,0,"trash"),n(l,18,0,"",""),n(l,21,0,"create")},function(n,l){n(l,10,0,a._20(l,11)._hidden),n(l,20,0,a._20(l,21)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n      "]))],function(n,l){n(l,109,0,l.component.isShowButtons)},function(n,l){n(l,15,0,l.context.$implicit.category.name),n(l,30,0,l.context.$implicit.type.name),n(l,45,0,l.context.$implicit.size.name),n(l,60,0,l.context.$implicit.productor.name),n(l,75,0,l.context.$implicit.unit.text),n(l,90,0,l.context.$implicit.count),n(l,105,0,l.context.$implicit.remark)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n    "]))],function(n,l){n(l,4,0,l.component.items)},null)})),a._4(278528,null,0,yo.o,[a.O,a.K,yo.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n"])),(n()(),a._27(null,["\n"]))],function(n,l){var e=l.component;n(l,4,0,"primary"),n(l,11,0,e.isShowButtons),n(l,15,0,e.segmentName),n(l,22,0,"basicInfo"),n(l,26,0,"materialsList"),n(l,35,0,e.segmentName),n(l,39,0,"basicInfo"),n(l,43,0,"materialsList")},function(n,l){var e=l.component;n(l,3,0,a._20(l,4)._hidden,a._20(l,4)._sbPadding),n(l,8,0,e.title),n(l,14,0,a._20(l,17).ngClassUntouched,a._20(l,17).ngClassTouched,a._20(l,17).ngClassPristine,a._20(l,17).ngClassDirty,a._20(l,17).ngClassValid,a._20(l,17).ngClassInvalid,a._20(l,17).ngClassPending,a._20(l,18)._disabled),n(l,21,0,a._20(l,22)._disabled,a._20(l,22).isActive,a._20(l,22).isActive),n(l,25,0,a._20(l,26)._disabled,a._20(l,26).isActive,a._20(l,26).isActive),n(l,31,0,a._20(l,32).statusbarPadding,a._20(l,32)._hasRefresher)})},Gu)),a._4(245760,null,0,je,[Ri.a,iu.a,g,Bn,wo.a,Zo.a,Oo.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),$u=a._3({encapsulation:2,styles:[],data:{}}),Wu=a._1("page-materialsadd",Ie,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-materialsadd",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,6,"ion-navbar",[["class","toolbar"],["color","primary"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Yi.b,Yi.a)),a._4(49152,null,0,Ji.a,[Fi.a,[2,Ui.a],[2,Ri.a],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      ","\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,185,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n\n  "])),(n()(),a._6(0,null,1,166,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n\n    "])),(n()(),a._6(0,null,null,22,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,1,{contentLabel:0}),a._25(603979776,2,{_buttons:1}),a._25(603979776,3,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[1,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["材料类别："])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,3,10,"ion-select",[["cancelText","取消"],["okText","确定"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==a._20(n,30)._click(e)&&t),"keyup.space"===l&&(t=!1!==a._20(n,30)._keyup()&&t),"ngModelChange"===l&&(t=!1!==(i.materialLBID=e)&&t),"ionChange"===l&&(t=!1!==i.selectMaterialLB()&&t),t},So.b,So.a)),a._4(1228800,null,1,Io.a,[Fi.a,ho.a,Bi.a,a.k,a.E,[2,po.a],Vi.a],{cancelText:[0,"cancelText"],okText:[1,"okText"]},{ionChange:"ionChange"}),a._25(603979776,4,{options:1}),a._24(1024,null,Ul.h,function(n){return[n]},[Io.a]),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[2,Ul.h]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,2,"ion-option",[],null,null,null,null,null)),a._4(16384,[[4,4]],0,To.a,[a.k],{value:[0,"value"]},null),(n()(),a._27(null,["",""]))],function(n,l){n(l,1,0,a._9(1,"",l.context.$implicit.id,""))},function(n,l){n(l,2,0,l.context.$implicit.name)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._27(2,["\n    "])),(n()(),a._27(null,["\n\n\n    "])),(n()(),a._6(0,null,null,22,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,5,{contentLabel:0}),a._25(603979776,6,{_buttons:1}),a._25(603979776,7,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[5,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["材料型号："])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,3,10,"ion-select",[["cancelText","取消"],["okText","确定"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==a._20(n,54)._click(e)&&t),"keyup.space"===l&&(t=!1!==a._20(n,54)._keyup()&&t),"ngModelChange"===l&&(t=!1!==(i.materialXHID=e)&&t),"ionChange"===l&&(t=!1!==i.selectMaterialXH()&&t),t},So.b,So.a)),a._4(1228800,null,1,Io.a,[Fi.a,ho.a,Bi.a,a.k,a.E,[2,po.a],Vi.a],{cancelText:[0,"cancelText"],okText:[1,"okText"]},{ionChange:"ionChange"}),a._25(603979776,8,{options:1}),a._24(1024,null,Ul.h,function(n){return[n]},[Io.a]),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[2,Ul.h]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,2,"ion-option",[],null,null,null,null,null)),a._4(16384,[[8,4]],0,To.a,[a.k],{value:[0,"value"]},null),(n()(),a._27(null,["",""]))],function(n,l){n(l,1,0,a._9(1,"",l.context.$implicit.id,""))},function(n,l){n(l,2,0,l.context.$implicit.name)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._27(2,["\n    "])),(n()(),a._27(null,["\n\n    "])),(n()(),a._6(0,null,null,22,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,9,{contentLabel:0}),a._25(603979776,10,{_buttons:1}),a._25(603979776,11,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[9,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["材料规格："])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,3,10,"ion-select",[["cancelText","取消"],["okText","确定"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==a._20(n,78)._click(e)&&t),"keyup.space"===l&&(t=!1!==a._20(n,78)._keyup()&&t),"ngModelChange"===l&&(t=!1!==(i.materialGGID=e)&&t),"ionChange"===l&&(t=!1!==i.selectMaterialGG()&&t),t},So.b,So.a)),a._4(1228800,null,1,Io.a,[Fi.a,ho.a,Bi.a,a.k,a.E,[2,po.a],Vi.a],{cancelText:[0,"cancelText"],okText:[1,"okText"]},{ionChange:"ionChange"}),a._25(603979776,12,{options:1}),a._24(1024,null,Ul.h,function(n){return[n]},[Io.a]),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[2,Ul.h]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,2,"ion-option",[],null,null,null,null,null)),a._4(16384,[[12,4]],0,To.a,[a.k],{value:[0,"value"]},null),(n()(),a._27(null,["",""]))],function(n,l){n(l,1,0,a._9(1,"",l.context.$implicit.id,""))},function(n,l){n(l,2,0,l.context.$implicit.name)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._27(2,["\n    "])),(n()(),a._27(null,["\n\n    "])),(n()(),a._6(0,null,null,22,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,13,{contentLabel:0}),a._25(603979776,14,{_buttons:1}),a._25(603979776,15,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[13,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["生产厂家："])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,3,10,"ion-select",[["cancelText","取消"],["okText","确定"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==a._20(n,102)._click(e)&&t),"keyup.space"===l&&(t=!1!==a._20(n,102)._keyup()&&t),"ngModelChange"===l&&(t=!1!==(i.materialCJID=e)&&t),t},So.b,So.a)),a._4(1228800,null,1,Io.a,[Fi.a,ho.a,Bi.a,a.k,a.E,[2,po.a],Vi.a],{cancelText:[0,"cancelText"],okText:[1,"okText"]},null),a._25(603979776,16,{options:1}),a._24(1024,null,Ul.h,function(n){return[n]},[Io.a]),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[2,Ul.h]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,2,"ion-option",[],null,null,null,null,null)),a._4(16384,[[16,4]],0,To.a,[a.k],{value:[0,"value"]},null),(n()(),a._27(null,["",""]))],function(n,l){n(l,1,0,a._9(1,"",l.context.$implicit.id,""))},function(n,l){n(l,2,0,l.context.$implicit.name)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._27(2,["\n    "])),(n()(),a._27(null,["\n\n    "])),(n()(),a._6(0,null,null,22,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,17,{contentLabel:0}),a._25(603979776,18,{_buttons:1}),a._25(603979776,19,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[17,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["单位："])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,3,10,"ion-select",[["cancelText","取消"],["okText","确定"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==a._20(n,126)._click(e)&&t),"keyup.space"===l&&(t=!1!==a._20(n,126)._keyup()&&t),"ngModelChange"===l&&(t=!1!==(i.unitID=e)&&t),"ionChange"===l&&(t=!1!==i.selectMaterialUnit()&&t),t},So.b,So.a)),a._4(1228800,null,1,Io.a,[Fi.a,ho.a,Bi.a,a.k,a.E,[2,po.a],Vi.a],{cancelText:[0,"cancelText"],okText:[1,"okText"]},{ionChange:"ionChange"}),a._25(603979776,20,{options:1}),a._24(1024,null,Ul.h,function(n){return[n]},[Io.a]),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[2,Ul.h]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,2,"ion-option",[],null,null,null,null,null)),a._4(16384,[[20,4]],0,To.a,[a.k],{value:[0,"value"]},null),(n()(),a._27(null,["",""]))],function(n,l){n(l,1,0,a._9(1,"",l.context.$implicit.id,""))},function(n,l){n(l,2,0,l.context.$implicit.text)})})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._27(2,["\n    "])),(n()(),a._27(null,["\n\n    "])),(n()(),a._6(0,null,null,24,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,21,{contentLabel:0}),a._25(603979776,22,{_buttons:1}),a._25(603979776,23,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,0,5,"button",[["clear",""],["color","primary"],["icon-only",""],["ion-button",""],["item-left",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.reduceAccount()&&t),t},Eo.b,Eo.a)),a._4(1097728,[[22,4]],0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"],clear:[1,"clear"]},null),(n()(),a._27(0,["\n        "])),(n()(),a._6(0,null,0,1,"ion-icon",[["is-active","false"],["name","remove-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n      "])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,1,2,"ion-label",[["class","account"]],null,null,null,null,null)),a._4(16384,[[21,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["",""])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,4,5,"button",[["clear",""],["color","primary"],["icon-only",""],["ion-button",""],["item-right",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.addAccount()&&t),t},Eo.b,Eo.a)),a._4(1097728,[[22,4]],0,Co.a,[[8,""],Bi.a,a.k,a.E],{color:[0,"color"],clear:[1,"clear"]},null),(n()(),a._27(0,["\n        "])),(n()(),a._6(0,null,0,1,"ion-icon",[["is-active","false"],["name","add-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(0,["\n      "])),(n()(),a._27(2,["\n    "])),(n()(),a._27(null,["\n\n    "])),(n()(),a._6(0,null,null,16,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,24,{contentLabel:0}),a._25(603979776,25,{_buttons:1}),a._25(603979776,26,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[24,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["备注："])),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0;return"ngModelChange"===l&&(t=!1!==(n.component.remark=e)&&t),t},vo.b,vo.a)),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(5423104,null,0,bo.a,[Bi.a,Ki.a,ho.a,Fi.a,a.k,a.E,[2,lo.a],[2,po.a],[2,Ul.i],$i.a],{type:[0,"type"]},null),(n()(),a._27(2,["\n    "])),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n  "])),(n()(),a._6(0,null,1,13,"ion-row",[["class","row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,9,"ion-col",[["class","col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,5,"div",[["class","add-button"]],null,null,null,null,null)),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,2,"button",[["block",""],["ion-button",""],["type","submit"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.addClick()&&t),t},Eo.b,Eo.a)),a._4(1097728,null,0,Co.a,[[8,""],Bi.a,a.k,a.E],{block:[0,"block"]},null),(n()(),a._27(0,["","\n        "])),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n"])),(n()(),a._27(null,["\n"]))],function(n,l){var e=l.component;n(l,4,0,"primary"),n(l,30,0,"取消","确定"),n(l,33,0,e.materialLBID),n(l,38,0,e.optMaterialsLB),n(l,54,0,"取消","确定"),n(l,57,0,e.materialXHID),n(l,62,0,e.optMaterialsXH),n(l,78,0,"取消","确定"),n(l,81,0,e.materialGGID),n(l,86,0,e.optMaterialsGG),n(l,102,0,"取消","确定"),n(l,105,0,e.materialCJID),n(l,110,0,e.optMaterialsCJ),n(l,126,0,"取消","确定"),n(l,129,0,e.unitID),n(l,134,0,e.materialsUnits),n(l,146,0,"primary",""),n(l,149,0,"remove-circle"),n(l,157,0,"primary",""),n(l,160,0,"add-circle"),n(l,176,0,e.remark),n(l,179,0,"text"),n(l,192,0,"")},function(n,l){var e=l.component;n(l,3,0,a._20(l,4)._hidden,a._20(l,4)._sbPadding),n(l,8,0,e.title),n(l,12,0,a._20(l,13).statusbarPadding,a._20(l,13)._hasRefresher),n(l,29,0,a._20(l,30)._disabled,a._20(l,35).ngClassUntouched,a._20(l,35).ngClassTouched,a._20(l,35).ngClassPristine,a._20(l,35).ngClassDirty,a._20(l,35).ngClassValid,a._20(l,35).ngClassInvalid,a._20(l,35).ngClassPending),n(l,53,0,a._20(l,54)._disabled,a._20(l,59).ngClassUntouched,a._20(l,59).ngClassTouched,a._20(l,59).ngClassPristine,a._20(l,59).ngClassDirty,a._20(l,59).ngClassValid,a._20(l,59).ngClassInvalid,a._20(l,59).ngClassPending),n(l,77,0,a._20(l,78)._disabled,a._20(l,83).ngClassUntouched,a._20(l,83).ngClassTouched,a._20(l,83).ngClassPristine,a._20(l,83).ngClassDirty,a._20(l,83).ngClassValid,a._20(l,83).ngClassInvalid,a._20(l,83).ngClassPending),n(l,101,0,a._20(l,102)._disabled,a._20(l,107).ngClassUntouched,a._20(l,107).ngClassTouched,a._20(l,107).ngClassPristine,a._20(l,107).ngClassDirty,a._20(l,107).ngClassValid,a._20(l,107).ngClassInvalid,a._20(l,107).ngClassPending),n(l,125,0,a._20(l,126)._disabled,a._20(l,131).ngClassUntouched,a._20(l,131).ngClassTouched,a._20(l,131).ngClassPristine,a._20(l,131).ngClassDirty,a._20(l,131).ngClassValid,a._20(l,131).ngClassInvalid,a._20(l,131).ngClassPending),n(l,148,0,a._20(l,149)._hidden),n(l,154,0,e.count),n(l,159,0,a._20(l,160)._hidden),n(l,175,0,a._20(l,178).ngClassUntouched,a._20(l,178).ngClassTouched,a._20(l,178).ngClassPristine,a._20(l,178).ngClassDirty,a._20(l,178).ngClassValid,a._20(l,178).ngClassInvalid,a._20(l,178).ngClassPending),n(l,191,0,!(e.materialLBID&&e.materialXHID&&e.materialGGID&&e.materialCJID&&e.unitID&&0!=e.count)),n(l,193,0,e.buttonStr)})},$u)),a._4(114688,null,0,Ie,[Ri.a,g,Bn,M,Oo.a,Zo.a,iu.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),qu=e(262),Xu=e(79),Yu=e(263),Ju=e(112),zu=a._3({encapsulation:2,styles:[],data:{}}),Zu=a._1("ng-component",fi,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ng-component",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,15,"ion-tabs",[],null,null,null,qu.b,qu.a)),a._24(6144,null,Li.a,null,[Xu.a]),a._4(4374528,null,0,Xu.a,[[2,Ri.a],[2,Ui.a],Fi.a,Bi.a,a.k,Ki.a,a.E,Vi.a,eo.a],null,null),(n()(),a._27(0,["\n  "])),(n()(),a._6(0,null,0,1,"ion-tab",[["role","tabpanel"]],[[1,"id",0],[1,"aria-labelledby",0]],null,null,Yu.b,Yu.a)),a._4(245760,null,0,Ju.a,[Xu.a,Fi.a,Bi.a,Ki.a,a.k,a.x,a.E,a.j,a.g,Hi.l,Gi.a,[2,Vi.a],$i.a,a.l],{root:[0,"root"],tabTitle:[1,"tabTitle"],tabIcon:[2,"tabIcon"]},null),(n()(),a._27(0,["\n  "])),(n()(),a._6(0,null,0,1,"ion-tab",[["role","tabpanel"]],[[1,"id",0],[1,"aria-labelledby",0]],null,null,Yu.b,Yu.a)),a._4(245760,null,0,Ju.a,[Xu.a,Fi.a,Bi.a,Ki.a,a.k,a.x,a.E,a.j,a.g,Hi.l,Gi.a,[2,Vi.a],$i.a,a.l],{root:[0,"root"],tabTitle:[1,"tabTitle"],tabIcon:[2,"tabIcon"]},null),(n()(),a._27(0,["\n  "])),(n()(),a._6(0,null,0,1,"ion-tab",[["role","tabpanel"]],[[1,"id",0],[1,"aria-labelledby",0]],null,null,Yu.b,Yu.a)),a._4(245760,null,0,Ju.a,[Xu.a,Fi.a,Bi.a,Ki.a,a.k,a.x,a.E,a.j,a.g,Hi.l,Gi.a,[2,Vi.a],$i.a,a.l],{root:[0,"root"],tabTitle:[1,"tabTitle"],tabIcon:[2,"tabIcon"]},null),(n()(),a._27(0,["\n  "])),(n()(),a._6(0,null,0,1,"ion-tab",[["role","tabpanel"]],[[1,"id",0],[1,"aria-labelledby",0]],null,null,Yu.b,Yu.a)),a._4(245760,null,0,Ju.a,[Xu.a,Fi.a,Bi.a,Ki.a,a.k,a.x,a.E,a.j,a.g,Hi.l,Gi.a,[2,Vi.a],$i.a,a.l],{root:[0,"root"],tabTitle:[1,"tabTitle"],tabIcon:[2,"tabIcon"]},null),(n()(),a._27(0,["\n"])),(n()(),a._27(null,["\n"]))],function(n,l){var e=l.component;n(l,5,0,e.tabsInfo[0].page,a._9(1,"",e.tabsInfo[0].title,""),a._9(1,"",e.tabsInfo[0].icon,"")),n(l,8,0,e.tabsInfo[1].page,a._9(1,"",e.tabsInfo[1].title,""),a._9(1,"",e.tabsInfo[1].icon,"")),n(l,11,0,e.tabsInfo[2].page,a._9(1,"",e.tabsInfo[2].title,""),a._9(1,"",e.tabsInfo[2].icon,"")),n(l,14,0,e.tabsInfo[3].page,a._9(1,"",e.tabsInfo[3].title,""),a._9(1,"",e.tabsInfo[3].icon,""))},function(n,l){n(l,4,0,a._20(l,5)._tabId,a._20(l,5)._btnId),n(l,7,0,a._20(l,8)._tabId,a._20(l,8)._btnId),n(l,10,0,a._20(l,11)._tabId,a._20(l,11)._btnId),n(l,13,0,a._20(l,14)._tabId,a._20(l,14)._btnId)})},zu)),a._4(245760,null,0,fi,[g,M],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),Qu=a._3({encapsulation:2,styles:[],data:{}}),na=a._1("page-main",pi,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-main",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,6,"ion-toolbar",[["class","toolbar"],["color","primary"]],[[2,"statusbar-padding",null]],null,null,Mo.b,Mo.a)),a._4(49152,null,0,Qi.a,[Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      ","\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,10,"ion-content",[["class","page-main"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n  "])),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,5,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,9,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,1,{contentLabel:0}),a._25(603979776,2,{_buttons:1}),a._25(603979776,3,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._0(16777216,null,2,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,9,"div",[["class","list-item"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.itemSelected(n.parent.context.$implicit.id)&&t),t},null,null)),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,0,"img",[["class","item-img"]],[[8,"src",4],[8,"width",0],[8,"height",0]],null,null,null,null)),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,1,"p",[["class","item-name"]],null,null,null,null,null)),(n()(),a._27(null,["",""])),(n()(),a._27(null,["\n        "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,2,"ion-badge",[["class","list-item-badge"],["color","danger"]],null,null,null,null,null)),a._4(16384,null,0,jo.a,[Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(null,["",""]))],function(n,l){n(l,1,0,"danger")},function(n,l){n(l,2,0,l.parent.parent.context.$implicit.count)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n      "]))],function(n,l){n(l,8,0,l.parent.context.$implicit.count>0)},function(n,l){var e=l.component;n(l,2,0,a._9(1,"",l.parent.context.$implicit.src,""),a._9(1,"",e.imgWidth,""),a._9(1,"",e.imgHeight,"")),n(l,5,0,l.parent.context.$implicit.name)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(2,["\n    "]))],function(n,l){n(l,8,0,l.context.$implicit.active)},null)})),a._4(802816,null,0,yo.i,[a.O,a.K,a.r],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n"])),(n()(),a._27(null,["\n"]))],function(n,l){var e=l.component;n(l,4,0,"primary"),n(l,20,0,e.listItems)},function(n,l){var e=l.component;n(l,3,0,a._20(l,4)._sbPadding),n(l,8,0,e.title),n(l,12,0,a._20(l,13).statusbarPadding,a._20(l,13)._hasRefresher)})},Qu)),a._4(114688,null,0,pi,[Ri.a,g],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),la=e(264),ea=e(102),ta=a._3({encapsulation:0,styles:[".selected[_ngcontent-%COMP%] {\n      font-weight: bold;\n    }"],data:{}}),ia=a._1("ng-component",Be,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ng-component",[],null,null,null,function(n){return a._29(0,[(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,161,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,6,"ion-list-header",[["class","item"],["color","primary"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],{color:[0,"color"]},null),a._25(335544320,1,{contentLabel:0}),a._25(603979776,2,{_buttons:1}),a._25(603979776,3,{_icons:1}),a._4(16384,null,0,Ko.a,[Bi.a,a.E,a.k,[8,null]],{color:[0,"color"]},null),(n()(),a._27(2,["网络设置"])),(n()(),a._27(null,["\n      \n      "])),(n()(),a._6(0,null,null,10,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,4,{contentLabel:0}),a._25(603979776,5,{_buttons:1}),a._25(603979776,6,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["color","label"]],null,null,null,null,null)),a._4(16384,[[4,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(n()(),a._27(null,["数据服务外网地址:"])),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,7,{contentLabel:0}),a._25(603979776,8,{_buttons:1}),a._25(603979776,9,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,4,"ion-input",[["clearInput",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0;return"ngModelChange"===l&&(t=!1!==(n.component.hotLineOuterBaseUri=e)&&t),t},vo.b,vo.a)),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(5423104,null,0,bo.a,[Bi.a,Ki.a,ho.a,Fi.a,a.k,a.E,[2,lo.a],[2,po.a],[2,Ul.i],$i.a],{clearInput:[0,"clearInput"],type:[1,"type"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n      \n      "])),(n()(),a._6(0,null,null,10,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,10,{contentLabel:0}),a._25(603979776,11,{_buttons:1}),a._25(603979776,12,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["color","label"]],null,null,null,null,null)),a._4(16384,[[10,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(n()(),a._27(null,["数据服务内网地址:"])),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,13,{contentLabel:0}),a._25(603979776,14,{_buttons:1}),a._25(603979776,15,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,4,"ion-input",[["clearInput",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0;return"ngModelChange"===l&&(t=!1!==(n.component.hotLineInnerBaseUri=e)&&t),t},vo.b,vo.a)),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(5423104,null,0,bo.a,[Bi.a,Ki.a,ho.a,Fi.a,a.k,a.E,[2,lo.a],[2,po.a],[2,Ul.i],$i.a],{clearInput:[0,"clearInput"],type:[1,"type"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n      \n      "])),(n()(),a._6(0,null,null,10,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,16,{contentLabel:0}),a._25(603979776,17,{_buttons:1}),a._25(603979776,18,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["color","label"]],null,null,null,null,null)),a._4(16384,[[16,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(n()(),a._27(null,["文件服务外网地址:"])),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,19,{contentLabel:0}),a._25(603979776,20,{_buttons:1}),a._25(603979776,21,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,4,"ion-input",[["clearInput",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0;return"ngModelChange"===l&&(t=!1!==(n.component.fileOuterBaseUri=e)&&t),t},vo.b,vo.a)),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(5423104,null,0,bo.a,[Bi.a,Ki.a,ho.a,Fi.a,a.k,a.E,[2,lo.a],[2,po.a],[2,Ul.i],$i.a],{clearInput:[0,"clearInput"],type:[1,"type"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n      \n      "])),(n()(),a._6(0,null,null,10,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,22,{contentLabel:0}),a._25(603979776,23,{_buttons:1}),a._25(603979776,24,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["color","label"]],null,null,null,null,null)),a._4(16384,[[22,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(n()(),a._27(null,["文件服务内网地址:"])),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,25,{contentLabel:0}),a._25(603979776,26,{_buttons:1}),a._25(603979776,27,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,4,"ion-input",[["clearInput",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0;return"ngModelChange"===l&&(t=!1!==(n.component.fileInnerBaseUri=e)&&t),t},vo.b,vo.a)),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(5423104,null,0,bo.a,[Bi.a,Ki.a,ho.a,Fi.a,a.k,a.E,[2,lo.a],[2,po.a],[2,Ul.i],$i.a],{clearInput:[0,"clearInput"],type:[1,"type"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n      \n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,28,{contentLabel:0}),a._25(603979776,29,{_buttons:1}),a._25(603979776,30,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["color","label"]],null,null,null,null,null)),a._4(16384,[[28,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(n()(),a._27(null,["材料服务外网地址:"])),(n()(),a._27(2,["\n      "]))],function(n,l){n(l,8,0,"label")},null)})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,31,{contentLabel:0}),a._25(603979776,32,{_buttons:1}),a._25(603979776,33,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,4,"ion-input",[["clearInput",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0;return"ngModelChange"===l&&(t=!1!==(n.component.materialsOuterBaseUri=e)&&t),t},vo.b,vo.a)),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(5423104,null,0,bo.a,[Bi.a,Ki.a,ho.a,Fi.a,a.k,a.E,[2,lo.a],[2,po.a],[2,Ul.i],$i.a],{clearInput:[0,"clearInput"],type:[1,"type"]},null),(n()(),a._27(2,["\n      "]))],function(n,l){n(l,8,0,l.component.materialsOuterBaseUri),n(l,11,0,"","text")},function(n,l){n(l,7,0,a._20(l,10).ngClassUntouched,a._20(l,10).ngClassTouched,a._20(l,10).ngClassPristine,a._20(l,10).ngClassDirty,a._20(l,10).ngClassValid,a._20(l,10).ngClassInvalid,a._20(l,10).ngClassPending)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n      \n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,34,{contentLabel:0}),a._25(603979776,35,{_buttons:1}),a._25(603979776,36,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["color","label"]],null,null,null,null,null)),a._4(16384,[[34,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(n()(),a._27(null,["材料服务内网地址:"])),(n()(),a._27(2,["\n      "]))],function(n,l){n(l,8,0,"label")},null)})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,37,{contentLabel:0}),a._25(603979776,38,{_buttons:1}),a._25(603979776,39,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,4,"ion-input",[["clearInput",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0;return"ngModelChange"===l&&(t=!1!==(n.component.materialsInnerBaseUri=e)&&t),t},vo.b,vo.a)),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(5423104,null,0,bo.a,[Bi.a,Ki.a,ho.a,Fi.a,a.k,a.E,[2,lo.a],[2,po.a],[2,Ul.i],$i.a],{clearInput:[0,"clearInput"],type:[1,"type"]},null),(n()(),a._27(2,["\n      "]))],function(n,l){n(l,8,0,l.component.materialsInnerBaseUri),n(l,11,0,"","text")},function(n,l){n(l,7,0,a._20(l,10).ngClassUntouched,a._20(l,10).ngClassTouched,a._20(l,10).ngClassPristine,a._20(l,10).ngClassDirty,a._20(l,10).ngClassValid,a._20(l,10).ngClassInvalid,a._20(l,10).ngClassPending)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n      \n      "])),(n()(),a._6(0,null,null,17,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,40,{contentLabel:0}),a._25(603979776,41,{_buttons:1}),a._25(603979776,42,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,0,5,"ion-checkbox",[],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==a._20(n,136)._click(e)&&t),"ngModelChange"===l&&(t=!1!==(i.isOuterNet=e)&&t),t},la.b,la.a)),a._4(1228800,null,0,ea.a,[Bi.a,ho.a,[2,po.a],a.k,a.E],null,null),a._24(1024,null,Ul.h,function(n){return[n]},[ea.a]),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[2,Ul.h]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[],null,null,null,null,null)),a._4(16384,[[40,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._27(null,["使用外网"])),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,6,"button",[["class","item item-block"],["ion-item",""],["style","text-align:center; color:#488aff;"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onOk(e)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,43,{contentLabel:0}),a._25(603979776,44,{_buttons:1}),a._25(603979776,45,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["确定"])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,6,"button",[["class","item item-block"],["ion-item",""],["style","text-align:center; color:#488aff;"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onCancel(e)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,46,{contentLabel:0}),a._25(603979776,47,{_buttons:1}),a._25(603979776,48,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["取消"])),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n  "]))],function(n,l){var e=l.component;n(l,5,0,"primary"),n(l,9,0,"primary"),n(l,20,0,"label"),n(l,32,0,e.hotLineOuterBaseUri),n(l,35,0,"","text"),n(l,46,0,"label"),n(l,58,0,e.hotLineInnerBaseUri),n(l,61,0,"","text"),n(l,72,0,"label"),n(l,84,0,e.fileOuterBaseUri),n(l,87,0,"","text"),n(l,98,0,"label"),n(l,110,0,e.fileInnerBaseUri),n(l,113,0,"","text"),n(l,117,0,e.showMaterial),n(l,120,0,e.showMaterial),n(l,123,0,e.showMaterial),n(l,126,0,e.showMaterial),n(l,138,0,e.isOuterNet)},function(n,l){n(l,31,0,a._20(l,34).ngClassUntouched,a._20(l,34).ngClassTouched,a._20(l,34).ngClassPristine,a._20(l,34).ngClassDirty,a._20(l,34).ngClassValid,a._20(l,34).ngClassInvalid,a._20(l,34).ngClassPending),n(l,57,0,a._20(l,60).ngClassUntouched,a._20(l,60).ngClassTouched,a._20(l,60).ngClassPristine,a._20(l,60).ngClassDirty,a._20(l,60).ngClassValid,a._20(l,60).ngClassInvalid,a._20(l,60).ngClassPending),n(l,83,0,a._20(l,86).ngClassUntouched,a._20(l,86).ngClassTouched,a._20(l,86).ngClassPristine,a._20(l,86).ngClassDirty,a._20(l,86).ngClassValid,a._20(l,86).ngClassInvalid,a._20(l,86).ngClassPending),n(l,109,0,a._20(l,112).ngClassUntouched,a._20(l,112).ngClassTouched,a._20(l,112).ngClassPristine,a._20(l,112).ngClassDirty,a._20(l,112).ngClassValid,a._20(l,112).ngClassInvalid,a._20(l,112).ngClassPending),n(l,135,0,a._20(l,136)._disabled,a._20(l,140).ngClassUntouched,a._20(l,140).ngClassTouched,a._20(l,140).ngClassPristine,a._20(l,140).ngClassDirty,a._20(l,140).ngClassValid,a._20(l,140).ngClassInvalid,a._20(l,140).ngClassPending)})},ta)),a._4(114688,null,0,Be,[M,wo.a,Ui.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),oa=a._3({encapsulation:2,styles:[],data:{}}),ua=a._1("page-about",bi,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-about",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Yi.b,Yi.a)),a._4(49152,null,0,Ji.a,[Fi.a,[2,Ui.a],[2,Ri.a],Bi.a,a.k,a.E],null,null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      About\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,2,"ion-content",[["padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n\n"])),(n()(),a._27(null,["\n"]))],null,function(n,l){n(l,3,0,a._20(l,4)._hidden,a._20(l,4)._sbPadding),n(l,12,0,a._20(l,13).statusbarPadding,a._20(l,13)._hasRefresher)})},oa)),a._4(49152,null,0,bi,[Ri.a],null,null)],null,null)},{},{},[]),aa=a._3({encapsulation:2,styles:[],data:{}}),ra=a._1("page-contact",ki,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-contact",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Yi.b,Yi.a)),a._4(49152,null,0,Ji.a,[Fi.a,[2,Ui.a],[2,Ri.a],Bi.a,a.k,a.E],null,null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      Contact\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,25,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,21,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,6,"ion-list-header",[["class","item"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,1,{contentLabel:0}),a._25(603979776,2,{_buttons:1}),a._25(603979776,3,{_icons:1}),a._4(16384,null,0,Ko.a,[Bi.a,a.E,a.k,[8,null]],null,null),(n()(),a._27(2,["Follow us on Twitter"])),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,9,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,4,{contentLabel:0}),a._25(603979776,5,{_buttons:1}),a._25(603979776,6,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n      "])),(n()(),a._6(0,null,0,1,"ion-icon",[["item-start",""],["name","ionic"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[6,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n      @ionicframework\n    "])),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n"])),(n()(),a._27(null,["\n"]))],function(n,l){n(l,34,0,"ionic")},function(n,l){n(l,3,0,a._20(l,4)._hidden,a._20(l,4)._sbPadding),n(l,12,0,a._20(l,13).statusbarPadding,a._20(l,13)._hasRefresher),n(l,33,0,a._20(l,34)._hidden)})},aa)),a._4(49152,null,0,ki,[Ri.a],null,null)],null,null)},{},{},[]),sa=a._3({encapsulation:0,styles:[".selected[_ngcontent-%COMP%] {\n      font-weight: bold;\n    }"],data:{}}),ca=a._1("ng-component",Ve,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"ng-component",[],null,null,null,function(n){return a._29(0,[(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,104,"ion-list",[],null,null,null,null,null)),a._4(16384,null,0,co.a,[Bi.a,a.k,a.E,Ki.a,Hi.l,$i.a],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,6,"ion-list-header",[["class","item"],["color","primary"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],{color:[0,"color"]},null),a._25(335544320,1,{contentLabel:0}),a._25(603979776,2,{_buttons:1}),a._25(603979776,3,{_icons:1}),a._4(16384,null,0,Ko.a,[Bi.a,a.E,a.k,[8,null]],{color:[0,"color"]},null),(n()(),a._27(2,["超期设置(单位:毫秒)"])),(n()(),a._27(null,["\n      \n      "])),(n()(),a._6(0,null,null,10,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,4,{contentLabel:0}),a._25(603979776,5,{_buttons:1}),a._25(603979776,6,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["color","label"]],null,null,null,null,null)),a._4(16384,[[4,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(n()(),a._27(null,["到场超期"])),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,7,{contentLabel:0}),a._25(603979776,8,{_buttons:1}),a._25(603979776,9,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,4,"ion-input",[["clearInput",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0;return"ngModelChange"===l&&(t=!1!==(n.component.arrivedDeadLine=e)&&t),t},vo.b,vo.a)),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(5423104,null,0,bo.a,[Bi.a,Ki.a,ho.a,Fi.a,a.k,a.E,[2,lo.a],[2,po.a],[2,Ul.i],$i.a],{clearInput:[0,"clearInput"],type:[1,"type"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n      \n      "])),(n()(),a._6(0,null,null,10,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,10,{contentLabel:0}),a._25(603979776,11,{_buttons:1}),a._25(603979776,12,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["color","label"]],null,null,null,null,null)),a._4(16384,[[10,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(n()(),a._27(null,["处理超期"])),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,13,{contentLabel:0}),a._25(603979776,14,{_buttons:1}),a._25(603979776,15,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,4,"ion-input",[["clearInput",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0;return"ngModelChange"===l&&(t=!1!==(n.component.replyDeadLine=e)&&t),t},vo.b,vo.a)),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(5423104,null,0,bo.a,[Bi.a,Ki.a,ho.a,Fi.a,a.k,a.E,[2,lo.a],[2,po.a],[2,Ul.i],$i.a],{clearInput:[0,"clearInput"],type:[1,"type"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n      \n      "])),(n()(),a._6(0,null,null,10,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,16,{contentLabel:0}),a._25(603979776,17,{_buttons:1}),a._25(603979776,18,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,1,2,"ion-label",[["color","label"]],null,null,null,null,null)),a._4(16384,[[16,4]],0,ko.a,[Bi.a,a.k,a.E,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(n()(),a._27(null,["检查频率"])),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,19,{contentLabel:0}),a._25(603979776,20,{_buttons:1}),a._25(603979776,21,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n        "])),(n()(),a._6(0,null,3,4,"ion-input",[["clearInput",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0;return"ngModelChange"===l&&(t=!1!==(n.component.checkInterval=e)&&t),t},vo.b,vo.a)),a._4(671744,null,0,Ul.l,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,Ul.i,null,[Ul.l]),a._4(16384,null,0,Ul.j,[Ul.i],null,null),a._4(5423104,null,0,bo.a,[Bi.a,Ki.a,ho.a,Fi.a,a.k,a.E,[2,lo.a],[2,po.a],[2,Ul.i],$i.a],{clearInput:[0,"clearInput"],type:[1,"type"]},null),(n()(),a._27(2,["\n      "])),(n()(),a._27(null,["\n\n      "])),(n()(),a._6(0,null,null,6,"button",[["class","item item-block"],["ion-item",""],["style","text-align:center; color:#488aff;"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onOk(e)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,22,{contentLabel:0}),a._25(603979776,23,{_buttons:1}),a._25(603979776,24,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["确定"])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,6,"button",[["class","item item-block"],["ion-item",""],["style","text-align:center; color:#488aff;"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onCancel(e)&&t),t},_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,25,{contentLabel:0}),a._25(603979776,26,{_buttons:1}),a._25(603979776,27,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["取消"])),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n  "]))],function(n,l){var e=l.component;n(l,5,0,"primary"),n(l,9,0,"primary"),n(l,20,0,"label"),n(l,32,0,e.arrivedDeadLine),n(l,35,0,"","text"),n(l,46,0,"label"),n(l,58,0,e.replyDeadLine),n(l,61,0,"","text"),n(l,72,0,"label"),n(l,84,0,e.checkInterval),n(l,87,0,"","text")},function(n,l){n(l,31,0,a._20(l,34).ngClassUntouched,a._20(l,34).ngClassTouched,a._20(l,34).ngClassPristine,a._20(l,34).ngClassDirty,a._20(l,34).ngClassValid,a._20(l,34).ngClassInvalid,a._20(l,34).ngClassPending),n(l,57,0,a._20(l,60).ngClassUntouched,a._20(l,60).ngClassTouched,a._20(l,60).ngClassPristine,a._20(l,60).ngClassDirty,a._20(l,60).ngClassValid,a._20(l,60).ngClassInvalid,a._20(l,60).ngClassPending),n(l,83,0,a._20(l,86).ngClassUntouched,a._20(l,86).ngClassTouched,a._20(l,86).ngClassPristine,a._20(l,86).ngClassDirty,a._20(l,86).ngClassValid,a._20(l,86).ngClassInvalid,a._20(l,86).ngClassPending)})},sa)),a._4(114688,null,0,Ve,[M,wo.a,Ui.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),da=a._3({encapsulation:2,styles:[],data:{}}),_a=a._1("page-attachment",dl,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-attachment",[],null,null,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,10,"ion-header",[],null,null,null,null,null)),a._4(16384,null,0,Xi.a,[Bi.a,a.k,a.E,[2,Ui.a]],null,null),(n()(),a._27(null,["\n  "])),(n()(),a._6(0,null,null,6,"ion-navbar",[["class","toolbar"],["color","primary"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Yi.b,Yi.a)),a._4(49152,null,0,Ji.a,[Fi.a,[2,Ui.a],[2,Ri.a],Bi.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n    "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,zi.b,zi.a)),a._4(49152,null,0,Zi.a,[Bi.a,a.k,a.E,[2,Qi.a],[2,Ji.a]],null,null),(n()(),a._27(0,["\n      ","\n    "])),(n()(),a._27(3,["\n  "])),(n()(),a._27(null,["\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,97,"ion-content",[["class","page-attachment"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,no.b,no.a)),a._4(4374528,null,0,lo.a,[Bi.a,Ki.a,$i.a,a.k,a.E,Fi.a,eo.a,a.x,[2,Ui.a],[2,Ri.a]],null,null),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,9,"button",[["class","item item-block"],["icon-left",""],["ion-item",""]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,1,{contentLabel:0}),a._25(603979776,2,{_buttons:1}),a._25(603979776,3,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n    "])),(n()(),a._6(0,null,2,1,"ion-icon",[["name","camera"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[3,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n    照片\n  "])),(n()(),a._27(1,["\n\n  "])),(n()(),a._6(0,null,1,15,"ion-grid",[["class","grid"],["style","width: 100%; height: 100px;"]],null,null,null,null,null)),a._4(16384,null,0,No.a,[],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,11,"ion-row",[["class","row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,4,"ion-col",[["class","col-img col"],["col-4",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,0,"img",[["class","picture"]],[[8,"src",4]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPreviewPicture(i.pictures[0])&&t),t},null,null)),(n()(),a._27(null,["\n      "]))],null,function(n,l){n(l,3,0,a._9(1,"",l.component.pictures[0],""))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,4,"ion-col",[["class","col-img col"],["col-4",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,0,"img",[["class","picture"]],[[8,"src",4]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPreviewPicture(i.pictures[1])&&t),t},null,null)),(n()(),a._27(null,["\n      "]))],null,function(n,l){n(l,3,0,a._9(1,"",l.component.pictures[1],""))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,4,"ion-col",[["class","col-img col"],["col-4",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,0,"img",[["class","picture"]],[[8,"src",4]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPreviewPicture(i.pictures[2])&&t),t},null,null)),(n()(),a._27(null,["\n      "]))],null,function(n,l){n(l,3,0,a._9(1,"",l.component.pictures[2],""))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n  "])),(n()(),a._0(16777216,null,1,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,15,"ion-grid",[["class","grid"],["style","width: 100%; height: 100px;"]],null,null,null,null,null)),a._4(16384,null,0,No.a,[],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,11,"ion-row",[["class","row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,4,"ion-col",[["class","col-img col"],["col-4",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,0,"img",[["class","picture"]],[[8,"src",4]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPreviewPicture(i.pictures[3])&&t),t},null,null)),(n()(),a._27(null,["\n      "]))],null,function(n,l){n(l,3,0,a._9(1,"",l.component.pictures[3],""))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,4,"ion-col",[["class","col-img col"],["col-4",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,0,"img",[["class","picture"]],[[8,"src",4]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPreviewPicture(i.pictures[4])&&t),t},null,null)),(n()(),a._27(null,["\n      "]))],null,function(n,l){n(l,3,0,a._9(1,"",l.component.pictures[4],""))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,4,"ion-col",[["class","col-img col"],["col-4",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,0,"img",[["class","picture"]],[[8,"src",4]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPreviewPicture(i.pictures[5])&&t),t},null,null)),(n()(),a._27(null,["\n      "]))],null,function(n,l){n(l,3,0,a._9(1,"",l.component.pictures[5],""))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n  "]))],function(n,l){var e=l.component;n(l,7,0,e.pictures[0]),n(l,10,0,e.pictures[1]),n(l,13,0,e.pictures[2])},null)})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,0,"br",[],null,null,null,null,null)),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,0,"br",[],null,null,null,null,null)),(n()(),a._27(1,["\n\n  "])),(n()(),a._6(0,null,1,9,"button",[["class","item item-block"],["icon-left",""],["ion-item",""]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,4,{contentLabel:0}),a._25(603979776,5,{_buttons:1}),a._25(603979776,6,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n    "])),(n()(),a._6(0,null,2,1,"ion-icon",[["name","microphone"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[6,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n    语音\n  "])),(n()(),a._27(1,["\n\n  "])),(n()(),a._6(0,null,1,11,"ion-grid",[["class","grid"],["style","width: 100%; height: 150px;"]],null,null,null,null,null)),a._4(16384,null,0,No.a,[],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,16,"ion-row",[["class","audio row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,2,"ion-col",[["class","audio-info col"],["col-6",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["",""])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,5,"ion-col",[["class","col"],["col-2",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,1,"ion-icon",[["class","audio-btn"],["name","play"],["role","img"]],[[2,"hide",null]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPlay(i.audios[0])&&t),t},null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,1,"ion-col",[["class","col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n    "]))],function(n,l){n(l,11,0,"play")},function(n,l){n(l,5,0,l.component.audios[0].alias),n(l,10,0,a._20(l,11)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,16,"ion-row",[["class","audio row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,2,"ion-col",[["class","audio-info col"],["col-6",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["",""])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,5,"ion-col",[["class","col"],["col-2",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,1,"ion-icon",[["class","audio-btn"],["name","play"],["role","img"]],[[2,"hide",null]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPlay(i.audios[1])&&t),t},null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,1,"ion-col",[["class","col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n    "]))],function(n,l){n(l,11,0,"play")},function(n,l){n(l,5,0,l.component.audios[1].alias),n(l,10,0,a._20(l,11)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n    "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,16,"ion-row",[["class","audio row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,2,"ion-col",[["class","audio-info col"],["col-6",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["",""])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,5,"ion-col",[["class","col"],["col-2",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,1,"ion-icon",[["class","audio-btn"],["name","play"],["role","img"]],[[2,"hide",null]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPlay(i.audios[2])&&t),t},null,null)),a._4(147456,null,0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(null,["\n      "])),(n()(),a._27(null,["\n      "])),(n()(),a._6(0,null,null,1,"ion-col",[["class","col"]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n    "]))],function(n,l){n(l,11,0,"play")},function(n,l){n(l,5,0,l.component.audios[2].alias),n(l,10,0,a._20(l,11)._hidden)})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n\n  "])),(n()(),a._6(0,null,1,0,"br",[],null,null,null,null,null)),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,0,"br",[],null,null,null,null,null)),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,9,"button",[["class","item item-block"],["icon-left",""],["ion-item",""]],null,null,null,_o.b,_o.a)),a._4(1097728,null,3,po.a,[ho.a,Bi.a,a.k,a.E,[2,mo.a]],null,null),a._25(335544320,7,{contentLabel:0}),a._25(603979776,8,{_buttons:1}),a._25(603979776,9,{_icons:1}),a._4(16384,null,0,fo.a,[],null,null),(n()(),a._27(2,["\n    "])),(n()(),a._6(0,null,2,1,"ion-icon",[["name","videocam"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._4(147456,[[9,4]],0,go.a,[Bi.a,a.k,a.E],{name:[0,"name"]},null),(n()(),a._27(2,["\n    视频\n  "])),(n()(),a._27(1,["\n\n  "])),(n()(),a._6(0,null,1,15,"ion-grid",[["class","grid"],["style","width: 100%; height: 100px;"]],null,null,null,null,null)),a._4(16384,null,0,No.a,[],null,null),(n()(),a._27(null,["\n    "])),(n()(),a._6(0,null,null,11,"ion-row",[["class","row"]],null,null,null,null,null)),a._4(16384,null,0,ro.a,[],null,null),(n()(),a._27(null,["\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,4,"ion-col",[["class","col-video col"],["col-4",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,0,"video",[["class","video"]],[[8,"src",4]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPlayVideo(i.videos[0])&&t),t},null,null)),(n()(),a._27(null,["\n      "]))],null,function(n,l){n(l,3,0,a._9(1,"",l.component.videos[0].url,""))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,4,"ion-col",[["class","col-video col"],["col-4",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,0,"video",[["class","video"]],[[8,"src",4]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPlayVideo(i.videos[1])&&t),t},null,null)),(n()(),a._27(null,["\n      "]))],null,function(n,l){n(l,3,0,a._9(1,"",l.component.videos[1].url,""))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n\n      "])),(n()(),a._0(16777216,null,null,1,null,function(n){return a._29(0,[(n()(),a._6(0,null,null,4,"ion-col",[["class","col-video col"],["col-4",""]],null,null,null,null,null)),a._4(16384,null,0,so.a,[],null,null),(n()(),a._27(null,["\n        "])),(n()(),a._6(0,null,null,0,"video",[["class","video"]],[[8,"src",4]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.onPlayVideo(i.videos[2])&&t),t},null,null)),(n()(),a._27(null,["\n      "]))],null,function(n,l){n(l,3,0,a._9(1,"",l.component.videos[2].url,""))})})),a._4(16384,null,0,yo.j,[a.O,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a._27(null,["\n    "])),(n()(),a._27(null,["\n  "])),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,0,"br",[],null,null,null,null,null)),(n()(),a._27(1,["\n  "])),(n()(),a._6(0,null,1,0,"br",[],null,null,null,null,null)),(n()(),a._27(1,["\n"])),(n()(),a._27(null,["\n"]))],function(n,l){var e=l.component;n(l,4,0,"primary"),n(l,23,0,"camera"),n(l,33,0,e.pictures[0]),n(l,36,0,e.pictures[1]),n(l,39,0,e.pictures[2]),n(l,44,0,e.pictureCount>3),n(l,58,0,"microphone"),n(l,65,0,e.audios[0]),n(l,68,0,e.audios[1]),n(l,71,0,e.audios[2]),n(l,86,0,"videocam"),n(l,96,0,e.videos[0]),n(l,99,0,e.videos[1]),n(l,102,0,e.pictures[2])},function(n,l){var e=l.component;n(l,3,0,a._20(l,4)._hidden,a._20(l,4)._sbPadding),n(l,8,0,e.title),n(l,12,0,a._20(l,13).statusbarPadding,a._20(l,13)._hasRefresher),n(l,22,0,a._20(l,23)._hidden),n(l,57,0,a._20(l,58)._hidden),n(l,85,0,a._20(l,86)._hidden)})},da)),a._4(114688,null,0,dl,[Ri.a,Bn,g,iu.a,Oo.a,cl.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),pa=e(151),ha=e(214),ma=e(86),fa=e(75),ga=e(139),va=e(148),ba=e(213),ya=e(149),ka=e(51),Sa=e(138),Ia=e(150),Ta=a._2(Ii,[Ti.b],function(n){return a._17([a._18(512,a.j,a.Y,[[8,[Ei.a,Ci.a,Oi.a,wi.a,Di.a,Pi.a,ji.a,Ni.a,Mi.a,qi,io,ao,Po,Ao,nu,au,su,hu,bu,ku,Iu,Eu,Ou,xu,Ru,Bu,Hu,Vu,Wu,Zu,na,ia,ua,ra,ca,_a]],[3,a.j],a.v]),a._18(5120,a.t,a._16,[[3,a.t]]),a._18(4608,yo.l,yo.k,[a.t]),a._18(5120,a.b,a._7,[]),a._18(5120,a.r,a._13,[]),a._18(5120,a.s,a._14,[]),a._18(4608,u.c,u.s,[yo.c]),a._18(6144,a.I,null,[u.c]),a._18(4608,u.f,pa.a,[]),a._18(5120,u.d,function(n,l,e,t){return[new u.l(n),new u.p(l),new u.o(e,t)]},[yo.c,yo.c,yo.c,u.f]),a._18(4608,u.e,u.e,[u.d,a.x]),a._18(135680,u.n,u.n,[yo.c]),a._18(4608,u.m,u.m,[u.e,u.n]),a._18(6144,a.G,null,[u.m]),a._18(6144,u.q,null,[u.n]),a._18(4608,a.L,a.L,[a.x]),a._18(4608,u.h,u.h,[yo.c]),a._18(4608,u.j,u.j,[yo.c]),a._18(4608,N.c,N.c,[]),a._18(4608,N.h,N.b,[]),a._18(5120,N.j,N.k,[]),a._18(4608,N.i,N.i,[N.c,N.h,N.j]),a._18(4608,N.g,N.a,[]),a._18(5120,N.e,N.l,[N.i,N.g]),a._18(4608,Ul.q,Ul.q,[]),a._18(4608,Ul.d,Ul.d,[]),a._18(4608,ju.a,ju.a,[Fi.a,Bi.a]),a._18(4608,Oo.a,Oo.a,[Fi.a,Bi.a]),a._18(4608,Zo.a,Zo.a,[]),a._18(4608,ho.a,ho.a,[]),a._18(4608,Pu.a,Pu.a,[Ki.a]),a._18(4608,eo.a,eo.a,[Bi.a,Ki.a,a.x,$i.a]),a._18(4608,oo.a,oo.a,[Fi.a,Bi.a]),a._18(5120,yo.g,ha.b,[yo.r,[2,yo.a],Bi.a]),a._18(4608,yo.f,yo.f,[yo.g]),a._18(5120,ma.b,ma.d,[Fi.a,ma.a]),a._18(5120,Vi.a,Vi.b,[Fi.a,ma.b,yo.f,fa.b,a.j]),a._18(4608,ga.a,ga.a,[Fi.a,Bi.a,Vi.a]),a._18(4608,_u.a,_u.a,[Fi.a,Bi.a]),a._18(4608,ou.a,ou.a,[Fi.a,Bi.a,Vi.a]),a._18(4608,va.a,va.a,[Bi.a,Ki.a,$i.a,Fi.a,Hi.l]),a._18(4608,wo.a,wo.a,[Fi.a,Bi.a]),a._18(4608,Gi.a,Gi.a,[Ki.a,Bi.a]),a._18(5120,Nu.a,Nu.c,[Nu.b]),a._18(4608,d.a,d.a,[]),a._18(4608,c.a,c.a,[]),a._18(4608,S.a,S.a,[]),a._18(4608,I.a,I.a,[]),a._18(4608,T.a,T.a,[]),a._18(4608,E.a,E.a,[]),a._18(4608,C,C,[S.a,I.a,Oo.a,T.a,E.a]),a._18(4608,zt.a,zt.a,[]),a._18(4608,Fe,Fe,[]),a._18(4608,Ut.a,Ut.a,[]),a._18(4608,m,m,[]),a._18(4608,g,g,[wo.a,oo.a,Nu.a,m]),a._18(4608,M,M,[N.e,Nu.a,S.a,g,C]),a._18(4608,ai,ai,[]),a._18(4608,ri,ri,[ai,N.i]),a._18(4608,Rt.a,Rt.a,[]),a._18(4608,q.a,q.a,[]),a._18(4608,X,X,[N.e,M,g,q.a]),a._18(4608,nn,nn,[N.e,M,g,q.a,C]),a._18(4608,an.a,an.a,[]),a._18(4608,rn.a,rn.a,[]),a._18(4608,sn,sn,[an.a,rn.a,g,C]),a._18(4608,hn.a,hn.a,[]),a._18(4608,mn.a,mn.a,[]),a._18(4608,fn.a,fn.a,[]),a._18(4608,gn.a,gn.a,[]),a._18(4608,vn,vn,[N.e,g,sn,hn.a,mn.a,fn.a,C,gn.a]),a._18(4608,Bn,Bn,[X,nn,g,sn,M,vn,Zo.a,C]),a._18(4608,Bt.a,Bt.a,[]),a._18(4608,_.a,_.a,[]),a._18(4608,cl.a,cl.a,[]),a._18(512,yo.b,yo.b,[]),a._18(512,a.l,ba.a,[]),a._18(256,Bi.b,{tabsHideOnSubPages:"true"},[]),a._18(1024,ya.a,ya.b,[]),a._18(1024,Ki.a,Ki.b,[u.b,ya.a,a.x]),a._18(1024,Bi.a,Bi.c,[Bi.b,Ki.a]),a._18(512,$i.a,$i.a,[Ki.a]),a._18(512,ka.a,ka.a,[]),a._18(512,Fi.a,Fi.a,[Bi.a,Ki.a,[2,ka.a]]),a._18(512,Hi.l,Hi.l,[Fi.a]),a._18(256,ma.a,{links:[]},[]),a._18(512,a.h,a.h,[]),a._18(512,Sa.a,Sa.a,[a.h]),a._18(1024,fa.b,fa.c,[Sa.a,a.q]),a._18(1024,a.c,function(n,l,e,t,i,o,a,r,s,c,d,_,p,h){return[u.r(n,l),Ia.a(e),Zo.b(t,i),va.b(o,a,r,s,c),fa.d(d,_,p,h)]},[[2,u.i],[2,a.w],Bi.a,Ki.a,$i.a,Bi.a,Ki.a,$i.a,Fi.a,Hi.l,Bi.a,ma.a,fa.b,a.x]),a._18(512,a.d,a.d,[[2,a.c]]),a._18(131584,a._5,a._5,[a.x,a.Z,a.q,a.l,a.j,a.d]),a._18(2048,a.f,null,[a._5]),a._18(512,a.e,a.e,[a.f]),a._18(512,u.a,u.a,[[3,u.a]]),a._18(512,N.f,N.f,[]),a._18(512,Ul.o,Ul.o,[]),a._18(512,Ul.g,Ul.g,[]),a._18(512,Ul.m,Ul.m,[]),a._18(512,ha.a,ha.a,[]),a._18(512,p.a,p.a,[]),a._18(512,Ii,Ii,[]),a._18(256,Ti.a,Et,[]),a._18(256,yo.a,"/",[]),a._18(256,Nu.b,null,[])])});Object(a.S)(),Object(u.k)().bootstrapModuleFactory(Ta)}},[218]);
>>>>>>> 1e13e93654e3ec237036a58563f59205fdb278d4
